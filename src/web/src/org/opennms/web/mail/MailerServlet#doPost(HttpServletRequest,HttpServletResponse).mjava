    public void doPost( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException {
        String sendto   = request.getParameter("sendto");
        String subject  = request.getParameter("subject");
        String msg      = request.getParameter("msg");
        String username = request.getRemoteUser();

        this.log.debug( "To: " + sendto + ", Subject: " + subject + ", message: " + msg + ", username: " + username );        

        if( sendto == null) {
            throw new MissingParameterException( "sendto", REQUIRED_FIELDS );
        }

        if( subject == null) {
            throw new MissingParameterException( "subject", REQUIRED_FIELDS );
        }

        if( msg == null) {
            throw new MissingParameterException( "msg", REQUIRED_FIELDS );
        }
        
        if( username == null ) {
            username = "";
        }

        String[] cmdArgs = { this.mailProgram , "-s" , subject, sendto };
        Process process = Runtime.getRuntime().exec( cmdArgs );
        
        //send the message to the stdin of the mail command
        PrintWriter stdinWriter = new PrintWriter(process.getOutputStream());
        stdinWriter.print( msg );
        stdinWriter.close();

        //get the stderr to see if the command failed
        BufferedReader err = new BufferedReader(new InputStreamReader(process.getErrorStream()));

        if( err.ready() ) {
            //get the error message
            StringWriter tempErr = new StringWriter();            
            Util.streamToStream(err, tempErr);
            String errorMessage = tempErr.toString();
            
            //log the error message
            this.log.warn("Read from stderr: " + errorMessage);
            
            //send the error message to the client
            response.setContentType( "text/plain" );
            PrintWriter out = response.getWriter();            
            Util.streamToStream( new StringReader(errorMessage), out );
            out.close();            
        }
        else {
            response.sendRedirect(this.redirectSuccess);
        }
    }

