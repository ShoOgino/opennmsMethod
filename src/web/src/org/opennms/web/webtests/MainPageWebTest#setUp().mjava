    protected void setUp() throws Exception {
        MockUtil.println("------------ Begin Test "+getName()+" --------------------------");
        
        MockUtil.setupLogging();
        MockUtil.resetLogLevel();
        
        m_network = new MockNetwork();
        m_network.setCriticalService("ICMP");
        m_network.addNode(1, "Router");
        m_network.addInterface("192.168.1.1");
        m_network.addService("ICMP");
        m_network.addService("SMTP");
        m_network.addInterface("192.168.1.2");
        m_network.addService("ICMP");
        m_network.addService("SMTP");
        m_network.addNode(2, "Server");
        m_network.addInterface("192.168.1.3");
        m_network.addService("ICMP");
        m_network.addService("HTTP");
        m_network.addNode(3, "Firewall");
        m_network.addInterface("192.168.1.4");
        m_network.addService("SMTP");
        m_network.addService("HTTP");
        m_network.addInterface("192.168.1.5");
        m_network.addService("SMTP");
        m_network.addService("HTTP");
        
        m_db = new MockDatabase();
        m_db.populate(m_network);
        
        DatabaseConnectionFactory.setInstance(m_db);
        
        MockEventConfigManager eventdConfigMgr = new MockEventConfigManager(config_xml);
        MockEventIpcManager ipcMgr = new MockEventIpcManager();
        m_eventd = new Eventd();
        m_eventd.setConfigManager(eventdConfigMgr);
        m_eventd.setEventIpcManager(ipcMgr);
        
        m_eventd.init();
        m_eventd.start();
        
        
        
        m_servletRunner = new ServletRunner(new StringBufferInputStream(web_xml), "/opennms");
        // 
        MockUtil.setupLogging();
        
        
        ServletUnitClient sc = m_servletRunner.newClient();
        
        getTestContext().setWebClient(sc);
        getTestContext().setAuthorization("admin","OpenNMS Administrator");
        getTestContext().setBaseUrl("http://localhost:8080/opennms");
        
        
    }

