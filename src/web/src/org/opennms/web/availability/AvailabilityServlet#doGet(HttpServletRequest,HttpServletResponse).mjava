	public void doGet( HttpServletRequest request, HttpServletResponse response ) throws ServletException, IOException {
		String view = request.getParameter( "view" );
		String format = request.getParameter( "format" );
		String category = request.getParameter( "category" );
		String username = request.getRemoteUser();
		ServletConfig config = this.getServletConfig();
        
		
		if( view == null ) {
			throw new MissingParameterException( "view" );            
		}

		if( format == null) {
			throw new MissingParameterException( "format" );
		}

		if( category == null) {
			throw new MissingParameterException( "category" );
		}

		if( username == null ) {
			username = "";
		}

		try 
		{

			// Report to be displayed in HTML format.
			if(format.equals("HTML"))		
			{
				ReportMailer reportMailer = new ReportMailer();
                                SimpleDateFormat fmt = new SimpleDateFormat("yyyyMMdd");
                                String catFileName = category.replace(' ', '-');
                                String filename = ConfigFileConstants.getHome() + "/share/reports/AVAIL-HTML-" + catFileName+ fmt.format(new java.util.Date()) +".html";
				reportMailer.initialise(filename, username, scriptGenerateReport, scriptMailReport, category, "HTML");
				String emailAddr = reportMailer.getEmailAddress();
                                if(emailAddr == null || emailAddr.trim().length() == 0)
                                {
                                        response.sendRedirect(this.redirectNoEmail);
                                        return;
                                }
                                new Thread(reportMailer).start();
                                response.sendRedirect(redirectSuccess);
			}
			// Report to be displayed in PDF format.
			else if(format.equals("PDF"))	
			{
				ReportMailer reportMailer = new ReportMailer();
                                SimpleDateFormat fmt = new SimpleDateFormat("yyyyMMdd");
                                String catFileName = category.replace(' ', '-');
                                String filename = ConfigFileConstants.getHome() + "/share/reports/AVAIL-PDF-" + catFileName + fmt.format(new java.util.Date()) +".pdf";
                                reportMailer.initialise(filename, username, scriptGenerateReport, scriptMailReport, category, "PDF");
                                String emailAddr = reportMailer.getEmailAddress();
                                if(emailAddr == null || emailAddr.trim().length() == 0)
                                {
                                        response.sendRedirect(this.redirectNoEmail);
                                        return;
                                }
                                new Thread(reportMailer).start();
                                response.sendRedirect(redirectSuccess);
			}
			else if(format.equals("SVG"))
			{
				ReportMailer reportMailer = new ReportMailer();
				SimpleDateFormat fmt = new SimpleDateFormat("yyyyMMdd");
				String catFileName = category.replace(' ', '-');
				String filename = ConfigFileConstants.getHome() + "/share/reports/AVAIL-SVG-" + catFileName + fmt.format(new java.util.Date()) +".pdf";
				reportMailer.initialise(filename, username, scriptGenerateReport, scriptMailReport, category, "SVG");
				String emailAddr = reportMailer.getEmailAddress();
				if(emailAddr == null || emailAddr.trim().length() == 0) 
				{
					response.sendRedirect(this.redirectNoEmail);
                                	return;
                        	}
				new Thread(reportMailer).start();
				response.sendRedirect(redirectSuccess);
			}
		}
		catch( Exception e ) {
			throw new ServletException( "AvailabilityServlet: ", e );
		}
	}

