    /**
     * calculate coordinates for all hosts, doing a balanced-tree
     * drawing thingie.  (heavily adapted from nagios code.  in fact,
     * it would be better to say this is based on the algorithms
     * nagios uses than to say it's in any way based on that code...)
     *
     * @param parent the parent node for which you will start to
     * calculate the rest of the tree coordinates
     */

    private void calculateBalancedTreeCoordinates(MapNode parent) {
	int parentWidth = findMaxChildWidth(parent);
	int startDrawingX = parent.getX() - ( (parentWidth-1) / 2 );
	int currentDrawingX = startDrawingX;

	Iterator i = this.nodes.iterator();
	while(i.hasNext()) {
	    MapNode n = (MapNode)i.next();
	    if(isChildNode(parent, n)) {
		int thisWidth = findMaxChildWidth(n);
		n.setX( currentDrawingX + ( (thisWidth-1) / 2) );
		n.setY( parent.getY()+1 );

		currentDrawingX += (thisWidth);
		calculateBalancedTreeCoordinates(n);
	    }
	}
    }

