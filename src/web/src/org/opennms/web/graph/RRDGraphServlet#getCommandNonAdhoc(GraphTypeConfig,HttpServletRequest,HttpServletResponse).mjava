    public String getCommandNonAdhoc(GraphTypeConfig config,
			             HttpServletRequest request,
				     HttpServletResponse response)
		throws ServletException {
        String report = request.getParameter("report");
        String[] rrds = request.getParameterValues("rrd");
	String propertiesFile = request.getParameter("props");
        String start = request.getParameter("start");
        String end = request.getParameter("end");

        if (report == null || rrds == null || start == null || end == null) {
	    return null;
        }

        for (int i = 0; i < rrds.length; i++) {
            if (!RrdFileConstants.isValidRRDName(rrds[i])) {
                log("Illegal RRD filename: " + rrds[i]);
                throw new IllegalArgumentException("Illegal RRD filename: "
						   + rrds[i]);
            }
        }

        return createPrefabCommand(request,
			           config.getReportMap(),
				   config.getCommandPrefix(),
				   config.getWorkDir(), report, rrds,
				   propertiesFile,
				   start, end);
    }

