    public int exec(String[] cmd) throws IOException, InterruptedException {
	Process p = Runtime.getRuntime().exec(cmd);

	p.getOutputStream().close();
	PrintInputStream out = new PrintInputStream(p.getInputStream(), m_out);
	PrintInputStream err = new PrintInputStream(p.getErrorStream(), m_err);

	Thread t1 = new Thread(out);
	Thread t2 = new Thread(err);
	t1.start();
	t2.start();

	int exitVal = p.waitFor();

	t1.join();
	t2.join();

	return exitVal;
    }

