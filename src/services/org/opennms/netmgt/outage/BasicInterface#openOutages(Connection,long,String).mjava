    /**
     * @param dbConn
     * @param eventID
     * @param eventTime
     * @param writer
     * @throws SQLException
     */
    public void openOutages(Connection dbConn, long eventID, String eventTime) throws SQLException {
        // Set the database commit mode
        dbConn.setAutoCommit(false);
    
        // Prepare SQL statement used to get active services for the
        // nodeid/ip
        PreparedStatement activeSvcsStmt = dbConn.prepareStatement(OutageConstants.DB_GET_ACTIVE_SERVICES_FOR_INTERFACE);
    
        Category log = ThreadCategory.getInstance(getClass());
        if (log.isDebugEnabled())
            log.debug("handleInterfaceDown: creating new outage entries...");
    
        activeSvcsStmt.setLong(1, getNodeId());
        activeSvcsStmt.setString(2, getIpAddr());
        ResultSet activeSvcsRS = activeSvcsStmt.executeQuery();
    
        while (activeSvcsRS.next()) {
            BasicService svc = getNetwork().getService(this, activeSvcsRS.getLong(1));
            if (!svc.openOutage(dbConn, eventID, eventTime)) {
                if (log.isDebugEnabled()) log.debug("handleInterfaceDown: " + svc + " already down");
            }
        }
        
        // close result set
        activeSvcsRS.close();
    
        // close statements
        activeSvcsStmt.close();
    }

