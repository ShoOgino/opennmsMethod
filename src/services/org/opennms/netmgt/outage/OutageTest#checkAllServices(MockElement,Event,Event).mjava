    private void checkAllServices(MockElement element, final Event lostService, final Event regainService) {
        class SvcOutageChecker extends MockVisitorAdapter {
            private int svcCount = 0;
            private int outageCount = 0;
            public void visitService(MockService svc) {
                Querier checker = new OutageChecker(svc, lostService, regainService);
                checker.execute(new Integer(svc.getNodeId()), svc.getIpAddr(), new Integer(svc.getId()));
                assertEquals("Expected outage for svc "+svc, 1, checker.getCount());
                outageCount += checker.getCount();
                svcCount++;
            }
            public int getServiceCount() { return svcCount; }
            public int getOutageCount() { return outageCount; }
        };
        SvcOutageChecker svcChecker = new SvcOutageChecker();
        element.visit(svcChecker);
        assertTrue(svcChecker.getServiceCount() > 0);
        assertEquals(svcChecker.getServiceCount(), svcChecker.getOutageCount());
    }

