	public synchronized void init()
	{
		ThreadCategory.setPrefix(LOG4J_CATEGORY);

		Category log = ThreadCategory.getInstance();

		if(log.isDebugEnabled())
			log.debug("start: Creating the xmlrpc event queue processor");
		
                // set up the event queue processor
		m_eventlogQ  = new FifoQueueImpl();

                try
		{
			if(log.isDebugEnabled())
				log.debug("start: Initializing the xmlrpcd config factory");

			XmlrpcdConfigFactory.reload();
                        OpennmsServerConfigFactory.reload();
                        
			XmlrpcdConfigFactory xFactory = XmlrpcdConfigFactory.getInstance();
                        boolean verifyServer = OpennmsServerConfigFactory.getInstance().verifyServer();
                        String localServer = null;

                        if (verifyServer)
                                localServer = OpennmsServerConfigFactory.getInstance().getServerName();
                        
                        Enumeration eventEnum = xFactory.getEventEnumeration();
                        m_eventReceiver = new BroadcastEventProcessor(m_eventlogQ, xFactory.getMaxQueueSize(), eventEnum);
		        
                        m_processor = new EventQueueProcessor( m_eventlogQ, 
                                                               xFactory.getXmlrpcServer(),
                                                               xFactory.getRetries(),
                                                               xFactory.getElapseTime(),
                                                               verifyServer,
                                                               localServer,
                                                               xFactory.getMaxQueueSize());

		}
		catch( MarshalException e )
		{
			log.error("Failed to load configuration", e);
			throw new UndeclaredThrowableException(e);
		}
		catch( ValidationException e )
		{
			log.error("Failed to load configuration", e);
			throw new UndeclaredThrowableException(e);
		}
		catch( IOException e )
		{
			log.error("Failed to load configuration", e);
			throw new UndeclaredThrowableException(e);
		}
                catch ( Throwable t)
                {
                        log.error("Failed to load configuration", t);
                }
	}

