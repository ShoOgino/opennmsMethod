    protected void setUp() throws Exception {
        super.setUp();
        MockUtil.setupLogging();
        
		setupDatabase();
		
        FileReader rdr = new FileReader("etc/database-schema.xml");
        DatabaseSchemaConfigFactory.setInstance(new DatabaseSchemaConfigFactory(rdr));
        rdr.close();
        
        Properties rrdProperties = new Properties();
        rrdProperties.put("org.opennms.rrd.strategyClass", "org.opennms.netmgt.mock.MockRrdStrategy");
        rrdProperties.put("org.opennms.rrd.usequeue", "false");
        RrdConfig.setProperties(rrdProperties);
        
        EventIpcManagerFactory.setIpcManager(new MockEventIpcManager());
		
        String dirName = "/tmp/192.168.1.1";
        String fileName = "icmp.rrd";
        String ipAddress = "192.168.1.1";
        String serviceName = "ICMP";
        String groupName = "icmp-latency";
		
		setupThresholdConfig(dirName, fileName, ipAddress, serviceName, groupName);
        
        FileReader pollOutagesRdr = new FileReader("etc/poll-outages.xml");
        PollOutagesConfigFactory.setInstance(new PollOutagesConfigFactory(pollOutagesRdr));
        pollOutagesRdr.close();
        
    }

