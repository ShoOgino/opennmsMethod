    /**
     * Currently, this implmentation is only called directly from JUnit tests
     * and the overloaded partner method that is called by the poller.
     * @param iface
     * @param requestedVersion
     */
    public void initialize(NetworkInterface iface, int requestedVersion) {
        Category log = ThreadCategory.getInstance(getClass());

        if (iface.getType() != NetworkInterface.TYPE_IPV4)
            throw new RuntimeException("Unsupported interface type, only TYPE_IPV4 currently supported");
        InetAddress inetAddress = (InetAddress) iface.getAddress();

        if (log.isDebugEnabled())
            log.debug("initialize: setting SNMP target attributes for this interface: " + inetAddress.getHostAddress());

        Target target = null;
        if (requestedVersion != -1)
            target = SnmpPeerFactory.getInstance().getTarget(inetAddress, requestedVersion);
        else
            target = SnmpPeerFactory.getInstance().getTarget(inetAddress);
        
        iface.setAttribute(SNMPV3_TARGET_KEY, target);

        log.debug("initialize: interface: " + inetAddress.getHostAddress() + " initialized.");

        return;
    }

