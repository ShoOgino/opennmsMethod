        public long next() {
            assertFalse("Nothing scheduled", m_scheduleEntries.isEmpty());
            
            Long nextTime = (Long)m_scheduleEntries.firstKey();
            List entries = (List)m_scheduleEntries.get(nextTime);
            Runnable runnable = (Runnable)entries.get(0);
            m_currentTime = nextTime.longValue();
            entries.remove(0);
            if (entries.isEmpty())
                m_scheduleEntries.remove(nextTime);
            runnable.run();
            return m_currentTime;
        }

