	/**
	 * <P>Poll the specified address for DHCP service availability</P>
	 *
	 * @param iface		The network interface to test the service on.
	 * @param parameters	The package parameters (timeout, retry, etc...) to be 
	 *  used for this poll.
	 *
	 * @return The availability of the interface and if a transition event
	 * 	should be supressed.
	 *
	 */
	public int poll(NetworkInterface iface, Map parameters) 
	{
		// Get interface address from NetworkInterface
		//
		if (iface.getType() != iface.TYPE_IPV4)
			throw new NetworkInterfaceNotSupportedException("Unsupported interface type, only TYPE_IPV4 currently supported");

		// Process parameters
		//
		Category log = ThreadCategory.getInstance(getClass());

		// Retries
		//
		int retry = getKeyedInteger(parameters, "retry", DEFAULT_RETRY);
		int timeout = getKeyedInteger(parameters, "timeout", DEFAULT_TIMEOUT);

		// Get interface address from NetworkInterface
		//
		InetAddress ipv4Addr = (InetAddress)iface.getAddress();

		if(log.isDebugEnabled())
			log.debug("DhcpMonitor.poll: address: " + ipv4Addr + " timeout: " + timeout + " retry: " + retry);
		
		int serviceStatus = ServiceMonitor.SERVICE_UNAVAILABLE;
			try
			{
				if(Dhcpd.isServer(ipv4Addr, (long)timeout, retry))
					serviceStatus = ServiceMonitor.SERVICE_AVAILABLE;
			}
			catch(IOException ioE)
			{
				ioE.fillInStackTrace();
				log.warn("DhcpMonitor.poll: An I/O exception occured during DHCP discovery", ioE);
		}

		//
		// return the status of the service
		//
		return serviceStatus;
	}

