	protected void setUpTrapHandler(boolean newSuspectOnTrap) {
		MockTrapdConfig mockTrapdConfig = new MockTrapdConfig();
		mockTrapdConfig.setSnmpTrapPort(10000);
		mockTrapdConfig.setNewSuspectOnTrap(newSuspectOnTrap);

		m_trapHandler = new TrapHandler();
		m_trapHandler.setTrapdConfig(mockTrapdConfig);
		m_trapHandler.setEventManager(m_eventMgr);
		m_trapHandler.init();
		m_trapHandler.start();
		
		if (newSuspectOnTrap) {
			Event newSuspectEvent = new Event();
			newSuspectEvent.setInterface("127.0.0.1");
			newSuspectEvent.setNodeid(0);
			newSuspectEvent.setUei("uei.opennms.org/internal/discovery/newSuspect");
			System.out.println("Anticipating: " + new EventWrapper(newSuspectEvent));
			m_anticipator.anticipateEvent(newSuspectEvent);
		}
	}

