	/**
	 * Stops the currently running service. If the service is
	 * not running then the command is silently discarded.
	 */
	public synchronized void stop()
	{
		Category log = ThreadCategory.getInstance(getClass());

		m_status = STOP_PENDING;

		// shutdown and wait on the background processing thread to exit.
		if(log.isDebugEnabled())
			log.debug("exit: closing communication paths.");

		try
		{
			if(log.isDebugEnabled())
				log.debug("stop: Closing SNMP trap session.");

			m_trapSession.close();

			if(log.isDebugEnabled())
				log.debug("stop: SNMP trap session closed.");
		}
		catch(IllegalStateException isE)
		{
			if(log.isDebugEnabled())
				log.debug("stop: The SNMP session was already closed");
		}

		if(log.isDebugEnabled())
				log.debug("stop: Stopping queue processor.");

		// interrupt the processor daemon thread
		m_processor.stop();

		m_status = STOPPED;

		if(log.isDebugEnabled())
				log.debug("stop: Trapd stopped");
	}

