    /**
     * Stops the currently running ping manager. If the manager has never been
     * run then an exception is generated.
     * 
     * @throws java.lang.IllegalStateException
     *             Thrown if the fiber has never been started.
     * 
     */
    public synchronized void stop() {
        // stop the sub processes
        //
        for (int x = 0; x < m_pingers.length; x++) {
            try {
                m_pingers[x].stop();
            } catch (Exception e) {
            }
        }
        try {
            m_icmpReceiver.stop();
        } catch (Exception e) {
        }

        // stop the worker
        //
        if (m_worker == null)
            throw new IllegalStateException("The fiber was never started");

        if (m_worker.isAlive()) {
            if (m_status != STOPPED)
                m_status = STOP_PENDING;

            m_worker.interrupt();
        } else if (m_status != STOPPED)
            m_status = STOPPED;

        m_socket.close();
    }

