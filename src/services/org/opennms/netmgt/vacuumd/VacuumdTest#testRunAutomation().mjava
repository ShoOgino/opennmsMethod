    /**
     * This tests the running of automations directly as if they were scheduled.
     * @throws SQLException
     * @throws InterruptedException 
     */
    public final void testRunAutomation() throws SQLException, InterruptedException {

        final int major = 6;
        
        assertEquals(1, verifyInitialAlarmState());
        assertEquals(major, getSingleResultSeverity());

        /*
         * Send in another alarm for reduction and increased count
         * that so we can verify the escalation automation.
         */
        MockNode node = m_network.getNode(1);
        m_eventd.processEvent(node.createDownEvent());

        AutomationProcessor ap = new AutomationProcessor();
        ap.setAutomation(VacuumdConfigFactory.getInstance().getAutomation("autoEscalate"));
        Thread.sleep(500);
        assertTrue(ap.runAutomation(VacuumdConfigFactory.getInstance().getAutomation("autoEscalate")));        
        assertEquals(major+1, getSingleResultSeverity());

    }

