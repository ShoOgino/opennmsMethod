    protected static Target getTarget(SnmpAgentConfig agentConfig) {
    
        Target target = null;
        
        //TODO: Need to do something better than this.
        if (!agentConfig.isAdapted()) {
            return target;
        }
        
        if (agentConfig.getVersion() == SnmpConstants.version3) {
            target = new UserTarget();
            ((UserTarget)target).setSecurityLevel(agentConfig.getSecurityLevel());
            ((UserTarget)target).setSecurityName(convertSecurityName(agentConfig.getSecurityName()));
        } else {
            target = new CommunityTarget();
            ((CommunityTarget)target).setCommunity(convertCommunity(agentConfig.getReadCommunity()));
        }
    
        target.setVersion((agentConfig.getVersion()));
        target.setRetries(agentConfig.getRetries());
        target.setTimeout(agentConfig.getTimeout());
        target.setAddress(convertAddress(agentConfig.getAddress(), agentConfig.getPort()));
        target.setMaxSizeRequestPDU(agentConfig.getMaxRequestSize());
            
        return target;
    }

