    /**
     * A convenience method for created an SNMP4J SNMP target.  If version 3
     * is requested, then a UserTarget is return, otherwise, a
     * CommunityTarget is returned.
     * @param addr
     * @param def
     * @param requestedSnmpVersion
     * @return
     */
    private void setSnmpAgentConfig(SnmpAgentConfig agentConfig, Definition def, int requestedSnmpVersion) {
        
        int version = determineVersion(def, requestedSnmpVersion);
        
        setCommonAgentConfigAttributes(agentConfig, def, version);
        agentConfig.setSecurityLevel(determineSercurityLevel(def));
        agentConfig.setSecurityName(determineAgentConfigSecurityName(def));
        agentConfig.setReadCommunity(determineAgentConfigCommunity(def));
    }

