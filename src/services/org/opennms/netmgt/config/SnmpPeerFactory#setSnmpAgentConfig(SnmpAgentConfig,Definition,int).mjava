    /**
     * A convenience method for created an SNMP4J SNMP target.  If version 3
     * is requested, then a UserTarget is return, otherwise, a
     * CommunityTarget is returned.
     * @param addr
     * @param def
     * @param requestedSnmpVersion
     * @return
     */
    private void setSnmpAgentConfig(SnmpAgentConfig agentConfig, Definition def, int requestedSnmpVersion) {
        
        int version = determineVersion(def, requestedSnmpVersion);
        
        setCommonAgentConfigAttributes(agentConfig, def, version);
        agentConfig.setSecurityLevel(determineSercurityLevel(def));
        agentConfig.setSecurityName(determineAgentConfigSecurityName(def));
        agentConfig.setAuthProtocol(determineAuthProtocol(def));
        agentConfig.setAuthPassPhrase(determineAuthPassPhrase(def));
        agentConfig.setAuthPrivProtocol(determinePrivProtocol(def));
        agentConfig.setReadCommunity(determineAgentConfigReadCommunity(def));
        agentConfig.setWriteCommunity(determineAgentConfigWriteCommunity(def));
        
        //TODO: need to work on the Proxy flag.  Probalby should add a proxy host field
        //to the SnmpAgentConfig.
        
    }

