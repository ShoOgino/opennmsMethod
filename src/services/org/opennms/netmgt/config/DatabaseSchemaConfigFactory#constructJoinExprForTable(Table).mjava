    /**
     * Construct a joining expression necessary to join the given table to the
     * primary table.
     * 
     * @param t
     *            the table to create the expression for
     * @return a string representing the joining expression or "" if no
     *         expression is found
     */
    public String constructJoinExprForTable(Table t) {
        StringBuffer buf = new StringBuffer();

        // change this to use getPrimaryJoinsForTable
        Join[] joins = getPrimaryJoinsForTable(t);
        for (int i = 0; i < joins.length; i++) {
            Join j = joins[i];
            if (i != 0)
                buf.append(" AND ");
            buf.append(i == 0 ? t.getName() : joins[i - 1].getTable()).append(
                    '.').append(j.getColumn());
            buf.append(" = ");
            buf.append(j.getTable()).append('.').append(j.getTableColumn());
        }
        return buf.toString();
    }

