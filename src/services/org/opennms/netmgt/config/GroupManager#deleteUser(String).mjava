    /**
     * Removes the user from the list of groups. Then overwrites to the
     * "groups.xml"
     */
    public synchronized void deleteUser(String name) throws Exception {
        // Check if the user exists
        if (name != null || !name.equals("")) {
            // Remove the user in the group.
            Set grps = (Set) m_groups.keySet();
            Iterator iterator = (Iterator) grps.iterator();
            while (iterator.hasNext()) {
                Group group;
                group = (Group) m_groups.get((String) iterator.next());
                group.removeUser(name);
            }
            
            Iterator it = m_roles.values().iterator();
            while(it.hasNext()) {
                Role role = (Role)it.next();
                Iterator j = role.getScheduleCollection().iterator();
                while(j.hasNext()) {
                    Schedule sched = (Schedule)j.next();
                    if (name.equals(sched.getName())) {
                        j.remove();
                    }
                }
            }
        } else {
            throw new Exception("GroupFactory:delete Invalid user name:" + name);
        }
        
        
        // Saves into "groups.xml" file
        saveGroups();
    }

