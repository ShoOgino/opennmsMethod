    /**
     * When this method is called users name is changed, so also is the username
     * belonging to the group and the view. Also overwrites the "users.xml" file
     */
    public synchronized void renameUser(String oldName, String newName) throws Exception {
        // Get the old data
        if (oldName == null || newName == null || oldName == "" || newName == "") {
            throw new Exception("Group Factory: Rename user.. no value ");
        } else {

            Collection coll = (Collection) m_views.values();
            Iterator iter = (Iterator) coll.iterator();
            Map map = new HashMap();

            while (iter.hasNext()) {
                View view = (View) iter.next();
                Membership membership = view.getMembership();
                if (membership != null) {
                    Collection memberColl = membership.getMemberCollection();
                    if (memberColl != null) {
                        Iterator iterMember = (Iterator) memberColl.iterator();
                        while (iterMember != null && iterMember.hasNext()) {
                            Member member = (Member) iterMember.next();
                            if (member.getType().equals("user")) {
                                String name = member.getContent();
                                if (name.equals(oldName)) {
                                    member.setContent(newName);
                                }
                            }
                        }
                    }
                }
                view.setMembership(membership);
                map.put(view.getName(), view);
            }
            m_views.clear();
            Views views = new Views();
            views.setViewCollection((Collection) map.values());
            saveViews(views);
        }
    }

