        /**
         *
         */
        public synchronized void saveCurrent()
                throws MarshalException, IOException, ValidationException
        {
		File cfgFile = ConfigFileConstants.getFile(ConfigFileConstants.EVENT_CONF_FILE_NAME);
		
		Events newEvents = new Events();
		newEvents.setEventCollection(m_events);
		newEvents.setGlobal(m_global);
                
                //marshall to a string first, then write the string to the file. This way the original config
                //isn't lost if the xml from the marshall is hosed.
                StringWriter stringWriter = new StringWriter();
		Marshaller.marshal(newEvents, stringWriter);
                if (stringWriter.toString()!=null)
                {
                        FileWriter fileWriter = new FileWriter(cfgFile);
                        fileWriter.write(stringWriter.toString());
                        fileWriter.flush();
                        fileWriter.close();
                }
                
                reload();
        }

