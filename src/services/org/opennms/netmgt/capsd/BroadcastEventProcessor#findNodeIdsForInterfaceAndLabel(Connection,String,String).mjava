    /**
     * FIXME: finish the doc here
     * 
     * @param dbConn
     * @param nodeLabel
     * @param ipAddr
     * @return @throws
     *         SQLException
     */
    private long[] findNodeIdsForInterfaceAndLabel(Connection dbConn, String nodeLabel, String ipAddr) throws SQLException {
        PreparedStatement stmt = null;
        try {
            stmt = dbConn
                    .prepareStatement("SELECT node.nodeid FROM node, ipinterface WHERE node.nodeid = ipinterface.nodeid AND node.nodelabel = ? AND ipinterface.ipaddr = ? AND isManaged !='D' AND nodeType !='D'");
            stmt.setString(1, nodeLabel);
            stmt.setString(2, ipAddr);

            ResultSet rs = stmt.executeQuery();
            List nodeIdList = new LinkedList();
            while (rs.next()) {
                nodeIdList.add(new Long(rs.getLong(1)));
            }

            long[] nodeIds = new long[nodeIdList.size()];
            int i = 0;
            for (Iterator it = nodeIdList.iterator(); it.hasNext(); i++) {
                Long nodeId = (Long) it.next();
                nodeIds[i] = nodeId.longValue();
            }
            return nodeIds;
        } finally {
            if (stmt != null) try {
                stmt.close();
            } catch (SQLException e) {
            }
        }
    }

