    /**
     * FIXME: finish the doc here
     * 
     * @param dbConn
     * @param ipaddr
     * @param serviceName
     * @return
     * @throws SQLException
     */
    private int[] findNodeIdForServiceAndInterface(Connection dbConn, String ipaddr, String serviceName) throws SQLException {
        int[] nodeIds;
        Category log = ThreadCategory.getInstance(getClass());
        PreparedStatement stmt = null;
        // Verify if the specified service already exist.
        stmt = dbConn.prepareStatement(SQL_QUERY_SERVICE_EXIST);

        stmt.setString(1, ipaddr);
        stmt.setString(2, serviceName);

        ResultSet rs = stmt.executeQuery();
        List nodeIdList = new LinkedList();
        while (rs.next()) {
            if (log.isDebugEnabled()) {
                log.debug("changeService: service " + serviceName + " on IPAddress " + ipaddr + " already exists in the database.");
            }
            int nodeId = rs.getInt(1);
            nodeIdList.add(new Integer(nodeId));
        }
        rs.close();
        stmt.close();
        nodeIds = new int[nodeIdList.size()];
        int i = 0;
        for (Iterator it = nodeIdList.iterator(); it.hasNext(); i++) {
            Integer n = (Integer) it.next();
            nodeIds[i] = n.intValue();
        }
        return nodeIds;
    }

