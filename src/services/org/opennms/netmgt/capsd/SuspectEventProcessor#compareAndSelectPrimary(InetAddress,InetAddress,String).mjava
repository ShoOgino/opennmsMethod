    /**
     * Utility method which compares two InetAddress objects based on the
     * provided method (MIN/MAX) and returns the InetAddress which is to be
     * considered the primary interface.
     * 
     * NOTE: In order for an interface to be considered primary it must be
     * managed. This method will return null if the 'oldPrimary' address is null
     * and the 'currentIf' address is unmanaged.
     * 
     * @param currentIf
     *            Interface with which to compare the 'oldPrimary' address.
     * @param oldPrimary
     *            Primary interface to be compared against the 'currentIf'
     *            address.
     * @param method
     *            Comparison method to be used (either "min" or "max")
     * 
     * @return InetAddress object of the primary interface based on the provided
     *         method or null if neither address is eligible to be primary.
     */
    static InetAddress compareAndSelectPrimary(InetAddress currentIf, InetAddress oldPrimary, String method) {
        InetAddress newPrimary = null;
        if (oldPrimary == null) {
            if (!CapsdConfigFactory.getInstance().isAddressUnmanaged(currentIf))
                return currentIf;
            else
                return oldPrimary;
        }

        long current = IPSorter.convertToLong(currentIf.getAddress());
        long primary = IPSorter.convertToLong(oldPrimary.getAddress());

        if (method.equals(SELECT_METHOD_MIN)) {
            // Smallest address wins
            if (current < primary) {
                // Replace the primary interface with the current
                // interface only if the current interface is managed!
                if (!CapsdConfigFactory.getInstance().isAddressUnmanaged(currentIf))
                    newPrimary = currentIf;
            }
        } else {
            // Largest address wins
            if (current > primary) {
                // Replace the primary interface with the current
                // interface only if the current interface is managed!
                if (!CapsdConfigFactory.getInstance().isAddressUnmanaged(currentIf))
                    newPrimary = currentIf;
            }
        }

        if (newPrimary != null)
            return newPrimary;
        else
            return oldPrimary;
    }

