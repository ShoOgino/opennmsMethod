	/**
	 * Inserts the new interface into the ipInterface table
	 * of the OpenNMS databasee.
	 *
	 * @param c	The connection to the database.
	 *
	 * @throws java.sql.SQLException Thrown if an error occurs
	 * 	with the connection
	 */
	private void insert(Connection c)
		throws SQLException
	{
		if(m_fromDb)
			throw new IllegalStateException("The record already exists in the database");

		Category log = ThreadCategory.getInstance(getClass());

		// first extract the next node identifier
		//
		StringBuffer names = new StringBuffer("INSERT INTO ifServices (nodeID,ipAddr,serviceID");
		StringBuffer values= new StringBuffer("?,?,?");

		if((m_changed & CHANGED_IFINDEX) == CHANGED_IFINDEX)
		{
			values.append(",?");
			names.append(",ifIndex");
		}

		if((m_changed & CHANGED_STATUS) == CHANGED_STATUS)
		{
			values.append(",?");
			names.append(",status");
		}

		if((m_changed & CHANGED_LASTGOOD) == CHANGED_LASTGOOD)
		{
			values.append(",?");
			names.append(",lastGood");
		}

		if((m_changed & CHANGED_LASTFAIL) == CHANGED_LASTFAIL)
		{
			values.append(",?");
			names.append(",lastFail");
		}

		if((m_changed & CHANGED_SOURCE) == CHANGED_SOURCE)
		{
			values.append(",?");
			names.append(",source");
		}

		if((m_changed & CHANGED_NOTIFY) == CHANGED_NOTIFY)
		{
			values.append(",?");
			names.append(",notify");
		}

		if((m_changed & CHANGED_QUALIFIER) == CHANGED_QUALIFIER)
		{
			values.append(",?");
			names.append(",qualifier");
		}

		names.append(") VALUES (").append(values).append(')');

		if (log.isDebugEnabled())
			log.debug("DbIfServiceEntry.insert: SQL insert statment = " + names.toString());

		// create the Prepared statment and then
		// start setting the result values
		//
		PreparedStatement stmt = c.prepareStatement(names.toString());
		names = null;

		int ndx = 1;
		stmt.setInt(ndx++, m_nodeId);
		stmt.setString(ndx++, m_ipAddr.getHostAddress());
		stmt.setInt(ndx++, m_serviceId);

		if((m_changed & CHANGED_IFINDEX) == CHANGED_IFINDEX)
			stmt.setInt(ndx++, m_ifIndex);

		if((m_changed & CHANGED_STATUS) == CHANGED_STATUS)
			stmt.setString(ndx++, new String(new char[] { m_status }));

		if((m_changed & CHANGED_LASTGOOD) == CHANGED_LASTGOOD)
		{
			stmt.setTimestamp(ndx++, m_lastGood);
		}

		if((m_changed & CHANGED_LASTFAIL) == CHANGED_LASTFAIL)
		{
			stmt.setTimestamp(ndx++, m_lastFail);
		}

		if((m_changed & CHANGED_SOURCE) == CHANGED_SOURCE)
			stmt.setString(ndx++, new String(new char[] { m_source }));

		if((m_changed & CHANGED_NOTIFY) == CHANGED_NOTIFY)
			stmt.setString(ndx++, new String(new char[] { m_notify }));

		if((m_changed & CHANGED_QUALIFIER) == CHANGED_QUALIFIER)
			stmt.setString(ndx++, m_qualifier);

		// Run the insert
		//
		int rc = stmt.executeUpdate();
		log.debug("insert(): SQL update result = " + rc);
		stmt.close();

		// clear the mask and mark as backed
		// by the database
		//
		m_fromDb = true;
		m_changed = 0;
	}

