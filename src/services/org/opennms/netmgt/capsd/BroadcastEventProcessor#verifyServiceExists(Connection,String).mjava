    /**
     * FIXME: finish the doc here
     * 
     * @param dbConn
     * @param serviceName
     * @return @throws
     *         SQLException
     * @throws FailedOperationException
     */
    private int verifyServiceExists(Connection dbConn, String serviceName) throws SQLException, FailedOperationException {
        PreparedStatement stmt = null;
        ResultSet rs = null;
        try {
            Category log = ThreadCategory.getInstance(getClass());

            // Retrieve the serviceId
            stmt = dbConn.prepareStatement(SQL_RETRIEVE_SERVICE_ID);

            stmt.setString(1, serviceName);

            rs = stmt.executeQuery();
            int serviceId = -1;
            while (rs.next()) {
                if (log.isDebugEnabled()) log.debug("verifyServiceExists: retrieve serviceid for service " + serviceName);
                serviceId = rs.getInt(1);
            }

            if (serviceId < 0) {
                if (log.isDebugEnabled())
                        log.debug("verifyServiceExists: the specified service: " + serviceName + " does not exist in the database.");
                throw new FailedOperationException("Invalid service: " + serviceName);
            }

            return serviceId;
        } finally {
            try {
                if (rs != null) rs.close();
                if (stmt != null) stmt.close();
            } catch (SQLException e) {

            }
        }
    }

