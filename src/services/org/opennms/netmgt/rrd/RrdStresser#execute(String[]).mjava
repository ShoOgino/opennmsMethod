    public void execute(String[] args) throws Exception {
        
        double millisPerUpdate = ((double)UPDATE_TIME*1000) / ((double)(MAX_UPDATES));

        while (moreUpdates()) {
            int fileNum = nextFileNum();
            Object rrd = rrdOpenFile(getFileName(fileNum));

            for (int i = 0; i < UPDATES_PER_OPEN; i++) {
                Date now = new Date();
                long elapsedTime = now.getTime() - updateStart.getTime();
                long expectedTime = (long)(millisPerUpdate * (double)updateCount);
                if (expectedTime > elapsedTime) {
                    try { Thread.sleep(expectedTime-elapsedTime); } catch (InterruptedException e) {}
                }
                
                String line = getNextLine(fileNum);
                try {
                    rrdUpdateFile(rrd, line);
                    countUpdate();
                } catch (Exception e) {
                    print("RRD ERROR: " + line + " : " + e.getMessage());
                }
            }

            rrdCloseFile(rrd);
        }

    }

