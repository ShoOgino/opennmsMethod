    /**
     * Ensures that the initialize method has been called.
     * 
     * @param methodName
     *            the name of the method we are called from
     * @throws IllegalState
     *             exception of intialize has not been called.
     */
    private void checkState(String methodName) {
        if (!initialized)
            throw new IllegalStateException("the " + methodName + " method cannot be called before initialize");
    }

