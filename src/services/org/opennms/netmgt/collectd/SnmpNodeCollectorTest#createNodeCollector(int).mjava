    private SnmpNodeCollector createNodeCollector(int maxVarsPerPdu) throws Exception, InterruptedException {
        initializeAgent();
        
        SnmpNodeCollector collector = new SnmpNodeCollector(InetAddress.getLocalHost(), getCollectionSet().getAttributeList(), getCollectionSet());

        createWalker(collector);
        waitForSignal();
        assertNotNull(collector.getEntry());
        assertFalse(collector.timedOut());
        assertFalse(collector.failed());
        return collector;
    }

