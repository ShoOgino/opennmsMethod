    private SnmpSession getSession(SnmpPeer peer) throws CollectionError {
        SnmpSession session = null;
        try {
            session = new SnmpSession(peer);
        } catch (SocketException e) {
            if (session != null) {
                try {
                    session.close();
                } catch (Exception ex) {
                    log().info("collect: an error occured closing the SNMP session", ex);
                }
            }
            throw new CollectionError("collect: Error creating the SnmpSession to collect from " + peer.getPeer().getHostAddress(), e);
        }
        return session;
    }

