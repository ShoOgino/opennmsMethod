    void saveAttributes(final ServiceParameters params) {
        final RrdRepository repository = new RrdRepository(params.getCollectionName());
        visit(new ResourceVisitor() {
    
            public void visitResource(CollectionResource resource) {
                if (resource.shouldPersist(params)) {
                    // FIXME: make sure we don't store attributes that don't make the ifType
                    resource.storeAttributes(repository);
                }
            }
    
        });
    }

