    private static int[] cloneIds(int[] ids, int lengthToClone) {
        if (ids == null) return null;
        int len = Math.min(lengthToClone, ids.length);
        int[] newIds = new int[len];
        System.arraycopy(ids, 0, newIds, 0, len);
        return newIds;
    }

