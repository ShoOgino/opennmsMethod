    /**
     * Creates the categories map. Reads the categories from the categories.xml
     * and creates the 'RTCCategory's map
     */
    private void createCategoriesMap() {
        org.apache.log4j.Category log = ThreadCategory.getInstance(DataManager.class);

        CatFactory cFactory = null;
        try {
            CategoryFactory.reload();
            cFactory = CategoryFactory.getInstance();

        } catch (IOException ex) {
            log.error("Failed to load categories information", ex);
            throw new UndeclaredThrowableException(ex);
        } catch (MarshalException ex) {
            log.error("Failed to load categories information", ex);
            throw new UndeclaredThrowableException(ex);
        } catch (ValidationException ex) {
            log.error("Failed to load categories information", ex);
            throw new UndeclaredThrowableException(ex);
        }

        m_categories = new HashMap();

        Enumeration enumCG = cFactory.getConfig().enumerateCategorygroup();
        while (enumCG.hasMoreElements()) {
            Categorygroup cg = (Categorygroup) enumCG.nextElement();

            String commonRule = cg.getCommon().getRule();

            Categories cats = cg.getCategories();

            Enumeration enumCat = cats.enumerateCategory();
            while (enumCat.hasMoreElements()) {
                org.opennms.netmgt.config.categories.Category cat = (org.opennms.netmgt.config.categories.Category) enumCat.nextElement();

                RTCCategory rtcCat = new RTCCategory(cat, commonRule);
                m_categories.put(rtcCat.getLabel(), rtcCat);
            }
        }
    }

