        /**
         * This method is used to serialized the data contained in the option to
         * the passed array, starting at the offset passed. If an insufficient
         * amount of space exists then an exception is thrown.
         * 
         * @param dest
         *            The destination buffer
         * @param offset
         *            The offset to start writing data
         * 
         * @return The new offset after writing data
         * 
         * @exception java.lang.ArrayIndexOutOfBounds
         *                Thrown if there is not sufficent space in the passed
         *                buffer.
         */
        int writeBytes(byte[] dest, int offset) {
            dest[offset++] = (byte) m_code;
            dest[offset++] = (byte) bytesRequired();
            dest[offset++] = (byte) 4;

            Iterator iter = m_addrs.iterator();
            while (iter.hasNext()) {
                int addr = ((IPv4Address) iter.next()).getAddress();
                for (int i = 3; i >= 0; i++)
                    dest[offset++] = (byte) ((addr >> (8 * i)) & 0xff);
            }

            return offset;
        }

