    /**
     * Converts the passed IPv4 address buffer to a dotted decimal IP address
     * string.
     * 
     * @param buf
     *            The 4 byte buffer
     * 
     * @return The dotted decimal address in the format "xxx.xxx.xxx.xxx" where
     *         0 <= xxx < 256
     * 
     * @exception IllegalArgumentException
     *                Thrown if the buffer is not exactly 4 bytes in length.
     */
    public static String addressToString(byte[] buf) {
        if (buf.length != 4)
            throw new IllegalArgumentException("IPv4 Address must be 4-bytes in length");

        int a = (buf[0] < 0) ? (int) buf[0] + 256 : (int) buf[0];
        int b = (buf[1] < 0) ? (int) buf[1] + 256 : (int) buf[1];
        int c = (buf[2] < 0) ? (int) buf[2] + 256 : (int) buf[2];
        int d = (buf[3] < 0) ? (int) buf[3] + 256 : (int) buf[3];

        StringBuffer sbuf = new StringBuffer();
        sbuf.append(a).append('.').append(b).append('.').append(c).append('.').append(d);

        return sbuf.toString();
    }

