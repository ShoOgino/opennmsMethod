    /**
     * Creates the props.
     *
     * @param useJmProps a boolean representing the handling of the deprecated javamail-configuration.properties file.
     * @return the properties
     * @throws IOException Signals that an I/O exception has occurred.
     */
    private Properties createProps(boolean useJmProps) throws IOException {

        Properties props = generatePropsFromConfig(m_config.getJavamailPropertyCollection());
        configureProperties(props, useJmProps);

        //get rid of this
        return Session.getDefaultInstance(new Properties()).getProperties();
    }

