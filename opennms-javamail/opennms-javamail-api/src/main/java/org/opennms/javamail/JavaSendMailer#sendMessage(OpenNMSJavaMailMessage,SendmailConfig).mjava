    private static void sendMessage(OpenNMSJavaMailMessage msg, SendmailConfig config) throws JavaMailerException {
        try {
            Transport t = msg.getSession().getTransport(config.getSendmailProtocol().getTransport());
            t.connect();
            t.sendMessage(msg, msg.getAllRecipients());
            t.close();
        } catch (NoSuchProviderException e) {
            throw new JavaMailerException("Could not find transport for specified protocol:"+config.getSendmailProtocol().getTransport(), e);
        } catch (MessagingException e) {
            throw new JavaMailerException("Could not connect to transport host via protocol:"+config.getSendmailProtocol().getTransport(), e);
        }
    }

