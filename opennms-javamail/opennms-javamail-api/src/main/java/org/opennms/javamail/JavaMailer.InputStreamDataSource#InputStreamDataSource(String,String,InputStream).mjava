        InputStreamDataSource(String name, String contentType, InputStream inputStream) throws JavaMailerException {  
            this.name = name;  
            this.contentType = contentType;
            
            LOG.debug("setting contentType {}", this.contentType);
              
            baos = new ByteArrayOutputStream();  
              
            int read;  
            byte[] buff = new byte[256];  
            try {
                while((read = inputStream.read(buff)) != -1) {  
                    baos.write(buff, 0, read);  
                }
            } catch (IOException e) {
                LOG.error("Could not read attachment from input stream: {}", e, e);
                throw new JavaMailerException("Could not read attachment from input stream: " + e, e);
            }  
        }  

