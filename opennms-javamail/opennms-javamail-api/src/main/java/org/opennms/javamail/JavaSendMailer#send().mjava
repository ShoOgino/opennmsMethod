    /**
     * Send.
     *
     * @throws JavaMailerException the java mailer exception
     */
    public void send() throws JavaMailerException {
        if (!m_config.getSendmailProtocol().isPresent() || !m_config.getSendmailMessage().isPresent()) {
            throw new JavaMailerException("sendmail-protocol or sendmail-message are not configured!");
        }
        try {
            final SendmailProtocol sendmailProtocol = m_config.getSendmailProtocol().get();
            final String body = m_config.getSendmailMessage().get().getBody();
            if ("text/plain".equals(sendmailProtocol.getMessageContentType().toLowerCase())) {
                m_message.setText(body);
            } else {
                m_message.setContent(body, sendmailProtocol.getMessageContentType());
            }
        } catch (final MessagingException e) {
            LOG.error("Java Mailer messaging exception: {}", e, e);
            throw new JavaMailerException("Java Mailer messaging exception: " + e, e);
        }
        send(m_message);
    }

