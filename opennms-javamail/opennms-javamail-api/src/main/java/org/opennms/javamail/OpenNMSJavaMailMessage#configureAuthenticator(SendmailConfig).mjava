    public static Authenticator configureAuthenticator(final SendmailConfig config) {
        Authenticator auth;
        if (config.isUseAuthentication()) {
            auth = new Authenticator() {
                
                @Override
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication(config.getUserAuth().getUserName(), config.getUserAuth().getPassword());
                }
            };
        } else {
            auth = null;
        }
        return auth;
    }

