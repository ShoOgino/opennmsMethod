    private JavaSendMailer createSendMailer() throws JavaMailerException {

        SendmailConfig config = new SendmailConfig();

        config.setAttemptInterval(1000l);
        config.setDebug(true);
        config.setName("test");

        SendmailMessage sendmailMessage = new SendmailMessage();
        sendmailMessage.setBody("some body");
        sendmailMessage.setFrom("from.me@somewhere.com");
        sendmailMessage.setSubject("some message");
        sendmailMessage.setTo("recipient@foo.bar.com");
        config.setSendmailMessage(sendmailMessage);

        SendmailHost host = new SendmailHost();
        host.setHost("smtp.foo.bar.com");
        host.setPort(465);
        config.setSendmailHost(host);

        SendmailProtocol protocol = new SendmailProtocol();
        protocol.setSslEnable(true);
        protocol.setTransport("smtps");
        config.setSendmailProtocol(protocol);

        config.setUseAuthentication(true);
        config.setUseJmta(false);
        UserAuth auth = new UserAuth();
        auth.setUserName("foo");
        auth.setPassword("bar");
        config.setUserAuth(auth);

        return new JavaSendMailer(config);
    }

