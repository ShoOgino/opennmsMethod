    private static void createState(boolean[] on, SimulatedService[] service)
    {
        if (!(on.length == service.length))
            throw new IllegalArgumentException("Number of on/off positions and number of services do not match.");

        for (int i = 0; i < on.length; i++)
        {
            if (on[i]) {
                if (service[i].isDown())
                {
                    log.debug("outagesim: Starting service " + service[i].getName());
                    service[i].start();
                }
            } else {
                if (service[i].isUp())
                {
                    log.debug("outagesim: Stopping service " + service[i].getName());
                    service[i].stop();
                }
            }
        }
    }

