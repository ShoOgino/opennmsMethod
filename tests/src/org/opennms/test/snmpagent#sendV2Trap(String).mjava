    /**
     * Sends a formatted message as SNMP V2 trap.
     *
     * @param message the formatted text to send
     * @exception Exception if an error occurs during the sending of the trap
     */
    public void sendV2Trap(String message) {

        try {
            // Set SNMP version as V2
            SnmpPeer peer = m_session.getPeer();
            SnmpParameters parameters = peer.getParameters();
            parameters.setVersion(SnmpSMI.SNMPV2);

            // Create trap
            SnmpPduRequest trapPdu = new SnmpPduRequest(SnmpPduPacket.V2TRAP);
            trapPdu.addVarBind(new SnmpVarBind(new SnmpObjectId(m_trapOid),
                    new SnmpOctetString(message.getBytes())));
					
            // Send trap
            m_session.send(trapPdu);

        } catch (Exception e) {
            System.out.println("SNMP send error");
        }
    }

