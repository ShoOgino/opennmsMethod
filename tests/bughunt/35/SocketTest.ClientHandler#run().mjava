		public void run()
		{
			DataOutputStream dos = null;
			try
			{
				BufferedOutputStream bos = new BufferedOutputStream(m_connection.getOutputStream());
				dos = new DataOutputStream(bos);
			}
			catch(IOException ex)
			{
				if(m_connection != null)
				{
					try { m_connection.close(); } catch(Throwable t) { }
				}
				throw new UndeclaredThrowableException(ex);
			}
			
			int written = 0;
			byte[] sendBuf = new byte[2048];
			Random generator = new Random();
			
			for (;;)
			{
				// Allocate output buffer storage

				// Send the buffer
				int len = -1;
				try
				{
					// Randomly generate number between 1 and 2048
					// using (random_number mod 2048)
					len = generator.nextInt(2048);
					if (len == 0)
						len = 2048;
					//System.out.println(this.getName() + ": calculated bytes to send: " + len);
					
					// first send length of data 
					dos.writeInt(len);
					dos.flush();
					
					
					// now send the data
					dos.write(sendBuf, 0, len);
					dos.flush();
				}
				catch(IOException ex)
				{
					if(m_connection != null)
					{
						try { m_connection.close(); } catch(Throwable t) { }
					}
					throw new UndeclaredThrowableException(ex);
				}
				
				// Increment count
				written++;
				
				//System.out.println(this.getName() + ": successfully sent " + len + " bytes for buffer number: " + written);
				
				try
				{
					sleep(1);
				}
				catch (InterruptedException ie)
				{
					throw new UndeclaredThrowableException(ie);
				}
			}
		}

