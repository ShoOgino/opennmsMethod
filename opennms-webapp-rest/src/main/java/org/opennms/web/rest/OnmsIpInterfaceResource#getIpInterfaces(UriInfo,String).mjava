    /**
     * <p>getIpInterfaces</p>
     *
     * @param nodeCriteria a {@link java.lang.String} object.
     * @return a {@link org.opennms.netmgt.model.OnmsIpInterfaceList} object.
     */
    @GET
    @Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public OnmsIpInterfaceList getIpInterfaces(@Context UriInfo uriInfo, @PathParam("nodeCriteria") final String nodeCriteria) {
        readLock();
        
        try {
            LOG.debug("getIpInterfaces: reading interfaces for node {}", nodeCriteria);
    
            final OnmsNode node = m_nodeDao.get(nodeCriteria);
            
            final MultivaluedMap<String,String> params = uriInfo.getQueryParameters();
            
            final CriteriaBuilder builder = new CriteriaBuilder(OnmsIpInterface.class);
            builder.alias("monitoredServices.serviceType", "serviceType", JoinType.LEFT_JOIN);
            builder.ne("isManaged", "D");
            builder.limit(20);
            applyQueryFilters(params, builder);
            builder.alias("node", "node");
            builder.eq("node.id", node.getId());
            
            final OnmsIpInterfaceList interfaceList = new OnmsIpInterfaceList(m_ipInterfaceDao.findMatching(builder.toCriteria()));
    
            interfaceList.setTotalCount(m_ipInterfaceDao.countMatching(builder.count().toCriteria()));
            
            return interfaceList;
        } finally {
            readUnlock();
        }
    }

