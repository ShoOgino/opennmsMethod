    /**
     * Sets the configuration.
     *
     * @param config the full configuration object
     * @return the response
     */
    @POST
    public Response setConfiguration(final EmailNorthbounderConfig config) {
        writeLock();
        if (config == null) {
            throw getException(Status.BAD_REQUEST, "Email NBI configuration object cannot be null");
        }
        try {
            File configFile = m_emailNorthbounderConfigDao.getConfigResource().getFile();
            JaxbUtils.marshal(config, new FileWriter(configFile));
            notifyDaemons();
            return Response.noContent().build();
        } catch (Throwable t) {
            throw getException(Status.INTERNAL_SERVER_ERROR, t);
        } finally {
            writeUnlock();
        }
    }

