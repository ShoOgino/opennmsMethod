	private static void applyLimitOffsetOrderBy(final MultivaluedMap<String,String> p, final CriteriaBuilder builder, final Integer defaultLimit) {

		final MultivaluedMap<String, String> params = new MultivaluedMapImpl();
		params.putAll(p);

		builder.distinct();
		builder.limit(defaultLimit);

		if (params.containsKey("limit")) {
			builder.limit(Integer.valueOf(params.getFirst("limit")));
			params.remove("limit");
		}

		if (params.containsKey("offset")) {
			builder.offset(Integer.valueOf(params.getFirst("offset")));
			params.remove("offset");
		}

		if(params.containsKey("orderBy")) {
			builder.orderBy(params.getFirst("orderBy"));
			params.remove("orderBy");

			if(params.containsKey("order")) {
				if("desc".equalsIgnoreCase(params.getFirst("order"))) {
					builder.desc();
				} else {
					builder.asc();
				}
				params.remove("order");
			}
		}
	}

