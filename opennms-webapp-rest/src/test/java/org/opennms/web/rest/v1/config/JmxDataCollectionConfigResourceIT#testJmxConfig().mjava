    @Test
    public void testJmxConfig() throws Exception {
        sendRequest(GET, "/config/jmx/notfound", 404);

        String xml = sendRequest(GET, "/config/jmx", 200);
        JmxDatacollectionConfig config = JaxbUtils.unmarshal(JmxDatacollectionConfig.class, xml);

        assertNotNull(config);

        assertEquals(4, config.getJmxCollectionCount());

        assertEquals("jboss", config.getJmxCollection("jboss").getName());
        assertEquals(300, config.getJmxCollection("jboss").getRrd().getStep());
        assertEquals(4, config.getJmxCollection("jboss").getMbeanCount());

        assertEquals("jsr160", config.getJmxCollection("jsr160").getName());
        assertEquals(300, config.getJmxCollection("jsr160").getRrd().getStep());
        assertEquals(39, config.getJmxCollection("jsr160").getMbeanCount());

        assertEquals(300, config.getJmxCollection("cassandra30x").getRrd().getStep());
        assertEquals("cassandra30x", config.getJmxCollection("cassandra30x").getName());

        assertEquals(300, config.getJmxCollection("cassandra30x-newts").getRrd().getStep());
        assertEquals("cassandra30x-newts", config.getJmxCollection("cassandra30x-newts").getName());
    }

