    protected void createUser(final String username, final String email, final int statusCode, final String expectedUrlSuffix, boolean hashPassword) throws Exception {

        String userXml = "<user>" +
                "<user-id>" + username + "</user-id>" +
                "<full-name>" + username + " Full Name</full-name>" +
                "{EMAIL}" + 
                "<user-comments>Autogenerated by a unit test...</user-comments>" +
                "<password>" + PASSWORD + "</password>" +
                "</user>";
        userXml = userXml.replace("{EMAIL}", email != null ?  "<email>" + email + "</email>": "");
        sendPost(hashPassword ? "/users?hashPassword=true" : "/users", userXml, statusCode, expectedUrlSuffix);
    }

