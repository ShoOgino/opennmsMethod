    @Test
    @JUnitTemporaryDatabase
    public void testIpInterface() throws Exception {
        createIpInterface();
        String url = "/nodes/1/ipinterfaces";
        String xml = sendRequest(GET, url, 200);
        assertTrue(xml.contains("<ipAddress>10.10.10.10</ipAddress>"));
        url += "/10.10.10.10";
        sendPut(url, "isManaged=U", 204);
        xml = sendRequest(GET, url, 200);
        assertTrue(xml.contains("isManaged=\"U\""));

        m_mockEventIpcManager.getEventAnticipator().reset();
        m_mockEventIpcManager.getEventAnticipator().anticipateEvent(new EventBuilder(EventConstants.DELETE_INTERFACE_EVENT_UEI, "Test")
                                                                            .setNodeid(1)
                                                                            .setInterface(InetAddressUtils.addr("10.10.10.10"))
                                                                            .getEvent());

        sendRequest(DELETE, url, 204);

        m_mockEventIpcManager.getEventAnticipator().waitForAnticipated(10000);
        m_mockEventIpcManager.getEventAnticipator().verifyAnticipated();
    }

