    @Test
    @JUnitTemporaryDatabase
    public void testMonitoredService() throws Exception {
        createService();
        String url = "/nodes/1/ipinterfaces/10.10.10.10/services";
        String xml = sendRequest(GET, url, 200);
        assertTrue(xml.contains("<name>ICMP</name>"));
        url += "/ICMP";
        sendPut(url, "status=A", 204);
        xml = sendRequest(GET, url, 200);
        assertTrue(xml.contains("status=\"A\""));

        m_mockEventIpcManager.getEventAnticipator().reset();
        m_mockEventIpcManager.getEventAnticipator().anticipateEvent(new EventBuilder(EventConstants.DELETE_SERVICE_EVENT_UEI, "Test")
                                                                            .setNodeid(1)
                                                                            .setInterface(InetAddressUtils.addr("10.10.10.10"))
                                                                            .setService("ICMP")
                                                                            .getEvent());

        sendRequest(DELETE, url, 204);

        m_mockEventIpcManager.getEventAnticipator().waitForAnticipated(10000);
        m_mockEventIpcManager.getEventAnticipator().verifyAnticipated();
    }

