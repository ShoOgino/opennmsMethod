    @Test
    public void testNodes() throws Exception {
        createRequisition();

        String url = "/requisitions/test/nodes";

        // create a node
        JSONObject node = new JSONObject();
        node.put("node-label", "shoe");
        node.put("parent-node-label", "david");
        node.put("foreign-id", "1111");
        sendPost(url, node.toString(), 303, "/test/nodes/1111");

        // get list of nodes
        String json = sendRequest(GET, url, 200);
        JSONObject nodes = new JSONObject(json);
        assertNotNull(nodes.getJSONArray("node"));
        assertEquals(2, nodes.getInt("count"));
        assertEquals("david", nodes.getJSONArray("node").getJSONObject(0).getString("node-label"));
        assertEquals("shoe", nodes.getJSONArray("node").getJSONObject(1).getString("node-label"));

        // get individual node
        url = "/requisitions/test/nodes/4243";
        json = sendRequest(GET, url, 200);
        node = new JSONObject(json);
        assertEquals("apknd", node.getString("parent-node-label"));
        assertEquals("david", node.getString("node-label"));

        // set attributes
        sendPut(url, "node-label=homo+sapien", 303, "/nodes/4243");
        json = sendRequest(GET, url, 200);
        node = new JSONObject(json);
        assertEquals("homo sapien", node.getString("node-label"));

        // delete node
        json = sendRequest(DELETE, url, 200);
        json = sendRequest(GET, url, 404);
    }

