    @Test
    public void testMultipleStepSequenceBuilder() throws Throwable {
        MobileSequenceConfigBuilder bldr = new MobileSequenceConfigBuilder();
        
        ping(bldr);
        balanceInquiry(bldr);

		MobileSequenceExecution execution = bldr.getSequence().start(m_session, m_coordinator);
		
		Thread.sleep(100);
		
		sendPong();
		
        Thread.sleep(100);

        sendBalance();
        
        bldr.getSequence().waitFor(m_session, execution);

        Map<String,Number> timing = execution.getResponseTimes();
        
        
        assertNotNull(m_session);
        assertEquals(PHONE_NUMBER, m_session.substitute("${SMS Pong.smsOriginator}"));
        
        assertNotNull(timing);
        assertTrue(latency(timing, "response-time") > 150);
        assertTrue(latency(timing, "SMS Ping") > 50);
        assertTrue(latency(timing, "USSD request") > 50);
        assertEquals("Unexpected size for timing " + timing, 3, timing.size());
    }

