    private void getEventsByCriteria() {
    	LogUtils.debugf(this, "clearing events");

    	clearEvents();
    	final BeanFactoryReference bf = BeanUtils.getBeanFactory("daoContext");
        final EventDao eventDao = BeanUtils.getBean(bf,"eventDao", EventDao.class);
        final TransactionTemplate transTemplate = BeanUtils.getBean(bf, "transactionTemplate",TransactionTemplate.class);
        try {
                transTemplate.execute(new TransactionCallback<Object>() {
                public Object doInTransaction(final TransactionStatus status) {
                	LogUtils.debugf(this, "Entering transaction call back: selection with criteria: %s", criteriaRestriction);
                    final OnmsCriteria criteria = new OnmsCriteria(OnmsEvent.class);
                    criteria.add(Restrictions.sqlRestriction(criteriaRestriction));
                    
                    final List<OnmsEvent> events = eventDao.findMatching(criteria);
                    LogUtils.infof(this, "Found %d event(s) with criteria: %s", events.size(), criteriaRestriction);
                    
                    for (final OnmsEvent onmsEvent : events) {
                    	final Event xmlEvent = getXMLEvent(onmsEvent);
                        if (xmlEvent != null) addEvent(xmlEvent);
                    }
                    return new Object();
                }

            });
        
        } catch (final RuntimeException e) {
            LogUtils.errorf(this, e, "Error while getting events.");
        }
        
    }

