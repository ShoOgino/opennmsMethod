	private StringWriter getOutput() {
		LogUtils.debugf(this, "Sending alarms to the client");

		final StringWriter sw = new StringWriter();
		final List<Event> events = getEvents();
        if (events != null) {
        	for (final Event xmlEvent : events) {
        		LogUtils.infof(this, "Marshal Event with id: %s", xmlEvent.getDbid()); 
                JaxbUtils.marshal(xmlEvent, sw);
                LogUtils.debugf(this, "Flushing Event with id: %s", xmlEvent.getDbid()); 
                sw.flush();
            }
        }
        return sw;

	}

