	private Event getXMLEvent(OnmsEvent ev) {
        ThreadCategory log = getLog();
        log.info("Working on XML Event for id: " + ev.getId()); 
        log.debug("Setting Event id: " + ev.getId()); 
        Event e = new Event();
        e.setDbid(ev.getId());

        //UEI
        if (ev.getEventUei() != null ) {
            log.debug("Setting Event uei: " + ev.getEventUei()); 
            e.setUei(ev.getEventUei());
        } else {
            log.warn("No Event uei found: skipping event....");
            return null;
        }

        // Source
        if (ev.getEventSource() != null ) {
            log.debug("Setting Event source: " + ev.getEventSource()); 
            e.setSource(ev.getEventSource());
        } else {
            log.info("No Event source found."); 
        }

        //nodeid
        if (ev.getNode() != null) {
            log.debug("Setting Event nodeid: " + ev.getNode().getId()); 
            e.setNodeid(ev.getNode().getId());
        } else {
            log.info("No Event node found."); 
        }


        // timestamp
        if (ev.getEventTime() != null) {
            log.debug("Setting event date timestamp to GMT");
            DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.FULL, DateFormat.FULL);
            dateFormat.setTimeZone(TimeZone.getTimeZone("GMT"));
            log.debug("Setting Event Time: " + ev.getEventTime()); 
            e.setTime(dateFormat.format(ev.getEventTime()));
        } else {
            log.info("No Event time found."); 
        }
        
        // host
        if (ev.getEventHost() != null) {
            log.debug("Setting Event Host: " + ev.getEventHost());
            e.setHost(ev.getEventHost());
        } else {
            log.info("No Event host found.");
        }
        
        // interface
        if (ev.getIpAddr() != null) {
            log.debug("Setting Event Interface/ipaddress: " + ev.getIpAddr());
            e.setInterface(ev
                           .getIpAddr());
        } else {
            log.info("No Event ip address found.");
        }
        
        // Service Name
        if (ev.getServiceType() != null) {
            log.debug("Setting Event Service Name: " + ev.getServiceType().getName());
            e.setService(ev.getServiceType().getName());
        } else {
            log.info("No Event service name found.");
        }

        // Description
        if (ev.getEventDescr() != null ) {
            log.debug("Setting Event Description");
            e.setDescr(ev.getEventDescr());
        } else {
            log.info("No Event ip address found.");
        }
        
        // Log message
        if (ev.getEventLogMsg() != null) {
            Logmsg msg = new Logmsg();
            log.debug("Setting Event Log Message");
            msg.setContent(ev.getEventLogMsg());
            e.setLogmsg(msg);
        } else {
            log.info("No Event log Message found.");
        }

        // severity
        if (ev.getEventSeverity() != null) {
            log.debug("Setting Event Severity");
            e.setSeverity(Constants.getSeverityString(ev.getEventSeverity()));
        } else {
            log.info("No Event severity found.");
        }

          if (ev.getIfIndex() != null && ev.getIfIndex() > 0 ) {
              e.setIfIndex(ev.getIfIndex());
              e.setIfAlias(getIfAlias(ev.getNode().getId(),ev.getIfIndex()));
          } else {
              e.setIfIndex(-1);
              e.setIfAlias("-1");
          }

        
        // operator Instruction
        if (ev.getEventOperInstruct() != null) {
            log.debug("Setting Event Operator Instruction");
            e.setOperinstruct(ev.getEventOperInstruct());
        } else {
            log.info("No Event operator Instruction found.");
        }

        // parms
        if (ev.getEventParms() != null ) {
            log.debug("Setting Event Parms: " + ev.getEventParms());
            Parms parms = Parameter.decode(ev.getEventParms());
            if (parms != null ) e.setParms(parms);
        } else {
            log.info("No Event parms found.");
        }

        AlarmData ad = new AlarmData();
        OnmsAlarm onmsAlarm = ev
                .getAlarm();
        try {
            if (onmsAlarm != null) {
                ad
                        .setReductionKey(onmsAlarm
                                .getReductionKey());
                ad
                        .setAlarmType(onmsAlarm
                                .getAlarmType());
                ad
                        .setClearKey(onmsAlarm
                                .getClearKey());
                e
                        .setAlarmData(ad);
            }
        } catch (ObjectNotFoundException e1) {
            log
                    .warn("correlated alarm data not found "
                            + e1);
        }
        log
        .info("return Event with id: " + ev.getId()); 
        return e;
    }

