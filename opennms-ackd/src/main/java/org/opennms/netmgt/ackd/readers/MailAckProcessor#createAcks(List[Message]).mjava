    //should probably be static
    protected List<OnmsAcknowledgment> createAcks(List<Message> msgs) {
        List<OnmsAcknowledgment> acks = null;
        
        if (msgs != null && msgs.size() > 0) {
            acks = new ArrayList<OnmsAcknowledgment>();
            for (Message msg : msgs) {
                try {
                    Integer id = detectId(msg.getSubject(), m_daemonConfigDao.getConfig().getNotifyidMatchExpression());
                    
                    if (id != null) {
                        final OnmsAcknowledgment ack = createAcknowledgment(msg, id);
                        ack.setAckType(AckType.NOTIFICATION);
                        ack.setLog(createLog(msg));
                        acks.add(ack);
                        msg.setFlag(Flag.DELETED, true);
                        continue;
                    }
                    id = detectId(msg.getSubject(), m_daemonConfigDao.getConfig().getAlarmidMatchExpression());
                    
                    if (id != null) {
                        final OnmsAcknowledgment ack = createAcknowledgment(msg, id);
                        ack.setAckType(AckType.ALARM);
                        ack.setLog(createLog(msg));
                        acks.add(ack);
                        msg.setFlag(Flag.DELETED, true);
                        continue;
                    }
                    
                } catch (MessagingException e) {
                    //FIXME: do something audit like here
                    e.printStackTrace();
                    continue;
                } catch (IOException e) {
                    // FIXME: ditto
                    e.printStackTrace();
                    continue;
                }
            }
        }
        return acks;
    }

