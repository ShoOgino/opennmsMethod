    protected Integer detectId(final String subject, final String expression) {
        Integer id = Integer.valueOf(0);
        
        //TODO: force opennms config '~' style regex attribute identity because this is the only way for this to work
        if (expression.startsWith("~")) {
            String ackExpression = expression.substring(1);
            Pattern pattern = Pattern.compile(ackExpression);
            Matcher matcher = pattern.matcher(subject);
            
            if (matcher.matches() && matcher.groupCount() > 0) {
                id = Integer.valueOf(matcher.group(1));
            }
            
        }
        return id;
    }

