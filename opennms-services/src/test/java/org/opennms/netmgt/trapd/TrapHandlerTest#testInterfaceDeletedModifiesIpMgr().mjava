    public void testInterfaceDeletedModifiesIpMgr() throws Exception {
        long nodeId = 0;
        setUpTrapHandler(true);
        
        anticipateEvent("uei.opennms.org/default/trap", m_ip, nodeId);

        Event event =
            anticipateEvent(EventConstants.INTERFACE_DELETED_EVENT_UEI,
                            m_ip, nodeId);
        m_eventMgr.sendNow(event);

        anticipateEvent("uei.opennms.org/internal/discovery/newSuspect",
                        m_ip, nodeId);

        try {
            Thread.sleep(100);
        } catch (InterruptedException e) {
            // do nothing
        }
        
        sendTrap("v1", null, 6, 1);
        
        finishUp();
    }

