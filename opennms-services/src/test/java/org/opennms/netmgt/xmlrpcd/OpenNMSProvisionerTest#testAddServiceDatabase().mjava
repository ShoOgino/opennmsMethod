    // TODO: Add test for exception on save of XML file
    @Test
    public void testAddServiceDatabase() throws Exception {
        expectUpdateEvent();
        expectRrdInitialize();
        m_mocks.replayAll();

        m_provisioner.addServiceDatabase("MyDB", 13, 2001, 54321, 71, 23456, "dbuser", "dbPasswd", "org.mydb.MyDriver", "jdbc://mydbhost:2");
        checkDatabaseConfiguration("MyDB", "MyDB", 13, 2001, 54321, 71, 23456, "dbuser", "dbPasswd", "org.mydb.MyDriver", "jdbc://mydbhost:2");

        m_mocks.verifyAll();
        verifyEvents();
    }

