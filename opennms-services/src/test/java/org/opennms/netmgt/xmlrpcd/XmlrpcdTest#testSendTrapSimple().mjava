    public void testSendTrapSimple() throws Exception {
        XmlrpcdConfigFactory.setInstance(new XmlrpcdConfigFactory(m_configGeneric));

        long dateLong = System.currentTimeMillis();
        String date = EventConstants.formatToString(new Date(dateLong));
        String enterpriseId = ".1.3.6.4.1.1.1";
        
        anticipateNotifyReceivedEvent(m_anticipator1);
        m_xmlrpcd.init();
        m_xmlrpcd.start();

        Vector<Object> v = new Vector<Object>();
        Hashtable<String, String> t = XmlRpcNotifierTest.makeBasicRpcTrapHashtable(v, date, "public", 6, enterpriseId, 2, dateLong, "1");
        t.put("uei", "uei.opennms.org/default/trap");
        t.put("source", "the one true source");
        t.put("description", "\n" + 
                "      <p>This is the default event format used when an enterprise\n" +
                "      specific event (trap) is received for which no format has been\n" + 
                "      configured (i.e. no event definition exists).</p>\n" + 
                "    ");
        t.put("severity", "Normal");
        m_anticipator1.anticipateCall("sendSnmpTrapEvent", v);

        Event e = XmlRpcNotifierTest.makeBasicEvent(date);
        e.setUei("uei.opennms.org/default/trap");
        e.setTime(EventConstants.formatToString(new Date(dateLong)));
        e.setSnmp(XmlRpcNotifierTest.makeBasicTrapEventSnmp("public", 6, enterpriseId, 2, dateLong, "1"));
        e.setSource("the one true source");
        getEventIpcManager().sendNow(e);
        
        Thread.sleep(1000);
        m_xmlrpcd.stop();
        Thread.sleep(2000);
                
        finishUp();
    }

