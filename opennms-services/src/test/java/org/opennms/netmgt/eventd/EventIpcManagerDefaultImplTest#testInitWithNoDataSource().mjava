    public void testInitWithNoDataSource() {
        ThrowableAnticipator ta = new ThrowableAnticipator();
        ta.anticipate(new IllegalStateException("dataSource not set"));

        EventIpcManagerDefaultImpl manager = new EventIpcManagerDefaultImpl();
        manager.setEventdConfigMgr(EventdConfigFactory.getInstance());
        EventExpander eventExpander = new EventExpander();
        eventExpander.setEventConfDao(EasyMock.createMock(EventConfDao.class));
        eventExpander.afterPropertiesSet();
        manager.setEventExpander(eventExpander);

        try {
            manager.afterPropertiesSet();
        } catch (Throwable t) {
            ta.throwableReceived(t);
        }

        ta.verifyAnticipated();
    }

