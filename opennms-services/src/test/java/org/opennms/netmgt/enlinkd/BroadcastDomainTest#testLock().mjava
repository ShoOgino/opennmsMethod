    @Test
    public void testLock() throws Exception {
        BroadcastDomain domain = new BroadcastDomain();
        assertTrue(!domain.isLocked());
        domain.getLock();
        assertTrue(domain.isLocked());
        domain.releaseLock();
        assertTrue(!domain.isLocked());
    }

