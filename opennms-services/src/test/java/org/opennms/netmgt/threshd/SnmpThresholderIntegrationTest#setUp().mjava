    @SuppressWarnings("deprecation")
    protected void setUp() throws Exception {
        super.setUp();
        
        MockLogAppender.setupLogging();
        
        setupDatabase();
        
        createMockRrd();

        setupEventManager();
        
        replayMocks();
       
        String rrdRepository = "target/threshd-test";
        String fileName = "cpuUtilization"+RrdUtils.getExtension();
        int nodeId = 1;
        String ipAddress = "192.168.1.1";
        String serviceName = "SNMP";
        String groupName = "default-snmp";
        
        setupThresholdConfig(rrdRepository+File.separator+nodeId, fileName, nodeId, ipAddress, serviceName, groupName);

        
        m_thresholder = new SnmpThresholder();
        m_thresholder.initialize(m_serviceParameters);
        m_thresholder.initialize(m_iface, m_parameters);
        
        verifyMocks();
        
        expectRrdStrategyCalls();

    }

