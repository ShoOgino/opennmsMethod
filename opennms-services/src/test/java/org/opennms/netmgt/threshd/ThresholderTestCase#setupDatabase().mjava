	protected void setupDatabase() throws Exception {
		m_network = new MockNetwork();
		m_network.setCriticalService("ICMP");
		m_network.addNode(1, "Router");
		m_network.addInterface("192.168.1.1");
		m_network.addService("ICMP");
		m_network.addService("SNMP");
		m_network.addInterface("192.168.1.2");
		m_network.addService("ICMP");
		m_network.addService("SMTP");
		m_network.addNode(2, "Server");
		m_network.addInterface("192.168.1.3");
		m_network.addService("ICMP");
		m_network.addService("HTTP");
		m_network.addNode(3, "Firewall");
		m_network.addInterface("192.168.1.4");
		m_network.addService("SMTP");
		m_network.addService("HTTP");
		m_network.addInterface("192.168.1.5");
		m_network.addService("SMTP");
		m_network.addService("HTTP");
		MockDatabase db = new MockDatabase();
		db.populate(m_network);

        final TransactionAwareDataSourceProxy proxy = new TransactionAwareDataSourceProxy(db);
		DataSourceFactory.setInstance(proxy);

		PlatformTransactionManager mgr = new DataSourceTransactionManager(proxy);
        
        FilterDao dao = FilterDaoFactory.getInstance();
        if (dao instanceof JdbcFilterDao) {
        	((JdbcFilterDao)dao).setTransactionTemplate(new TransactionTemplate(mgr));
        }
	}

