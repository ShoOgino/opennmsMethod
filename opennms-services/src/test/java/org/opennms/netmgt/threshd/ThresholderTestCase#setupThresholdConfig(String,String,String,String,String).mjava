	protected void setupThresholdConfig(String dirName, String fileName, String ipAddress, String serviceName, String groupName) throws IOException, UnknownHostException, FileNotFoundException, MarshalException, ValidationException {
		File dir = new File(dirName);
		dir.mkdir();
		File f = new File(dir, fileName);
		PrintWriter out = new PrintWriter(new FileWriter(f));
		out.println("unused");
		out.close();
		m_fileName = f.getAbsolutePath();
		m_step = 300000;
		m_iface = new IPv4NetworkInterface(InetAddress.getByName(ipAddress));
		m_serviceParameters = new HashMap();
		m_serviceParameters.put("svcName", serviceName);
		m_parameters = new HashMap();
		m_parameters.put("thresholding-group", groupName);
		FileReader r = new FileReader("etc/examples/thresholds.xml");
		ThresholdingConfigFactory.setInstance(new ThresholdingConfigFactory(r));
		r.close();
		ThresholdingConfigFactory.getInstance().getGroup(groupName).setRrdRepository("/tmp");
	}

