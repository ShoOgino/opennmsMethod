    protected void setUp() throws Exception {
        super.setUp();
        
        MockLogAppender.setupLogging();
        
        setupDatabase();
        
        createMockRrd();

        setupEventManager();

        replayMocks();

        String dirName = "target/threshd-test/192.168.1.1";
        String fileName = "icmp"+RrdUtils.getExtension();
        String ipAddress = "192.168.1.1";
        String serviceName = "ICMP";
        String groupName = "icmp-latency";

		setupThresholdConfig(dirName, fileName, ipAddress, serviceName, groupName);

        m_thresholder = new LatencyThresholder();
        m_thresholder.initialize(m_serviceParameters);
        m_thresholder.initialize(m_iface, m_parameters);

        verifyMocks();
        expectRrdStrategyCalls();

    }

