    public void testGetEventForStateTriggered() {
        Threshold threshold = new Threshold();
        threshold.setType("absoluteChange");
        threshold.setDsName("ds-name");
        threshold.setDsType("ds-type");
        threshold.setValue(1.0);
        threshold.setRearm(0.5);
        threshold.setTrigger(3);
        ThresholdConfigWrapper wrapper=new ThresholdConfigWrapper(threshold);
        ThresholdEvaluatorStateAbsoluteChange evaluator = new ThresholdEvaluatorStateAbsoluteChange(wrapper);

        assertEquals("should not trigger", Status.NO_CHANGE, evaluator.evaluate(8.0));
        assertEquals("should trigger", Status.TRIGGERED, evaluator.evaluate(10.0));
        Event event = evaluator.getEventForState(Status.TRIGGERED, new Date(), 10.0);
        assertNotNull("should have created an event", event);
        assertEquals("UEIs should be the same", EventConstants.ABSOLUTE_CHANGE_THRESHOLD_EVENT_UEI, event.getUei());
        
        assertNotNull("event should have parms", event.getParms());
        
        boolean hasValueParm = false;
        boolean hasPreviousValueParm = false;
        boolean hasChangeThreshold = false;
        for (Parm parm : getParmCollection(event)) {
            if ("value".equals(parm.getParmName())) {
                assertEquals("value", "10.0", parm.getValue().getContent());
                hasValueParm = true;
            }
            if ("previousValue".equals(parm.getParmName())) {
                assertEquals("previousValue", "8.0", parm.getValue().getContent());
                hasPreviousValueParm = true;
            }
            if ("changeThreshold".equals(parm.getParmName())) {
                assertEquals("changeThreshold", "1.0", parm.getValue().getContent());
                hasChangeThreshold = true;
            }
        }
        
        assertTrue("did not find 'value' parm in event", hasValueParm);
        assertTrue("did not find 'previousValue' parm in event", hasPreviousValueParm);
        assertTrue("did not find 'changeThreshold' parm in event", hasChangeThreshold);
    }

