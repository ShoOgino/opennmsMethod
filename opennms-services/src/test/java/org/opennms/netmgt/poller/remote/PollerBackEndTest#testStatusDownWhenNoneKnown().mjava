    public void testStatusDownWhenNoneKnown() {
        
        expect(m_locMonDao.get(1)).andReturn(m_locationMonitor);
        expect(m_monSvcDao.get(2)).andReturn(m_dnsService);
        
        expect(m_locMonDao.getMostRecentStatusChange(m_locationMonitor, m_dnsService)).andReturn(null);

        final PollStatus newStatus = PollStatus.unavailable("where'd he go?");
        
        OnmsLocationSpecificStatus expectedStatus = new OnmsLocationSpecificStatus(m_locationMonitor, m_dnsService, newStatus);
        
        m_locMonDao.saveStatusChange(isA(OnmsLocationSpecificStatus.class));
        expectLastCall().andAnswer(new StatusChecker(expectedStatus));

        // expect a status change if the node is now down and we didn't know before
        EventBuilder eventBuilder = new EventBuilder(EventConstants.REMOTE_NODE_LOST_SERVICE_UEI);
        eventBuilder.setSource("PollerBackEnd")
            .setNodeid(m_dnsService.getNodeId())
            .setInterface(m_dnsService.getIpAddress())
            .setService(m_dnsService.getServiceName())
            .addParam(EventConstants.PARM_LOCATION_MONITOR_ID, "1");
        
        
        m_eventIpcManager.sendNow(eq(eventBuilder.getEvent()));

        replayMocks();
        
        m_backEnd.reportResult(1, 2, newStatus);
        
        verifyMocks();
        
    }

