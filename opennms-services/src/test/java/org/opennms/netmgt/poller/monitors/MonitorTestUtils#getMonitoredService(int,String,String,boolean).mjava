    public static MonitoredService getMonitoredService(int nodeId, String hostname, String svcName, boolean preferInet6Address) throws UnknownHostException {
        InetAddress myAddress = null;
        InetAddress[] addresses = InetAddress.getAllByName(hostname);
        for (InetAddress address : addresses) {
            myAddress = address;
            if (!preferInet6Address && myAddress instanceof Inet4Address) break;
            if (preferInet6Address && myAddress instanceof Inet6Address) break;
        }
        if (preferInet6Address && !(myAddress instanceof Inet6Address)) {
            throw new UnknownHostException("No IPv6 address could be found for the hostname: " + hostname);
        }
        return new MockMonitoredService(nodeId, hostname, myAddress, svcName);
    }

