    @Test
    @JUnitTemporaryDatabase(tempDbClass=MockDatabase.class)
    public void testThresholds() throws Exception {
        EventAnticipator anticipator = new EventAnticipator();
        EventBuilder bldr = new EventBuilder(EventConstants.HIGH_THRESHOLD_EVENT_UEI, "LatencyStoringServiceMonitorAdaptorTest");
        bldr.setNodeid(1);
        bldr.setInterface(addr("127.0.0.1"));
        bldr.setService("ICMP");
        anticipator.anticipateEvent(bldr.getEvent());

        bldr = new EventBuilder(EventConstants.HIGH_THRESHOLD_REARM_EVENT_UEI, "LatencyStoringServiceMonitorAdaptorTest");
        bldr.setNodeid(1);
        bldr.setInterface(addr("127.0.0.1"));
        bldr.setService("ICMP");
        anticipator.anticipateEvent(bldr.getEvent());

        executeThresholdTest(anticipator, new Double[] {100.0, 10.0}); // This should emulate a trigger and a rearm
        anticipator.verifyAnticipated();
    }

