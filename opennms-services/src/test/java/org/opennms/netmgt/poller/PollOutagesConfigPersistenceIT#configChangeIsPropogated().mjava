    @Test
    public void configChangeIsPropogated() throws IOException {
        waitForInitialConfig();
        
        // Verify the initial config we see in the DB matches the one on the FS
        Path resource = Paths.get(testDir.getAbsolutePath(), "/poll-outages.xml");
        Outages fromFile = JaxbUtils.unmarshal(Outages.class, resource.toFile());
        Outages fromDB = pollOutagesDao.getReadOnlyConfig();
        assertThat(fromFile, equalTo(fromDB));
        
        // Write a new config to the FS then reload, now expect the DB copy to match the new FS copy
        String newOutageConfig = "<?xml version=\"1.0\"?>\n" +
                "<outages xmlns=\"http://xmlns.opennms.org/xsd/config/poller/outages\"></outages>";

        Files.write(resource, newOutageConfig.getBytes());
        fromFile = JaxbUtils.unmarshal(Outages.class, resource.toFile());
        assertThat(fromFile.getOutages().size(), equalTo(0));
        pollOutagesDao.reload();
        fromDB = pollOutagesDao.getReadOnlyConfig();
        assertThat(fromFile, equalTo(fromDB));
    }

