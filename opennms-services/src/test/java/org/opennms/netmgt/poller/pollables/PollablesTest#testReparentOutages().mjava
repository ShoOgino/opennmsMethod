    @Test
    public void testReparentOutages() {
        // create some outages in the database
        mDot1.bringDown();
        
        pDot1Icmp.doPoll();
        m_network.processStatusChange(new Date());
        
        mDot1.bringUp();
        
        pDot1Icmp.doPoll();
        m_network.processStatusChange(new Date());
        
        final String ifOutageOnNode1 = "select * from outages where nodeId = 1 and ipAddr = '192.168.1.1'";
        final String ifOutageOnNode2 = "select * from outages where nodeId = 2 and ipAddr = '192.168.1.1'";
        
        m_eventMgr.finishProcessingEvents();

        assertEquals(2, m_db.countRows(ifOutageOnNode1));
        assertEquals(0, m_db.countRows(ifOutageOnNode2));
        
        m_db.reparentInterface(pDot1.getIpAddr(), pDot1.getNodeId(), pNode2.getNodeId());
        pDot1.reparentTo(pNode2);
        
        assertEquals(0, m_db.countRows(ifOutageOnNode1));
        assertEquals(2, m_db.countRows(ifOutageOnNode2));

    }

