    public void testStop() throws Exception {
        
        expect(m_settings.getMonitorId()).andReturn(1).atLeastOnce();

        anticipateNewConfig(pollConfig());
        
        expect(m_backEnd.pollerStarting(1, getPollerDetails())).andReturn(true);

        
        m_backEnd.pollerStopping(1);
        
        replayMocks();
        
        m_frontEnd.afterPropertiesSet();
        
        assertTrue(m_frontEnd.isStarted());
        
        m_frontEnd.stop();
        
        assertFalse(m_frontEnd.isStarted());


        verifyMocks();
    }

