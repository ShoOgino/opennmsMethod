    /**
     * Test for NMS-7761
     */
    @Test
    public void testNoSpuriousNodeDownsOnNodeCategoryMembershipChanged() {
        m_pollerConfig.setNodeOutageProcessingEnabled(true);

        MockNode node = m_network.getNode(1);

        // Start the poller
        startDaemons();

        resetAnticipated();
        anticipateDown(node);

        // Bring down the node (duh)
        node.bringDown();

        // Make sure the correct events are received
        verifyAnticipated(10000);

        // Send a uei.opennms.org/nodes/nodeCategoryMembershipChanged
        EventBuilder eventBuilder = MockEventUtil.createEventBuilder("Test", EventConstants.NODE_CATEGORY_MEMBERSHIP_CHANGED_EVENT_UEI);
        eventBuilder.setNodeid(node.getNodeId());
        Event nodeCatMemChangedEvent = eventBuilder.getEvent();
        m_eventMgr.sendEventToListeners(nodeCatMemChangedEvent);

        // We shouldn't receive any other events
        verifyAnticipated(2000, true);
    }

