    private void setupCollector(String svcName) throws CollectionInitializationException {
        Collector collector = new Collector();
        collector.setService(svcName);
        collector.setClassName(MockServiceCollector.class.getName());
        
        MockServiceCollector.setDelegate(getCollector());
        
        EasyMockUtils m_mockUtils = new EasyMockUtils();
        m_collectd.setNodeDao(m_mockUtils.createMock(NodeDao.class));
        // Setup expectation
        Map<String,String> empty = Collections.emptyMap();
        m_collector.initialize(empty);

        
        expect(m_collectorConfigDao.getCollectors()).andReturn(Collections.singleton(collector));
    }

