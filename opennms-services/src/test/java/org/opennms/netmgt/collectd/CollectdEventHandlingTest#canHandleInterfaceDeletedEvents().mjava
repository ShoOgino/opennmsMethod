    @Test
    public void canHandleInterfaceDeletedEvents() {
        // Handle a interfaceDeleted event targeting svc1
        OnmsNode node = new OnmsNode();
        node.setId(svc1.getNodeId());

        OnmsIpInterface iface = new OnmsIpInterface();
        iface.setId(99);
        iface.setNode(node);
        iface.setIpAddress(svc1.getAddress());

        Event e = new EventBuilder(EventConstants.INTERFACE_DELETED_EVENT_UEI, "test")
                .setIpInterface(iface)
                .getEvent();
        collectd.onEvent(ImmutableMapper.fromMutableEvent(e));

        // The delete flag should be set (and only set) on svc1
        assertTrue("deletion flag was not set on svc1!", svc1.getCollectorUpdates().isDeletionFlagSet());
        assertFalse("deletion flag was set on svc2!", svc2.getCollectorUpdates().isDeletionFlagSet());
    }

