    @Before
    public void setUp() throws Exception {
        jmxNodeInfo = new JMXNodeInfo(0);
        jmxCollector = new JMXCollectorImpl();
        ((JMXCollectorImpl)jmxCollector).setJmxConfigDao(new JmxConfigDaoJaxb());
        platformMBeanServer = ManagementFactory.getPlatformMBeanServer();
        ObjectName objectName = new ObjectName("org.opennms.netmgt.collectd.jmxhelper:type=JmxTest");
        JmxTestMBean testMBean = new JmxTest();
        platformMBeanServer.registerMBean(testMBean, objectName);

        collectionAgent = new DummyCollectionAgent();
        collectionAgent.setAttribute("org.opennms.netmgt.collectd.JMXCollector.nodeInfo", jmxNodeInfo);

        FileInputStream configFileStream = new FileInputStream("src/test/resources/etc/JmxCollectorConfigTest.xml");
        logger.debug("ConfigFileStream check '{}'", configFileStream.available());
        jmxConfigFactory = new JMXDataCollectionConfigFactory(configFileStream);
        JMXDataCollectionConfigFactory.setInstance(jmxConfigFactory);
    }

