    @Test
    public void canHandleNodeDeletedEvents() {
        // Handle a interfaceDeleted event targeting svc1
        Event e = new EventBuilder(EventConstants.NODE_DELETED_EVENT_UEI, "test")
                .setNodeid(svc1.getNodeId())
                .getEvent();
        collectd.onEvent(e);

        // The delete flag should be set (and only set) on svc1
        assertTrue("deletion flag was not set on svc1!", svc1.getCollectorUpdates().isDeletionFlagSet());
        assertFalse("deletion flag was set on svc2!", svc2.getCollectorUpdates().isDeletionFlagSet());
    }

