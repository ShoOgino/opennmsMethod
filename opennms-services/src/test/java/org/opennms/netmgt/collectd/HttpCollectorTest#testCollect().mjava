    /**
     * Test method for {@link org.opennms.netmgt.collectd.HttpCollector#collect(
     *   org.opennms.netmgt.collectd.CollectionAgent, org.opennms.netmgt.model.events.EventProxy, java.util.Map)}.
     */
    @Test
    public final void testCollect() throws Exception {
        
        InetAddress opennmsDotOrg = InetAddress.getByName("www.opennms.org");
        
        RrdTestUtils.initializeNullStrategy();
        HttpCollector collector = new HttpCollector();
        OnmsDistPoller distPoller = new OnmsDistPoller("localhost", "127.0.0.1");
        OnmsNode node = new OnmsNode(distPoller );
        node.setId(1);
        OnmsIpInterface iface = new OnmsIpInterface(opennmsDotOrg.getHostAddress(), node );
        iface.setId(2);
        
        IpInterfaceDao ifDao = EasyMock.createMock(IpInterfaceDao.class);
        EasyMock.expect(ifDao.load(iface.getId())).andReturn(iface).anyTimes();
        EasyMock.replay(ifDao);
        
        CollectionAgent agent = DefaultCollectionAgent.create(iface.getId(), ifDao, m_transMgr);
        Map<String, String> parameters = new HashMap<String, String>();
        parameters.put("http-collection", "default");
        EventProxy eproxy = getEventProxy();
        collector.collect(agent, eproxy, parameters);
    }

