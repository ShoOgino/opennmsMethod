	private CollectorConfigDao initialize() throws IOException, MarshalException, ValidationException {
		Reader rdr;
		
		RrdConfig.loadProperties(new ByteArrayInputStream(s_rrdConfig.getBytes()));

		rdr = getReaderForFile("/org/opennms/netmgt/config/test-database-schema.xml");
		DatabaseSchemaConfigFactory.setInstance(new DatabaseSchemaConfigFactory(rdr));
		rdr.close();
		
		rdr = getReaderForFile("/org/opennms/netmgt/config/jmx-datacollection-testdata.xml");
		JMXDataCollectionConfigFactory.setInstance(new JMXDataCollectionConfigFactory(rdr));
		rdr.close();

		rdr = getReaderForFile("/org/opennms/netmgt/config/snmp-config.xml");
		SnmpPeerFactory.setInstance(new SnmpPeerFactory(rdr));
		rdr.close();

		rdr = getReaderForFile("/org/opennms/netmgt/config/datacollection-config.xml");
		DataCollectionConfigFactory.setInstance(new DataCollectionConfigFactory(rdr));
		rdr.close();

		rdr = getReaderForFile("/org/opennms/netmgt/config/collectd-testdata.xml");
		CollectdConfigFactory.setInstance(new CollectdConfigFactory(rdr, "localhost", false));
		rdr.close();

		return new CollectorConfigDaoImpl();
	}

