	@Test
	public void testGetNodeidFromIpAndSysName() throws Exception {
		m_nodeDao.save(getCisco1700());
		
		OnmsNode cisco1700 = m_nodeDao.findByForeignId("linkd", "cisco1700");
		assertEquals("cisco1700", cisco1700.getSysName());
		
		HibernateEventWriter hew = (HibernateEventWriter) m_linkd.getQueryManager();
		for (OnmsIpInterface ip: m_ipInterfaceDao.findByNodeId(cisco1700.getId())) {
			System.err.println((ip));
			List<Integer> nodeids = hew.getNodeidFromIpAndSysName(ip.getIpAddress(),cisco1700.getSysName());
			assertEquals(1, nodeids.size());
			assertEquals(cisco1700.getId(), nodeids.get(0));
		}
	}

