    /*
     * WORKSTATION: linked to a wireless  ------> port 2/29 (ifindex 47):CISCO_WS_C2948_IP
     * should be the same port for cisco wireless device.....
     * 
     */
    @Test
    @JUnitSnmpAgents(value={
            @JUnitSnmpAgent(host=CISCO_WS_C2948_IP, port=161, resource="classpath:linkd/"+CISCO_WS_C2948_IP+"-walk.txt"),
    })
    public void testWorkstationCiscoWs() throws Exception {
        m_nodeDao.save(getNodeWithoutSnmp(WORKSTATION_NAME, WORKSTATION_IP));
        m_nodeDao.save(getCiscoWsC2948());
        m_nodeDao.flush();

        final OnmsNode workstation = m_nodeDao.findByForeignId("linkd", WORKSTATION_NAME);
        final OnmsNode ciscows = m_nodeDao.findByForeignId("linkd", CISCO_WS_C2948_NAME);

        assertTrue(m_linkd.scheduleNodeCollection(ciscows.getId()));
        assertTrue(!m_linkd.scheduleNodeCollection(workstation.getId()));

        assertTrue(m_linkd.runSingleSnmpCollection(ciscows.getId()));

        assertEquals(1, m_linkd.getLinkableNodes().size());
        LinkableNode linkNode = m_linkd.getLinkableNodes().iterator().next();
        
        // linkable node is not null
        assertTrue(linkNode != null);
        
        final Map<String, List<AtInterface>> mactoatinterfacemap = m_linkd.getAtInterfaces("example1");
        assertEquals(2,mactoatinterfacemap.size());
        
        assertEquals(1, mactoatinterfacemap.get(WORKSTATION_MAC).size());
        
        assertEquals(0,m_dataLinkInterfaceDao.countAll());
        
        String ciscowspackageName = m_linkdConfig.getFirstPackageMatch(InetAddress.getByName(CISCO_WS_C2948_IP)).getName();

        assertEquals("example1", ciscowspackageName);
                
        assertTrue(m_linkd.runSingleLinkDiscovery("example1"));
        
        final List<DataLinkInterface> links = m_dataLinkInterfaceDao.findAll();
        assertEquals(1,links.size());
        
        final DataLinkInterface workstationlinktociscows = links.get(0);
        
        assertEquals(workstation.getId(), workstationlinktociscows.getNode().getId());
        assertEquals(-1,workstationlinktociscows.getIfIndex().intValue());
        assertEquals(ciscows.getId(), workstationlinktociscows.getNodeParentId());
        assertEquals(47, workstationlinktociscows.getParentIfIndex().intValue());
                
    }

