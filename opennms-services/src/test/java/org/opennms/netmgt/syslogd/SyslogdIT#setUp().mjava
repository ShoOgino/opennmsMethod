    @Before
    public void setUp() throws Exception {
        MockLogAppender.setupLogging();

        InputStream stream = null;
        try {
            stream = ConfigurationTestUtils.getInputStreamForResource(this, "/etc/syslogd-configuration.xml");
            SyslogdConfigFactory.setInstance(new SyslogdConfigFactory(stream));
        } finally {
            if (stream != null) {
                IOUtils.closeQuietly(stream);
            }
        }

        m_syslogd = new Syslogd();
        m_syslogd.init();

        // Verify that the test syslogd-configuration.xml file was loaded
        boolean foundBeer = false;
        boolean foundMalt = false;
        assertEquals(10514, SyslogdConfigFactory.getInstance().getSyslogPort());
        for (final UeiMatch match : SyslogdConfigFactory.getInstance().getUeiList().getUeiMatch()) {
            if (match.getProcessMatch() != null) {
                if (!foundBeer && "beerd".equals(match.getProcessMatch().getExpression())) {
                    foundBeer = true;
                } else if (!foundMalt && "maltd".equals(match.getProcessMatch().getExpression())) {
                    foundMalt = true;
                }
            }
        }
        assertTrue(foundBeer);
        assertTrue(foundMalt);
    }

