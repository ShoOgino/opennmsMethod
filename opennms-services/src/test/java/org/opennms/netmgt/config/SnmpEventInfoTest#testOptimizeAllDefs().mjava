    /**
     * Test method for {@link org.opennms.netmgt.config.SnmpEventInfo#optimizeAllDefs()}.
     * @throws ValidationException 
     * @throws MarshalException 
     * @throws IOException 
     */
    public final void testOptimizeAllDefs() throws MarshalException, ValidationException, IOException {

        MergeableDefinition def;
        
        SnmpConfig config = SnmpPeerFactory.getSnmpConfig();
        
        SnmpEventInfo info = new SnmpEventInfo();
        
        SnmpConfig SnmpConfig = SnmpPeerFactory.getSnmpConfig();
        assertEquals(6, SnmpConfig.getDefinitionCount());
        
        info.setCommunityString("opennmsrules2");
        def = SnmpConfigManager.findDefMatchingAttributes(config, info.createDef());
        assertNotNull(def);
        assertEquals(9, def.getConfigDef().getRangeCount());
        
        //do bunch more...
        
        SnmpConfigManager.optimizeAllDefs(config);
//      String config = SnmpPeerFactory.marshallConfig();
//      System.err.println(config);
        
        def = SnmpConfigManager.findDefMatchingAttributes(config, info.createDef());
        assertNotNull(def);
        assertEquals(2, def.getConfigDef().getRangeCount());
        

    }

