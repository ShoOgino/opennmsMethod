    /**
     * Test adding and event to a specific file
     *
     */
    public void testAddEventToProgrammaticStore() {
        EventconfFactory factory=EventconfFactory.getInstance();
        Event event=getAddableEvent();
        
        factory.addEventToProgrammaticStore(event);
        
        //Check that the new Event is still there
        {
            List<Event> events=factory.getEvents(newUEI);
  
            assertNotNull("Should be at least one event", events);
            assertEquals("Should be only one event", 1, events.size());
            Event fetchedEvent=events.get(0);
            checkAddableEvent(fetchedEvent);
        }
        
        try {
            factory.saveCurrent();
            EventconfFactory.reload();
        } catch (Exception e) {
            e.printStackTrace();
            fail("Saving/reloading should not have caused an execption ");
        }
        
        //We are expecting this new file to be there - if it's not, that's an issue
        m_fa.expecting(new File(m_fa.getTempDir().getAbsolutePath()+File.separator+"etc"+File.separator+"events"),"programmatic.events.xml");
        //Check again after the reload
        {
            List<Event> events=factory.getEvents(newUEI);
  
            assertNotNull("Should be at least one event", events);
            assertEquals("Should be only one event", 1, events.size());
            Event fetchedEvent=events.get(0);
            checkAddableEvent(fetchedEvent);
        }
       
    }

