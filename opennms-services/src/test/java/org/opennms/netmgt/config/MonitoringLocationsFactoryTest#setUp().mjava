    @Before
    public void setUp() throws Exception {
        
        MockNetwork network = new MockNetwork();

        MockDatabase db = new MockDatabase();
        db.populate(network);

        DataSourceFactory.setInstance(db);

        InputStream stream = getClass().getResourceAsStream("/org/opennms/netmgt/config/monitoring-locations.testdata.xml");
        m_locationFactory = new MonitoringLocationsFactory(stream);
        stream.close();
        
        SnmpPeerFactory.init();
        
        stream = getClass().getResourceAsStream("/org/opennms/netmgt/config/poller-configuration.testdata.xml");
        m_pollerConfigManager = new TestPollerConfigManager(stream, "localhost", false);
        stream.close();
        
    }

