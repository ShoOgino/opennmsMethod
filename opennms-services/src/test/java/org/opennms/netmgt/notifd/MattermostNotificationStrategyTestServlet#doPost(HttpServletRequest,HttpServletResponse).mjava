    @Override protected void doPost(final HttpServletRequest req, final HttpServletResponse resp) throws ServletException, IOException {
        if (! "application/json".equals(req.getContentType())) {
        	squawk(resp, "Invalid content type " + req.getContentType());
        }
        
        m_inputJson = null;
        JSONParser jp = new JSONParser();
        try {
			Object inStuff = jp.parse(req.getReader());
			if (inStuff instanceof JSONObject) {
				m_inputJson = (JSONObject)inStuff;
			}
		} catch (ParseException e1) {
			squawk(resp, "Input is not well-formed JSON");
			return;
		}
        
        if ((! m_inputJson.containsKey("text")) || "".equals(m_inputJson.get("text"))) {
        	squawk(resp, "No text specified");
        	return;
        }
        
        if ((! m_inputJson.containsKey("username")) || "".equals(m_inputJson.get("username"))) {
        	squawk(resp, "No username specified");
        	return;
        }
        
        final String responseText = "ok";
        final ServletOutputStream os = resp.getOutputStream();
        os.print(responseText);
        os.close();
        resp.setContentType("text/plain");
        resp.setContentLength(responseText.length());
    }

