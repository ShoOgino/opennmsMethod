    private void assertTasksWithEmail(NotificationTask[] tasks, String... emails) throws Exception {
        assertNotNull(tasks);
        assertEquals("Unexpected number of tasks", emails.length, tasks.length);
        for(String email : emails) {
            assertNotNull("Expected to find a task with email "+email+" in "+tasks, findTaskWithEmail(tasks, email));
        }
    }

