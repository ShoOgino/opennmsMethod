    public synchronized List<Event> anticipateOutageClosed(MockElement element, final Event regainService) {
        List<Event> outageResolvedEvents = new ArrayList<Event>();
        MockVisitor outageCounter = new MockVisitorAdapter() {
            @Override
            public void visitService(MockService svc) {
                if ((m_db.hasOpenOutage(svc) || anticipatesOpen(svc)) && !anticipatesClose(svc)) {
                    // Decrease the open ones.. leave the total the same
                    m_expectedOpenCount--;
                    outageResolvedEvents.add(svc.createOutageResolvedEvent());
                    for (Outage outage : m_db.getOpenOutages(svc)) {
                        MockUtil.println("Anticipating outage closed: "+outage);

                        addToOutageList(m_pendingCloses, regainService, outage);
                    }
                }
            }
        };
        element.visit(outageCounter);
        return outageResolvedEvents;
    }

