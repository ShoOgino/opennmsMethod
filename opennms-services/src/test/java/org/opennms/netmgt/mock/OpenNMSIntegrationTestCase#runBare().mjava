    @Override
    public void runBare() throws Throwable {
        try {
            if (!s_setupHomeDir) {
                setupOpenNMSHomeDir();
                s_setupHomeDir = true;
            }
            super.runBare();
        } finally {
            stopAgent();
        }
    }

