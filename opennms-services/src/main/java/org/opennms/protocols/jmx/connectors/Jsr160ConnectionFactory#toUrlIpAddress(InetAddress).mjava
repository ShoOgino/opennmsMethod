    /**
     * Method that wraps IPv6 addresses in square brackets so that they are parsed
     * correctly by the {@link JMXServiceURL} class.
     */
    private static String toUrlIpAddress(InetAddress addr) {
        if (addr instanceof Inet6Address) {
            return String.format("[%s]", InetAddressUtils.str(addr));
        } else {
            return InetAddressUtils.str(addr);
        }
    }

