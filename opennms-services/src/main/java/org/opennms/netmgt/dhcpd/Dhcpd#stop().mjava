    /**
     * Stops the currently running instance of the DHCP server. If the server is
     * not running, then this command is silently discarded.
     * 
     */
    public synchronized void stop() {
        if (m_worker == null)
            return;

        // set the pending status
        //
        setStatus(STOP_PENDING);

        // stop the receiver
        //
        m_listener.stop();

        // close the server socket
        //
        try {
            m_server.close();
        } catch (IOException ex) {
        }

        // close all the clients
        //
        Object[] list = null;
        synchronized (m_clients) {
            list = m_clients.toArray();
        }

        for (int x = 0; list != null && x < list.length; x++) {
            ((Client) list[x]).stop();
        }

        m_server = null;
        m_clients = null;
        m_worker = null;
        m_listener = null;
        setStatus(STOPPED);
    }

