    /**
     * This method is used to convert the event host into a hostname id by
     * performing a lookup in the database. If the conversion is successful then
     * the corresponding hosname will be returned to the caller.
     * 
     * @param hostip
     *            The event host
     * 
     * @return The hostname
     * 
     * @exception java.sql.SQLException
     *                Thrown if there is an error accessing the stored data or
     *                the SQL text is malformed.
     * 
     * @see EventdConstants#SQL_DB_HOSTIP_TO_HOSTNAME
     * 
     */
    // FIXME: This uses JdbcTemplate and not the passed in connection
    private String getHostName(String hostip, Connection connection) throws SQLException {
//        PreparedStatement getHostNameStmt = getConnection().prepareStatement(EventdConstants.SQL_DB_HOSTIP_TO_HOSTNAME);
//
//        try {
//            // talk to the database and get the identifer
//            String hostname = hostip;
//
//            getHostNameStmt.setString(1, hostip);
//            ResultSet rset = null;
//
//            try {
//                rset = getHostNameStmt.executeQuery();
//                if (rset.next()) {
//                    hostname = rset.getString(1);
//                }
//            } catch (SQLException e) {
//                throw e;
//            } finally {
//                rset.close();
//            }
//
//            // hostname can be null - if it is, return the ip
//            if (hostname == null) {
//                hostname = hostip;
//            }
//
//            return hostname;
//        } finally {
//            getHostNameStmt.close();
//        }
        return new SimpleJdbcTemplate(getDataSource()).queryForObject(EventdConstants.SQL_DB_HOSTIP_TO_HOSTNAME, String.class, new Object[] { hostip });
    }

