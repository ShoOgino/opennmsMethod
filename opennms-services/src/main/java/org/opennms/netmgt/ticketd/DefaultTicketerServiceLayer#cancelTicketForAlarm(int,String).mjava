    /**
     * @see org.opennms.netmgt.ticketd.TicketerServiceLayer.cancelTicketForAlarm(int, String)
     */
	public void cancelTicketForAlarm(int alarmId, String ticketId) {
		OnmsAlarm alarm = m_alarmDao.get(alarmId);
		if (alarm == null) {
			throw new ObjectRetrievalFailureException("Unable to locate Alarm with ID: "+alarmId, null);
		}

		setTicketState(ticketId, Ticket.State.CANCELLED);
        
        alarm.setTTicketState(TroubleTicketState.CANCELLED);
        m_alarmDao.saveOrUpdate(alarm);
        
	}

