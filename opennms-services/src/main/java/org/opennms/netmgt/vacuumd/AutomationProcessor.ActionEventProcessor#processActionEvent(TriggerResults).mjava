        /**
         * Generates the list of events that should be sent once the transation is closed.
         */
        List<Event> processActionEvent(TriggerResults triggerResults) throws SQLException {
            if (triggerResults.hasTrigger() && forEachResult()) {
                return processTriggerResults(triggerResults);
            } else if (hasEvent()) {
                return Collections.singletonList(getEvent());
            }
            return Collections.emptyList();
        }

