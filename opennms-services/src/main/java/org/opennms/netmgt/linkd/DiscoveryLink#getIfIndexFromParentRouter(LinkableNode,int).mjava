	private int getIfIndexFromParentRouter(LinkableNode parentnode, int nodeid) {
		Category log = ThreadCategory.getInstance(getClass());

		if (!parentnode.hasRouteInterfaces())
			return -1;
		Iterator ite = parentnode.getRouteInterfaces().iterator();
		while (ite.hasNext()) {
			RouterInterface routeIface = (RouterInterface) ite.next();

			if (routeIface.getMetric() == -1) {
				if (log.isDebugEnabled())
					log
							.debug("getIfIndexFromParentRouter: Data Link interface with nodeid "
									+ parentnode.getNodeId()
									+ " has invalid metric.");
				continue;
			}

			int ifindex = routeIface.getIfindex();

			if (ifindex == 0 || ifindex == -1)
				continue;

			int snmpiftype = routeIface.getSnmpiftype();

			// no processing ethernet type or unknown
			if (snmpiftype == SNMP_IF_TYPE_ETHERNET || snmpiftype == -1)
				continue;

			InetAddress nexthop = routeIface.getNextHop();
			if (nexthop.toString().equals("0.0.0.0"))
				continue; // this case must be analized in detail
			if (nexthop.toString().equals("127.0.0.1"))
				continue;

			int curnodeid = -1;
			curnodeid = routeIface.getNodeparentid();

			if (curnodeid == nodeid)
				return ifindex;
		}
		return -1;
	}

