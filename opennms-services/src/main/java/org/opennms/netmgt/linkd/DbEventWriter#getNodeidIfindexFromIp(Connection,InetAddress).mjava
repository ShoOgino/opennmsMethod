	private AtInterface getNodeidIfindexFromIp(Connection dbConn, InetAddress ipaddr)
	throws SQLException {


		if (ipaddr.isLoopbackAddress() || ipaddr.getHostAddress().equals("0.0.0.0")) return null;
		
		Category log = ThreadCategory.getInstance(getClass());
		
		int atnodeid = -1;
		int atifindex = -1;
		
		PreparedStatement stmt = dbConn.prepareStatement(SQL_GET_NODEID_IFINDEX_IPINT);
		stmt.setString(1, ipaddr.getHostAddress());

		if (log.isDebugEnabled()) 
			log.debug("getNodeidIfindexFromIp: executing SQL Statement " + SQL_GET_NODEID_IFINDEX_IPINT + " with ip address=" + ipaddr.getHostAddress());
		ResultSet rs = stmt.executeQuery();

		if (!rs.next()) {
			rs.close();
			stmt.close();
			return null;
		}
		
		int ndx = 1;
		atnodeid = rs.getInt(ndx++);
		if (rs.wasNull()) {
			return null;
		}
		// save info for DiscoveryLink
		AtInterface ati = new AtInterface(atnodeid,ipaddr.getHostAddress());

		// get ifindex if exists
		atifindex = rs.getInt(ndx++);
		if (rs.wasNull()) {
			if (log.isInfoEnabled())
				log.info("store: no ifindex (-1) found for ipaddress "
						+ ipaddr + ".");
			
		} else {
			if (log.isInfoEnabled())
				log.info("store: ifindex " + atifindex + " found for ipaddress "
						+ ipaddr + ".");
			
			ati.setIfindex(atifindex);
		}
		
		return ati;
		
	}

