    private Double getCounterValue(String id, Double current) {
        if (m_localCache.containsKey(id) == false) {
            Double last = s_cache.get(id);
            if (log().isDebugEnabled()) {
                log().debug("getAttributeValue: " + id + "(counter) last=" + last + ", current=" + current);
            }
            s_cache.put(id, current);
            if (last == null) {
                m_localCache.put(id, Double.NaN);
                log().info("getAttributeValue: unknown last value, ignoring current");
            } else if (current < last) {
                log().info("getAttributeValue: counter reset detected, ignoring value");
                m_localCache.put(id, Double.NaN);
            } else {
                m_localCache.put(id, current - last);
            }
        }
        return m_localCache.get(id);
    }

