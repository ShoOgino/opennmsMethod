	@Override
	public double evaluate(Map<String, Double> values) throws ThresholdExpressionException {
		// Add all of the variable values to the script context
		BindingsSniffer context = new BindingsSniffer();
		context.putAll(values);
		context.put("math", new MathBinding());
		double result = Double.NaN;
		try {
			// Evaluate the script expression
			result = (Double)m_parser.createExpression(m_expression.getExpression()).evaluate(context);
		} catch (Throwable e) {
			throw new ThresholdExpressionException("Error while evaluating expression "+m_expression.getExpression()+": " + e.getMessage(), e);
		}
		return result;
	}

