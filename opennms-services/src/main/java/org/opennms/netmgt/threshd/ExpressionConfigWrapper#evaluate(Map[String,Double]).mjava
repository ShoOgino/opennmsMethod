	@Override
	public double evaluate(Map<String, Double> values) throws ThresholdExpressionException {
		// Add all of the variable values to the script context
		m_parser.getBindings(ScriptContext.ENGINE_SCOPE).putAll(values);
		double result = Double.NaN;
		try {
			// Evaluate the script expression
			result = (Double)m_parser.eval(m_expression.getExpression());
		} catch (Throwable e) {
			throw new ThresholdExpressionException("Error while evaluating expression "+m_expression.getExpression()+": " + e.getMessage());
		}
		return result;
	}

