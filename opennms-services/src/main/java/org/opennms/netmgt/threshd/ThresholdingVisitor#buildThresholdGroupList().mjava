    public void buildThresholdGroupList() {
        initThresholdsDao();
        // The next code was extracted from Threshd.scheduleService
        //
        //
        // Searching for packages defined on threshd-configuration.xml
        // Compare interface/service pair against each threshd package
        // For each match, create new ThresholdableService object and
        // schedule it for collection
        //
        List<String> groupNameList = new ArrayList<String>();
        for (org.opennms.netmgt.config.threshd.Package pkg : m_threshdConfig.getConfiguration().getPackage()) {

            // Make certain the the current service is in the package
            // and enabled!
            //
            if (!m_threshdConfig.serviceInPackageAndEnabled(m_serviceName, pkg)) {
                if (log().isDebugEnabled())
                    log().debug("createThresholdingVisitor: address/service: " + m_hostAddress + "/" + m_serviceName + " not scheduled, service is not enabled or does not exist in package: " + pkg.getName());
                continue;
            }

            // Is the interface in the package?
            //
            log().debug("createThresholdingVisitor: checking ipaddress " + m_hostAddress + " for inclusion in pkg " + pkg.getName());
            boolean foundInPkg = m_threshdConfig.interfaceInPackage(m_hostAddress, pkg);
            if (!foundInPkg) {
                // The interface might be a newly added one, rebuild the package
                // to ipList mapping and again to verify if the interface is in
                // the package.
                //
                m_threshdConfig.rebuildPackageIpListMap();
                foundInPkg = m_threshdConfig.interfaceInPackage(m_hostAddress, pkg);
            }
            if (!foundInPkg) {
                if (log().isDebugEnabled())
                    log().debug("createThresholdingVisitor: address/service: " + m_hostAddress + "/" + m_serviceName + " not scheduled, interface does not belong to package: " + pkg.getName());
                continue;
            }

            // Getting thresholding-group for selected service and adding to groupNameList
            //
            for (org.opennms.netmgt.config.threshd.Service svc : pkg.getService()) {
                if (svc.getName().equals(m_serviceName)) {
                    String groupName = null;
                    for (org.opennms.netmgt.config.threshd.Parameter parameter : svc.getParameter()) {
                        if (parameter.getKey().equals("thresholding-group")) {
                            groupName = parameter.getValue();
                        }
                    }
                    if (groupName != null) {
                        groupNameList.add(groupName);
                        log().debug("createThresholdingVisitor:  address/service: " + m_hostAddress + "/" + m_serviceName + ". Adding Group " + groupName);
                    }
                }
            }
        }

        if (!groupNameList.isEmpty()) {
            m_groupNameList = groupNameList;
        }
    }

