    public Double getAttributeValue(String ds) {
        if (m_attributes == null || m_attributes.get(ds) == null) {
            log().warn("getAttributeValue: can't find attribute called " + ds + " on " + m_resource);
            return null;
        }
        String numValue = m_attributes.get(ds).getNumericValue();
        if (numValue == null) {
            log().warn("getAttributeValue: can't find numeric value for " + ds + " on " + m_resource);
            return null;
        }
        String id = m_resource.toString() + "." + ds;
        Double current = Double.parseDouble(numValue);
        if (m_attributes.get(ds).getType().toLowerCase().startsWith("counter") == false) {
            if (log().isDebugEnabled()) {
                log().debug("getAttributeValue: " + id + "(gauge) value= " + current);
            }
            return current;
        }
        Double last = s_cache.get(id);
        if (log().isDebugEnabled()) {
            log().debug("getAttributeValue: " + id + "(counter) last=" + last + ", current=" + current);
        }
        s_cache.put(id, current);
        if (last == null) {
            return Double.NaN;
        }
        if (current < last) {
            log().info("getAttributeValue: counter reset detected, ignoring value");
            return Double.NaN;
        }
        return current - last;
    }

