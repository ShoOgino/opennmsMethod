        public Event getEventForState(Status status, Date date, double dsValue) {
            switch (status) {
            case TRIGGERED:
                if ("low".equals(getThresholdConfig().getType())) {
                    return createBasicEvent(EventConstants.LOW_THRESHOLD_EVENT_UEI, date, dsValue);
                } else if ("high".equals(getThresholdConfig().getType())) {
                    return createBasicEvent(EventConstants.HIGH_THRESHOLD_EVENT_UEI, date, dsValue);
                } else {
                    throw new IllegalArgumentException("Threshold type " + getThresholdConfig().getType().toString() + " is not supported");
                } 
                
            case RE_ARMED:
                if ("low".equals(getThresholdConfig().getType())) {
                    return createBasicEvent(EventConstants.LOW_THRESHOLD_REARM_EVENT_UEI, date, dsValue);
                } else if ("high".equals(getThresholdConfig().getType())) {
                    return createBasicEvent(EventConstants.HIGH_THRESHOLD_REARM_EVENT_UEI, date, dsValue);
                } else {
                    throw new IllegalArgumentException("Threshold type " + getThresholdConfig().getType().toString() + " is not supported");
                } 
                
            case NO_CHANGE:
                return null;

            default:
                throw new IllegalArgumentException("Status " + status + " is not supported for converting to an event.");
            }
        }

