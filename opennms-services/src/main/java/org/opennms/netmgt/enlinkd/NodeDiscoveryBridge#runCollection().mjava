	protected void runCollection() {

		final Date now = new Date();

		Map<Integer,String> vlanmap = getVtpVlanMap();
		
		if (vlanmap.isEmpty())
			walkBridge(null,null);
		else {
			for (Entry<Integer, String> entry: vlanmap.entrySet()) {
				String community = getPeer().getReadCommunity();
				LOG.debug("run: cisco vlan collection setting peer community: {} with VLAN {}",
						community, entry.getKey());
				getPeer().setReadCommunity(community + "@" + entry.getKey());
				walkBridge(entry.getKey(), entry.getValue());
				getPeer().setReadCommunity(community);
			}
		}

		m_linkd.getQueryManager().reconcileBridge(getNodeId(), now);
		LOG.debug("run: collecting: {}", getPeer());
	}

