        @Override
        public void  store(BroadcastDomain domain, Date now) {
            for (SharedSegment segment: domain.getTopology()) {
                if (segment.noMacsOnSegment()) {
                    for (BridgeBridgeLink link: segment.getBridgeBridgeLinks()) {
                        link.setBridgeBridgeLinkLastPollTime(now);
                        saveBridgeBridgeLink(link);
                    }
                } else {
                    for (BridgeMacLink link: segment.getBridgeMacLinks()) {
                        link.setBridgeMacLinkLastPollTime(now);
                        saveBridgeMacLink(link);
                    }
                }
            }
            
            for (Integer curNodeId: domain.getUpdatedNodes()) {
                m_bridgeMacLinkDao.deleteByNodeIdOlderThen(curNodeId, now);
                m_bridgeMacLinkDao.flush();
                m_bridgeBridgeLinkDao.deleteByNodeIdOlderThen(curNodeId, now);
                m_bridgeBridgeLinkDao.deleteByDesignatedNodeIdOlderThen(curNodeId, now);
                m_bridgeBridgeLinkDao.flush();
            }

        }

