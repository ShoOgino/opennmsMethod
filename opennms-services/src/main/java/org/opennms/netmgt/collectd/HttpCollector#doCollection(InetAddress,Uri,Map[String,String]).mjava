    /**
     * Performs HTTP collection.
     * 
     * Couple of notes to make the implementation of this client library
     * less obtuse:
     * 
     *   - HostConfiguration class is not created here because the library
     *     builds it when a URI is defined.
     *     
     * @param uriDef
     * @param parameters
     * @throws HttpException
     * @throws IOException
     */
    private void doCollection(InetAddress address, Uri uriDef, Map<String, String> parameters) throws HttpCollectorException {

        HttpClient client = null;
        HttpMethod method = null;
        
        try {
            client = new HttpClient(buildParams(uriDef, parameters));
            method = buildHttpMethod(address, uriDef);
            client.executeMethod(method);
            List<HttpCollectionAttribute> butes = processResponse(method.getResponseBodyAsString(), uriDef);
            
            if (butes.isEmpty()) {
                throw new HttpCollectorException("No attributes specified were found: ",client);
            }
        } catch (URIException e) {
            throw new HttpCollectorException("Error building HttpClient URI", client);
        } catch (HttpException e) {
            throw new HttpCollectorException("Error building HttpMethod", client);
        } catch (IOException e) {
            throw new HttpCollectorException("IO Error retrieving page", client);
        } finally {
            method.releaseConnection();
        }
        
    }

