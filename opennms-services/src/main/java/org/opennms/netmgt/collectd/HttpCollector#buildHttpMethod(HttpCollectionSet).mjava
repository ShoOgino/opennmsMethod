    private static HttpRequestBase buildHttpMethod(final HttpCollectionSet collectionSet) throws URISyntaxException {
        HttpRequestBase method;
        URI uri = buildUri(collectionSet);
        final Url url = collectionSet.getUriDef().getUrl();

        if ("GET".equals(url.getMethod())) {
            method = buildGetMethod(uri, collectionSet);
        } else {
            method = buildPostMethod(uri, collectionSet);
        }

        if (url.getVirtualHost().isPresent() && !url.getVirtualHost().get().trim().isEmpty()) {
            method.setHeader(HTTP.TARGET_HOST, url.getVirtualHost().get());
        }
        return method;
    }

