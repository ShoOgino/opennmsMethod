    protected void onInit() {


        try {
            log().debug("start: Initializing the trapd config factory");
            TrapdConfigFactory.init();
        } catch (MarshalException e) {
            log().error("Failed to load configuration", e);
            throw new UndeclaredThrowableException(e);
        } catch (ValidationException e) {
            log().error("Failed to load configuration", e);
            throw new UndeclaredThrowableException(e);
        } catch (IOException e) {
            log().error("Failed to load configuration", e);
            throw new UndeclaredThrowableException(e);
        }

        try {
            // clear out the known nodes
            TrapdIPMgr.dataSourceSync();
        } catch (SQLException e) {
            log().error("Failed to load known IP address list", e);
            throw new UndeclaredThrowableException(e);
        }

        EventIpcManagerFactory.init();
        EventconfFactory.init();

        TrapHandler trapHandler = getTrapHandler();
        trapHandler.setTrapdConfig(TrapdConfigFactory.getInstance());
        trapHandler.setEventManager(EventIpcManagerFactory.getIpcManager());
        trapHandler.setEventConfDao(EventconfFactory.getInstance());
        trapHandler.afterPropertiesSet();

        trapHandler.init();
    }

