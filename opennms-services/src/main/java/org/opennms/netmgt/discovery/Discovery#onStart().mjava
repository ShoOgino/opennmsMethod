    protected void onStart() {
		if (m_manager == null) {
    	    log().error("The discovery service has not been initialized and start() was called");
                throw new IllegalStateException("The discovery service has not been successfully initialized");
    	}


    	try {
            m_eventWriter.start();
        } catch (Exception ex) {
            log().error("Failed to start event writer", ex);
            throw new UndeclaredThrowableException(ex);
        }

        try {
            m_manager.start();
        } catch (Exception ex) {
            try {
                m_eventWriter.stop();
            } catch (Exception exx) {
            }

            log().error("Failed to start ping manager", ex);
            throw new UndeclaredThrowableException(ex);
        }
	}

