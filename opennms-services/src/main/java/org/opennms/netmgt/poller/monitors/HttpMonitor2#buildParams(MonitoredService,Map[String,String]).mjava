    private HttpClientParams buildParams(MonitoredService svc, Map<String, String> parameters) {
        HttpClientParams params = new HttpClientParams();
        params.setVersion(computeVersion(parameters));
        params.setSoTimeout(Integer.parseInt(ParameterMap.getKeyedString(parameters, "timeout", DEFAULT_TIMEOUT)));
        params.setVirtualHost(ParameterMap.getKeyedString(parameters, "virtual-host", DEFAULT_VIRTUAL_HOST));
        int retryCount = ParameterMap.getKeyedInteger(parameters, "retry", DEFAULT_RETRY);
        params.setParameter(HttpMethodParams.RETRY_HANDLER, new DefaultHttpMethodRetryHandler(retryCount, false));
        return params;
    }

