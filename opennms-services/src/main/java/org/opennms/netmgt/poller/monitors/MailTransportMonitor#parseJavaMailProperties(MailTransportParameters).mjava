    private void parseJavaMailProperties(final MailTransportParameters mailParms) {
        
        ReadmailTest readTest = mailParms.getReadTest();

        List<JavamailProperty> propertyList = new ArrayList<JavamailProperty>();
        if (readTest != null) {
            propertyList = readTest.getJavamailPropertyCollection();
        }

        SendmailTest sendTest = mailParms.getSendTest();
        if (sendTest != null) {
            List<JavamailProperty> sendTestProperties = sendTest.getJavamailPropertyCollection();
            propertyList.addAll(sendTestProperties);
        }
        
        Properties props = mailParms.getJavamailProperties();
        for (JavamailProperty property : propertyList) {
            props.setProperty(property.getName(), property.getValue());
        }
        
        mailParms.setJavamailProperties(props);
    }

