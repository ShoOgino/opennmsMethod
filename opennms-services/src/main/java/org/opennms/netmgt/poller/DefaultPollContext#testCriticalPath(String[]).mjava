    boolean testCriticalPath(String[] criticalPath) {
        // TODO: Generalize the service
        InetAddress addr = null;
        boolean result = true;
    
        Category log = log();
        log.debug("Test critical path IP " + criticalPath[0]);
        try {
            addr = InetAddress.getByName(criticalPath[0]);
        } catch (UnknownHostException e) {
            log.error(
                        "failed to convert string address to InetAddress "
                                + criticalPath[0]);
            return true;
        }
        try {
            IcmpPlugin p = new IcmpPlugin();
            Map<String, Object> map = new HashMap<String, Object>();
            map.put(
                    "retry",
                    new Long(
                             OpennmsServerConfigFactory.getInstance().getDefaultCriticalPathRetries()));
            map.put(
                    "timeout",
                    new Long(
                             OpennmsServerConfigFactory.getInstance().getDefaultCriticalPathTimeout()));
    
            result = p.isProtocolSupported(addr, map);
        } catch (IOException e) {
            log.error("IOException when testing critical path " + e);
        }
        return result;
    }

