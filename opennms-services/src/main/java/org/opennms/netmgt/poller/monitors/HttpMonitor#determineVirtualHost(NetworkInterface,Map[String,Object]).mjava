    private String determineVirtualHost(NetworkInterface iface, final Map<String, Object> parameters) {
        boolean res = ParameterMap.getKeyedBoolean(parameters, "resolve-ip", false);
        String virtualHost = ParameterMap.getKeyedString(parameters, "host-name", null);

        
        if (isBlank(virtualHost)) {
            if (res) {
                virtualHost = ((InetAddress) iface.getAddress()).getCanonicalHostName();
            } else {
                virtualHost = ((InetAddress) iface.getAddress()).getHostAddress();
            }
        }
        return virtualHost;
    }

