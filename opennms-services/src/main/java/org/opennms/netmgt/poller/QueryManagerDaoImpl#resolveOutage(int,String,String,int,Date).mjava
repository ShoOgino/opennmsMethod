    /** {@inheritDoc} */
    @Override
    public void resolveOutage(int nodeId, String ipAddr, String svcName, int regainedEventId, Date time) {
        LOG.info("resolving outage for {}:{}:{} with resolution {}:{}", nodeId, ipAddr, svcName, regainedEventId, time);
        int serviceId = m_serviceTypeDao.findByName(svcName).getId();
        
        OnmsEvent event = m_eventDao.get(regainedEventId);
        OnmsMonitoredService service = m_monitoredServiceDao.get(nodeId, InetAddressUtils.addr(ipAddr), serviceId);

        // Update the outage
        OnmsOutage outage = m_outageDao.currentOutageForService(service);
        if (outage == null) {
            LOG.warn("Cannot find outage for service: {}", service);
        } else {
            outage.setServiceRegainedEvent(event);
            outage.setIfRegainedService(new Timestamp(time.getTime()));
            m_outageDao.saveOrUpdate(outage);
        }
    }

