    void login(HttpClient client, Map<String, String> map) {
        String formLoginPath = ParameterMap.getKeyedString(map, "login-form-cookie-path", DEFAULT_FORM_LOGIN_PATH);
        
        GetMethod authGet = new GetMethod(formLoginPath);
        try {
            client.executeMethod(authGet);
        } catch (Exception e) {
            throw new HttpMonitorException("problem processing from login", new RuntimeException(e));
        } finally {
            if (authGet != null) authGet.releaseConnection();
        }
        
        String cookieSite = ParameterMap.getKeyedString(map, "login-form-cookie-site", client.getHostConfiguration().getHost());
        String cookiePath = ParameterMap.getKeyedString(map, "login-form-cookie-path", "/");
        int cookiePort = client.getHostConfiguration().getPort();
        
        CookieSpec cookiespec = CookiePolicy.getDefaultSpec();
        Cookie[] initcookies = cookiespec.match(cookieSite, cookiePort, "/", false, client.getState().getCookies());
        
        
        //FIXME: Come up with way to define form parameters as value pairs
        
        PostMethod authPost = new PostMethod(formLoginPath);
//        NameValuePair[]valuePairs = new NameValuePair[7];
        List<NameValuePair> valuePairs = new ArrayList<NameValuePair>();
        String action = ParameterMap.getKeyedString(map, "login-form-action", "login");
        valuePairs.add(new NameValuePair("action", action));
        
        String url = ParameterMap.getKeyedString(map, "login-form-path", "/index.html");
        valuePairs.add(new NameValuePair("url", url));
        
        String userId = ParameterMap.getKeyedString(map, "login-form-user", "user");
        valuePairs.add(new NameValuePair("userid", userId));
        
        String password = ParameterMap.getKeyedString(map, "login-form-password", "password");
        valuePairs.add(new NameValuePair("password", password));
        authPost.setRequestBody((NameValuePair[])valuePairs.toArray());
        
        String versionString = ParameterMap.getKeyedString(map, "login-form-httpVersion", "1.1");
        authPost.getParams().setVersion(new HttpVersion(determineMajorVersion(versionString), determineMinorVersion(versionString)));
        
        //somethings to consider in configuration
        authPost.setFollowRedirects(true);
        
    }

