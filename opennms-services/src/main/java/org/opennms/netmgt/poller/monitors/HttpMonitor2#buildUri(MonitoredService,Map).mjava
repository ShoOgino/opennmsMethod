    private URI buildUri(MonitoredService svc, Map map) throws URIException {
        String scheme;
        String userInfo;
        String host;
        int port;
        String path;
        String query;
        String fragment;
        
        scheme = ParameterMap.getKeyedString(map, "scheme", DEFAULT_SCHEME);
        userInfo = ParameterMap.getKeyedString(map, "user-info", DEFAULT_USER_INFO);
        host = svc.getIpAddr();
        port = ParameterMap.getKeyedInteger(map, "port", DEFAULT_PORT);
        path = ParameterMap.getKeyedString(map, "path", DEFAULT_PATH);
        query = ParameterMap.getKeyedString(map, "query", DEFAULT_QUERY);
        fragment = ParameterMap.getKeyedString(map, "fragment", DEFAULT_FRAGMENT);
        return new URI(scheme, userInfo, host, port, path, query, fragment);
    }

