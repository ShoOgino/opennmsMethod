    /**
     * <p>forEachMember</p>
     *
     * @param withTreeLock a boolean.
     * @param iter a {@link org.opennms.netmgt.poller.pollables.PollableContainer.Iter} object.
     */
    protected void forEachMember(boolean withTreeLock, final Iter iter) {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                for (Iterator<PollableElement> it = getMembers().iterator(); it.hasNext(); ) {
                    PollableElement element = it.next();
                    iter.forEachElement(element);
                }
            }
        };
        
        if (withTreeLock) {
            withTreeLock(r);
        } else {
            r.run();
        }
    }

