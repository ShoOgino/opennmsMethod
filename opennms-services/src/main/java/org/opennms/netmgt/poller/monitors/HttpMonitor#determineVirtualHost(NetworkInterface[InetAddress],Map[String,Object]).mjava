    private String determineVirtualHost(NetworkInterface<InetAddress> iface, final Map<String, Object> parameters) {
        boolean res = ParameterMap.getKeyedBoolean(parameters, PARAMETER_RESOLVE_IP, false);
        String virtualHost = ParameterMap.getKeyedString(parameters, PARAMETER_HOST_NAME, null);

        
        if (isBlank(virtualHost)) {
            if (res) {
                virtualHost = ((InetAddress) iface.getAddress()).getCanonicalHostName();
            } else {
                virtualHost = ((InetAddress) iface.getAddress()).getHostAddress();
            }
        }
        return virtualHost;
    }

