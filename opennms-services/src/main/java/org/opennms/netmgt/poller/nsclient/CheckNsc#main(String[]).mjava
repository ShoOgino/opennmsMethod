    /**
     * @param args
     *            args[0] must contain the remote host name args[1] must
     *            contain the check name (e.g. CLIENTVERSION) args[2] (crit)
     *            and args[2] (warn) must contain a numeric value args[4] must
     *            contain an empty string or a parameter related to the check
     */
    public static void main(String[] args) {
        ArrayList arguments = new ArrayList();
        for (int i = 0; i < args.length; i++) {
            arguments.add(args[i]);
        }

        if (arguments.size() < 2) {
        	usage();
        	System.exit(1);
        }
        
        String  host         = (String)arguments.remove(0);
        String  command      = (String)arguments.remove(0);
        int warningLevel     = 0;
        int criticalLevel    = 0;
        String  clientParams = "";
        
        if (!arguments.isEmpty()) {
        	warningLevel  = Integer.parseInt((String)arguments.remove(0));
        }
        
        if (!arguments.isEmpty()) {
        	criticalLevel = Integer.parseInt((String)arguments.remove(0));
        }

        /* whatever's left gets merged into "arg1&arg2&arg3" */
        if (!arguments.isEmpty()) {
        	for (int i=0; i < arguments.size(); i++) {
        		clientParams += arguments.get(i);
        		if (i < (arguments.size() - 1)) {
        			clientParams += "&";
        		}
        	}
        }
        
        int port = 1248;
        
        if (host.indexOf(":") >= 0) {
        	port = Integer.parseInt(host.split(":")[1]);
        	host = host.split(":")[0];
        }

        NsclientManager client = null;
        NsclientPacket response = null;
        NsclientCheckParams params = null;
        
        try {
        	client = new NsclientManager(host, port);
        }
        catch (Exception e) {
        	usage("An error occurred creating a new NsclientManager.", e);
        }

        try {
        	client.setTimeout(5000);
        	client.init();
        }
        catch (Exception e) {
        	usage("An error occurred initializing the NsclientManager.", e);
        }

        try {
        	params = new NsclientCheckParams( warningLevel, criticalLevel, clientParams);
        }
        catch (Exception e) {
        	usage("An error occurred creating the parameter object.", e);
        }

        try {
        	response = client.processCheckCommand(
                                              NsclientManager.convertStringToType(command),
                                              params);
        }
        catch(Exception e) {
        	usage("An error occurred processing the command.", e);
        }
        
        if (response == null) {
        	usage("No response was returned.", null);
        } else {
            System.out.println("NsclientPlugin: "
                    + command
                    + ": "
                    + NsclientPacket.convertStateToString(response.getResultCode()) /* response.getResultCode() */
                    + " (" + response.getResponse() + ")");
        }
    }

