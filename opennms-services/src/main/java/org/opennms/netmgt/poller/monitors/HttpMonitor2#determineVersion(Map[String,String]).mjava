    public String determineVersion(Map<String, String> parameters) {
        String version = ParameterMap.getKeyedString(parameters, "version", DEFAULT_VERSION);
        if (isValidVersion(version)) {
            return version;
        } else {
            throw new HttpMonitorException("Incorrect version specified: ("+version+")", new IllegalArgumentException("Bad HTTP version paramenter: "+version));
        }
    }

