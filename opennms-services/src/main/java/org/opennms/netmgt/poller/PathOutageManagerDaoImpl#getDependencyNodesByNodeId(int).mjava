    @Override
    public Set<Integer> getDependencyNodesByNodeId(int nodeId) {
    	Set<Integer> depNodes = new TreeSet<Integer>();

    	final org.opennms.core.criteria.Criteria crit = new org.opennms.core.criteria.Criteria(OnmsPathOutage.class) 
    	.setAliases(Arrays.asList(new Alias[] {
    		new Alias("node", "node", JoinType.LEFT_JOIN)
    	}))
    	.addRestriction(new EqRestriction("node.id", nodeId));

    	List<OnmsPathOutage> l = pathOutageDao.findMatching(crit);
    	for (OnmsPathOutage cur: l) {
    		List<OnmsIpInterface> iface = ipInterfaceDao.findByNodeId(cur.getNode().getId());
    		for (OnmsIpInterface one: iface) {
    			if (one.getIpAddress().equals(cur.getCriticalPathIp())) {
    				depNodes.add(cur.getNode().getId());
    			}
    		}
    	}

    	return depNodes;
    }

