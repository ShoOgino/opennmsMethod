    @Override
    public Set<Integer> getDependencyNodesByNodeId(int nodeId) {
    	Set<Integer> depNodes = new TreeSet<Integer>();
    	
    	final org.opennms.core.criteria.Criteria crit = new org.opennms.core.criteria.Criteria(OnmsPathOutage.class) 
    	.addRestriction(new EqRestriction("nodeId", nodeId));
    	
    	List<OnmsPathOutage> l = pathOutageDao.findMatching(crit);
    	for (OnmsPathOutage cur: l) {
    		List<OnmsIpInterface> iface = ipInterfaceDao.findByNodeId(cur.getNodeId());
    		for (OnmsIpInterface one: iface) {
    			if (one.getIpAddress().equals(cur.getCriticalPathIp())) {
    				depNodes.add(cur.getNodeId());
    			}
    		}
    	}    	
    	
    	return depNodes;
    }

