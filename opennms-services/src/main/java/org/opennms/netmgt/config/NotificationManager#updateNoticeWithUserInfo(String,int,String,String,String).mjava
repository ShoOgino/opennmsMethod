    /**
     * @throws IOException 
     * @throws ValidationException 
     * @throws MarshalException 
     * 
     */
    public void updateNoticeWithUserInfo(final String userId, final int noticeId, final String media, final String contactInfo, final String autoNotify) throws SQLException, MarshalException, ValidationException, IOException {
        Category log = log();
        if (noticeId < 0) return;
        int userNotifId = getUserNotifId();
        if (log.isDebugEnabled()) {
            log.debug("updating usersnotified: ID = " + userNotifId+ " User = " + userId + ", notice ID = " + noticeId + ", contactinfo = " + contactInfo + ", media = " + media + ", autoNotify = " + autoNotify);
        }
        Connection connection = null;
        try {
            connection = getConnection();
            PreparedStatement insert = connection.prepareStatement("INSERT INTO usersNotified (id, userid, notifyid, notifytime, media, contactinfo, autonotify) values (?,?,?,?,?,?,?)");
    
            insert.setInt(1, userNotifId);
            insert.setString(2, userId);
            insert.setInt(3, noticeId);
    
            insert.setTimestamp(4, new Timestamp((new Date()).getTime()));
    
            insert.setString(5, media);
            insert.setString(6, contactInfo);
            insert.setString(7, autoNotify);
    
            insert.executeUpdate();
            insert.close();
        } finally {
            if (connection != null) {
                try {
                    connection.close();
                } catch (SQLException e) {
                }
            }
        }
    }

