    private void deleteAlarmsForService(Connection dbConn, long nodeId, String ipAddr, String service) throws SQLException {
        PreparedStatement stmt = null;
        final DBUtils d = new DBUtils(getClass());

        try {
            stmt = dbConn.prepareStatement("DELETE FROM alarms " +
                                            "WHERE nodeid = ? " +
                                             " AND ipaddr = ? " +
                                             " AND serviceid " +
                                             "  IN (SELECT serviceid " +
                                             "FROM service " +
                                            "WHERE servicename = ?)");
            d.watch(stmt);
            stmt.setLong(1, nodeId);
            stmt.setString(2, ipAddr);
            stmt.setString(3, service);
            int count = stmt.executeUpdate();

            log().debug("deleteAlarmsForService: deleted: "+count+" alarms for service: "+service);

        } finally {
            d.cleanUp();
        }
    }

