    DbIfServiceEntry[] getServices(Connection db) throws SQLException {
        PreparedStatement stmt = null;
        ResultSet rset = null;
        final DBUtils d = new DBUtils(getClass());
        List<DbIfServiceEntry> l;

        try {
            stmt = db.prepareStatement(SQL_LOAD_IFSVC_LIST);
            d.watch(stmt);
            stmt.setLong(1, m_nodeId);
            stmt.setString(2, m_ipAddr.getHostAddress());

            rset = stmt.executeQuery();
            d.watch(rset);
            l = new ArrayList<DbIfServiceEntry>();

            while (rset.next()) {
                int sid = rset.getInt(1);
                DbIfServiceEntry entry = DbIfServiceEntry.get(db, m_nodeId, m_ipAddr, sid);
                if (entry != null) {
                    l.add(entry);
                }
            }
        } finally {
            d.cleanUp();
        }

        DbIfServiceEntry[] entries = new DbIfServiceEntry[l.size()];
        return l.toArray(entries);
    }

