    DbIfServiceEntry[] getServices(Connection db) throws SQLException {
        PreparedStatement stmt = db.prepareStatement(SQL_LOAD_IFSVC_LIST);
        stmt.setInt(1, m_nodeId);
        stmt.setString(2, m_ipAddr.getHostAddress());

        ResultSet rset = stmt.executeQuery();
        List<DbIfServiceEntry> l = new ArrayList<DbIfServiceEntry>();

        while (rset.next()) {
            int sid = rset.getInt(1);
            DbIfServiceEntry entry = DbIfServiceEntry.get(db, m_nodeId,
                                                          m_ipAddr, sid);
            if (entry != null) {
                l.add(entry);
            }
        }

        rset.close();
        stmt.close();

        DbIfServiceEntry[] entries = new DbIfServiceEntry[l.size()];
        return l.toArray(entries);
    }

