    public void testAddSnmpInterfaces() throws Exception {
        
        ClassPathResource agentConfig = new ClassPathResource("/snmpTestData1.properties");
        
        MockSnmpAgent agent = MockSnmpAgent.createAgentAndRun(agentConfig, "127.0.0.1/9161");

        try {
            createAndFlushServiceTypes();
            createAndFlushCategories();

            ModelImporter mi = m_importer;
            String specFile = "/tec_dump.xml";
            mi.importModelFromResource(new ClassPathResource(specFile));

            assertEquals(1, mi.getIpInterfaceDao().findByIpAddress("172.20.1.204").size());

            assertEquals(2, mi.getIpInterfaceDao().countAll());

            assertEquals(6, m_snmpInterfaceDao.countAll());

        } finally {
            agent.shutDownAndWait();
        }

    }

