    public String findLibrary(String libname, String path) {
    	String fullname = System.mapLibraryName(libname);

    	String defaultPath = System.getProperty("java.library.path");
    	if (defaultPath != null) {
    		if (path != null) {
    			path += File.pathSeparator + defaultPath;
    		} else {
    			path = defaultPath;
    		}
    	}
    	
    	if (path != null) {
    		String[] paths = path.split(File.pathSeparator);
    		for (int i = 0; i < paths.length; i++) {
    			try {
    				String fullpath = paths[i] + File.separator + fullname;
        			System.load(fullpath);
        			return fullpath;
       			} catch (UnsatisfiedLinkError ule) {
       				// fall through and try the next one
       			}
    		}
    	}
    	return null;
    }

