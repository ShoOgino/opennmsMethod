    public void testUpgradeRevision3952ToCurrent() throws Exception {
        if (!isDBTestEnabled()) {
            return;
        }

        String newCreate = m_installer.m_create_sql;

        URL sql = getClass().getResource("/create.sql-revision-3952");
        assertNotNull("Could not find create.sql", sql);
        m_installer.m_create_sql = sql.getFile();

        // First pass.
        m_installer.createSequences();
        m_installer.updatePlPgsql();
        m_installer.addStoredProcedures();

        m_installer.createTables();

        m_installer.m_create_sql = newCreate;

        // Second pass.
        m_installer.createSequences();
        m_installer.updatePlPgsql();
        m_installer.addStoredProcedures();

        m_installer.createTables();

    }

