    // XXX this should be an integration test
    public void testCreateTablesTwice() throws Exception {
        if (!isDBTestEnabled()) {
            return;
        }

        m_installer.createTables();

        // Create a new ByteArrayOutputStream so we can look for UPTODATE for
        // every table
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        m_installer.m_out = new PrintStream(out);
        m_installer.createTables();

        ByteArrayInputStream in = new ByteArrayInputStream(out.toByteArray());
        BufferedReader reader = new BufferedReader(new InputStreamReader(in));

        String line;
        while ((line = reader.readLine()) != null) {
            if (line.matches("- creating tables\\.\\.\\.")) {
                continue;
            }
            if (line.matches("  - checking table \"\\S+\"\\.\\.\\. UPTODATE")) {
                continue;
            }
            if (line.matches("- creating tables\\.\\.\\. DONE")) {
                continue;
            }
            fail("Unexpected line output by createTables(): \"" + line + "\"");
        }
    }

