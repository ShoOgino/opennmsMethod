    public void testServerXmlContext() throws Exception {
        final String expecting = "Old OpenNMS context found";
        final String context = "		<Context \n"
                + "            path=\"/opennms\" docBase=\"opennms\" debug=\"0\" reloadable=\"true\">\n"
                + "            <Logger className=\"org.opennms.web.log.Log4JLogger\"\n"
                + "                    homeDir=\"${OPENNMS_HOME}\"/>\n"
                + "            <Realm className=\"org.opennms.web.authenticate.OpenNMSTomcatRealm\"\n"
                + "                    homeDir=\"${OPENNMS_HOME}\"/>\n"
                + "        </Context>\n";

        File f = m_anticipator.tempFile(m_tomcat_conf_dir, "server.xml");

        PrintWriter w = new PrintWriter(new FileOutputStream(f));

        w.print(context);
        w.close();

        try {
            m_installer.checkServerXmlOldOpennmsContext();
        } catch (Throwable e) {
            if (!e.getMessage().startsWith(expecting)) {
                fail("Unexpected exception received while waiting for \""
                        + expecting + "\": " + e);
            }
            return;
        }
        fail("Did not receive expected exception: \"" + expecting + "\"");
    }

