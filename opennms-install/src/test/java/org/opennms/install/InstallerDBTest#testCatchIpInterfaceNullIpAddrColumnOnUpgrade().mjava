    public void testCatchIpInterfaceNullIpAddrColumnOnUpgrade() throws Exception {
        if (!isDBTestEnabled()) {
            return;
        }

        m_installer.createSequences();

        addTableFromSQL("distpoller");
        addTableFromSQL("node");
        addTableFromSQL("snmpinterface");
        addTableFromSQLWithReplacements("ipinterface", new String[][] {
                new String[] { "(?i)ipAddr\\s+varchar\\(16\\) not null,", "ipAddr varchar(16)," }
            });
        
        executeSQL("INSERT INTO node (nodeId, nodeCreateTime) VALUES ( 1, now() )");
        executeSQL("INSERT INTO snmpInterface (nodeId, ipAddr) VALUES ( 1, '1.2.3.4' )");
        executeSQL("INSERT INTO ipInterface (nodeId, ipAddr, ifIndex) VALUES ( 1, '1.2.3.4', null )");
        executeSQL("INSERT INTO ipInterface (nodeId, ipAddr, ifIndex) VALUES ( 1, '1.2.3.9', 1 )");

        m_installer.createTables();
        
        Statement st = m_installer.m_dbconnection.createStatement();
        ResultSet rs = st.executeQuery("SELECT id from snmpInterface");
        int count = 0;
        for (int expected = 1; rs.next(); expected++) {
            assertEquals("expected usersNotified id", expected, rs.getInt(1));
            count++;
        }
        assertEquals("expected column count", 1, count);
        
    }

