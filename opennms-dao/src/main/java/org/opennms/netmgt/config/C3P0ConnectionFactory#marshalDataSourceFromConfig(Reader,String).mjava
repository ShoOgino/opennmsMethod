	protected static JdbcDataSource marshalDataSourceFromConfig(final Reader rdr, String dsName) throws MarshalException, ValidationException, PropertyVetoException, SQLException {
		DataSourceConfiguration dsc = (DataSourceConfiguration) Unmarshaller.unmarshal(DataSourceConfiguration.class, rdr);
		Collection jdbcDataSources = dsc.getJdbcDataSourceCollection();
		JdbcDataSource ds = null;
		for (Iterator iterator = jdbcDataSources.iterator(); iterator.hasNext();) {
			JdbcDataSource jdbcDs = (JdbcDataSource) iterator.next();
			log().debug("marshalDataSource: comparing collection entry:"+jdbcDs.getName()+" with requested ds:"+dsName);
			if (jdbcDs.getName().equals(dsName)) {
				ds = jdbcDs;
				break;
			}
		}
		if (ds == null) {
			throw new IllegalArgumentException("C3P0ConnectionFactory: DataSource: "+dsName+" is not defined.");
		}
		return ds;
	}

