    public static Set<OnmsAttribute> getAttributesAtRelativePath(File rrdDirectory, String relativePath) {
        int suffixLength = RrdFileConstants.getRrdSuffix().length();
        
        File directory = new File(rrdDirectory, relativePath);
        File[] files = directory.listFiles(RrdFileConstants.RRD_FILENAME_FILTER);
        
        Set<OnmsAttribute> attributes =  new HashSet<OnmsAttribute>(files.length);
        for (File file : files) {
            String fileName = file.getName();
            if (isStoreByGroup() && !isResponseTime(relativePath)) {
                String groupName = fileName.substring(0, fileName.length() - suffixLength);
                Properties props = getDsProperties(directory);
                for (Object o : props.keySet()) {
                    String dsName = (String)o;
                    if (props.getProperty(dsName).equals(groupName)) {
                        attributes.add(new RrdGraphAttribute(dsName, relativePath, file.getName()));
                    }
                }
            } else {
                String dsName = fileName.substring(0, fileName.length() - suffixLength);
                attributes.add(new RrdGraphAttribute(dsName, relativePath, file.getName()));
            }
        }
        
        Properties properties = getProperties(rrdDirectory, relativePath);
        if (properties != null) {
            for (Entry<Object,Object> entry : properties.entrySet()) {
                attributes.add(new StringPropertyAttribute(entry.getKey().toString(), entry.getValue().toString()));
            }
        }
        
        return attributes;
    }

