    private void doUpdate(OnmsIpInterface iface) {
    	if (isDirty(iface)) {

    		// THIS SUCKS!  Muck around with the statment to account for partially null keys. BYUCK!

    		String updateStmt = "update ipInterface set ipHostname = ?, isManaged = ?, ipStatus = ?, ipLastCapsdPoll = ?, isSnmpPrimary = ? where nodeId = ? and ipAddr = ? and " +
    		(iface.getIfIndex() == null ? "ifIndex is null" : "ifIndex = ?");

    		// now to construct the correct array

    		// all but the ifIndex
    		Object[] parms = new Object[] {
    				iface.getIpHostName(),
    				iface.getIsManaged(),
    				iface.getIpStatus(),
    				iface.getIpLastCapsdPoll(),
    				iface.getIsSnmpPrimary().toString(),
    				iface.getNode().getId(),
    				iface.getIpAddress(),
    		};

    		if (iface.getIfIndex() != null) {
    			List parmList = new ArrayList(Arrays.asList(parms));
    			parmList.add(iface.getIfIndex());
    			parms = parmList.toArray();
    		}

    		getJdbcTemplate().update(updateStmt, parms);
    	}

    	cascadeUpdateAssociations(iface);
    }

