    public void checkUnicode() throws Exception {
        assertUserSet();

        Statement st = getAdminConnection().createStatement();
        ResultSet rs;

        m_out.print("- checking if database \"" + m_databaseName
                + "\" is unicode... ");

        rs = st.executeQuery("SELECT encoding FROM pg_database WHERE "
                + "datname='" + m_databaseName.toLowerCase() + "'");
        rs.next();
        if (rs.getInt(1) == 5 || rs.getInt(1) == 6) {
            m_out.println("ALREADY UNICODE");
            return;
        }

        m_out.println("NOT UNICODE");
        closeConnection();
        closeAdminConnection();
        
        throw new Exception("OpenNMS requires a Unicode database.  Please delete and recreate your\ndatabase and try again.");
    }

