    public List<AlarmSummary> getNodeAlarmSummaries(final int rows) {
        final List<AlarmSummary> summaries = findObjects(
            AlarmSummary.class,
            "SELECT DISTINCT new org.opennms.netmgt.model.alarm.AlarmSummary(node.id, node.label, min(alarm.lastEventTime), max(alarm.severity), count(*)) " +
            "FROM OnmsAlarm AS alarm " +
            "LEFT JOIN alarm.node AS node " +
            "WHERE node.id IS NOT NULL AND alarm.alarmAckTime IS NULL AND alarm.severity > 3 " +
            "GROUP BY node.id, node.label " +
            "ORDER BY min(alarm.lastEventTime) DESC, node.label ASC"
        );
        if (rows == 0 || summaries.size() < rows) {
            return summaries;
        } else {
            return summaries.subList(0, rows);
        }
    }

