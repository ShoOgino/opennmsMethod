    private void doUpdate(OnmsMonitoredService svc) {
        // THIS SUCKS!  Muck around with the statment to account for partially null keys. BYUCK!
    	
    	if (!isDirty(svc)) return;
        
        
        String updateStmt = "update ifservices set lastGood = ?, lastFail = ?, qualifier = ?, status = ?, source = ?, notify = ? " +
                "where nodeId = ? and ipAddr = ? and serviceId = ? and " +
                (svc.getIfIndex() == null ? "ifIndex is null" : "ifIndex = ?");
        
        // now to construct the correct array
        
        // all but the ifIndex
        Object[] parms = new Object[] {
            svc.getLastGood(),
            svc.getLastFail(),
            svc.getQualifier(),
            svc.getStatus(),
            svc.getSource(),
            svc.getNotify(),
            svc.getNodeId(),
            svc.getIpAddress(),
            svc.getServiceType().getId(),
         };
        
        if (svc.getIfIndex() != null) {
            List parmList = new ArrayList(Arrays.asList(parms));
            parmList.add(svc.getIfIndex());
            parms = parmList.toArray();
        }
        
        getJdbcTemplate().update(updateStmt, parms);
    }

