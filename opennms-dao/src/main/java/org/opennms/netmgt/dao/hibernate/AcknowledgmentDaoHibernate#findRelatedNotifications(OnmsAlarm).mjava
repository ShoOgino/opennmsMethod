    private List<OnmsNotification> findRelatedNotifications(
            final OnmsAlarm alarm) {
        final String hql = "from OnmsNotification as notifications " +
        		     "inner join notifications.event as events " +
        		     "where events.alarm.id = :alarmId";
        
        HibernateCallback callback = new HibernateCallback() {

            public Object doInHibernate(Session session) throws HibernateException, SQLException {
                Query query = session.createQuery(hql);
                query.setParameter(1, alarm.getId());
                List<OnmsNotification> results = query.list();
                return results;
            }
        };
        
        Object object = getHibernateTemplate().execute(callback);
        List<OnmsNotification> notifs = (List<OnmsNotification>)object;
        return notifs;
    }

