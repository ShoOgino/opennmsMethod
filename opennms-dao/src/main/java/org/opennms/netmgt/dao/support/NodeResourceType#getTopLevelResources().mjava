    @Override
    public List<OnmsResource> getTopLevelResources() {
        return m_nodeDao.findAll().stream()
                // Only return non-deleted nodes - see NMS-2977
                .filter(node -> node.getType() == null || !node.getType().equals(NodeType.DELETED))
                .map(this::createResourceForNode)
                .collect(Collectors.toList());
    }

