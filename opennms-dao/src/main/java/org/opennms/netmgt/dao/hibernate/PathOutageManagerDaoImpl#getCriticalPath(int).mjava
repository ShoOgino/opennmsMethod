    @Override
    public CriticalPath getCriticalPath(int nodeId) {
        //"SELECT criticalpathip, criticalpathservicename FROM pathoutage WHERE nodeid=?";
        String location = null;
        InetAddress pathIp = pathOutageConfig.getDefaultCriticalPathIp();
        String serviceName = "ICMP";

        final OnmsNode node = nodeDao.get(nodeId);
        if (node != null) {
            location = MonitoringLocationUtils.getLocationNameOrNullIfDefault(node);
        }

        final OnmsPathOutage out = pathOutageDao.get(nodeId);
        if (out != null) {
            if (out.getCriticalPathIp() != null) {
                pathIp = out.getCriticalPathIp();
            }
            if (out.getCriticalPathServiceName() != null && !"".equals(out.getCriticalPathServiceName().trim())) {
                serviceName = out.getCriticalPathServiceName();
            }
        }
        return new CriticalPath(location, pathIp, serviceName);
    }

