	@Test
	@JUnitTemporaryDatabase
	public void testNodeQuery() throws Exception {
		List<OnmsNode> nodes;

		// first, try with OnmsCriteria
		final OnmsCriteria crit = new OnmsCriteria(OnmsNode.class);
		crit.add(org.hibernate.criterion.Restrictions.isNotNull("id"));
		nodes = m_nodeDao.findMatching(crit);
		assertEquals(6, nodes.size());

		// then the same with the builder
		final CriteriaBuilder cb = new CriteriaBuilder(OnmsNode.class);
		cb.isNotNull("id");
		nodes = m_nodeDao.findMatching(cb.toCriteria());
		assertEquals(6, nodes.size());
		
		cb.eq("label", "node1").join("ipInterfaces", "ipInterface").eq("ipInterface.ipAddress", "192.168.1.1");
		nodes = m_nodeDao.findMatching(cb.toCriteria());
		assertEquals(1, nodes.size());
	}

