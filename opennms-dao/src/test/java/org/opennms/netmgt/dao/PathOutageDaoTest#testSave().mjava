    @Test
    @Transactional
    public void testSave() {
        OnmsNode node = new OnmsNode(getLocalHostDistPoller());
        node.setLabel("localhost");
        m_nodeDao.save(node);

        OnmsIpInterface ipInterface = new OnmsIpInterface(addr("172.16.1.1"), node);

        OnmsServiceType serviceType = m_serviceTypeDao.findByName("ICMP");
        assertNotNull(serviceType);

        OnmsMonitoredService monitoredService = new OnmsMonitoredService(ipInterface, serviceType);

        OnmsPathOutage outage = new OnmsPathOutage(node,ipInterface.getIpAddress(), monitoredService.getServiceName());

        //outage.setNode(node);
        
        m_outageDao.save(outage);
        //m_outageDao.flush();
        //((AbstractDaoHibernate)m_nodeDao).refresh(outage);
        
        //it works we're so smart! hehe
        OnmsPathOutage temp = m_outageDao.load(outage.getNode().getId());
        //((AbstractDaoHibernate)m_nodeDao).refresh(temp);
        assertEquals("ICMP", outage.getCriticalPathServiceName());
//        outage.setEventBySvcRegainedEvent();
        
        assertEquals("localhost",temp.getNode().getLabel());
        
    }

