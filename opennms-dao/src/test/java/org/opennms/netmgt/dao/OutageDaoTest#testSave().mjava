	@Test
	@Transactional
	public void testSave() {
        OnmsServiceType serviceType = m_serviceTypeDao.findByName("ICMP");
        assertNotNull(serviceType);

        final OnmsDistPoller distPoller = m_distPollerDao.load("localhost");
		OnmsNode node = new OnmsNode(distPoller);
        OnmsIpInterface ipInterface = new OnmsIpInterface("172.16.1.1", node);
        OnmsMonitoredService monitoredService = new OnmsMonitoredService(ipInterface, serviceType);
        m_nodeDao.save(node);

        OnmsEvent event = getEvent();
        m_eventDao.save(event);

        OnmsOutage outage = new OnmsOutage();
        outage.setServiceLostEvent(event);
        outage.setIfLostService(new Date());
        outage.setMonitoredService(monitoredService);
        m_outageDao.save(outage);

        //it works we're so smart! hehe
        outage = m_outageDao.load(outage.getId());
        assertEquals("ICMP", outage.getMonitoredService().getServiceType().getName());
//        outage.setEventBySvcRegainedEvent();
        
    }

