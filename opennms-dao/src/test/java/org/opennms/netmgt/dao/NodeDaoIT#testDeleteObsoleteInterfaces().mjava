    @Test
    @JUnitTemporaryDatabase // This test manages its own transactions so use a fresh database
    public void testDeleteObsoleteInterfaces() {
        try {
            m_populator.populateDatabase();

            final Date timestamp = new Date(1234);

            m_transTemplate.execute(new TransactionCallbackWithoutResult() {

                @Override
                public void doInTransactionWithoutResult(TransactionStatus status) {
                    simulateScan(timestamp);
                }

            });

            m_transTemplate.execute(new TransactionCallbackWithoutResult() {

                @Override
                public void doInTransactionWithoutResult(TransactionStatus status) {
                    deleteObsoleteInterfaces(timestamp);
                }

            });

            m_transTemplate.execute(new TransactionCallbackWithoutResult() {

                @Override
                public void doInTransactionWithoutResult(TransactionStatus status) {
                    validateScan();
                }

            });
        } finally {
            m_populator.resetDatabase();
        }
    }

