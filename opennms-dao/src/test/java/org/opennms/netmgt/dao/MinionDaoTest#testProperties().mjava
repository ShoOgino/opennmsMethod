    @Test
    public void testProperties() throws Exception {
        final Date now = new Date();
        
        final OnmsMinion a = new OnmsMinion(UUID.randomUUID().toString(), "TestLocation", "Started", now);
        final OnmsMinion b = new OnmsMinion(UUID.randomUUID().toString(), "OtherLocation", "Started", now);
        a.setProperty("Yes", "No");
        a.setProperty("Up", "Down");
        b.setProperty("Left", "Right");
        b.setProperty("Wrong",  "Right");
        
        m_minionDao.save(a);
        m_minionDao.save(b);
        m_minionDao.flush();
        
        Collection<OnmsMinionProperty> props = m_minionPropertyDao.findAll();
        assertEquals(4, props.size());
        
        props = m_minionPropertyDao.findByMinionId(a.getId());
        assertEquals(2, props.size());
        assertEquals(a.getId(), props.iterator().next().getMinion().getId());
        
        OnmsMinionProperty prop = m_minionPropertyDao.findByKey(a.getId(), "Left");
        // a doesn't have that property, b does
        assertNull(prop);
        prop = m_minionPropertyDao.findByKey(b.getId(), "Left");
        assertNotNull(prop);
        assertEquals("Right", prop.getValue());
    }

