    @Override
    protected void setUp() throws Exception {
        setUpCollectdConfigFactory();
        
        m_fileAnticipator = new FileAnticipator();
        m_nodeDao = createMock(NodeDao.class);
        m_locationMonitorDao = createMock(LocationMonitorDao.class);
        m_dataCollectionConfig = createMock(DataCollectionConfig.class);
        m_graphDao = createMock(GraphDao.class);

        m_resourceDao = new DefaultResourceDao();
        m_resourceDao.setNodeDao(m_nodeDao);
        m_resourceDao.setLocationMonitorDao(m_locationMonitorDao);
        m_resourceDao.setCollectdConfig(m_collectdConfig);
        m_resourceDao.setRrdDirectory(m_fileAnticipator.getTempDir());
        m_resourceDao.setDataCollectionConfig(m_dataCollectionConfig);
        
        RrdUtils.initialize();
        
        expect(m_dataCollectionConfig.getConfiguredResourceTypes()).andReturn(new HashMap<String, ResourceType>());
        
        replayAll();
        m_resourceDao.afterPropertiesSet();
        verifyAll();
        resetAll();
    }

