    private OnmsOutage insertEntitiesAndOutage() {
        OnmsNode node = new OnmsNode(getLocalHostDistPoller());
        getNodeDao().save(node);

        OnmsIpInterface ipInterface = new OnmsIpInterface("172.16.1.1", node);
        getIpInterfaceDao().save(ipInterface);

        OnmsServiceType serviceType = getServiceTypeDao().findByName("ICMP");
        assertNotNull(serviceType);
        
        OnmsMonitoredService monitoredService = new OnmsMonitoredService(ipInterface, serviceType);
        getMonitoredServiceDao().save(monitoredService);
        
        OnmsEvent event = new OnmsEvent();
        event.setDistPoller(getLocalHostDistPoller());
        event.setEventUei("foo!");
        event.setEventTime(new Date());
        event.setEventCreateTime(new Date());
        event.setEventSeverity(1);
        event.setEventSource("your mom");
        event.setEventLog("Y");
        event.setEventDisplay("Y");
        getEventDao().save(event);

        OnmsOutage outage = new OnmsOutage();
        outage.setMonitoredService(monitoredService);
        outage.setServiceLostEvent(event);
        outage.setIfLostService(new Date());
        getOutageDao().save(outage);
        
        return outage;
    }

