    @Test
    public void testAdhocPropertiesReload() throws Exception {
        File f = m_fileAnticipator.tempFile("snmp-adhoc-graph.properties");
        
        m_outputStream = new FileOutputStream(f);
		m_writer = new OutputStreamWriter(m_outputStream, "UTF-8");
        // Set the image type to image/cheeesy
        String cheesy = s_adhoc.replace("image/png", "image/cheesy");
        m_writer.write(cheesy);
        m_writer.close();
        m_outputStream.close();
        
        HashMap<String, Resource> adhocConfig = new HashMap<String, Resource>();
        adhocConfig.put("performance", new FileSystemResource(f));
        PropertiesGraphDao dao = createPropertiesGraphDao(s_emptyMap, adhocConfig);
        AdhocGraphType type = dao.findAdhocGraphTypeByName("performance");
        assertNotNull("could not get performance adhoc graph type", type);
        assertEquals("image type isn't correct", "image/cheesy", type.getOutputMimeType());

        Thread.sleep(1100);

        m_outputStream = new FileOutputStream(f);
        m_writer = new OutputStreamWriter(m_outputStream, "UTF-8");
        m_writer.write(s_adhoc);
        m_writer.close();
        m_outputStream.close();
        
        type = dao.findAdhocGraphTypeByName("performance");
        assertNotNull("could not get performance adhoc graph type", type);
        assertEquals("image type isn't correct", "image/png", type.getOutputMimeType());
    }

