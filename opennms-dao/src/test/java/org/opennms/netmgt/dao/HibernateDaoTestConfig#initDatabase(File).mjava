    private void initDatabase(File etcDir) throws IOException, InterruptedException {
        List<File> sqlFiles = new LinkedList<File>();
        sqlFiles.add(new File(etcDir, "create.sql"));

        FileFilter sqlFilter = new FileFilter() {
            public boolean accept(File pathname) {
                return (pathname.getName().startsWith("get") && pathname.getName().endsWith(".sql"))
                || pathname.getName().endsWith("Trigger.sql");
            }
        };

        File[] list = etcDir.listFiles(sqlFilter);
        sqlFiles.addAll(Arrays.asList(list));

         for (File sqlFile : sqlFiles) {
           String cmd = System.getProperty("psql.command", "psql") ;
           System.err.println("psql.command = " + cmd);
           cmd = cmd+" test -U opennms -f \"" + sqlFile.getAbsolutePath() + '"';

           System.err.println("Executing: " + cmd);
           Process p = Runtime.getRuntime().exec(cmd);
           ReaderEater inputEater = new ReaderEater(new BufferedReader(new InputStreamReader(p.getInputStream())));
           ReaderEater errorEater = new ReaderEater(new BufferedReader(new InputStreamReader(p.getErrorStream())));
           inputEater.start();
           errorEater.start();
           p.waitFor();
           inputEater.getReader().close();
           errorEater.getReader().close();
        
           System.err.println("Got an exitValue of "+p.exitValue());
           p.destroy();
         }
    }

