    @Override
    public OnmsSnmpInterface upsert(int nodeId, OnmsSnmpInterface snmpInterface, int sleep) {
        OnmsSnmpInterface dbSnmpIface = m_snmpInterfaceDao.findByNodeIdAndIfIndex(nodeId, snmpInterface.getIfIndex());
        debugf(this, "nodeId = %d, ifIndex = %d, dbSnmpIface = %s", nodeId, snmpInterface.getIfIndex(), dbSnmpIface);
        if (dbSnmpIface != null) {
            return update(snmpInterface, dbSnmpIface);
        } else {
            try {
                return insert(nodeId, snmpInterface);
            } catch (DataIntegrityViolationException e) {
                dbSnmpIface = m_snmpInterfaceDao.findByNodeIdAndIfIndex(nodeId, snmpInterface.getIfIndex());
                sleep(sleep);
                if (dbSnmpIface != null) {
                    return update(snmpInterface, dbSnmpIface);
                } else {
                    throw e;
                }
            }
        }
    }

