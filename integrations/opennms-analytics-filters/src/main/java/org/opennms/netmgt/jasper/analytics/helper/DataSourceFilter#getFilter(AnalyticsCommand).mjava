    /**
     * Retrieves an Enricher that supports the given analytics command
     *
     * @return null if no suitable Enricher was found
     * @throws Exception
     */
    private Filter getFilter(AnalyticsCommand command) throws Exception {
        for (FilterFactory module : filterFactories) {
            Filter filter = module.getFilter(command);
            if (filter != null) {
                return filter;
            }
        }
        return null;
    }

