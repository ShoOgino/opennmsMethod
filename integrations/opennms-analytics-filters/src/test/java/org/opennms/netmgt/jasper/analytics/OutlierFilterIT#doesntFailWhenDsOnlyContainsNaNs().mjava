    @Test
    public void doesntFailWhenDsOnlyContainsNaNs() throws Exception {
        final String qs = "ANALYTICS:OutlierFilter=X:0.99";
        List<AnalyticsCommand> cmds = AnalyticsFilterUtils.createFromQueryString(qs);

        // Fill with NaNs
        RowSortedTable<Integer, String, Double> table = TreeBasedTable.create();
        for (int i = 0; i < 100; i++) {
            table.put(i, "X", Double.NaN);
        }

        // Apply the filter
        getDataSourceFilter().filter(cmds, table);

        // No exception should be thrown

        // Now add a single value
        table.put(42, "X", 3.14);

        // Apply the filter
        getDataSourceFilter().filter(cmds, table);

        // No exception should be thrown
    }

