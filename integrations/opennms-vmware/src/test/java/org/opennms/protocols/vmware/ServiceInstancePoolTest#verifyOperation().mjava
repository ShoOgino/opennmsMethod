    @Test
    public void verifyOperation() throws Exception {
        ServiceInstance s1 = serviceInstancePool.retain("host1.test.de", "username1", "password1", VmwareViJavaAccess.DEFAULT_TIMEOUT);
        Assert.assertEquals("host1.test.de/username1/password1/1/valid", s1.toString());

        ServiceInstance s2 = serviceInstancePool.retain("host1.test.de", "username1", "password1", VmwareViJavaAccess.DEFAULT_TIMEOUT);
        Assert.assertEquals("host1.test.de/username1/password1/2/valid", s2.toString());

        ServiceInstance s3 = serviceInstancePool.retain("host1.test.de", "username1", "password1", VmwareViJavaAccess.DEFAULT_TIMEOUT);
        Assert.assertEquals("host1.test.de/username1/password1/3/valid", s3.toString());

        serviceInstancePool.release(s2);

        ServiceInstance s4 = serviceInstancePool.retain("host1.test.de", "username1", "password1", VmwareViJavaAccess.DEFAULT_TIMEOUT);
        Assert.assertEquals("host1.test.de/username1/password1/2/valid", s4.toString());

        serviceInstancePool.release(s4);

        ((DummyServiceInstance) s4).valid = false;

        ServiceInstance s5 = serviceInstancePool.retain("host1.test.de", "username1", "password1", VmwareViJavaAccess.DEFAULT_TIMEOUT);
        Assert.assertEquals("host1.test.de/username1/password1/4/valid", s5.toString());
    }

