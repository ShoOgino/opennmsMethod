    @Test
    public void testVmwareCimCollectorDefaultWithCutomTimeout() throws Exception {
        final VmwareServer vmwareServer = new VmwareServer();
        vmwareServer.setHostname("hostname");
        vmwareServer.setUsername("username");
        vmwareServer.setPassword("password");

        final VmwareCimCollection vmwareCimCollection = new VmwareCimCollection();
        vmwareCimCollection.addVmwareCimGroup(new VmwareCimGroup());
        final HashMap<String, Object> parameters = new HashMap<>();
        parameters.put("vmwareServer", vmwareServer);
        parameters.put("vmwareCollection", vmwareCimCollection);
        parameters.put("timeout", new Integer(1500));

        try {
            new VmwareCimCollector().collect(collectionAgent, parameters);
        } catch (NullPointerException e) {
            // ignore NPE
        }

        Assert.assertEquals(1500, dummyServiceInstance.dummyReadTimeout);
        Assert.assertEquals(1500, dummyServiceInstance.dummyConnectTimeout);
    }

