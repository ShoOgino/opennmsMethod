    @Test
    public void testUseByForeignSource() throws FileNotFoundException, IOException {
        System.setProperty("org.opennms.rrd.fileExtension", ".jrb");
        JRobinDirectoryUtil lookupUtil = new JRobinDirectoryUtil();

        System.setProperty("org.opennms.rrd.storeByForeignSource", "false");
        assertEquals("src/test/resources/share/rrd/snmp/9", lookupUtil.getNodeLevelResourceDirectory(JRB_DIRECTORY, NODE_ID, FOREIGN_SOURCE, FOREIGN_ID));
        assertEquals("ifInOctets", lookupUtil.getIfInOctetsDataSource(JRB_DIRECTORY, NODE_ID, FOREIGN_SOURCE, FOREIGN_ID, INTERFACE));
        assertEquals("ifOutOctets", lookupUtil.getIfOutOctetsDataSource(JRB_DIRECTORY, NODE_ID, FOREIGN_SOURCE, FOREIGN_ID, INTERFACE));
        assertEquals("src/test/resources/share/rrd/snmp/9/me1-0002baaacffe/mib2-interfaces.jrb", lookupUtil.getIfInOctetsJrb(JRB_DIRECTORY, NODE_ID, FOREIGN_SOURCE, FOREIGN_ID, INTERFACE));
        assertEquals("src/test/resources/share/rrd/snmp/9/me1-0002baaacffe/mib2-interfaces.jrb", lookupUtil.getIfOutOctetsJrb(JRB_DIRECTORY, NODE_ID, FOREIGN_SOURCE, FOREIGN_ID, INTERFACE));

        System.setProperty("org.opennms.rrd.storeByForeignSource", "true");
        assertEquals("src/test/resources/share/rrd/snmp/fs/Servers/S001", lookupUtil.getNodeLevelResourceDirectory(JRB_DIRECTORY, NODE_ID, FOREIGN_SOURCE, FOREIGN_ID));
        assertEquals("ifHCInOctets", lookupUtil.getIfInOctetsDataSource(JRB_DIRECTORY, NODE_ID, FOREIGN_SOURCE, FOREIGN_ID, INTERFACE));
        assertEquals("ifHCOutOctets", lookupUtil.getIfOutOctetsDataSource(JRB_DIRECTORY, NODE_ID, FOREIGN_SOURCE, FOREIGN_ID, INTERFACE));
        assertEquals("src/test/resources/share/rrd/snmp/fs/Servers/S001/me1-0002baaacffe/mib2-X-interfaces.jrb", lookupUtil.getIfInOctetsJrb(JRB_DIRECTORY, NODE_ID, FOREIGN_SOURCE, FOREIGN_ID, INTERFACE));
        assertEquals("src/test/resources/share/rrd/snmp/fs/Servers/S001/me1-0002baaacffe/mib2-X-interfaces.jrb", lookupUtil.getIfOutOctetsJrb(JRB_DIRECTORY, NODE_ID, FOREIGN_SOURCE, FOREIGN_ID, INTERFACE));

        System.setProperty("org.opennms.rrd.storeByGroup", "false");
        assertEquals("src/test/resources/share/rrd/snmp/fs/Servers/S001/me1-0002baaacffe/ifHCInOctets.jrb", lookupUtil.getIfInOctetsJrb(JRB_DIRECTORY, NODE_ID, FOREIGN_SOURCE, FOREIGN_ID, INTERFACE));
        assertEquals("src/test/resources/share/rrd/snmp/fs/Servers/S001/me1-0002baaacffe/ifHCOutOctets.jrb", lookupUtil.getIfOutOctetsJrb(JRB_DIRECTORY, NODE_ID, FOREIGN_SOURCE, FOREIGN_ID, INTERFACE));
    }

