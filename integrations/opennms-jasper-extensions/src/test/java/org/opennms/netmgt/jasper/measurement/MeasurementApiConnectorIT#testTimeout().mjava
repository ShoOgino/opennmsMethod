    // We connect and expect a timeout.
    // We also verify that the timeout is as defined (including a tolerance)
    @Test(expected=SocketTimeoutException.class)
    public void testTimeout() throws IOException {
        WireMock.addRequestProcessingDelay(5000);
        long start = System.currentTimeMillis();
        try {
            new MeasurementApiConnector(MeasurementApiConnector.CONNECT_TIMEOUT, 2500).execute(false, "http://localhost:9999/opennms/rest/measurements", null, null, "<dummy request>");
        } catch (SocketTimeoutException ex) {
            long diff = System.currentTimeMillis() - start;
            long offset = 500; // ms
            Assert.assertEquals(2500d, (double) diff, (double) offset);
            throw ex;
        } finally {
            WireMock.reset();
        }
    }

