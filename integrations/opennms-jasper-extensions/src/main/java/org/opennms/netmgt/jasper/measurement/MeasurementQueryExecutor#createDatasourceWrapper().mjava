    private MeasurementDataSourceWrapper createDatasourceWrapper() {
        if (MeasurementsHelper.isRunInOpennmsJvm()) {
            return new LocalMeasurementDataSourceWrapper(
                    MeasurementsHelper.getSpringHelper().getMeasurementFetchStrategy(),
                    MeasurementsHelper.getSpringHelper().getExpressionEngine(),
                    MeasurementsHelper.getSpringHelper().getFilterEngine());
        }

        LOG.warn("No {} implementation found. Falling back to HTTP mode.", MeasurementFetchStrategy.class);
        boolean useSsl = Boolean.valueOf(System.getProperty(SSL_PROPERTY_KEY, "false")).booleanValue();
        return new RemoteMeasurementDataSourceWrapper(
                useSsl,
                (String) getParameterValue(Parameters.URL),  // required parameter
                (String) getParameterValue(Parameters.USERNAME, true), // optional parameter
                (String) getParameterValue(Parameters.PASSWORD, true) // optional parameter
        );
    }

