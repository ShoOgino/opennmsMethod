    @Test
    public void dwoTestUpdateEndPoint1(){
        expect(m_nodeLinkService.getNodeId(END_POINT_1)).andStubReturn(1);
        
        // we make node2 return null the first time so when node1 is added it appear node2 is not there
        expect(m_nodeLinkService.getNodeId(END_POINT_2)).andReturn(null).andStubReturn(2);

        m_nodeLinkService.createLink(1, 2);
        
        replay();
        
        m_adapter.setLinkMatchResolver(m_matchResolver);
        m_adapter.setNodeLinkService(m_nodeLinkService);
        
        
        
        m_adapter.doAddNode(1);
        m_adapter.doAddNode(2);
         
        
        
        verify();
    }

