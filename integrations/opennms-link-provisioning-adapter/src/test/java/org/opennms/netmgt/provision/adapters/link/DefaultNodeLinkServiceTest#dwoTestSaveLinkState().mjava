    @Test
    public void dwoTestSaveLinkState() {
        int nodeId = END_POINT2_ID;
        
        Collection<DataLinkInterface> dlis = m_nodeLinkService.getLinkContainingNodeId(nodeId);
        DataLinkInterface dli = dlis.iterator().next();
        
        OnmsLinkState linkState = new OnmsLinkState();
        linkState.setDataLinkInterface(dli);
        
        m_linkStateDao.save(linkState);
        m_linkStateDao.flush();
        
        OnmsLinkState linkState2 = m_nodeLinkService.getLinkStateForInterface(dli);
        
        assertNotNull("linkState was null", linkState2);
        assertEquals(OnmsLinkState.LinkState.LINK_UP, linkState2.getLinkState());
        
        linkState2.setLinkState(linkState2.getLinkState().LINK_NODE_DOWN);
        
        m_nodeLinkService.saveLinkState(linkState2);
        
        OnmsLinkState linkState3 = m_nodeLinkService.getLinkStateForInterface(dli);
        
        assertEquals(OnmsLinkState.LinkState.LINK_NODE_DOWN, linkState3.getLinkState());
        
    }

