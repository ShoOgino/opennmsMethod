    @Test
    public void testNodeDownEvent() {
        Event e = m_node1.createDownEvent();
        
        expect(m_correlator.isLinkUp(e)).andStubReturn(false);
        m_anticipator.anticipateEvent(m_failedEvent);
        
        replay();

        m_linkEventHandler.receiveEvent(e);

        //verify that the event was successful 
        m_eventIpcManager.finishProcessingEvents();
        assertEquals(0, m_anticipator.waitForAnticipated(0).size());
        assertEquals(0, m_anticipator.unanticipatedEvents().size());

        verify();
    }

