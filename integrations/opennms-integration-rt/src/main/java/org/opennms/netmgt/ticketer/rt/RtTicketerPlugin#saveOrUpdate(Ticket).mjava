	/**
    * Creates a new ticket (if none exists) or updates an existing ticket in the
    * RT trouble ticket system. Ticket updates are currently limited to updating
    * the ticket status only.
    * 
    * @param   ticket      the ticket details
    */
	
	public void saveOrUpdate(Ticket newTicket) throws PluginException {
		
		String newTicketID;
		
		Ticket currentTicket = null;
		
		try {
		    
		    // If there's no external ID in the OpenNMS ticket, we need to create one
			
			if ((newTicket.getId() == null) ) {
			    
			    log().debug("TicketId is null creating a new ticket");
				
			    newTicketID =  newRtTicket(newTicket);

				newTicket.setId(newTicketID);

				log().debug("created new ticket: " + newTicket.getId());
				
				
			} else {
			    
			    currentTicket = get(newTicket.getId()); 
				
				log().debug("updating existing ticket : " + currentTicket.getId());
				
				if (currentTicket.getState() != newTicket.getState()) {
					
					updateRtStatus(newTicket);
					
				} else {
		
					// There is no else at the moment
					// Tickets are _only_ updated with new state

				}
				
			}
			
		} catch (PluginException e) {
			log().error("Failed to create or update RT ticket" + e);
			throw new PluginException("Failed to create or update RT ticket");
		}
			
	}

