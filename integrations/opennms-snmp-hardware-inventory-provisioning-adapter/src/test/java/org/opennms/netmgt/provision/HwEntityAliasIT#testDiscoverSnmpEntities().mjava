    /**
     * Test discover SNMP entities.
     *
     * @throws Exception the exception
     */
    @Test
    @Transactional
    public void testDiscoverSnmpEntities() throws Exception {
        m_adapter.processPendingOperationForNode(testOperation.operation);

        OnmsHwEntity root = m_entityDao.findRootByNodeId(testOperation.nodeId);
        assertThat(root, is(notNullValue()));
        assertThat(root.isRoot(), is(true));

        m_nodeDao.flush();
        m_entityDao.flush();

        List<OnmsHwEntityAlias> aliases = new ArrayList<>();
        for (OnmsHwEntity entity : m_entityDao.findAll()) {
            Set<OnmsHwEntityAlias> entAliases = entity.getEntAliases();
            if (entAliases != null && !entAliases.isEmpty()) {
                aliases.addAll(entAliases);
            }
        }

        assertThat(aliases, hasSize(4));

        List<String> aliasOids = aliases.stream().map(a -> a.getOid()).collect(Collectors.toList());
        assertThat(aliasOids, hasItem(".1.3.6.1.2.1.2.2.1.1.10101"));
        assertThat(aliasOids, hasItem(".1.3.6.1.2.1.2.2.1.1.10102"));
        assertThat(aliasOids, hasItem(".1.3.6.1.2.1.2.2.1.1.10104"));
        assertThat(aliasOids, hasItem(".1.3.6.1.2.1.2.2.1.1.10502"));
    }

