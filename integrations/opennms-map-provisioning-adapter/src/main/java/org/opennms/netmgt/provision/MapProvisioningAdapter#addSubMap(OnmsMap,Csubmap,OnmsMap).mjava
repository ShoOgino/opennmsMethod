    private void addSubMap(OnmsMap onmsMap, Csubmap csubmap, OnmsMap onmsSubMap) {
        log().debug("addSubMap: adding automated submap: " + onmsSubMap.getName() + " to map: " + onmsMap.getName());
        OnmsMapElement  mapElement = null;
        if (!onmsMap.getMapElements().isEmpty()) {
            log().debug("addSubMap: looping on elements of not empty map: " + onmsMap.getName());
            for (OnmsMapElement elem: onmsMap.getMapElements()) {
                log().debug("addSubMap: checking element with id: " + elem.getElementId() + " and type" + elem.getType());
                if (elem.getType().equals(OnmsMapElement.MAP_TYPE) && elem.getElementId() == onmsSubMap.getId()) {
                    log().debug("addSubMap: still exists in map updating");
                    mapElement = elem;
                    mapElement.setLabel(csubmap.getLabel());
                    mapElement.setIconName(csubmap.getIcon());
                    mapElement.setX(csubmap.getX());
                    mapElement.setY(csubmap.getY());
                    break;
                }
            }
        }
        if (mapElement == null) {
            mapElement = 
                new OnmsMapElement(onmsMap,onmsSubMap.getId(),OnmsMapElement.MAP_TYPE,csubmap.getLabel(),csubmap.getIcon(),csubmap.getX(),csubmap.getY());
            m_onmsMapElementDao.saveOrUpdate(mapElement);
        } else {
            m_onmsMapElementDao.update(mapElement);            
        }
        log().debug("added map element with id: " + mapElement.getId());
        log().debug("               with label: " + mapElement.getLabel());
        log().debug("                with icon: " + mapElement.getIconName());
        log().debug("                   with X: " + mapElement.getX());
        log().debug("                   with Y: " + mapElement.getY());
        m_onmsMapElementDao.flush();        
        m_onmsMapElementDao.clear();
    }

