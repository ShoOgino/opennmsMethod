    public CollectdConfiguration getCollectdConfigurationForPackages(List<String> collectionPackageNames) {
        if (collectionPackageNames == null || collectionPackageNames.size() < 1) return null;

        final Set<String> seenCollectors = new HashSet<String>();
        final CollectdConfiguration newConfig = new CollectdConfiguration();
        newConfig.setThreads(getThreads());

        // Add all requested polling packages to the config
        boolean foundPackage = false;
        for (String packageName : collectionPackageNames) {
            final Package pkg = getPackage(packageName);
            if (pkg != null) {
                newConfig.addPackage(pkg);
                foundPackage = true;
                for (final Service service : pkg.getServices()) {
                    seenCollectors.add(service.getName());
                }
            }
        }
        // If the list of polling packages doesn't match anything, then return null
        if (!foundPackage) return null;

        for (final Collector collector : getCollectors()) {
            if (seenCollectors.contains(collector.getService())) {
                newConfig.addCollector(collector);
            }
        }

        return newConfig;
    }

