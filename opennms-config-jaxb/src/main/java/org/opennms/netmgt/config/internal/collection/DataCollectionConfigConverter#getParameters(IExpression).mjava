    static Collection<String> getParameters(final IExpression expression) {
        if (expression == null) {
            return Collections.emptySet();
        }
        final String template = expression.getTemplate();
        if (template == null) {
            return Collections.emptySet();
        }

        final Pattern p = Pattern.compile("\\$\\{([^\\}]*)\\}");
        final Matcher m = p.matcher(template);
        final Set<String> matches = new TreeSet<>();
        while (m.find()) {
            for (int i=0; i < m.groupCount(); i++) {
                matches.add(m.group(i+1));
            }
        }
        return matches;
    }

