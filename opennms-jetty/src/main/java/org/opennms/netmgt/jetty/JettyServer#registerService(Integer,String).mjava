    protected void registerService(Integer port, String contextPath) {
        String contextName = contextPath;
        contextName.replaceFirst("/", "");

        try {
            ServiceRegistrationStrategy srs = ServiceRegistrationFactory.getStrategy();
            String host = InetAddress.getLocalHost().getHostName().replace(".local", "").replace(".", "-");
            Hashtable<String, String> properties = new Hashtable<String, String>();
            properties.put("path", contextPath);
            
            srs.initialize("HTTP", contextName + "-" + host, port, properties);
            services.put(contextName, srs);
        } catch (Exception e) {
            log().warn("unable to get a DNS-SD object for context '" + contextPath + "'", e);
        }
    }

