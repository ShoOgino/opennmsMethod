    @Override
    public ContextHandler createContextHandler(final App app) throws Exception {
        final ContextHandler handler = super.createContextHandler(app);

        /*
         * Add an alias check that accepts double slashes in our resource paths.
         */
        handler.addAliasCheck(new ApproveAbsolutePathAliases());

        /*
         * Pulled from: http://bengreen.eu/fancyhtml/quickreference/jettyjsp9error.html
         *
         * Configure the application to support the compilation of JSP files.
         * We need a new class loader and some stuff so that Jetty can call the
         * onStartup() methods as required.
         */
        if (handler instanceof WebAppContext) {
            WebAppContext context = (WebAppContext)handler;
            context.setAttribute(AnnotationConfiguration.CONTAINER_INITIALIZERS, jspInitializers());
            context.setAttribute(InstanceManager.class.getName(), new SimpleInstanceManager());
            context.addBean(new ServletContainerInitializersStarter(context), true);
        }

        return handler;
    }

