	/**
	 * Stop method of fiber, called by OpenNMS when fiber execution is to
	 * finish. Its purpose is to clean everything up, e.g. close any JNDI or 
	 * database connections, before the fiber's execution is ended. 
	 */
	public void stop() {
		Logger log = getLog();		//Get a reference to the QoSD logger

		log.info("Stopping QosD");
		status = STOP_PENDING;

		try {
			unregisterListener();	//unregister the OpenNMS event listener
		} catch(Exception ex) {
			log.error("stop() Error unregistering the OpenNMS event listener. Error:", ex);
		}


		try {
			openNMSEventHandlerThread.kill();
		} catch(Exception ex) {
			log.error("stop() Error killing openNMSEventHandlerThread. Error:", ex);
		}

		try {
			alarmListConnectionManager.kill();	//kill the connection thread
		} catch(Exception ex) {
			log.error("stop() Error killing alarmListConnectionManager. Error:", ex);
		}

		status = STOPPED;		
		log.info("QosD Stopped");
	}

