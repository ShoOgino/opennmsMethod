    /**
     * Restores a RRD.
     *
     * @param rrd the RRD object
     * @param targetFile the target file
     * @throws IOException Signals that an I/O exception has occurred.
     * @throws RrdException the RRD exception
     */
    public static void restoreRrd(RRDv3 rrd, File targetFile) throws IOException, RrdException {
        String rrdBinary = System.getProperty("rrd.binary");
        if (rrdBinary == null) {
            throw new IllegalArgumentException("rrd.binary property must be set");
        }
        try {
            File xmlDest = new File(targetFile + ".xml");
            JaxbUtils.marshal(rrd, new FileWriter(xmlDest));
            Process process = Runtime.getRuntime().exec(new String[]{ rrdBinary, "restore", xmlDest.getAbsolutePath(), targetFile.getAbsolutePath() });
            process.waitFor();
            if(!xmlDest.delete()) {
            	LOG.warn("Could not delete file: {}", xmlDest.getPath());
            }
        } catch (Exception e) {
            throw new RrdException("Can't restore RRD", e);
        }
    }

