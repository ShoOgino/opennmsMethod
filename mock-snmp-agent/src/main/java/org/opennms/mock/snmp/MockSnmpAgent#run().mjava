	/*
	 * Starts the <code>MockSnmpAgent</code> running.  Meant to be called from the
	 * <code>start</code> method of class <code>Thread</code>, but could also be
	 * used to bring up a standalone mock agent.
	 * @see org.snmp4j.agent.BaseAgent#run()
	 * 
	 * @author Jeff Gehlbach
	 * @version 1.0
	 */
	// XXX fix catch blocks
	public void run() {
		try {
			init();
			loadConfig(ImportModes.UPDATE_CREATE);
			addShutdownHook();
			super.run();
			m_running = true;
		} catch (BindException be) {
			be.printStackTrace();
			System.out.println("You probably specified an invalid address or a port < 1024");
		} catch (IOException ie) {
			ie.printStackTrace();
		}
		
		while (m_running) {
			try {
				Thread.sleep(1000);
			} catch (InterruptedException e) {
				break;
			}
		}
		
		try {
			for (TransportMapping transportMapping : transportMappings) {
				transportMapping.close();
			}
		} catch (Throwable t) {
			t.printStackTrace();
		}
		
		m_stopped = true;
	}

