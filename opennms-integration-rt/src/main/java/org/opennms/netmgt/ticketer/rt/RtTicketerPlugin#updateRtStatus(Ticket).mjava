	/**
	* Convenience method for updating the Ticket Status in RT
	* 
	* @param   ticket      the ticket details
	*/
	
	private void updateRtStatus(Ticket ticket) throws PluginException {
		
		PostMethod post = new PostMethod(m_configDao.getBaseURL() + "/REST/1.0/ticket/" + ticket.getId() + "/edit");
		
		String updateString = new String("Status: " + openNMSToRTState(ticket.getState()));
		
		NameValuePair[] statusUpdateParams = {
                new NameValuePair("content", updateString),
                new NameValuePair("user", m_user),
                new NameValuePair("pass", m_password)
              };
		try {
	        post.setRequestBody(statusUpdateParams);
	        if(getClient().executeMethod(post) != HttpStatus.SC_OK) {
	            throw new PluginException("Received a non 200 response code from the server");
	        } else {
                String in = post.getResponseBodyAsString();
                Pattern okPattern = Pattern.compile("(?s) Ticket (\\d+) updated");
                Matcher matcher = okPattern.matcher(in);
                if (! matcher.find()) {
                    throw new PluginException("Did not receive confirmation from RT that ticket was updated");
                }
	        }
        } catch (HttpException e) {
            log().error("HTTP exception attempting to logon to RT: " + e.getMessage());
            throw new PluginException(e.getMessage());
        } catch (IOException e) {
            log().error("HTTP exception attempting to logon to RT: " + e.getMessage());
            throw new PluginException(e.getMessage());
        } finally {
            post.releaseConnection();
        }

		
	}

