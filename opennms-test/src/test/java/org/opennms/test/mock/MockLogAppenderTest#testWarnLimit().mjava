	public void testWarnLimit() throws InterruptedException {
        ThreadCategory log = ThreadCategory.getInstance();
        log.info("An Info message");
        log.warn("A warn message");
		
        Thread.sleep(1000);

        assertFalse("Messages were not logged with a warning level or higher",
				MockLogAppender.noWarningsOrHigherLogged());

		LoggingEvent[] events = MockLogAppender.getEventsGreaterOrEqual(Level.WARN);
		
		assertEquals("Number of logged events", 1, events.length);
		
		assertEquals("Logged event level", Level.WARN, events[0].getLevel());
		assertEquals("Logged message", "A warn message", events[0].getMessage());
	}

