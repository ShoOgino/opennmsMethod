    @Test
    public void testEventsMatching() {
        final CriteriaBuilder cb = new CriteriaBuilder(OnmsEvent.class);
        cb.eq("eventuei", EventConstants.NODE_DOWN_EVENT_UEI);
        cb.isNull("ipaddr");
        
        final List<OnmsEvent> events = new ArrayList<>();
        events.add(createEvent(1, "uei.opennms.org/test"));
        events.add(createEvent(2, EventConstants.NODE_DOWN_EVENT_UEI));
        events.add(createEvent(3, EventConstants.NODE_DOWN_EVENT_UEI));
        final BeanWrapperCriteriaVisitor visitor = new BeanWrapperCriteriaVisitor(events);
        cb.toCriteria().visit(visitor);
        assertEquals(2, visitor.getMatches().size());
    }

