    @Override
    public K save(final T entity) {
        if (entity == null) return null;
        K id = getId(entity);
        if (id == null) {
            generateId(entity);
            id = getId(entity);
        }
        if (m_entries.containsKey(id)) {
            LOG.debug("save({}): id already exists: {}", entity, id);
        } else {
            LOG.debug("save({})", entity);
        }
        m_entries.put(id, entity);
        return id;
    }

