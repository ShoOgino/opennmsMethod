    /** {@inheritDoc} 
     * @throws ReportRunException */
    @Override
    public synchronized String runReport(Report report,String reportDirectory) throws ReportRunException {

        String outputFile = null;
        try {
            outputFile = generateReportName(reportDirectory,report.getReportName(), report.getReportFormat());
            JasperPrint print = runAndRender(report);
            outputFile = saveReport(print,report,outputFile);    
            
        } catch (JRException e) {
            LOG.error("Error running report: {}", e.getMessage(), e);
            throw new ReportRunException("Caught JRException: " + e.getMessage());
        }  catch (Throwable e){
            LOG.error("Unexpected exception: {}", e.getMessage(), e);
            throw new ReportRunException("Caught unexpected " + e.getClass().getName() + ": " + e.getMessage());
        }        
 
        return outputFile;
    
    }

