    /**
     * <p>runReport</p>
     *
     * @param report a {@link org.opennms.netmgt.config.reportd.Report} object.
     */
    public void runReport(Report report) {
    	Map mdc = MDC.getCopyOfContextMap();
        try {
        	MDC.put("prefix", NAME);
            LogUtils.debugf(this, "reportd -- running job %s", report.getReportName() );
            String fileName = m_reportService.runReport(report,reportDirectory);
            if (report.getRecipientCount() > 0) {
                LogUtils.debugf(this,"reportd -- delivering report %s to %d recipients", report.getReportName(), report.getRecipientCount());
                m_reportDeliveryService.deliverReport(report, fileName);
            } else {
                LogUtils.infof(this, "Skipped delivery of report %s because it has no recipients", report.getReportName());
            }
            LogUtils.debugf(this,"reportd -- done running job %s",report.getReportName() );
        } catch (ReportRunException e) {
            createAndSendReportingEvent(EventConstants.REPORT_RUN_FAILED_UEI, report.getReportName(), e.getMessage());
        } catch (ReportDeliveryException e) {
            createAndSendReportingEvent(EventConstants.REPORT_DELIVERY_FAILED_UEI, report.getReportName(), e.getMessage());
        } finally {        
        	MDC.setContextMap(mdc);
        }
    }

