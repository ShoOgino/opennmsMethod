	public void testExecuteJob() throws Exception {
		
		OnmsNode node = new OnmsNode();
		node.setId(1);
		OnmsIpInterface iface = new OnmsIpInterface("192.168.1.1", node);
		OnmsServiceType svcType = new OnmsServiceType("HTTP");
		OnmsMonitoredService svc = new OnmsMonitoredService(iface, svcType);
		
		ServicePollConfiguration svcPollConfig = new ServicePollConfiguration(svc, 100);
		
		PollStatus status = PollStatus.up(100L);
		
		PollService pollService = createMock(PollService.class);
		
		expect(pollService.poll(svc)).andReturn(status);
		
		replay(pollService);

		MonitorServicePollDetails pollDetails = new MonitorServicePollDetails(svcPollConfig, pollService);
		
		TriggerFiredBundle bundle = new TriggerFiredBundle(pollDetails, pollDetails.getTrigger(), null, false, new Date(), new Date(), null, new Date());
		
		MonitoredServicePollJob pollJob = new MonitoredServicePollJob();
		
		JobExecutionContext context = new JobExecutionContext(m_scheduler, bundle, pollJob);

		pollJob.execute(context);
		
		verify(pollService);
		
		assertEquals(status, svcPollConfig.getPollModel().getCurrentStatus());
		
		
	}

