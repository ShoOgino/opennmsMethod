        Object constructValue(ApplicationContext context) {
            
            String type = getType();
            Class<?> typeClass = Object.class;
            if (type != null) {
                PropertyEditor classEditor = getDefaultEditor(Class.class);
                classEditor.setAsText(type);
                typeClass = (Class<?>)classEditor.getValue();
            }
        
            String value = getValue();
            if (value != null) {
                PropertyEditor valueEditor = getDefaultEditor(typeClass);
                valueEditor.setAsText(value);
                return valueEditor.getValue();
            }
            
            String ref = getRef();
            if (ref != null) {
                Object bean = context.getBean(ref, typeClass);
                return bean;
            }
            
            throw new IllegalArgumentException("One of either the value or the ref must be specified");
            
        }

