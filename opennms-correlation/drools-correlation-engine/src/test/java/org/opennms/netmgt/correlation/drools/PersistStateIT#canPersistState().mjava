    @Test(timeout=30000)
    public void canPersistState() throws Exception {
        DroolsCorrelationEngine engine = findEngineByName("persistStateTest");
        assertThat(engine, notNullValue());

        engine.correlate(createNodeLostServiceEvent(1, "SSH"));
        assertThat(engine.getKieSessionObjects(), hasSize(3));
        engine.tearDown();

        // Re-initialize and verify
        engine.initialize();
        assertThat(engine.getKieSessionObjects(), hasSize(3));
        engine.tearDown();
    }

