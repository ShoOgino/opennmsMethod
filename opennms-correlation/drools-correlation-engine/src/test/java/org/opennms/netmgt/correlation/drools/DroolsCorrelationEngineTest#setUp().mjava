    @Override
	protected void setUp() throws Exception {
		super.setUp();
		
    	m_anticipator = m_eventIpcMgr.getEventAnticipator();

        TimerFactoryBean timerFactory = new TimerFactoryBean();
        timerFactory.afterPropertiesSet();
        m_timer = (Timer)timerFactory.getObject();

        m_engine = new DroolsCorrelationEngine();
		m_engine.setEventIpcManager(m_eventIpcMgr);
		m_engine.setScheduler(m_timer);
        m_engine.setWideSpreadThreshold(3);
        m_engine.setFlapCount(3);
        m_engine.setFlapInterval(1000L);
        m_engine.afterPropertiesSet();
		
	}

