    public void afterPropertiesSet() throws Exception {
        Assert.state(m_applicationContext != null, "applicationContext must be set");
        
        Map<String, CorrelationEngine> beans = 
            BeanFactoryUtils.beansOfTypeIncludingAncestors(m_applicationContext, CorrelationEngine.class);
        
        // put them in a set to deduplicate the beans
        System.err.println("Deduplicating engines");
        HashSet<CorrelationEngine> engineSet = new HashSet<CorrelationEngine>(beans.values()); 
        
        Map<String, CorrelationEngine[]> listBeans = 
            BeanFactoryUtils.beansOfTypeIncludingAncestors(m_applicationContext, CorrelationEngine[].class);
        
        for (CorrelationEngine[] engines : listBeans.values()) {
            engineSet.addAll(Arrays.asList(engines));
        }
        

        m_correlationEngines = new LinkedList<CorrelationEngine>(engineSet);
        
        System.err.println("Found "+m_correlationEngines.size()+" engines");
    }

