    public final AliasBuilder alias(final Alias alias) {
        Alias existing = m_aliases.get(alias.getAlias());
        if (existing == null) {
            m_aliases.put(alias.getAlias(), alias);
        } else {
            if (alias.hasJoinCondition()) {
                if (existing.hasJoinCondition()) {
                    // Combine the JOIN conditions
                    LOG.debug("alias '{}' already associated with associationPath '{}', appending join condition.", alias.getAlias(), alias.getAssociationPath());
                    existing.setJoinCondition(Restrictions.and(existing.getJoinCondition(), alias.getJoinCondition()));
                } else {
                    LOG.debug("alias '{}' already associated with associationPath '{}', adding join condition.", alias.getAlias(), alias.getAssociationPath());
                    existing.setJoinCondition(alias.getJoinCondition());
                }
            } else {
                LOG.debug("alias '{}' already associated with associationPath '{}', skipping.", alias.getAlias(), alias.getAssociationPath());
            }
        }
        return this;
    }

