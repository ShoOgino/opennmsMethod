    /**
     * Send this PingRequest through the given icmpSocket
     *
     * @param icmpSocket a {@link org.opennms.protocols.icmp.IcmpSocket} object.
     */
    public void send(NativeDatagramSocket icmpSocket, InetAddress addr) {
        try {
            m_log.debug(System.currentTimeMillis()+": Sending Ping Request: " + this);

            if (addr instanceof Inet4Address) {
        		v4.ping((Inet4Address)addr, m_id.getSequenceId(), 1, m_timeout);
        	} else if (addr instanceof Inet6Address) {
        		v6.ping((Inet6Address)addr, m_id.getSequenceId(), 1, m_timeout);
        	}
        } catch (Throwable t) {
            m_callback.handleError(m_id.getAddress(), m_request, t);
        }
    }

