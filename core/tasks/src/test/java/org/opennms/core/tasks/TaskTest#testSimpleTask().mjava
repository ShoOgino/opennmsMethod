    @Test
    public void testSimpleTask() throws Exception {
        final AtomicBoolean hasRun = new AtomicBoolean(false);
        
        Runnable r = new Runnable() {
            @Override
            public void run() {
                sleep(100);
                hasRun.set(true);
            }
        };
        
        Task task = createTask(r);
        
        task.schedule();
        
        assertFalse(hasRun.get());
        
        task.waitFor();
        
        assertTrue(hasRun.get());
        
    }

