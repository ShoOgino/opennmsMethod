    @Test
    public void testSave() throws ConfigurationResourceException, IOException {
        final File configFile = getConfigFile();
        final ConfigurationResource<CollectdConfiguration> collectd = new JaxbResourceConfiguration<CollectdConfiguration>(CollectdConfiguration.class, new FileSystemResource(configFile));
        assertNotNull(collectd);
        CollectdConfiguration config = collectd.get();
        assertNotNull(config);
        assertEquals(5, config.getPackages().size());
        config.removePackage(config.getPackages().get(0));
        assertEquals("vmware4", config.getPackages().get(0).getName());
        assertEquals(4, config.getPackages().size());
        collectd.save(config);

        config = collectd.get();
        assertNotNull(config);
        assertEquals(4, config.getPackages().size());
        assertEquals("vmware4", config.getPackages().get(0).getName());
    }

