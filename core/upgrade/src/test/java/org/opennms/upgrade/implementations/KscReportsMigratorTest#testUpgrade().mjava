    /**
     * Test upgrade.
     *
     * @throws Exception the exception
     */
    @Test
    public void testUpgrade() throws Exception {
        KscReportsMigrator obj = new KscReportsMigrator() {
            protected void initializeDatasource() throws OnmsUpgradeException {
            }
            protected List<SnmpInterface> getInterfacesToMerge() throws OnmsUpgradeException {
                List<SnmpInterface> interfaces = new ArrayList<SnmpInterface>();
                interfaces.add(new SnmpInterface(1, null, null, "eth0", "eth0", "005056c00008", false));
                interfaces.add(new SnmpInterface(1, null, null, "eth1", "eth1", "005056c00009", false));
                return interfaces;
            }
        };
        Assert.assertEquals("node[1].interfaceSnmp[eth0]", KSC_PerformanceReportFactory.getInstance().getReportByIndex(1).getGraph(0).getResourceId());
        try {
            obj.preExecute();
            obj.execute();
            obj.postExecute();
        } catch (OnmsUpgradeException e) {
            obj.rollback();
            Assert.fail();
        }
        Assert.assertEquals("node[1].interfaceSnmp[eth0-005056c00008]", KSC_PerformanceReportFactory.getInstance().getReportByIndex(1).getGraph(0).getResourceId());
    }

