    /* (non-Javadoc)
     * @see org.opennms.upgrade.api.OnmsUpgrade#preExecute()
     */
    @Override
    public void preExecute() throws OnmsUpgradeException {
        printMainSettings();
        if (isInstalledVersionGreaterOrEqual(1, 12, 2)) {
            try {
                CollectdConfigFactory.init();
            } catch (Exception e) {
                throw new OnmsUpgradeException("Can't initialize collectd-configuration.xml because " + e.getMessage());
            }
            try {
                JMXDataCollectionConfigFactory.init();
            } catch (Exception e) {
                throw new OnmsUpgradeException("Can't initialize jmx-datacollection-config.xml because " + e.getMessage());
            }
            for (File jmxResourceDir : getJmxResourceDirectories()) {
                log("Backing up %s\n", jmxResourceDir);
                zipDir(new File(jmxResourceDir.getAbsolutePath() + ZIP_EXT), jmxResourceDir);
            }
        } else {
            throw new OnmsUpgradeException("This upgrade procedure requires at least OpenNMS 1.12.2, the current version is " + getOpennmsVersion());
        }
        File configDir = new File(ConfigFileConstants.getFilePathString());
        log("Backing configuration files: %s\n", configDir);
        zipDir(new File(configDir.getAbsolutePath() + ZIP_EXT), configDir);
    }

