    @Override
    public void execute() throws OnmsUpgradeException {
        Writer out = null;
        try {
            final DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
            final DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
            final Document doc = docBuilder.parse(m_configFile);
            final NodeList found = doc.getElementsByTagName("discovery-configuration");
            if (found.getLength() == 1 && found.item(0) instanceof Element) {
                final Element el = (Element)found.item(0);
                el.removeAttribute("threads");
                final Transformer tf = TransformerFactory.newInstance().newTransformer();
                tf.setOutputProperty(OutputKeys.ENCODING, StandardCharsets.UTF_8.name());
                tf.setOutputProperty(OutputKeys.INDENT, "yes");
                out = new StringWriter();
                tf.transform(new DOMSource(doc), new StreamResult(out));
                FileUtils.write(m_configFile, out.toString());
            } else {
                throw new OnmsUpgradeException("Unsure how to handle XML node(s): " + found);
            }
        } catch (final IOException | SAXException | ParserConfigurationException | TransformerException e) {
            throw new OnmsUpgradeException("Failed to upgrade discovery-configuration.xml", e);
        } finally {
            IOUtils.closeQuietly(out);
        }
    }

