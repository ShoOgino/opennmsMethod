    /**
     * ZIP a directory.
     *
     * @param zipFile the output ZIP file
     * @param sourceFolder the source folder
     * @throws OnmsUpgradeException the OpenNMS upgrade exception
     */
    protected void zipDir(File zipFile, File sourceFolder) throws OnmsUpgradeException {
        List<File> filesToCompress = new ArrayList<File>();
        try {
            populateFilesList(sourceFolder, filesToCompress);
        } catch (IOException e) {
            throw new OnmsUpgradeException("Cannot ZIP files because " + e.getMessage(), e);
        }
        zipFiles(zipFile, sourceFolder, filesToCompress);
    }

