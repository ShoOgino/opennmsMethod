    private String ensureQueueExists(String queueName, Map<String, String> attributes) {
        final AmazonSQS sqsClient = getSQSClient();
        try {
            return sqsClient.createQueue(new CreateQueueRequest(queueName).withAttributes(attributes)).getQueueUrl();
        } catch (QueueNameExistsException e) {
            final String queueUrl = sqsClient.getQueueUrl(queueName).getQueueUrl();
            sqsClient.setQueueAttributes(new SetQueueAttributesRequest(queueUrl, attributes));
            return queueUrl;
        }
    }

