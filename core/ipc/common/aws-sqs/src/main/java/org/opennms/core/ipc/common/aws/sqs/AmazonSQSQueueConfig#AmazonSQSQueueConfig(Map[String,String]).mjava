    public AmazonSQSQueueConfig(Map<String, String> sqsConfig) {
        final Map<String,String> attributes = new HashMap<>();
        for (AmazonSQSQueueAttributes attr : AmazonSQSQueueAttributes.values()) {
            // Retrieve the property, using the default if provided
            final String val = sqsConfig.getOrDefault(attr.toString(), DEFAULT_QUEUE_ATTRIBUTES.get(attr.toString()));
            if (val != null) {
                attributes.put(attr.toString(), val);
            }
        }
        if (!Boolean.parseBoolean(attributes.get(AmazonSQSQueueAttributes.FifoQueue.toString()))) {
            attributes.remove(AmazonSQSQueueAttributes.FifoQueue.toString());
            attributes.remove(AmazonSQSQueueAttributes.ContentBasedDeduplication.toString());
        }
        this.attributes = ImmutableMap.copyOf(attributes);
    }

