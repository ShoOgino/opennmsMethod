    @Test(timeout = 30000)
    public void testLargeMessageWithRpcAtRemoteLocation() {
        await().atMost(10, TimeUnit.SECONDS).pollInterval(2, TimeUnit.SECONDS)
                .until(() -> {
                            grpcClient.dispatch(new HeartbeatModule(), null, new Heartbeat());
                            return server.getRpcHandlerByLocation().size();
                        },
                        not(0));
        EchoRequest request = new EchoRequest();
        // Message size would be > 4MB which is default size for gRPC
        String message = Strings.repeat("OpenNMS", Integer.parseInt(MAX_BUFFER_SIZE_COUNTER));
        request.setBody(message);
        request.setLocation(REMOTE_LOCATION_NAME);
        EchoResponse expectedResponse = new EchoResponse();
        expectedResponse.setBody(message);
        try {
            EchoResponse actualResponse = echoClient.execute(request).get();
            assertEquals(expectedResponse, actualResponse);
        } catch (InterruptedException | ExecutionException e) {
            fail();
        }

    }

