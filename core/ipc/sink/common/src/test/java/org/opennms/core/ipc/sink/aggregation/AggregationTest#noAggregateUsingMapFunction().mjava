    @Test
    public void noAggregateUsingMapFunction() throws Exception {
        SinkModuleWithMappingAggregate aggregatingSinkModule = new SinkModuleWithMappingAggregate();
        try(SyncDispatcher<UDPPacket> dispatcher = capturingMessageDispatcherFactory.createSyncDispatcher(aggregatingSinkModule)) {
            for (byte i = 0; i < 10; i++) {
                UDPPacket packet = new UDPPacket(localhost, ByteBuffer.wrap(new byte[]{i}));
                dispatcher.send(packet);
                // The message should have been wrapped in a UDPPacketLog
                // and immediately dispatched
                UDPPacketLog packetLog = new UDPPacketLog(packet);
                assertEquals(dispatchedMessages.get(i), packetLog);
            }
        }
    }

