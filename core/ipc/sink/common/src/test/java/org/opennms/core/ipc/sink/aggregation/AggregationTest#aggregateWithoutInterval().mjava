    @Test
    public void aggregateWithoutInterval() throws Exception {
        SinkModuleWithAggregateNoInterval aggregatingSinkModule = new SinkModuleWithAggregateNoInterval();
        try(SyncDispatcher<UDPPacket> dispatcher = capturingMessageDispatcherFactory.createSyncDispatcher(aggregatingSinkModule)) {
            for (byte i = 0; i < 10 * COMPLETION_SIZE; i++) {
                UDPPacket packet = new UDPPacket(localhost, ByteBuffer.wrap(new byte[]{(byte)i}));
                dispatcher.send(packet);
            }
            // The message should have been aggregated
            assertEquals(10, dispatchedMessages.size());
        }
    }

