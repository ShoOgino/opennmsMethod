        SerializedBatch(byte[] bytes) throws IOException {
            try (ByteArrayInputStream bis = new ByteArrayInputStream(bytes);
                 ObjectInput in = new ObjectInputStream(bis)) {
                try {
                    batchedMessages.addAll(((SerializedBatch) in.readObject()).batchedMessages);
                } catch (ClassNotFoundException e) {
                    throw new RuntimeException(e);
                }
            }
        }

