        void add(T message) {
            if (batchedMessages.size() >= batchSize) {
                throw new IllegalStateException("Attempted to add a message while the batch was full");
            }

            batchedMessages.add(message);
        }

