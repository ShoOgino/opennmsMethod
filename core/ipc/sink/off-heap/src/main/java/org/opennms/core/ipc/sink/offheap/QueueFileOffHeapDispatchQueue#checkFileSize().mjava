    @VisibleForTesting
    public long checkFileSize() {
        try {
            long fileSize = (long) usedBytesMethod.invoke(offHeapQueue);
            fileCapacityLatch.setCurrentCapacityBytes(maxFileSizeInBytes - fileSize);
            LOG.trace("Checked file size for module {} and got result {} bytes", moduleName,
                    fileSize);

            return fileSize;
        } catch (IllegalAccessException | InvocationTargetException e) {
            RATE_LIMITED_LOGGER.warn("Failed to check file size for module {}", moduleName, e);
            return 0;
        }
    }

