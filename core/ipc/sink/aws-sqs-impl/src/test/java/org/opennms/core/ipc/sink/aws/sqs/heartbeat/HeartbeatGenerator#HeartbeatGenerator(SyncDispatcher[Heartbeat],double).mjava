    /**
     * Instantiates a new heartbeat generator.
     *
     * @param dispatcher the dispatcher
     * @param rate the rate
     */
    public HeartbeatGenerator(SyncDispatcher<Heartbeat> dispatcher, double rate) {
        this.dispatcher = dispatcher;
        this.rate = rate;
        MetricRegistry metrics = new MetricRegistry();
        this.sentMeter = metrics.meter("sent");
        this.sendTimer = metrics.timer("send");
    }

