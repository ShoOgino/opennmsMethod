    /* (non-Javadoc)
     * @see org.opennms.core.ipc.sink.aws.sqs.AmazonSQSManager#ensureQueueExists(java.util.Properties, com.amazonaws.services.sqs.AmazonSQS, java.lang.String)
     */
    public String ensureQueueExists(Properties awsConfig, AmazonSQS sqs, String queueName) throws AmazonSQSException {
        final Map<String, String> attributes = buildProperties(awsConfig);
        try {
            return sqs.createQueue(new CreateQueueRequest(queueName).withAttributes(attributes)).getQueueUrl();
        } catch (AmazonSQSException e) {
            if (e.getErrorCode().equals("QueueAlreadyExists")) {
                final String queueUrl = sqs.getQueueUrl(queueName).getQueueUrl();
                sqs.setQueueAttributes(new SetQueueAttributesRequest(queueUrl, attributes));
                return queueUrl;
            } else {
                throw e;
            }
        }
    }

