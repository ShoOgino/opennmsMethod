    /**
     * Aggregate the given message into an existing bucket, or
     * create a new bucket if no bucket exists.
     *
     * @param oldBucket the existing bucket, or <code>null</code> if a new bucket should be created
     * @param newMessage the message to aggregate
     * @return the new bucket
     */
    T aggregate(T oldBucket, S newMessage);

