        public HeartbeatGenerator(MessageProducer<Heartbeat> producer, double rate) {
            this.producer = producer;
            this.rate = rate;
            MetricRegistry metrics = new MetricRegistry();
            this.sentMeter = metrics.meter("sent");
            this.sendTimer = metrics.timer("send");
        }

