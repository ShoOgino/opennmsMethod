    private static <T> Optional<T> handleExceptionInternal(Throwable t, RpcExceptionHandler<T> visitor) {
        if (t instanceof InterruptedException) {
            return Optional.ofNullable(visitor.onInterrupted(t));
        } else if (t instanceof RequestRejectedException) {
            return Optional.ofNullable(visitor.onRejected(t));
        } else if (t instanceof java.util.concurrent.RejectedExecutionException) {
            return Optional.ofNullable(visitor.onRejected(t));
        } else if (t instanceof RequestTimedOutException) {
            return Optional.ofNullable(visitor.onTimedOut(t));
        } else {
            return null;
        }
    }

