    /**
     * This test verifies that the message will not be processed if a chunk is missing and rpc client throws
     * timeout exception instead of unmarshal exception.
     */
    @Test(timeout = 30000)
    public void testLargeBufferBySkippingChunks() throws ExecutionException, InterruptedException {
        kafkaRpcServer.setSkipChunks(true);
        SnmpRequestDTO requestDTO = new SnmpRequestDTO();
        requestDTO.setTimeToLive(5000L);
        requestDTO.setLocation(REMOTE_LOCATION_NAME);
        String xmlFile = MockSnmpClient.class.getResource("/snmp-response.xml").getFile();
        SnmpMultiResponseDTO expectedResponseDTO = JaxbUtils.unmarshal(SnmpMultiResponseDTO.class, new File(xmlFile));
        try {
            snmpClient.execute(requestDTO).get();
            fail();
        } catch (ExecutionException e) {
            Assert.assertTrue(kafkaRpcServer.isSkippedOrDuplicated());
            assertEquals(RequestTimedOutException.class, e.getCause().getClass());
        }
    }

