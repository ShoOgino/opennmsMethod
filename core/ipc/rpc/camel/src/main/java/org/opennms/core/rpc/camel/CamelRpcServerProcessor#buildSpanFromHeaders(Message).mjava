    private Tracer.SpanBuilder buildSpanFromHeaders(Message message) {

        final Tracer tracer = tracerRegistry.getTracer();
        Map<String, String> tracingInfo = new HashMap<>();
        String tracingInfoObj = message.getHeader(JMS_TRACING_INFO, String.class);
        if(tracingInfoObj != null) {
            tracingInfo.putAll(TracingInfoCarrier.unmarshalTracinginfo(tracingInfoObj));
        }
        Tracer.SpanBuilder spanBuilder;
        SpanContext context = tracer.extract(Format.Builtin.TEXT_MAP, new TextMapExtractAdapter(tracingInfo));
        if (context != null) {
            spanBuilder = tracer.buildSpan(module.getId()).asChildOf(context);
        } else {
            spanBuilder = tracer.buildSpan(module.getId());
        }
        return spanBuilder;
    }

