        public CommandArrayGenerator(String s) {
            if (s == null) {
                throw new IllegalArgumentException("Cannot take null parameters.");
            }

            // Visit the string char. by char. in order,
            // splitting it into segments
            for (char c : s.toCharArray()) {
                onChar(c);
            }

            // Make sure to keep any trailing characters
            resetSegment();
        }

