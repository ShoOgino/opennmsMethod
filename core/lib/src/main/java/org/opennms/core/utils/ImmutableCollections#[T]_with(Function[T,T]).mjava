    /**
     * Creates an instance that maps elements to an immutable form using the given mapping function.
     * <p>
     * The mapping function may return the element unmapped if it is already considered immutable.
     *
     * @param immutableInstanceFactory a function for mapping an element to an immutable copy of that element
     * @return a new instance with the given mapping function
     */
    public static <T> ImmutableCollections<T> with(Function<T, T> immutableInstanceFactory) {
        return new ImmutableCollections<>(Objects.requireNonNull(immutableInstanceFactory));
    }

