        @Override
        public void run() {
            long lastTimeStamp = 0;
            while (!closed.get()) {
                WatchKey key = null;
                try {
                    key = watcher.take();
                } catch (Exception e) {
                    LOG.info("Watcher is either interruped or closed", e);
                    break;
                }

                for (WatchEvent<?> event : key.pollEvents()) {
                    WatchEvent.Kind<?> kind = event.kind();
                    WatchEvent<Path> ev = cast(event);
                    Path dir = (Path) key.watchable();
                    Path updatedFile = dir.resolve(ev.context());
                    // Some editors create temporary buffers, watch for both create/modify
                    if (kind == StandardWatchEventKinds.ENTRY_MODIFY || kind == StandardWatchEventKinds.ENTRY_CREATE) {
                        if (updatedFile.toString().equals(fileName)) {
                            final long now = System.currentTimeMillis();
                            final long interval = Long.getLong("org.opennms.core.fileutils.watcher.interval.seconds", 1);
                            if (now - lastTimeStamp > TimeUnit.SECONDS.toMillis(interval)) {
                                LOG.info(" file got updated, send callback");
                                callback.reload();
                            } else {
                                LOG.debug(" callback was not sent as the changes are in within {} secs interval ", interval);
                            }
                            lastTimeStamp = now;
                        }
                    }
                    if (!key.reset()) {
                        break;
                    }
                }
            }
        }

