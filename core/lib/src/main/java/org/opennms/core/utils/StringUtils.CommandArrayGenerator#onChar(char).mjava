        private void onChar(char c) {
            if (c == '"') {
                if(m_isInQuotes) {
                    // Reset the segment if we reach another quote
                    // while we're in quotes
                    resetSegment();
                }
                m_isInQuotes = !m_isInQuotes; // Toggle
            } else if (isWhitespace(c)) {
                if (!m_isInQuotes) {
                    // Reset the segment if we reach a whitespace
                    // character outside of quotes
                    resetSegment();
                } else if (c == ' ') {
                    // Preserve any spaces within a quoted segment
                    m_segmentBuffer.append(c);
                } else {
                    // Reset the segment if any other whitespace
                    // characters are reached in a quoted segment
                    // (do this in order to preserve existing behavior )
                    resetSegment();
                }
            } else {
                m_segmentBuffer.append(c);
            }
        }

