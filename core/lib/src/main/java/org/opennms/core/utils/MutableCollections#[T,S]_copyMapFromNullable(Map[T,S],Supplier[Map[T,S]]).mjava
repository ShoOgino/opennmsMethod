    /**
     * Copy a Map.
     *
     * @param toCopy      the Map to copy
     * @param mapSupplier the supplier for the desired Map type
     * @return a new Map containing the same elements as the given Map
     */
    public static <T, S> Map<T, S> copyMapFromNullable(Map<T, S> toCopy, Supplier<Map<T, S>> mapSupplier) {
        Map<T, S> map = mapSupplier.get();
        if (toCopy == null || toCopy.isEmpty()) {
            return map;
        }
        map.putAll(toCopy);
        return map;
    }

