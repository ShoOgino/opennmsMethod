    private boolean waitForJaasContext() {
        final long sleepMs = TimeUnit.SECONDS.toMillis(2);
        final long maxSleepMs = TimeUnit.MINUTES.toMillis(3);
        for (long k = 0; k < maxSleepMs; k += sleepMs) {
            try {
                new LoginContext(JAAS_CONTEXT_NAME);
                return true;
            } catch (LoginException e) {
                // pass
            }

            try {
                Thread.sleep(sleepMs);
            } catch (InterruptedException e) {
                break;
            }
        }
        return false;
    }

