    public OpenNMSJUnit4ClassRunner(Class<?> clazz) throws InitializationError {
        super(clazz);

        // Make a deep copy of the existing listeners
        List<TestExecutionListener> oldListeners = getTestContextManager().getTestExecutionListeners();
        List<TestExecutionListener> listeners = new ArrayList<TestExecutionListener>(oldListeners.size());
        for (TestExecutionListener old : oldListeners) {
            listeners.add(old);
        }
        oldListeners.clear();

        // Register the standard set of execution listeners
        for (final String className : STANDARD_LISTENER_CLASS_NAMES) {
            try {
                final TestExecutionListener listener = (TestExecutionListener)Class.forName(className).newInstance();
                getTestContextManager().registerTestExecutionListeners(listener);
            } catch (final Throwable t) {
                LogUtils.infof(this, "Failed while attempting to load default unit test listener class %s: %s", className, t.getLocalizedMessage());
            }
        }

        // Add any additional listeners that may have been specified manually in the test
        final Comparator<TestExecutionListener> comparator = new ClassNameComparator();
        final TreeSet<TestExecutionListener> standardListeners = new TreeSet<TestExecutionListener>(comparator);
        for (final TestExecutionListener listener : listeners) {
            if (!standardListeners.contains(listener)) {
                getTestContextManager().registerTestExecutionListeners(listener);
            }
        }
    }

