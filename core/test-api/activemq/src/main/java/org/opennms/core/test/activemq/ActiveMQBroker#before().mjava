    @Override
    public void before() throws Exception {
        m_temporaryDirectory = Files.createTempDirectory("activemq-data");
        m_broker.setPersistent(false);
        m_broker.setDataDirectory(m_temporaryDirectory.toString());
        m_broker.start();
        if (!m_broker.waitUntilStarted()) {
            throw new Exception("ActiveMQ broker was not started or stopped unexpectedly. Error: " + m_broker.getStartException());
        }
    }

