    @Override
    public SnmpAgentConfig getAgentConfig(final InetAddress address, String location) {
        final SnmpAgentConfigProxyMapper mapper = SnmpAgentConfigProxyMapper.getInstance();
        final SnmpAgentAddress agentAddress = mapper.getAddress(address);

        final String addressString = str(address);
        if (agentAddress == null) {
            LOG.debug(
                    "No agent address mapping found for {}!  Try adding a @JUnitSnmpAgent(host=\"{}\", resource=\"...\" entry...",
                    addressString, addressString);

            return super.getAgentConfig(address, location);

        }

        final SnmpAgentConfig config = new SnmpAgentConfig(agentAddress.getAddress());
        config.setProxyFor(address);
        config.setPort(agentAddress.getPort());

        LOG.debug("proxying {} -> {}", addressString, agentAddress);
        return config;
    }

