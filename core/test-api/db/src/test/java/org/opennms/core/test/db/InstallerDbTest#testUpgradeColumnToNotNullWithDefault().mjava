    public void testUpgradeColumnToNotNullWithDefault() throws Exception {
        
        final String[] commands = { "CREATE TABLE alarms ( id integer, x733ProbableCause integer )",
                "INSERT INTO alarms ( id, x733ProbableCause ) VALUES ( 1, 1 )",
                "INSERT INTO alarms ( id, x733ProbableCause ) VALUES ( 2, NULL )" };
        final String newSql = "CREATE TABLE alarms ( id integer, x733ProbableCause integer DEFAULT 0 NOT NULL );\n";

        executeSQL(commands);

        getInstallerDb().readTables(new StringReader(newSql));
        getInstallerDb().createTables();
        
        assertEquals("x733ProbableCause for id = 1 should have its original value", 1, jdbcTemplate.queryForInt("SELECT x733ProbableCause FROM alarms WHERE id = 1"));
        assertEquals("x733ProbableCause for id = 2 should have the DEFAULT value", Integer.valueOf(0), jdbcTemplate.queryForObject("SELECT x733ProbableCause FROM alarms WHERE id = 2", Integer.class));

    }

