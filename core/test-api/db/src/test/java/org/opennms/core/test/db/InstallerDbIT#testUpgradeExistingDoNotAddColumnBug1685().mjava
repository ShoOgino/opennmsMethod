    @Test
    public void testUpgradeExistingDoNotAddColumnBug1685() throws Exception {
        getInstallerDb().createSequences();
        getInstallerDb().updatePlPgsql();
        getInstallerDb().addStoredProcedures();

        addTableFromSQL("monitoringlocations");
        addTableFromSQL("monitoringsystems");
        addTableFromSQL("node");

        // Insert the default monitoring location
        getInstallerDb().insertData("monitoringlocations");

        // Add snmpinterface table with an arbitrary change so it gets upgraded
        addTableFromSQLWithReplacements("snmpinterface", new String[][] {
                new String[] {
                        "snmpIfAlias\\s+varchar\\(\\d+\\),", ""
                } });

        executeSQL("INSERT INTO node ( location, nodeId, nodeCreateTime ) "
                   + "VALUES ( 'localhost', 1, now() )");
        executeSQL("INSERT INTO snmpInterface ( nodeID, snmpIfIndex ) "
                   + "VALUES ( 1, 1 )");
        
        int id = jdbcTemplate.queryForObject("SELECT id from snmpInterface", Integer.class);
        
        getInstallerDb().createTables();

        int id2 = jdbcTemplate.queryForObject("SELECT id from snmpInterface", Integer.class);

        assertEquals("id before upgrade should equal id after upgrade", id,
                     id2);
    }

