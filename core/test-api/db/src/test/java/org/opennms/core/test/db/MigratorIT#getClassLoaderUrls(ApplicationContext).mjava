    private static Collection<String> getClassLoaderUrls(ApplicationContext context) {
        List<String> urls = new LinkedList<String>();
        for (ApplicationContext c = context; c != null; c = c.getParent()) {
            for (ClassLoader l = c.getClassLoader(); l != null; l = l.getParent()) {
                if (l instanceof URLClassLoader) {
                    for (URL u : ((URLClassLoader)l).getURLs()) {
                        urls.add(u.toString());
                    }
                } else {
                    throw new RuntimeException("Couldn't get URLs for classloader " + l + ", not an instance of URLClassLoader. (This shouldn't happen.)");
                }
            }
        }
        return urls;
    }

