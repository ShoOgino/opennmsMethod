    /**
     * Create a temp file with the configuration and the given ports.
     */
    private PathResource createConfiguration() throws IOException {
        ClassPathResource resource = new ClassPathResource("org/opennms/netmgt/snmp/SnmpProxyIT.xml");
        String xml = new String(Files.readAllBytes(resource.getFile().toPath()));
        xml = xml.replace("${port1}", Integer.toString(port1));
        xml = xml.replace("${port2}", Integer.toString(port2));
        File configFile = File.createTempFile(this.getClass().getSimpleName(), ".xml");
        tmpFile = configFile; // to be deleted later
        Files.write(configFile.toPath(), xml.getBytes());

        LOG.info("Configuration from org/opennms/netmgt/snmp/SnmpProxyIT.xml:\n" + xml);
        return new PathResource(configFile.toPath());
    }

