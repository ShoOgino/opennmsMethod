    @Test
    public void testTrapReceiverWithOpenNMS() {
        System.out.println("ONMS: Register for Traps");
        TestTrapListener trapListener = new TestTrapListener();
        SnmpV3User user = new SnmpV3User("agalue", "MD5", "0p3nNMSv3", "DES", "0p3nNMSv3");
        try {
            m_strategy.registerForTraps(trapListener, this, m_addr, 9162, Collections.singletonList(user));
            sendTraps();
        } catch (final IOException e) {
            LogUtils.debugf(this, e, "Failed to register for traps.");
        } catch (final Exception e) {
            LogUtils.debugf(this, e, "Failed to send traps.");
        } finally {
            System.out.println("ONMS: Unregister for Traps");
            try {
                m_strategy.unregisterForTraps(trapListener, 9162);
            } catch (final IOException e) {
                LogUtils.debugf(this, e, "Failed to unregister for traps.");
            }
        }

        System.out.println("ONMS: Checking Trap status");
        assertFalse(trapListener.hasError());
        assertEquals(2, trapListener.getReceivedTrapCount());
    }

