    private CompletableFuture<SnmpResponseDTO> get(SnmpRequestDTO request, SnmpGetRequestDTO get) {
        final SnmpObjId[] oids = get.getOids().toArray(new SnmpObjId[get.getOids().size()]);
        final CompletableFuture<SnmpValue[]> future = SnmpUtils.getAsync(request.getAgent(), oids);
        return future.thenApply(values -> {
            final List<SnmpResult> results = new ArrayList<>(oids.length);
            if (values.length < oids.length) {
                // Should never reach here, should have thrown exception in SnmpUtils.
                LOG.warn("Received error response from SNMP for the agent {} for oids = {}", request.getAgent(), oids);
                final SnmpResponseDTO responseDTO = new SnmpResponseDTO();
                responseDTO.setCorrelationId(get.getCorrelationId());
            } else {
                for (int i = 0; i < oids.length; i++) {
                    final SnmpResult result = new SnmpResult(oids[i], null, values[i]);
                    results.add(result);
                }
            }
            final SnmpResponseDTO responseDTO = new SnmpResponseDTO();
            responseDTO.setCorrelationId(get.getCorrelationId());
            responseDTO.setResults(results);
            return responseDTO;
        });
    }

