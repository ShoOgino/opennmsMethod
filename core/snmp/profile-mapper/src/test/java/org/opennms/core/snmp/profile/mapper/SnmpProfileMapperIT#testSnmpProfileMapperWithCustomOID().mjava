    @Test(timeout = 30000)
    public void testSnmpProfileMapperWithCustomOID() {

        // timeout and ttl from profile.
        int timeout = 6000;
        long ttl = 7000;
        try (InputStream configStream = getClass().getResource("/snmp-config2.xml").openStream()) {
            setUpProfileMapper(configStream);
            CompletableFuture<Optional<SnmpAgentConfig>> future = profileMapper.getAgentConfigFromProfiles(InetAddress.getByName("192.0.1.206"),
                    "Minion", ".1.3.6.1.2.1.1.3.0");
            Optional<SnmpAgentConfig> agentConfig = future.get();
            assertTrue(agentConfig.isPresent());
            assertEquals(agentConfig.get().getTTL().longValue(), ttl);
            assertEquals(agentConfig.get().getTimeout(), timeout);
            snmpPeerFactory.saveAgentConfigAsDefinition(agentConfig.get(), "Default", "test");
            List<Definition> definitions = snmpPeerFactory.getSnmpConfig().getDefinitions();
            Optional<Definition> definition = definitions.stream().filter(def -> def.getTimeout() == timeout).findFirst();
            assertTrue(definition.isPresent());
            assertEquals("profile1", definition.get().getProfileLabel());
        } catch (InterruptedException | ExecutionException | IOException e) {
            fail();
        }
    }

