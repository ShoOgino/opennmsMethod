    public void prepareDatabase(Migration migration) throws MigrationException {
        log().info("validating database version");
        validateDatabaseVersion();
        log().info("adding PL/PgSQL support to the database, if necessary");
        createLangPlPgsql();
        log().info("creating OpenNMS user, if necessary");
        createUser(migration);
        log().info("creating OpenNMS database, if necessary");
        createDatabase(migration);
    }

