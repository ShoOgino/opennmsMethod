    /**
     * <p>validateDatabaseVersion</p>
     *
     * @throws org.opennms.core.schema.MigrationException if any.
     */
    public void validateDatabaseVersion() throws MigrationException {
        if (!m_validateDatabaseVersion) {
            log().info("skipping database version validation");
            return;
        }
        log().info("validating database version");

        Float dbv = getDatabaseVersion();
        if (dbv == null) {
            throw new MigrationException("unable to determine database version");
        }

        String message = "Unsupported database version \"" + dbv + "\" -- you need at least "
            + POSTGRES_MIN_VERSION + " and less than " + POSTGRES_MAX_VERSION_PLUS_ONE
            + ".  Use the \"-Q\" option to disable this check if you feel brave and are willing "
            + "to find and fix bugs found yourself.";
        
        if (dbv < POSTGRES_MIN_VERSION || dbv >= POSTGRES_MAX_VERSION_PLUS_ONE) {
            throw new MigrationException(message);
        }
    }

