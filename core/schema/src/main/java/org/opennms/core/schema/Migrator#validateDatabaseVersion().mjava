    /**
     * <p>validateDatabaseVersion</p>
     *
     * @throws org.opennms.core.schema.MigrationException if any.
     */
    public void validateDatabaseVersion() throws MigrationException {
        if (!m_validateDatabaseVersion) {
        	LogUtils.infof(this, "skipping database version validation");
            return;
        }
        LogUtils.infof(this, "validating database version");

        final Float dbv = getDatabaseVersion();
        if (dbv == null) {
            throw new MigrationException("unable to determine database version");
        }

        final String message = String.format(
        		"Unsupported database version \"%f\" -- you need at least %f and less than %f.  "
        		+ "Use the \"-Q\" option to disable this check if you feel brave and are willing "
        		+ "to find and fix bugs found yourself.",
        		dbv.floatValue(), POSTGRES_MIN_VERSION, POSTGRES_MAX_VERSION_PLUS_ONE
        );
        
        if (dbv < POSTGRES_MIN_VERSION || dbv >= POSTGRES_MAX_VERSION_PLUS_ONE) {
            throw new MigrationException(message);
        }
    }

