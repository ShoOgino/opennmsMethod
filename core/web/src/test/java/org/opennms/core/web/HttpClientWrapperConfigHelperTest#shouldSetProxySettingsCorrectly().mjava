    @Test
    public void shouldSetProxySettingsCorrectly(){

        HttpClientWrapper client = Mockito.mock(HttpClientWrapper.class);

        // Param not set
        Map<String, Object> params = new HashMap<>();
        HttpClientWrapperConfigHelper.setUseSystemProxyIfDefined(client, params);
        verify(client, times(0)).useSystemProxySettings();

        // Param false
        params.put(useSystemProxy.getKey(), Boolean.FALSE);
        HttpClientWrapperConfigHelper.setUseSystemProxyIfDefined(client, params);
        verify(client, times(0)).useSystemProxySettings();

        // Param true
        params.put(useSystemProxy.getKey(), Boolean.TRUE);
        HttpClientWrapperConfigHelper.setUseSystemProxyIfDefined(client, params);
        verify(client, times(1)).useSystemProxySettings();
    }

