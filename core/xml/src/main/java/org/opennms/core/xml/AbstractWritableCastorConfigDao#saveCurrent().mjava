    /**
     * Saves the current in-memory configuration to disk and reloads
     *
     * @throws org.exolab.castor.xml.MarshalException
     *             if any.
     * @throws java.io.IOException
     *             if any.
     * @throws org.exolab.castor.xml.ValidationException
     *             if any.
     */
    public void saveCurrent() throws IOException, MarshalException, ValidationException {
        File file;
        try {
            file = getConfigResource().getFile();
        } catch (final IOException e) {
            LOG.warn("Resource '{}' cannot be saved because it does not seem to have an underlying File object: {}", getConfigResource(), e);
            throw e;
        }

        getWriteLock().lock();

        try {
            CastorUtils.marshalViaString(getObject(), file);
        } finally {
            getWriteLock().unlock();
        }

        update();
    }

