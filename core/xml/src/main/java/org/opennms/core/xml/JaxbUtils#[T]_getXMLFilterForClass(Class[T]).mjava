	public static <T> XMLFilter getXMLFilterForClass(final Class<T> clazz) throws SAXException {
		final XMLFilter filter;
		final XmlSchema schema = clazz.getPackage().getAnnotation(XmlSchema.class);
		if (schema != null) {
			final String namespace = schema.namespace();
			if (namespace != null && !"".equals(namespace)) {
				LogUtils.debugf(clazz, "found namespace %s for class %s", namespace, clazz);
				filter = new SimpleNamespaceFilter(namespace, true);
			} else {
				filter = new SimpleNamespaceFilter("", false);
			}
		} else {
			filter = new SimpleNamespaceFilter("", false);
		}

		final XMLReader xmlReader = XMLReaderFactory.createXMLReader();
		filter.setParent(xmlReader);
		return filter;
	}

