    /**
     * Get a Spring BeanFactory by context ID.
     *
     * @param contextId the context ID of the BeanFactory to fetch
     * @return the BeanFactory
     */
    public static BeanFactoryReference getBeanFactory(String contextId) {
        // If no ApplicationContext has been injected by an existing Spring
        // context, then use DefaultLocatorFactory to find or create the context
        if (m_context == null) {
            BeanFactoryLocator beanFactoryLoader = DefaultLocatorFactory.getInstance();
            return beanFactoryLoader.useBeanFactory(contextId);
        } else {
            return new BeanFactoryReference() {
                @Override
                public BeanFactory getFactory() {
                    return m_context;
                }

                @Override
                public void release() {}
            };
        }
    }

