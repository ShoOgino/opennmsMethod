	@Test
	// The httpRemotingWebAppPath property is set in the POM to the path to the http-remoting WAR file
	@JUnitHttpServer(webapps=@Webapp(context="/", pathSystemProperty="httpRemotingWebAppPath"))
	public void runRemotePoller() throws Exception {
		//Boot.main(new String[] {

		// Use a separate process to execute the remote poller so that the OneJar classloader
		// doesn't unintentionally load any code from the JUnit classloader
		Process remotePoller = Runtime.getRuntime().exec(new String[] {
				"java",
				// Set the user home directory to the target directory so that the remote poller
				// will log to that directory
				"-Duser.home=target",
				// Execute the 1.8.17 version of the remote poller
				"-jar",
				"src/test/resources/org.opennms.assemblies.remote-poller-onejar-1.8.17.one-jar.jar",
				// Connect to the JUnitHttpServer
				"-u",
				"http://127.0.0.1:9162/",
				// Use RDU as the ID of this remote poller
				"-l",
				"RDU",
				// Login with admin:admin credentials
				"-n",
				"admin",
				"-p",
				"admin",
				// Debug logging
				"-d"
		});

		Thread.sleep(10000);

		try {
			remotePoller.exitValue();
			fail("Remote poller process has terminated unexpectedly");
		} catch (IllegalThreadStateException e) {
			// This exception should be thrown if the process is still executing
		}
		remotePoller.destroy();
	}

