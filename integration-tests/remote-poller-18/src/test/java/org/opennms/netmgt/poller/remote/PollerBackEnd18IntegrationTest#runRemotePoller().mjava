	@Test
	//@JUnitHttpServer(webapps=@Webapp(context="/opennms", path=System.getProperty("httpRemotingWebAppPath")))
	public void runRemotePoller() throws Exception {
		//Boot.main(new String[] {

		// Use a separate process to execute the remote poller so that the OneJar classloader
		// doesn't unintentionally load any code from the JUnit classloader
		Process remotePoller = Runtime.getRuntime().exec(new String[] {
				"java",
				// Set the user home directory to the target directory
				"-Duser.home=target",
				"-jar",
				"src/test/resources/org.opennms.assemblies.remote-poller-onejar-1.8.17.one-jar.jar",
				"-u",
				"http://127.0.0.1:9162/",
				"-l",
				"my_remote_poller",
				"-n",
				"admin",
				"-p",
				"admin",
				"-d"
		});
		IOUtils.copy(remotePoller.getInputStream(), System.out);
		IOUtils.copy(remotePoller.getErrorStream(), System.err);

		Thread.sleep(20000);

		try {
			remotePoller.exitValue();
			fail("Remote poller process has terminated unexpectedly");
		} catch (IllegalThreadStateException e) {
			// This exception should be thrown if the process is still executing
		}
		remotePoller.destroy();
	}

