    @Test
    public void testAllIncludedDatacollectionGroups() throws Exception {
        File dataCollectionConfFile = ConfigurationTestUtils.getFileForConfigFile("datacollection-config.xml");
        File groupDirFile = new File(dataCollectionConfFile.getParentFile(), "datacollection");
        assertTrue("events directory exists at " + groupDirFile.getAbsolutePath(), groupDirFile.exists());
        assertTrue("events directory is a directory at " + groupDirFile.getAbsolutePath(), groupDirFile.isDirectory());

        File[] includedGroupFiles = groupDirFile.listFiles(new FilenameFilter() {
            public boolean accept(File file, String name) {
                return name.endsWith(".xml");
            } });

        for (File includedGroupFile : includedGroupFiles) {
            try {
                // Be conservative about what we ship, so don't be lenient
                LocalConfiguration.getInstance().getProperties().remove(CASTOR_LENIENT_SEQUENCE_ORDERING_PROPERTY);
                Resource resource = new FileSystemResource(includedGroupFile);
                System.out.println("Unmarshalling: " + resource.getURI());
                CastorUtils.unmarshal(DatacollectionGroup.class, resource);
            } catch (Throwable t) {
                throw new RuntimeException("Failed to unmarshal " + includedGroupFile + ": " + t, t);
            }
        }
    }

