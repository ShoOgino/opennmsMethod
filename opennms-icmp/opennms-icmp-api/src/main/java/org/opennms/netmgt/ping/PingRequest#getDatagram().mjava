    /**
     * Builds a datagram compatible with the ping ReplyReceiver class.
     */
    private DatagramPacket getDatagram() {
        ICMPEchoPacket iPkt = new ICMPEchoPacket(getTid());
        iPkt.setIdentity(FILTER_ID);
        iPkt.setSequenceId(getSequenceId());
        iPkt.computeChecksum();

        byte[] data = iPkt.toBytes();
        return new DatagramPacket(data, data.length, getAddress(), 0);
    }

