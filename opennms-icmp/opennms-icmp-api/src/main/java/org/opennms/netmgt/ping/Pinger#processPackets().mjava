	private static void processPackets() throws InterruptedException {
        while (true) {
            try {
                DatagramPacket packet = s_icmpSocket.receive();

                // Check the packet length
                if (packet.getLength() != ICMPEchoPacket.getNetworkSize()) {
                    // skip it its not an echo reply
                    continue;
                }
                
                ICMPEchoPacket pkt = new ICMPEchoPacket(packet.getData());
                Reply reply = new Reply(packet.getAddress(), pkt);
                
                if (reply.isEchoReply() && reply.getIdentity() == PingRequest.FILTER_ID) {
                    debugf("Found an echo packet addr = %s, port = %d, length = %d, created reply %s", packet.getAddress(), packet.getPort(), packet.getLength(), reply);
                    s_pendingReplyQueue.offer(reply);
                }
            } catch (IOException e) {
                log().error("I/O Error occurred reading from ICMP Socket", e);
            }
            
        }
    }

