        public void run() {
            try {
                while (true) {
                    DatagramPacket pkt = m_socket.receive();
                    org.opennms.netmgt.ping.PingReply reply;
                    try {
                        reply = org.opennms.netmgt.ping.PingReply.create(pkt);
                    } catch (Throwable t) {
                        // do nothing but skip this packet
                        continue;
                    }
            
                    if (reply.isEchoReply()
                        && reply.getIdentity() == m_icmpId) {
                        float rtt = ((float) reply.getPacket().getPingRTT())
                                    / 1000;
                        System.out.println(ICMPEchoPacket.getNetworkSize()
                                           + " bytes from "
                                           + InetAddressUtils.str(pkt.getAddress())
                                           + ": icmp_seq="
                                           + reply.getPacket().getTID()
                                           + ". time="
                                           + rtt + " ms");
                    }
                }
            } catch (final Throwable t) {
                LogUtils.errorf(this, t, "An exception occured processing the datagram, thread exiting.");
                System.exit(1);
            }
        }

