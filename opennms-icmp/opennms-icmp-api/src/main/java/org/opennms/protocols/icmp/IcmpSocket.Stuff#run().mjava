        public void run() {
            try {
                while (true) {
                    DatagramPacket pkt = m_socket.receive();
                    org.opennms.netmgt.ping.Reply reply;
                    try {
                        reply = org.opennms.netmgt.ping.Reply.create(pkt);
                    } catch (Throwable t) {
                        // do nothing but skip this packet
                        continue;
                    }
            
                    if (reply.isEchoReply()
                        && reply.getIdentity() == m_icmpId) {
                        float rtt = ((float) reply.getPacket().getPingRTT())
                                    / 1000;
                        System.out.println(reply.getPacket().getNetworkSize()
                                           + " bytes from "
                                           + pkt.getAddress().getHostAddress()
                                           + ": icmp_seq="
                                           + reply.getPacket().getTID()
                                           + ". time="
                                           + rtt + " ms");
                    }
                }
            } catch (Throwable t) {
                System.err.println("An exception occured processing the "
                                   + "datagram, thread exiting.");
                t.printStackTrace();
                System.exit(1);
            }
        }

