    @Test
    public void testCalculateTaskTimeout() throws Exception {
        PingSweepRequestDTO request = new PingSweepRequestDTO();

        // Make 3 ranges of 5 addresses each
        for (int i = 0; i < 3; i++) {
            request.addIpRange(new IPRangeDTO("127.0.1." + ((i * 5) + 1), "127.0.1." + ((i * 5) + 5), 2, 50));
        }

        // Each task is taking 750 ms so totalTaskTimeout = 750 ms * 3 (number of tasks) = 2250 ms
        // With a (default) rate of 1 packet per second, this should be extended
        // by 1000 milliseconds per all 15 IP addresses
        assertEquals(new Long(Math.round(2250 * 1.5) + (15 * 1000)), request.getTimeToLiveMs()); 
    }

