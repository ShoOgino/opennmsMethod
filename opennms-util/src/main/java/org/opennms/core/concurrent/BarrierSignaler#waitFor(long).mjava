    /**
     * <p>waitFor</p>
     *
     * @param timeout a long.
     * @throws java.lang.InterruptedException if any.
     */
    public synchronized void waitFor(long timeout) throws InterruptedException {
        long last = System.currentTimeMillis();
        long waitTime = timeout;
        while (m_counter < m_barrier && waitTime > 0) {
            wait(waitTime);
            long now = System.currentTimeMillis();
            waitTime -= (now - last);
        }
    }

