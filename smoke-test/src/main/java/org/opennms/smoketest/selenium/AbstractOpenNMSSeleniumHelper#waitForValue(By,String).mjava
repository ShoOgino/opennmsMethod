    protected void waitForValue(final By selector, final String expectedValue) {
        LOG.debug("waitForValue({}, \"{}\")", selector, expectedValue);
        wait.until((ExpectedCondition<Boolean>) driver -> {
            String value;
            try {
                setImplicitWait(200, TimeUnit.MILLISECONDS);
                value = driver.findElement(selector).getAttribute("value");
            } catch(NoSuchElementException nse) {
                LOG.debug("Element not found yet.");
                throw nse;
            } catch (StaleElementReferenceException sere) {
                LOG.debug("Element was found but was already stale by the time we queried the attribute. Trying again.");
                value = driver.findElement(selector).getAttribute("value");
            } finally {
                setImplicitWait();
            }
            LOG.debug("Found element with value: {}", value);
            return expectedValue.equals(value);
        });
    }

