    protected void createForeignSource(final String foreignSource, final String xml) {
        LOG.debug("Creating foreign source definition: {}", foreignSource);
        try {
            sendPost("/rest/foreignSources", xml);
            // make sure it gets written to disk
            doRequest(new HttpGet(getBaseUrlExternal() + "opennms/rest/foreignSources"));
            waitUntil(new Callable<Boolean>() {
                @Override
                public Boolean call() throws Exception {
                    return 200 == doRequest(new HttpGet(getBaseUrlExternal() + "opennms/rest/foreignSources/" + URLEncoder.encode(foreignSource, Charset.defaultCharset().toString())));
                }
            });
        } catch (final Exception e) {
            throw new OpenNMSTestException(e);
        }
    }

