        @Override
        protected void waitUntilReady() {
            LOG.info("Waiting for Sentinel health check...");
            final long timeoutMins = 5;
            final InetSocketAddress sshAddr = container.getSshAddress();
            final AtomicReference<String> lastOutput = new AtomicReference<>();
            try {
                await().atMost(timeoutMins, MINUTES).pollInterval(5, SECONDS)
                        .until(() -> KarafShellUtils.testHealthCheck(sshAddr, lastOutput));
            } catch(ConditionTimeoutException e) {
                LOG.error("Sentinel did not finish starting after {} minutes. Last output:", timeoutMins, lastOutput);
                throw new RuntimeException(e);
            }
            LOG.info("Health check passed.");
        }

