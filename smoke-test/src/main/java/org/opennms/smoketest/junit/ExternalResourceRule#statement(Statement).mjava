    private Statement statement(final Statement base) {
        return new Statement() {
            @Override
            public void evaluate() throws Throwable {
                boolean didFail = true;
                try {
                    before();
                    base.evaluate();
                    didFail = false;
                } catch (Throwable t) {
                    throw t;
                } finally {
                    after(didFail);
                }
            }
        };
    }

