    @Test
    public void testCanAddIpServiceEdge() throws Exception {
        try {
            createTestSetup();

            // Create a BusinessService and open editor
            final String serviceName = createUniqueBusinessServiceName();
            BsmAdminPageEditWindow bsmAdminPageEditWindow = bsmAdminPage.openNewDialog(serviceName);

            // Check that the ipServices are known
            BsmAdminPageEdgeEditWindow bsmAdminPageEdgeEditWindow = bsmAdminPageEditWindow.newEdgeWindow();
            bsmAdminPageEdgeEditWindow.selectEdgeType("IP Service");
            final String IP_SERVICE_1 = "NodeA /0:0:0:0:0:0:0:1 AAA";
            final String IP_SERVICE_2 = "NodeA /0:0:0:0:0:0:0:1 BBB";
            final String IP_SERVICE_3 = "NodeA /127.0.0.1 CCC";
            final String IP_SERVICE_4 = "NodeA /127.0.0.1 DDD";
            wait.until(pageContainsText(IP_SERVICE_1));
            wait.until(pageContainsText(IP_SERVICE_2));
            wait.until(pageContainsText(IP_SERVICE_3));
            wait.until(pageContainsText(IP_SERVICE_4));

            // Locate relevant components
            bsmAdminPageEdgeEditWindow.selectIpService(IP_SERVICE_3);
            bsmAdminPageEdgeEditWindow.selectMapFunction("Increase");
            bsmAdminPageEdgeEditWindow.confirm();

            // save
            bsmAdminPageEditWindow.save();

            // Verify
            bsmAdminPage.openEditDialog(serviceName);
            wait.until(pageContainsText("IPSvc: NodeA /127.0.0.1 CCC, Map: Increase, Weight: 1"));

            // Close dialog and delete BusinessService
            bsmAdminPageEditWindow.cancel();
            bsmAdminPage.delete(serviceName);
        } finally {
            removeTestSetup();
        }
    }

