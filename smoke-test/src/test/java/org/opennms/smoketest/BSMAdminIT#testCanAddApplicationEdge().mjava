    @Test
    public void testCanAddApplicationEdge() throws Exception {
        try {
            createTestSetup();

            // create application MyApplication
            sendPost("api/v2/applications", "<application id='42'><name>MyApplication</name><monitoredServices></monitoredServices></application>", 201);

            // Create a BusinessService and open editor
            final String serviceName = createUniqueBusinessServiceName();
            BsmAdminPageEditWindow bsmAdminPageEditWindow = bsmAdminPage.openNewDialog(serviceName);

            BsmAdminPageEdgeEditWindow bsmAdminPageEdgeEditWindow = bsmAdminPageEditWindow.newEdgeWindow();
            bsmAdminPageEdgeEditWindow.selectMapFunction("Increase");
            bsmAdminPageEdgeEditWindow.selectEdgeType("Application");
            bsmAdminPageEdgeEditWindow.selectApplication("MyApplication");

            // save
            bsmAdminPageEdgeEditWindow.confirm();
            bsmAdminPageEditWindow.save();

            // Verify
            bsmAdminPage.openEditDialog(serviceName);
            wait.until(pageContainsText("Application: MyApplication, Map: Increase, Weight: 1"));

            // Close dialog and delete BusinessService
            bsmAdminPageEditWindow.cancel();
            bsmAdminPage.delete(serviceName);
        } finally {
            // delete application MyApplication
            sendDelete("api/v2/applications");

            removeTestSetup();
        }
    }

