    // See NMS-8542
    @Test
    public void canChangeFocusWhenInSimulationMode() {
        // Ensure that simulation mode is disabled and enable it afterwards
        Assert.assertEquals(Boolean.FALSE, topologyUiPage.isSimulationModeEnabled());
        topologyUiPage.clickOnMenuItemsWithLabels("Simulate", "Simulation Mode");
        Assert.assertEquals(Boolean.TRUE, topologyUiPage.isSimulationModeEnabled());

        // Verify pre conditions
        Assert.assertTrue("We need at least 3 visible vertices", 3 <= topologyUiPage.getVisibleVertices().size());
        Assert.assertTrue("Only one vertex should be in focus", 1 == topologyUiPage.getFocusedVertices().size());
        Assert.assertTrue("At least one vertex must not be focused", topologyUiPage.getNotFocusedVertices().size() >= 1);

        // Add a vertex to focus, which is not yet in focus
        topologyUiPage.getNotFocusedVertices().get(0).contextMenu().addToFocus();

        // Simulation mode should still be enabled
        Assert.assertEquals(Boolean.TRUE, topologyUiPage.isSimulationModeEnabled());

        // Set some vertex as focus
        Assert.assertTrue("At least one vertex must not be focused", topologyUiPage.getNotFocusedVertices().size() >= 1);
        topologyUiPage.getNotFocusedVertices().get(0).contextMenu().setAsFocus();

        // Simulation mode should still be enabled
        Assert.assertEquals(Boolean.TRUE, topologyUiPage.isSimulationModeEnabled());
    }

