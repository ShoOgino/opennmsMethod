    private static void verify(CloseableHttpResponse response) throws IOException {
        assertEquals(500, response.getStatusLine().getStatusCode());

        // Verify response entity. It should contain error information and should not be the JSP
        final String responseEntity = new BufferedReader(new InputStreamReader(response.getEntity().getContent()))
                .lines().collect(Collectors.joining("\n")).trim();
        assertThat(responseEntity, not(containsString("<!DOCTYPE html>")));
        assertThat(responseEntity, not(containsString("<html")));
        assertThat(responseEntity, not(containsString("</html>")));
    }

