        private boolean isMenuItemCheckedWithRetries(int retries, String itemName, String... path) {
            try {
                // Disable retries, since we're already in a retry loop
                clickOnMenuItemsWithLabelsWithRetries(0, path);

                final WebElement automaticRefresh = getMenubarElement(itemName);
                final String cssClasses = automaticRefresh.getAttribute("class");
                if (cssClasses != null) {
                    if (cssClasses.contains("-unchecked")) {
                        return false;
                    } else if (cssClasses.contains("-checked")) {
                        return true;
                    } else {
                        throw new RuntimeException("Unknown CSS classes '" + cssClasses + "'."
                                    + " Unable to determine if the item is checked or unchecked.");
                    }
                } else {
                    throw new RuntimeException("Element has no CSS classes!"
                            + " Unable to determine if the item is checked or unchecked.");
                }
            } catch (NoSuchElementException e) {
                if (retries > 0) {
                    LOG.info("Failed to find one or more elements in menu path: {} for item: {}. Retrying.",
                            Arrays.toString(path), itemName);
                    return isMenuItemCheckedWithRetries(retries-1, itemName, path);
                } else {
                    throw e;
                }
            }
        }

