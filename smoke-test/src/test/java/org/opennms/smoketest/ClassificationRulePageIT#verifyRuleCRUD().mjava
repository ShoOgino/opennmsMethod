    @Test
    public void verifyRuleCRUD() {
        final GroupTab groupTab = new GroupTab(this.uiPage, Tabs.USER_DEFINED).click();
        assertThat(groupTab.isEmpty(), is(true));

        // Create dummy group
        groupTab.addNewRule(new RuleDTOBuilder()
                .withName("http")
                .withPort("80,8080")
                .withProtocol("udp,tcp").build());
        assertThat(groupTab.isEmpty(), is(false));

        // Verify that one group has been created
        final List<RuleData> rules = groupTab.getRules();
        assertThat(rules, hasSize(1));
        final RuleData rule = rules.get(0);
        assertThat(rule.getName(), is("http"));
        assertThat(rule.getPort(), is("80,8080"));
        assertThat(rule.getProtocol(), is("TCP,UDP"));
        assertThat(rule.getIpAddress(), is(""));

        // Edit rule
        groupTab.editRule(rule.getPosition(),
                createFrom(rule)
                        .withIpAddress("127.0.0.1")
                        .withName("OpenNMS")
                        .withPort("8980")
                        .withProtocol("tcp").build());

        // Edit, but cancel
        groupTab.editModal(0).setInput(createFrom(rule).build()).cancel();

        // Verify edit made it through, but cancel did not
        final RuleData modifiedRule = groupTab.getRuleData(0);
        assertThat(modifiedRule.getName(), is("OpenNMS"));
        assertThat(modifiedRule.getPort(), is("8980"));
        assertThat(modifiedRule.getIpAddress(), is("127.0.0.1"));
        assertThat(modifiedRule.getProtocol(), is("TCP"));

        // Delete rule
        groupTab.deleteGroup(rule.getPosition());
        assertThat(groupTab.getRules(), hasSize(0));
    }

