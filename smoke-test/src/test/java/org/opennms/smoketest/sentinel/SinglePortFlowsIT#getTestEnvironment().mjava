    protected TestEnvironment getTestEnvironment() {
        if (!OpenNMSSeleniumTestCase.isDockerEnabled()) {
            return new NullTestEnvironment();
        }
        try {
            final TestEnvironmentBuilder builder = TestEnvironment.builder()
                    .opennms()
                    .es6()
                    .minion()
                    .sentinel();

            builder.withMinionEnvironment()
                .addFile(getClass().getResource("/sentinel/org.opennms.features.telemetry.listeners-udp-50003-single-port.cfg"), "etc/org.opennms.features.telemetry.listeners-udp-single-port.cfg");

            builder.withSentinelEnvironment()
                .addFile(getClass().getResource("/sentinel/features-jms.xml"), "deploy/features.xml"); // We re-use the features-jms.xml file here, as it should work as well

            OpenNMSSeleniumTestCase.configureTestEnvironment(builder);

            return builder.build();
        } catch (final Throwable t) {
            throw new RuntimeException(t);
        }
    }

