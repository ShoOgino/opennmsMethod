    protected TestEnvironment getTestEnvironment() {
        if (!OpenNMSSeleniumTestCase.isDockerEnabled()) {
            return new NullTestEnvironment();
        }
        try {
            final TestEnvironmentBuilder builder = TestEnvironment.builder().opennms().sentinel();

            // Auto-Deploy sentinel-persistence feature and the dao-test bundle, which verifies the DAOs afterwards
            builder.withSentinelEnvironment()
                    .addFile(getClass().getResource("/sentinel/features-dao.xml"), "deploy/features.xml")
                    .addFile(Paths.get("target/deploy-artifacts/org.opennms.features.distributed.dao-test.jar").toUri().toURL(), "deploy/org.opennms.features.distributed.dao-test.jar");
            OpenNMSSeleniumTestCase.configureTestEnvironment(builder);
            return builder.build();
        } catch (final Throwable t) {
            throw new RuntimeException(t);
        }
    }

