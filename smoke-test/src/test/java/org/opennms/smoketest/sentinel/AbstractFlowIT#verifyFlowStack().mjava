    @Test
    public void verifyFlowStack() throws Exception {
        // Determine endpoints
        final InetSocketAddress elasticRestAddress = stack.elastic().getRestAddress();
        final InetSocketAddress sentinelSshAddress = stack.sentinel().getSshAddress();
        final InetSocketAddress minionFlowAddress = stack.minion().getNetworkProtocolAddress(NetworkProtocol.FLOWS);

        waitForSentinelStartup(sentinelSshAddress);

        final FlowTester flowTester = new FlowTestBuilder()
                .withNetflow5Packet(minionFlowAddress)
                .withNetflow9Packet(minionFlowAddress)
                .withIpfixPacket(minionFlowAddress)
                .withSFlowPacket(minionFlowAddress)
                .build(elasticRestAddress);

        flowTester.verifyFlows();
    }

