    protected  String persistCollectionData(OpenNMSStack stack, String nodeId) throws Exception {
        String shellOutput;
        try (final SshClient sshClient = stack.opennms().ssh()) {
            PrintStream pipe = sshClient.openShell();
            //opennms:collect --node #nodeId --persist org.opennms.netmgt.collectd.SnmpCollector #host
            pipe.println("opennms:collect --node " + nodeId + " --persist org.opennms.netmgt.collectd.Jsr160Collector 127.0.0.1 port=18980");
            pipe.println("logout");
            await().atMost(60, SECONDS)
                    .conditionEvaluationListener(new OnTimeOutLogger(() -> System.out.println("Shell output: " + sshClient.getStdoutOrNull())))
                    .until(sshClient.isShellClosedCallable());
            shellOutput = CommandTestUtils.stripAnsiCodes(sshClient.getStdout());
        }
        return shellOutput;
    }

