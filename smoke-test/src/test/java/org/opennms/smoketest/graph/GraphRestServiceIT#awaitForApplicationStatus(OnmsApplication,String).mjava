    private void awaitForApplicationStatus(final OnmsApplication application, final String severity) {
        final JSONObject query = new JSONObject()
                .put("semanticZoomLevel", 1)
                .put("verticesInFocus", Lists.newArrayList(String.format("Application:%s", application.getId())));
        await()
                .atMost(2, MINUTES)
                .until(() -> {
                    karafShell.runCommand("opennms:graph-force-reload --container application");
                    final String status = new ApplicationViewResponse(getApplicationViewResponse(query.toString()))
                            .getVertexByApplicationId(application.getId())
                            .getJSONObject("status")
                            .getString("severity");
                    LOG.debug("application {} status={}", application.getId(), status);
                    return status;
                }, equalTo(severity));
    }

