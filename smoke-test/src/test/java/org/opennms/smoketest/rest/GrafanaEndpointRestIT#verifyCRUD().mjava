    @Test
    public void verifyCRUD() {
        // Ensure nothing is created
        given().get()
                .then().log().all()
                .assertThat().statusCode(204);

        // Verify CREATE
        final GrafanaEndpoint endpoint = createDummyEndpoint();
        given().contentType(ContentType.JSON).body(endpoint).post()
                .then().log().all()
                .assertThat().statusCode(202);

        // Get list to verify creation
        final GrafanaEndpoint[] endpoints = given().get()
                .then().log().all()
                .assertThat().statusCode(200)
                .extract().as(GrafanaEndpoint[].class);
        assertEquals(1, endpoints.length);

        // Verify created element
        final GrafanaEndpoint persistedEndpoint = endpoints[0];
        endpoint.setId(persistedEndpoint.getId());
        assertEquals(endpoint, persistedEndpoint);

        // Verify UPDATE
        endpoint.setApiKey("new api key");
        given().contentType(ContentType.JSON).body(endpoint).put(endpoint.getId().toString())
                .then().log().all()
                .assertThat().statusCode(202);
        final GrafanaEndpoint updatedEndpoint = given().get(endpoint.getId().toString()).then().statusCode(200).extract().as(GrafanaEndpoint.class);
        assertEquals("new api key", updatedEndpoint.getApiKey());
        assertEquals(endpoint, updatedEndpoint);

        // Verify DELETE
        given().delete(endpoint.getId().toString()).then().log().all().assertThat().statusCode(202);
        given().get().then().log().all().assertThat().statusCode(204);
    }

