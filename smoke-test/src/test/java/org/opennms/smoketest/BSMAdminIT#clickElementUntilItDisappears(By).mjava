    /**
     * In some cases, Vaadin doesn't register our clicks,
     * so this method keeps click until the given element
     * is no longer found.
     *
     * @param by selector
     */
    private void clickElementUntilItDisappears(By by) {
        // click once to make sure the element *ever* existed
        waitForElement(by).click();

        try {
            setImplicitWait(100, TimeUnit.MILLISECONDS);
            wait.until(new ExpectedCondition<Boolean>() {
                @Override
                public Boolean apply(final WebDriver driver) {
                    try {
                        driver.findElement(by).click();
                        return false;
                    } catch (NullPointerException|NoSuchElementException|StaleElementReferenceException e) {
                        return true;
                    }
                }
            });
        } finally {
            setImplicitWait();
        }
    }

