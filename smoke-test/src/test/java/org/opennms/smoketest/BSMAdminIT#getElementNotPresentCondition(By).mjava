    private ExpectedCondition<Boolean> getElementNotPresentCondition(final By by) {
        return ExpectedConditions.not(new ExpectedCondition<Boolean>() {
           @Nullable
           @Override
           public Boolean apply(@Nullable WebDriver input) {
               try {
                   // the default implicit wait timeout is too long, make it shorter
                   input.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);
                   WebElement elementFound = input.findElement(by);
                   return elementFound != null;
               } catch (NoSuchElementException|StaleElementReferenceException ex) {
                   return false;
               } finally {
                   // set the implicit wait timeout back to the value it has been before
                   input.manage().timeouts().implicitlyWait(LOAD_TIMEOUT, TimeUnit.MILLISECONDS);
               }
           }
       });
    }

