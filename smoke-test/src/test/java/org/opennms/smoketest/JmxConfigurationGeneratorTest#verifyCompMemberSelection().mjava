    /*
     * Verifies that selected CompMembers do show up in the generated jmx-datacollection-config.xml snippet.
     */
    @Test
    public void verifyCompMemberSelection() throws InterruptedException, IOException, SAXException {
        // forwards
        findElementById("port").clear();
        findElementById("port").sendKeys("18980"); // set OpenNMS JMX port
        findElementByXpath("//span[@id='skipDefaultVM']/input").click(); // deselect

        // go to next page
        findElementById("next").click();
        wait.until(pageContainsText(MBEANS_VIEW_TREE_WAIT_NAME));

        selectNodeByName("PS MarkSweep", true);

        // go to last page
        findElementById("next").click();
        wait.until(pageContainsText("collectd-configuration.xml"));

        // switch to jmx-datacollection-config.xml tab
        findElementByXpath("//div[text()='jmx-datacollection-config.xml']").click();
        wait.until(pageContainsText("JMXMP protocol."));

        // verify output
        final String jmxDatacollectionConfigContent = findElementByXpath("//textarea").getAttribute("value");
        try ( ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) {
            ByteStreams.copy(getClass().getResourceAsStream("/expected-jmx-datacollection-config.xml"), outputStream);
            XMLAssert.assertXMLEqual(outputStream.toString(), jmxDatacollectionConfigContent);
        }
    }

