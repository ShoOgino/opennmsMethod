    @Test
	public void minionHeartBeatTestForLastUpdated() {

		Date startOfTest = new Date();
		InetSocketAddress pgsql = m_testEnvironment.getServiceAddress(ContainerAlias.POSTGRES, 5432);
		HibernateDaoFactory daoFactory = new HibernateDaoFactory(pgsql);
		MinionDao minionDao = daoFactory.getDao(MinionDaoHibernate.class);

		Criteria criteria = new CriteriaBuilder(OnmsMinion.class).ge("lastUpdated", startOfTest).toCriteria();

		// The heartbeat runs every minute so if we miss the first one, poll long enough
		// to catch the next one
		await().atMost(90, SECONDS).pollInterval(5, SECONDS).until(DaoUtils.countMatchingCallable(minionDao, criteria), greaterThan(0));

	}

