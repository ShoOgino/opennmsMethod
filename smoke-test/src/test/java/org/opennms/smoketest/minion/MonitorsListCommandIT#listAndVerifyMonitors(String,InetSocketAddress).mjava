    public List<String> listAndVerifyMonitors(String host, InetSocketAddress sshAddr) throws Exception {
        List<String> unmatchedMonitors = new ArrayList<>();
        try (final SshClient sshClient = new SshClient(sshAddr, "admin", "admin")) {
            // List the monitors
            PrintStream pipe = sshClient.openShell();
            pipe.println("opennms:list-monitors");
            pipe.println("logout");
            await().atMost(1, MINUTES).until(sshClient.isShellClosedCallable());

            // Parse the output
            String shellOutput = CommandTestUtils.stripAnsiCodes(sshClient.getStdout());

            shellOutput = StringUtils.substringAfter(shellOutput, "opennms:list-monitors");
            LOG.info("Monitors output: {}", shellOutput);
            Set<String> monitors = new HashSet<>();
            for (String monitor : shellOutput.split("\\r?\\n")) {
                if (StringUtils.isNotBlank(monitor)) {
                    monitors.add(monitor);
                }
            }
            LOG.info("Found monitors: {}", monitors);

            // Verify
            for (String monitorName : expectedMonitors) {
                if (!monitors.contains(monitorName)) {
                    unmatchedMonitors.add(monitorName);
                }
            }
        }
        return unmatchedMonitors;
    }

