    // is the resposne a download response?
    private boolean isReportDownloadResponse(HttpResponse response) {
        if (response.headers().contains("Content-disposition")
            && response.headers().contains("Content-Type")) {

            String contentType = response.headers().get("Content-Type");
            boolean isPdfOrCsvContentType = contentType.contains("application/pdf") ||contentType.contains("text/csv");

            String contentDisposition = response.headers().get("Content-disposition");
            boolean hasFilename = contentDisposition.contains("inline") && contentDisposition.contains("filename=");

            return isPdfOrCsvContentType && hasFilename;
        }
        return false;
    }

