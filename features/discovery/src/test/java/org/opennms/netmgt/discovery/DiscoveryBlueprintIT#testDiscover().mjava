    @Test
    public void testDiscover() throws Exception
    {
        // We should get 1 call to the scheduler endpoint
        MockEndpoint endpoint = getMockEndpoint( "mock:direct:generateNewSuspects", false );
        endpoint.setExpectedMessageCount( 1 );

        // Create the config aka job
        Specific specific = new Specific();
        specific.setContent( "4.2.2.2" );

        DiscoveryConfiguration config = new DiscoveryConfiguration();
        config.addSpecific( specific );
        config.setForeignSource( "Bogus FS" );
        config.setTimeout( 3000 );
        config.setRetries( 2 );
        config.setLocation( "LOC1" );

        // Execute the job
        template.requestBody( "direct:submitDiscoveryTask", config );

        assertMockEndpointsSatisfied();
    }

