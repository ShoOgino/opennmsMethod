    private static void addMockCamelRouteForLocation(final String location, final IncludeRange range) throws Exception {
        SimpleRegistry registry = new SimpleRegistry();
        CamelContext mockDiscoverer = new DefaultCamelContext(registry);
        mockDiscoverer.addComponent("queuingservice", ActiveMQComponent.activeMQComponent("vm://localhost?create=false"));

        final IPAddressRange ipAddressRange = new IPAddressRange(
                new IPAddress(InetAddressUtils.addr(range.getBegin())),
                new IPAddress(InetAddressUtils.addr(range.getEnd())));
        final Iterator<IPAddress> iterator = ipAddressRange.iterator();
        final Map<InetAddress, Long> discoveryResultMap = Maps.newHashMap();
        while(iterator.hasNext()) {
            IPAddress next = iterator.next();
            discoveryResultMap.put(next.toInetAddress(), 1000L);
        }
        mockDiscoverer.addRoutes(new LocationAwareTestRouteBuilder(location, job -> new DiscoveryResults(
                discoveryResultMap,
                job.getForeignSource(),
                job.getLocation()
        )));
        mockDiscoverer.start();
    }

