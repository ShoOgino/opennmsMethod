    @Test
    public void canPerformExpressions() {
        QueryRequest request = new QueryRequest();
        request.setStart(1414602000000L);
        request.setEnd(1417046400000L);
        request.setStep(1000L);
        request.setMaxRows(700);

        Source ifInOctets = new Source();
        ifInOctets.setResourceId("node[1].interfaceSnmp[eth0-04013f75f101]");
        ifInOctets.setAttribute("ifInOctets");
        ifInOctets.setAggregation("MAX");
        ifInOctets.setLabel("ifInOctets");
        request.setSources(Lists.newArrayList(ifInOctets));

        Expression scale = new Expression();
        scale.setLabel("ifUsage");
        // References a variable from strings.properties
        scale.setExpression("ifInOctets * 8 / ifInOctets.ifSpeed");
        request.setExpressions(Lists.newArrayList(scale));

        QueryResponse response = m_svc.query(request);

        final int idx = 3;
        final Map<String, double[]> columns = response.columnsWithLabels();
        assertEquals(975.3053156146178, columns.get("ifInOctets")[idx], 0.0001);
        assertEquals(975.3053156146178 * 8d / 1000.0d, columns.get("ifUsage")[idx], 0.0001);
    }

