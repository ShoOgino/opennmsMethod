    @Test
    public void testStartWithDuplicatedService() throws Exception {
        this.databasePopulator.getTransactionTemplate().execute(tx -> {
            final OnmsApplication appA = new OnmsApplication();
            appA.setName("App A");
            appA.addPerspectiveLocation(this.databasePopulator.getLocRDU());
            appA.addMonitoredService(this.node1icmp);
            this.databasePopulator.getApplicationDao().saveOrUpdate(appA);

            this.node1icmp.addApplication(appA);
            this.databasePopulator.getMonitoredServiceDao().saveOrUpdate(this.node1icmp);

            final OnmsApplication appB = new OnmsApplication();
            appB.setName("App B");
            appB.addPerspectiveLocation(this.databasePopulator.getLocRDU());
            appB.addMonitoredService(this.node1icmp);
            this.databasePopulator.getApplicationDao().saveOrUpdate(appB);

            this.node1icmp.addApplication(appB);
            this.databasePopulator.getMonitoredServiceDao().saveOrUpdate(this.node1icmp);

            return null;
        });

        this.perspectivePollerd.start();
    }

