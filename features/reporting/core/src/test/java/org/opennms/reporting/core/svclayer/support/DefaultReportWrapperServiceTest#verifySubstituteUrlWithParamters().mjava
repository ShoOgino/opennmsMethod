    @Test
    public void verifySubstituteUrlWithParamters() {
        final String inputUrl = "http://localhost:8000/endpoint/:instanceId/:format?author=:parameter_author&option=:parameter_option&format=:format";
        final DeliveryOptions deliveryOptions = new DeliveryOptions();
        deliveryOptions.setFormat(ReportFormat.PDF);
        deliveryOptions.setInstanceId("report");

        final Map<String, Object> parameters = new HashMap<>();
        parameters.put("author", "ulf");
        parameters.put("option", true);

        assertThat(substituteUrl(inputUrl, deliveryOptions, parameters), Matchers.is("http://localhost:8000/endpoint/report/PDF?author=ulf&option=true&format=PDF"));
    }

