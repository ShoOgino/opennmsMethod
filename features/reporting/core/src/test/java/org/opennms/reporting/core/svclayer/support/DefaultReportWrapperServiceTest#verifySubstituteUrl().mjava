    @Test
    public void verifySubstituteUrl() {
        assertThat(substituteUrl("http://localhost:8000", Maps.newHashMap()), is("http://localhost:8000"));

        final DeliveryOptions deliveryOptions = new DeliveryOptions();
        deliveryOptions.setFormat(ReportFormat.CSV);
        deliveryOptions.setInstanceId("opennms-report-1");

        final String inputUrl = "http://localhost:8000/:instanceId/:format";
        assertThat(substituteUrl(inputUrl, deliveryOptions, Maps.newHashMap()), is("http://localhost:8000/opennms-report-1/CSV"));

        deliveryOptions.setInstanceId("opennms report 1");
        assertThat(substituteUrl(inputUrl, deliveryOptions, Maps.newHashMap()), is("http://localhost:8000/opennms+report+1/CSV"));
    }

