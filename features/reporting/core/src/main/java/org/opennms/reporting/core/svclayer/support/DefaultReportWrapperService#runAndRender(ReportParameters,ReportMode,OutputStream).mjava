    /** {@inheritDoc} */
   
    public void runAndRender(ReportParameters parameters, ReportMode mode,
            OutputStream outputStream) {

        // TODO remove this debug code
        Map<String, Object> reportParms = parameters.getReportParms(mode);
        for (String key : reportParms.keySet()) {
            String value;
            if (reportParms.get(key) == null) {
                value = "NULL";
            } else {
                value = reportParms.get(key).toString();
            }
            log.debug("param " + key + " set " + value);
        }

        try {
            getReportService(parameters.getReportId()).runAndRender(
                                                                    parameters.getReportParms(mode),
                                                                    parameters.getReportId(),
                                                                    parameters.getFormat(),
                                                                    outputStream);
        } catch (ReportException reportException) {
            log.error("failed to run or render report: "
                    + parameters.getReportId(), reportException);
        }

    }

