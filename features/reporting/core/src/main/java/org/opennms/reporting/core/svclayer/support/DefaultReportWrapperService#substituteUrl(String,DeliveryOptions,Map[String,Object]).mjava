    protected static String substituteUrl(String url, DeliveryOptions deliveryOptions, Map<String, Object> reportParameters) {
        final Map<String, Object> parameters = new HashMap<>();
        reportParameters.entrySet().forEach(e -> parameters.put("parameter_" + e.getKey(), e.getValue()));
        parameters.put("instanceId", deliveryOptions.getInstanceId());
        parameters.put("format", deliveryOptions.getFormat().name());

        final String newUrl = substituteUrl(url, parameters);
        return newUrl;
    }

