   /* (non-Javadoc)
 * @see org.opennms.reporting.availability.AvailabilityCalculator#writeXML()
 */
/**
 * <p>writeXML</p>
 *
 * @return a {@link java.lang.String} object.
 * @throws org.opennms.reporting.availability.AvailabilityCalculationException if any.
 */
public String writeXML() throws AvailabilityCalculationException {
        try {
            log.debug("Writing the XML");
            // Create a file name of type Category-monthFormat-startDate.xml
            SimpleDateFormat fmt = new SimpleDateFormat("yyyyMMdd");
            String catFileName = m_categoryName.replace(' ', '-');
            m_outputFileName = m_baseDir + catFileName + "-" + m_monthFormat
                    + fmt.format(m_periodEndDate) + ".xml";
            log.debug("Report Store XML file: " + m_outputFileName);
            File reportFile = new File(m_outputFileName);
            // marshal the XML into the file.
            marshal(reportFile);
            
        } catch (AvailabilityCalculationException e) {
            log.fatal("Unable to marshal report as XML");
            throw new AvailabilityCalculationException(e);
        }
        
        return m_outputFileName;
        
    }

