    /* (non-Javadoc)
     * @see org.opennms.reporting.availability.AvailabilityCalculator#calculate()
     */
    /**
     * <p>calculate</p>
     *
     * @throws org.opennms.reporting.availability.AvailabilityCalculationException if any.
     */
    @Override
    public void calculate() throws AvailabilityCalculationException {

        LOG.debug("Calculation Started");
        LOG.debug("periodEndDate: {}", m_periodEndDate);

        m_report.setLogo(m_logoURL);
        LOG.debug("logoURL: {}", m_logoURL);
        ViewInfo viewInfo = new ViewInfo();
        m_report.setViewInfo(viewInfo);
        org.opennms.reporting.availability.Categories categories = new org.opennms.reporting.availability.Categories();
        m_report.setCategories(categories);
        try {
            LOG.debug("Populating datastructures and calculating availability");
            LOG.debug("category: {}", m_categoryName);
            LOG.debug("monthFormat: {}", m_monthFormat);
            LOG.debug("reportFormat: {}", m_reportFormat);
            /* We just initialize this to make sure there are no exceptions, I guess?
             * AvailabilityData availData =
             */
            
            m_availabilityData.fillReport(m_categoryName,
                                                              m_report,
                                                              m_reportFormat,
                                                              m_monthFormat,
                                                              m_periodEndDate);
        } catch (MarshalException me) {
            LOG.error("MarshalException ", me);
            throw new AvailabilityCalculationException(me);
        } catch (ValidationException ve) {
            LOG.error("Validation Exception ", ve);
            throw new AvailabilityCalculationException(ve);
        } catch (IOException ioe) {
            LOG.error("Validation Exception ", ioe);
            throw new AvailabilityCalculationException(ioe);
        } catch (Throwable e) {
            LOG.error("Exception ", e);
            throw new AvailabilityCalculationException(e);
        }

    }

