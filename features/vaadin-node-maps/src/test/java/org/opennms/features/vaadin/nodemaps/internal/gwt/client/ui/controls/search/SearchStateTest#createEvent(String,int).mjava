    protected NativeEvent createEvent(final String type, final int keyCode) throws Exception {
        final NativeEvent event = PowerMock.createMock(NativeEvent.class);
        expect(event.getType()).andReturn(type).anyTimes();
        expect(event.getKeyCode()).andReturn(keyCode).anyTimes();
        event.stopPropagation();
        expectLastCall().andAnswer(new IAnswer<Void>() {
            @Override
            public Void answer() throws Throwable {
                LOG.info("stopPropagation() called on event(" + type + ", " + keyCode + ")");
                return null;
            }
        }).anyTimes();
        PowerMock.replay(event);
        return event;
    }

