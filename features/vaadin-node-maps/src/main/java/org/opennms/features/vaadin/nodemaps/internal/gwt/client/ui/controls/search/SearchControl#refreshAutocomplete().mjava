    public void refreshAutocomplete() {
        if (m_searchConsumer.isSearching()) {
            final String searchString = m_searchConsumer.getSearchString().toLowerCase();

            Scheduler.get().scheduleIncremental(new RepeatingCommand() {
                final ListIterator<NodeMarker> m_markerIterator = m_markerContainer.listIterator();
                final StringBuilder m_sb = new StringBuilder();

                @Override public boolean execute() {
                    if (m_markerIterator.hasNext()) {
                        final NodeMarker marker = m_markerIterator.next();
                        m_sb.append("<li>");
                        m_sb.append("<div class=\"autocomplete-entry\">");
                        m_sb.append(marker.getNodeLabel());
                        m_sb.append("</div>");
                        String additionalSearchInfo = null;
                        if (searchString.startsWith("category:")) {
                            final StringBuilder catBuilder = new StringBuilder();
                            final JsArrayString categories = marker.getCategories();
                            if (categories.length() > 0) {
                                if (categories.length() == 1) {
                                    catBuilder.append("Category: ");
                                } else {
                                    catBuilder.append("Categories: ");
                                }
                                for (int i = 0; i < categories.length(); i++) {
                                    catBuilder.append(categories.get(i));
                                    if (i != (categories.length() - 1)) {
                                        catBuilder.append(", ");
                                    }
                                }
                                additionalSearchInfo = catBuilder.toString();
                            }
                        } else if (searchString.startsWith("nodelabel:")) {
                            // do nothing, we already show this
                        } else if (searchString.startsWith("description")) {
                            additionalSearchInfo = "Description: " + marker.getDescription();
                        } else if (searchString.startsWith("ipaddress")) {
                            additionalSearchInfo = "IP Address: " + marker.getIpAddress();
                        } else if (searchString.startsWith("maintcontract")) {
                            additionalSearchInfo = "Maint.&nbsp;Contract: " + marker.getMaintContract();
                        }
                        if (additionalSearchInfo != null) {
                            m_sb.append("<div class=\"autocomplete-additional-info\">").append(additionalSearchInfo).append("</div>");
                        }
                        m_sb.append("</li>");
                        return true;
                    }

                    m_autocomplete.setHTML("<ul>" + m_sb.toString() + "</ul>");
                    m_autocomplete.setVisible(true);
                    updateAutocompleteStyle();
                    
                    return false;
                }
            });
        } else {
            m_autocomplete.setVisible(false);
            m_autocomplete.setHTML("No matches.");
        }
    }

