    public final Map<String,String> getProperties() {
        final Map<String,String> props = new HashMap<String,String>();

        final Integer nodeId = getNodeId();
        if (nodeId != null) props.put("nodeid", nodeId.toString());

        final Integer severity = getSeverity();
        if (severity != null) props.put("severity", severity.toString());

        final Integer unackedCount = getUnackedCount();
        if (unackedCount != null) props.put("unackedcount", unackedCount.toString());

        final Coordinates coordinates = getCoordinates();
        if (coordinates != null) props.put("coordinates", coordinates.toString());

        if (m_categoryList != null && m_categoryList.size() > 0) {
            final StringBuilder sb = new StringBuilder();
            final Iterator<String> i = getCategoryList().iterator();
            while (i.hasNext()) {
                sb.append(i.next());
                if (i.hasNext()) sb.append(",");
            }
            props.put("categories", sb.toString());
        }

        addIfExists(props, "foreignsource", getForeignSource());
        addIfExists(props, "foreignid", getForeignId());
        addIfExists(props, "nodelabel", getNodeLabel());
        addIfExists(props, "description", getDescription());
        addIfExists(props, "ipaddress", getIpAddress());
        addIfExists(props, "severitylabel", getSeverityLabel());
        addIfExists(props, "maintcontract", getMaintContract());
        return props;
    }

