    /**
     * Gets the node address.
     * 
     * @param node the OpenNMS Node
     * @return the node address
     */
    private String getNodeAddress(final OnmsNode node) {
        if (node == null || node.getAssetRecord() == null) return null;
        final OnmsAssetRecord assetRecord = node.getAssetRecord();

        final StringBuffer sb = new StringBuffer();

        if (assetRecord.getAddress1() != null) {
            sb.append(assetRecord.getAddress1());
            if (assetRecord.getAddress2() != null) {
                sb.append(" ").append(assetRecord.getAddress2());
            }
        }

        if (sb.length() > 0 && assetRecord.getCity() != null) sb.append(", ").append(assetRecord.getCity());
        if (sb.length() > 0 && assetRecord.getState() != null) sb.append(", ").append(assetRecord.getState());
        if (sb.length() > 0 && assetRecord.getZip() != null) sb.append(" ").append(assetRecord.getZip());
        return sb.toString();
    }

