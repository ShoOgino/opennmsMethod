    /*
     * (non-Javadoc)
     * @see com.vaadin.Application#init()
     */
    @Override
    public void init() {
        m_log.debug("initializing");

        setTheme("topo_default");

        final MapWidgetComponent openlayers = new MapWidgetComponent();
        openlayers.setNodeDao(m_nodeDao);
        openlayers.setAssetRecordDao(m_assetDao);
        openlayers.setAlarmDao(m_alarmDao);
        openlayers.setGeocoderService(m_geocoderService);
        openlayers.setTransactionOperation(m_transaction);
        openlayers.setSizeFull();

        m_rootLayout = new AbsoluteLayout();
        m_rootLayout.setSizeFull();

        m_window = new Window("OpenNMS Node Maps");
        m_window.setContent(m_rootLayout);
        m_window.addParameterHandler(new ParameterHandler() {
            @Override
            public void handleParameters(Map<String, String[]> parameters) {
                if (parameters.containsKey("nodeId")) {
                    int nodeId = parseInt(parameters.get("nodeId")[0], 0);
                    if (nodeId > 0) {
                        openlayers.setSingleNodeId(nodeId);
                    }
                } else {
                    openlayers.setSingleNodeId(-1);
                }
            }
        });
        setMainWindow(m_window);

        String mapLayerPosition = "top:0px; left:0px; right:0px; bottom:0px;";
        if (m_headerHtml != null) {
            final Panel header = new Panel("header");
            header.setCaption(null);
            header.setSizeUndefined();
            header.addStyleName("onmsheader");
            InputStream is = null;
            try {
                is = new ByteArrayInputStream(m_headerHtml.getBytes());
                final CustomLayout layout = new CustomLayout(is);
                header.setContent(layout);
                m_rootLayout.addComponent(header, "top: 0px; left: 0px; right:0px;");
                mapLayerPosition = "top:100px; left:0px; right:0px; bottom:0px;";
            } catch (final IOException e) {
                if (is != null) {
                    try {
                        is.close();
                    } catch (final IOException closeE) {
                        VConsole.log("failed to close HTML input stream");
                        VConsole.log(closeE);
                    }
                }
                VConsole.log("failed to get header layout data");
                VConsole.log(e);
            }
        }
        m_rootLayout.addComponent(openlayers, mapLayerPosition);

        final Refresher refresher = new Refresher();
        refresher.setRefreshInterval(REFRESH_INTERVAL);
        m_window.addComponent(refresher);
    }

