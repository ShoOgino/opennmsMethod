    public SearchStateManager(final ValueItem valueItem, final ValueItem history, final OpenNMSEventManager eventManager, final ComponentTracker componentTracker) {
        LOG.info("SearchStateManager initializing.");
        m_valueItem = valueItem;
        m_history = history;

        m_eventManager = eventManager;
        m_componentTracker = componentTracker;

        final String valueSearchString = m_valueItem.getValue();
        final String historySearchString = getHistorySearchString();
        if (historySearchString != null) {
            m_valueItem.setValue(historySearchString);
            m_state = State.SEARCHING_FINISHED;
        } else if (valueSearchString != null && !"".equals(valueSearchString)) {
            m_state = State.SEARCHING_FINISHED;
        } else {
            m_state = State.NOT_SEARCHING;
        }
        m_state.initialize(this);
        Scheduler.get().scheduleDeferred(new ScheduledCommand() {
            @Override public void execute() {
                m_componentTracker.ready(SearchStateManager.class);
            }
        });
    }

