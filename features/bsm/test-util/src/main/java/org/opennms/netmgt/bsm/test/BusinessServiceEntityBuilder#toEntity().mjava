    public BusinessServiceEntity toEntity() {
        BusinessServiceEntity entity = new BusinessServiceEntity();
        entity.setName(name);
        entity.setId(id);
        entity.setAttributes(attributes);
        if (reduceFunction != null) {
            entity.setReductionFunction(reduceFunction);
        }

        // TODO MVR we have to deal with the map function stuff
        ipServices.forEach(e -> entity.addIpServiceEdge(e, new IdentityEntity()));
        children.forEach(e -> entity.addChildServiceEdge(e, new IdentityEntity()));
        reductionKeys.forEach(e -> entity.addReductionKeyEdge(e, new IdentityEntity()));
        return entity;
    }

