    public MapFunction toServiceFunction(AbstractMapFunctionEntity mapFunction) {
        if (mapFunction == null) {
            return null;
        }
        Function<AbstractMapFunctionEntity, MapFunction> mapping = persistenceToServiceMapping.get(mapFunction.getClass());
        if (mapping == null) {
            throw new IllegalArgumentException("No mapping found");
        }
        return mapping.apply(mapFunction);
    }

