    public BusinessServicesShareIpServiceHierarchy(DatabasePopulator databasePopulator) {
        Objects.requireNonNull(databasePopulator);

        OnmsMonitoredService icmpServiceNode2 = databasePopulator.getMonitoredServiceDao().get(
                databasePopulator.getNode2().getId(),
                InetAddressUtils.addr("192.168.2.1"),
                "ICMP");

        // Create a simple hierarchy
        BusinessServiceEntity child1 = new BusinessServiceEntityBuilder()
                .name("Child 1")
                .addIpService(icmpServiceNode2, new IdentityEntity())
                .reduceFunction(new HighestSeverityEntity())
                .toEntity();

        BusinessServiceEntity child2 = new BusinessServiceEntityBuilder()
                .name("Child 2")
                .addIpService(icmpServiceNode2, new IdentityEntity())
                .reduceFunction(new HighestSeverityEntity())
                .toEntity();

        BusinessServiceEntity root = new BusinessServiceEntityBuilder()
                .name("Parent")
                .addChildren(child1, new IdentityEntity())
                .addChildren(child2, new IdentityEntity())
                .reduceFunction(new HighestSeverityEntity())
                .toEntity();

        businessServices.add(child1);
        businessServices.add(child2);
        businessServices.add(root);
    }

