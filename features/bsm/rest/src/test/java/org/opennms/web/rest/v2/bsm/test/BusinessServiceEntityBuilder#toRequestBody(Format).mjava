    public String toRequestBody(Format format) {
        BusinessServiceEntity entity = toEntity();

        BusinessServiceRequestDTO request = new BusinessServiceRequestDTO();
        request.setName(entity.getName());
        request.setAttributes(new HashMap<>(entity.getAttributes()));
        request.setChildServices(entity.getChildServices().stream().map(s -> s.getId()).collect(Collectors.toSet()));
        request.setIpServices(entity.getIpServices().stream().map(s -> s.getId()).collect(Collectors.toSet()));
        try {
            return format.transform(request);
        } catch (IOException ex) {
            Throwables.propagate(ex);
        }
        throw new IllegalStateException("No return value available.");
    }

