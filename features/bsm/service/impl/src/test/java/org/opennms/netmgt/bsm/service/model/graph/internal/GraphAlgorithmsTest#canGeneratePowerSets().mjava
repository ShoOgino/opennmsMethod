    @Test
    @SuppressWarnings("unchecked")
    public void canGeneratePowerSets() {
        Set<Set<String>> setContainingEmptySet = Sets.newHashSet();
        setContainingEmptySet.add(Sets.newHashSet());
        verifyPowerSetGeneration(
                Lists.newArrayList(),
                setContainingEmptySet);

        verifyPowerSetGeneration(
                Lists.newArrayList("a1", "a2"),
                Sets.newHashSet(
                        Sets.newHashSet(),
                        Sets.newHashSet("a1"),
                        Sets.newHashSet("a2"),
                        Sets.newHashSet("a1", "a2")
                ));

        verifyPowerSetGeneration(
                Lists.newArrayList("a1", "a2", "a3"),
                Sets.newHashSet(
                        Sets.newHashSet(),
                        Sets.newHashSet("a1"),
                        Sets.newHashSet("a2"),
                        Sets.newHashSet("a3"),
                        Sets.newHashSet("a1", "a2"),
                        Sets.newHashSet("a1", "a3"),
                        Sets.newHashSet("a2", "a3"),
                        Sets.newHashSet("a1", "a2", "a3")
                ));

        verifyPowerSetGeneration(
                Lists.newArrayList("a1", "a2", "a3", "a4"),
                Sets.newHashSet(
                        Sets.newHashSet(),
                        Sets.newHashSet("a1"),
                        Sets.newHashSet("a2"),
                        Sets.newHashSet("a3"),
                        Sets.newHashSet("a4"),
                        Sets.newHashSet("a1", "a2"),
                        Sets.newHashSet("a1", "a3"),
                        Sets.newHashSet("a1", "a4"),
                        Sets.newHashSet("a2", "a3"),
                        Sets.newHashSet("a2", "a4"),
                        Sets.newHashSet("a3", "a4"),
                        Sets.newHashSet("a1", "a2", "a3"),
                        Sets.newHashSet("a1", "a2", "a4"),
                        Sets.newHashSet("a1", "a3", "a4"),
                        Sets.newHashSet("a2", "a3", "a4"),
                        Sets.newHashSet("a1", "a2", "a3", "a4")
                ));
    }

