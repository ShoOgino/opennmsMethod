    @Test
    public void canRenderGraphToPng() {
        // Create a simple hierarchy
        MockBusinessServiceHierarchy h = MockBusinessServiceHierarchy.builder()
                .withBusinessService(1)
                    .withReductionKey(1, "a1")
                    .commit()
                .build();

        // Setup the state machine
        BusinessServiceStateMachine stateMachine = new DefaultBusinessServiceStateMachine();
        stateMachine.setBusinessServices(h.getBusinessServices());

        // Render the state machine graph
        File pngFile = new File(tempFolder.getRoot(), "test.png");
        assertFalse(pngFile.getAbsolutePath() + " should not exist.", pngFile.exists());
        stateMachine.renderGraphToPng(pngFile);
        assertTrue(pngFile.getAbsolutePath() + " should exist.", pngFile.exists());
    }

