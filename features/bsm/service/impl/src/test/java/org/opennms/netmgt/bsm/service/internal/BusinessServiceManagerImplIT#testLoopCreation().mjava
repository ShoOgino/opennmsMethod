    @Test
    public void testLoopCreation() {
        thrown.expect(IllegalArgumentException.class);
        thrown.expectMessage("Service will form a loop");

        BusinessService service1 = createService("Business Service #1");
        BusinessService service2 = createService("Business Service #2");
        BusinessService service3 = createService("Business Service #3");

        Long serviceId1 = businessServiceDao.save(service1);
        Long serviceId2 = businessServiceDao.save(service2);
        Long serviceId3 = businessServiceDao.save(service3);

        businessServiceManager.assignChildService(serviceId1, serviceId2);
        businessServiceManager.assignChildService(serviceId2, serviceId3);
        businessServiceManager.assignChildService(serviceId3, serviceId1);
    }

