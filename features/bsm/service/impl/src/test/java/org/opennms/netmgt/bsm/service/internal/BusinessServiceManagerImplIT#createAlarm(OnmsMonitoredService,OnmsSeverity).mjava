    private OnmsAlarm createAlarm(OnmsMonitoredService monitoredService, OnmsSeverity severity) {
        OnmsAlarm alarm = new OnmsAlarm();
        alarm.setUei(EventConstants.NODE_LOST_SERVICE_EVENT_UEI);
        alarm.setCounter(1);
        alarm.setDistPoller(distPollerDao.whoami());
        alarm.setNode(nodeDao.get(monitoredService.getNodeId()));
        alarm.setServiceType(monitoredService.getServiceType());
        alarm.setIpAddr(monitoredService.getIpAddress());
        alarm.setSeverity(severity);
        alarm.setReductionKey(String.format("%s::%d:%s:%s",
                        EventConstants.NODE_LOST_SERVICE_EVENT_UEI, monitoredService.getNodeId(),
                        InetAddressUtils.toIpAddrString(monitoredService.getIpAddress()),
                        monitoredService.getServiceName()));
        return alarm;
    }

