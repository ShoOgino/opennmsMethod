    private static Set<String> getReductionKeysFor(OnmsMonitoredService ipService) {
        final String nodeLostServiceReductionKey = String.format("%s:%s:%d:%s:%s",
                EventConstants.NODE_LOST_SERVICE_EVENT_UEI, DEFAULT_DISTRIBUTED_POLLER_NAME,
                ipService.getNodeId(), InetAddressUtils.toIpAddrString(ipService.getIpAddress()),
                ipService.getServiceName());

        // When node processing is enabled, we may get node down instead of node lost service events
        final String nodeDownReductionKey = String.format("%s:%s:%d",
                EventConstants.NODE_DOWN_EVENT_UEI, DEFAULT_DISTRIBUTED_POLLER_NAME,
                ipService.getNodeId());

        return Sets.newHashSet(nodeLostServiceReductionKey, nodeDownReductionKey);
    }

