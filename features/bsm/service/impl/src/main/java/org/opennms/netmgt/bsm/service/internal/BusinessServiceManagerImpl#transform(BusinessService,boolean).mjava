    private BusinessServiceDTO transform(BusinessService service, boolean recurse) {
        BusinessServiceDTO dto = new BusinessServiceDTO();
        dto.setId(service.getId());
        dto.setName(service.getName());
        dto.setAttributes(new HashMap<>(service.getAttributes()));
        for (OnmsMonitoredService eachService : service.getIpServices()) {
            IpServiceDTO ipServiceDTO = transform(eachService);
            if (ipServiceDTO != null) {
                dto.addIpService(ipServiceDTO);
            }
        }
        // TODO: JW: This should not be be merged into features/bsm
        if (recurse) {
            for (BusinessService eachService : service.getChildServices()) {
                BusinessServiceDTO childServiceDTO = transform(eachService, false);
                if (childServiceDTO != null) {
                    dto.addChildService(childServiceDTO);
                }
            }
        }
        // TODO: JW: This should not be be merged into features/bsm
        if (recurse) {
            for (BusinessService eachService : service.getParentServices()) {
                BusinessServiceDTO parentServiceDTO = transform(eachService, false);
                if (parentServiceDTO != null) {
                    dto.addParentService(parentServiceDTO);
                }
            }
        }
        return dto;
    }

