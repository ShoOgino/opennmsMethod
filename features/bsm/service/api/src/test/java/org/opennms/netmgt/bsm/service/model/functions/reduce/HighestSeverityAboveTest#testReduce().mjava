    @Test
    public void testReduce() {
        HighestSeverityAbove reduceFunction = new HighestSeverityAbove();
        reduceFunction.setThreshold(Status.MAJOR);

        assertEquals(Optional.empty(), reduceFunction.reduce(Lists.newArrayList()));
        assertEquals(Optional.empty(), reduceFunction.reduce(StatusUtils.toListWithIndices(Lists.newArrayList(
                Status.MINOR, Status.MAJOR, Status.WARNING))));

        assertEquals(Status.CRITICAL, reduceFunction.reduce(StatusUtils.toListWithIndices(Lists.newArrayList(
                Status.MINOR, Status.MAJOR, Status.WARNING, Status.CRITICAL))).get().getStatus());
    }

