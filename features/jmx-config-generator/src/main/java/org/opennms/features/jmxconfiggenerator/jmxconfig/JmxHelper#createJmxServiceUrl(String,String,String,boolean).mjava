    public static JMXServiceURL createJmxServiceUrl(String url, String hostName, String port, boolean jmxmp) throws MalformedURLException {
        if (url != null) {
            return new JMXServiceURL(url);
        }
        if (hostName != null && port != null) {
            if (jmxmp) {
                return new JMXServiceURL(String.format("service:jmx:jmxmp://%s:%s", hostName, port));
            }
            return new JMXServiceURL(String.format("service:jmx:rmi:///jndi/rmi://%s:%s/jmxrmi", hostName, port));
        }
        throw new IllegalStateException("Something went wrong. Was not able to determine JMX Connection URL.");
    }

