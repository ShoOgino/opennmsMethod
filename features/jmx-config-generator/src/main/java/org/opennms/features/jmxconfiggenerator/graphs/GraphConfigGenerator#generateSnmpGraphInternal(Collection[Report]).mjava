    private String generateSnmpGraphInternal(Collection<Report> reports) {
        // init VelocityEngine
        VelocityEngine velocityEngine = new VelocityEngine();
        velocityEngine.setProperty(RuntimeConstants.RESOURCE_LOADER, "classpath");
        velocityEngine.setProperty("classpath.resource.loader.class", ClasspathResourceLoader.class.getName());
        velocityEngine.init();
        
        // create reader and writer for template extraction from jar
        InputStream templateInputStream = this.getClass().getClassLoader().getResourceAsStream(INTERN_TEMPLATE_NAME);
        StringWriter templateWriter = new StringWriter();
        Reader templateReader = new InputStreamReader(templateInputStream); 

        // create context
        VelocityContext context = new VelocityContext();
        context.put("reportsList", reports.iterator());
        context.put("reportsBody", reports.iterator());
        
        // get template
        Velocity.evaluate(context, templateWriter, INTERN_TEMPLATE_NAME, templateReader);
        return templateWriter.toString();
    }

