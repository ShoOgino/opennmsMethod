    public String generateSnmpGraph(Collection<Report> reports) throws IOException {
        String jarInternTemplate = "graphTemplate.vm";

        // init VelocityEngine
        VelocityEngine velocityEngine = new VelocityEngine();
        velocityEngine.setProperty(RuntimeConstants.RESOURCE_LOADER, "classpath");
        velocityEngine.setProperty("classpath.resource.loader.class", ClasspathResourceLoader.class.getName());
        velocityEngine.init();

        // check if tmeplate exists in jar
        final String templatePath = jarInternTemplate;
        InputStream templateInputStream = this.getClass().getClassLoader().getResourceAsStream(templatePath);
        if (templateInputStream == null) {
            throw new IOException(String.format("Template file '%s' doesn't exist.", jarInternTemplate));
        }
        
        // create reader and writer for template extraction from jar
        StringWriter templateWriter = new StringWriter();
        Reader templateReader = new InputStreamReader(templateInputStream); 

        // create context
        VelocityContext context = new VelocityContext();
        context.put("reportsList", reports.iterator());
        context.put("reportsBody", reports.iterator());
        
        // get template
        Velocity.evaluate(context, templateWriter, jarInternTemplate, templateReader);
        return templateWriter.toString();
    }

