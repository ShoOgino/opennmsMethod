    /**
     * Test statistics.
     * 
     * @throws Exception the exception
     */
    @Test
    public void testStats() throws Exception {
        MetricRegistry registry = new MetricRegistry();
        EvaluateStats stats = new EvaluateStats(registry);

        // Check collection set
        for (int i = 0; i < 10; i++) {
            stats.checkCollectionSet();
        }
        Assert.assertEquals(10, registry.getMeters().get("evaluate.meter.collections").getCount());

        // Check resources
        for (int j=0; j<10; j++) {
            for (int i = 0; i < 10; i++) {
                stats.checkResource("resource" + i);
            }
        }
        Assert.assertEquals(10, registry.getGauges().get("evaluate.resources").getValue());
        Assert.assertEquals(100, registry.getMeters().get("evaluate.meter.resources").getCount());
    }

