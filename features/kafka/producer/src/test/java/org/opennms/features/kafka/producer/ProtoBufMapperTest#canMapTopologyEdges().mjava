    @Test
    public void canMapTopologyEdges() {
        // Build an edge
        OnmsTopologyVertex v1 = OnmsTopologyVertex.create("v1", "label1", "address1", "icon1");
        OnmsTopologyVertex v2 = OnmsTopologyVertex.create("v2", "label2", "address2", "icon2");
        OnmsTopologyPort sourcePort = OnmsTopologyPort.create("source", v1, 1);
        sourcePort.setAddr("source port addr");
        OnmsTopologyPort targetPort = OnmsTopologyPort.create("target", v2, 2);
        targetPort.setAddr("target port addr");
        OnmsTopologyEdge edge = OnmsTopologyEdge.create("edge-id", sourcePort, targetPort);

        // Map
        OpennmsModelProtos.TopologyEdge.Builder mappedEdge = protobufMapper.toEdgeTopologyMessage(ProtocolSupported.USERDEFINED.toString(), edge);

        // Verify
        assertThat(mappedEdge.getRef().getProtocol(), equalTo(OpennmsModelProtos.TopologyRef.Protocol.USERDEFINED));
        assertThat(mappedEdge.getRef().getId(), equalTo("edge-id"));

        assertThat(mappedEdge.getSource().getVertexId(), equalTo("v1"));
        assertThat(mappedEdge.getSource().getAddress(), equalTo("source port addr"));

        assertThat(mappedEdge.getTargetPort().getVertexId(), equalTo("v2"));
        assertThat(mappedEdge.getTargetPort().getAddress(), equalTo("target port addr"));
    }

