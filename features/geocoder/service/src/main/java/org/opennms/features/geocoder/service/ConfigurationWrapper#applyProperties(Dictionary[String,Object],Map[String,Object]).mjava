    // Updates the currentProperties with values from newProperties. Deletes null values. Does not remove keys.
    private static void applyProperties(Dictionary<String, Object> currentProperties, Map<String, Object> newProperties) {
        newProperties.entrySet().forEach(e -> {
            if (e.getValue() == null) {
                currentProperties.remove(e.getKey());
            } else {
                currentProperties.put(e.getKey(), e.getValue().toString());
            }
        });
    }

