    private static void saveToDisk(String configPID, Dictionary<String, Object> currentProperties) throws IOException {
        // Ensure file will be created if it does not yet exist
        if (currentProperties.get("felix.fileinstall.filename") == null) {
            final Path configFile = getConfigFile(configPID);
            final Properties persistentProperties = new Properties();
            final Enumeration<String> keyEnumerator = currentProperties.keys();
            while(keyEnumerator.hasMoreElements()) {
                final String key = keyEnumerator.nextElement();
                final Object value = currentProperties.get(key);
                persistentProperties.put(key, value == null ? value : value.toString());
            }
            persistentProperties.store(new FileOutputStream(configFile.toFile()), null);
        }
    }

