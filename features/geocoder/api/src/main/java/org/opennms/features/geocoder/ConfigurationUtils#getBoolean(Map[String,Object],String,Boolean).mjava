    public static Boolean getBoolean(Map<String, Object> properties, String key, Boolean defaultValue) {
        Object value = properties.get(key);
        if (value == null) {
            return defaultValue;
        }
        if (value instanceof Boolean) {
            return (Boolean) value;
        }
        if (value instanceof String) {
            return Boolean.valueOf(((String) value).toLowerCase());
        }
        return defaultValue;
    }

