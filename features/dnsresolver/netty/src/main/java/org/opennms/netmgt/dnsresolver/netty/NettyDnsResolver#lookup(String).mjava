    @Override
    public CompletableFuture<Optional<InetAddress>> lookup(String hostname) {
        if (lookupEnabled) {
            return circuitBreaker.executeCompletionStage(() -> {
                final NettyResolverContext resolverContext = iterator.next();
                final Timer.Context timerContext = lookupTimer.time();
                return resolverContext.lookup(hostname).whenComplete((res, ex) -> {
                    timerContext.stop();
                });
            }).toCompletableFuture();
        } else {
            return CompletableFuture.completedFuture(Optional.empty());
        }
    }

