    protected TimeseriesPersister(ServiceParameters params, RrdRepository repository, TimeseriesWriter timeseriesWriter,
                                  MetaTagDataLoader metaDataLoader, Cache<ResourcePath, Map<String, String>> metaTagsByResourceCache,
                                  MetricRegistry metricRegistry) {
        super(params, repository);
        this.repository = repository;
        writer = timeseriesWriter;
        this.metaDataLoader = metaDataLoader;
        this.metaTagsByResourceCache = metaTagsByResourceCache;
        this.metricRegistry = Objects.requireNonNull(metricRegistry, "metricRegistry can not be null");
    }

