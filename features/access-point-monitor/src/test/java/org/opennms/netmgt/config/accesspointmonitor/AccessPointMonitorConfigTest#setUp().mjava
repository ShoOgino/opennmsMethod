    @Before
    public void setUp() throws Exception {
        fa = new FileAnticipator();
        c = JAXBContext.newInstance(AccessPointMonitorConfig.class);
        m = c.createMarshaller();
        um = c.createUnmarshaller();

        ServiceTemplate svcTemplate = new ServiceTemplate();
        svcTemplate.setName("IsAPAdoptedOnController-Template");
        svcTemplate.setInterval(120000L);
        svcTemplate.setStatus("off");
        svcTemplate.addParameter(new Parameter("retry", "2"));
        svcTemplate.addParameter(new Parameter("oid", ".1.3.6.1.4.1.14823.2.2.1.5.2.1.4.1.19"));
        svcTemplate.addParameter(new Parameter("operator", "="));
        svcTemplate.addParameter(new Parameter("operand", "1"));
        svcTemplate.addParameter(new Parameter("match", "true"));

        Service svc = new Service();
        svc.setName("IsAPAdoptedOnController");
        svc.setTemplateName("IsAPAdoptedOnController-Template");
        svc.setStatus("on");
        svc.addParameter(new Parameter("retry", "3"));

        Package pkg = new Package();
        pkg.setName("default");
        pkg.setFilter("IPADDR != '0.0.0.0'");
        pkg.addSpecific("172.23.1.1");
        pkg.addIncludeRange(new IpRange("192.168.0.0", "192.168.255.255"));
        pkg.addExcludeRange(new IpRange("192.168.1.0", "192.168.1.255"));
        pkg.setService(svc);

        Monitor monitor = new Monitor();
        monitor.setService("IsAPAdoptedOnController");
        monitor.setClassName("org.opennms.netmgt.accesspointmonitor.poller.InstanceStrategy");

        apmc = new AccessPointMonitorConfig();
        apmc.setThreads(30);
        apmc.setPackageScanInterval(1800000L);
        apmc.addServiceTemplate(svcTemplate);
        apmc.addPackage(pkg);
        apmc.addMonitor(monitor);

        XMLUnit.setIgnoreWhitespace(true);
        XMLUnit.setIgnoreAttributeOrder(true);
        XMLUnit.setNormalize(true);
    }

