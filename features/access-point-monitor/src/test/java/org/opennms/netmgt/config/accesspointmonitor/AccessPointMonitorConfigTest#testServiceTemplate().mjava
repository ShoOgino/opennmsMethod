    @Test
    public void testServiceTemplate() throws Exception {
        // Get the service on the first package
        Service svc = apmc.getPackages().get(0).getService();
        svc = apmc.getPackages().get(0).getEffectiveService();

        assertEquals("Service should inherit service template parameters", 1, ParameterMap.getKeyedInteger(svc.getParameterMap(), "operand", 0));

        assertEquals("Service parameters should override template parameters", 3, ParameterMap.getKeyedInteger(svc.getParameterMap(), "retry", 0));

        apmc.setServiceTemplates(null);
        svc = apmc.getPackages().get(0).getEffectiveService();

        assertEquals("Services should reflect template changes", 0, ParameterMap.getKeyedInteger(svc.getParameterMap(), "operand", 0));
    }

