    public void testGetApplicationsForLocation() {
        expect(m_monitoringLocationDao.get(m_locationDefinition.getLocationName())).andReturn(m_locationDefinition);
        expect(m_pollerConfig.getPackage(m_package.getName())).andReturn(m_package);
        expect(m_pollerConfig.getServiceSelectorForPackage(m_package)).andReturn(m_serviceSelector);
        expect(m_monSvcDao.findMatchingServices(m_serviceSelector)).andReturn(Arrays.asList(m_monServices));
        expect(m_pollerConfig.getServiceInPackage("HTTP", m_package)).andReturn(m_httpSvcConfig).anyTimes();
        expect(m_pollerConfig.getServiceInPackage("DNS", m_package)).andReturn(m_dnsSvcConfig).anyTimes();
        m_mocks.replayAll();

        Set<String> apps = m_backEnd.getApplicationsForLocation(m_locationDefinition.getLocationName());
        assertEquals(Collections.singleton(APPLICATION_NAME), apps);
    }

