    @Test
    public void canCaptureLogMessage() {
        // Create a log42j specific logger
        Logger LOG = LogManager.getLogger(Log4j2StringAppenderTest.class);

        // Add our log appender to the root logger
        Log4j2StringAppender appender = Log4j2StringAppender.createAppender();
        appender.start();
        appender.addToLogger(LogManager.ROOT_LOGGER_NAME, Level.DEBUG);

        try {
            // Send a log message
            LOG.debug("w00t");
        } finally {
            // Remove the log appender from the root logger
            appender.removeFromLogger(LogManager.ROOT_LOGGER_NAME); 
        }

        // Verify that the log message was successfully captured
        assertEquals("w00t\n", appender.getOutput());
    }

