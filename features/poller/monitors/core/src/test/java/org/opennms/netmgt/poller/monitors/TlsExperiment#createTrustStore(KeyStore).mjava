    /**
     * Create a key store suitable for use as a trust store, containing only
     * the certificates associated with each alias in the passed in
     * credentialStore.
     *
     * @param credentialStore key store containing public/credentials.
     * @return a key store containing only certificates.
     */
    static KeyStore createTrustStore(KeyStore credentialStore) throws Exception {
        KeyStore store = KeyStore.getInstance("JKS");

        store.load(null, null);

        for (Enumeration<String> en = credentialStore.aliases(); en.hasMoreElements(); ) {
            String alias = en.nextElement();

            store.setCertificateEntry(alias, credentialStore.getCertificate(alias));
        }

        return store;
    }

