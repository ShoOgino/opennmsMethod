    @Test
    public void doesNotGetExpiredRecords() throws InterruptedException {
        String key = "key3";
        String context = "value3";
        String value = "{\"hello\": \"world\"}";

        // Shouldn't exist yet
        assertThat(postgresJSONStore.getIfStale(key, context, 0), equalTo(Optional.empty()));

        // Write the value
        long insertedAt = postgresJSONStore.put(key, value, context, 1);

        // We should see it right now
        assertThat(postgresJSONStore.get(key, context).get(), equalTo(value));
        assertThat(postgresJSONStore.getLastUpdated(key, context).getAsLong(), equalTo(insertedAt));

        Thread.sleep(1000);

        // After 1 second passed it should be expired and we should no longer see it
        assertThat(postgresJSONStore.get(key, context), equalTo(Optional.empty()));
        assertThat(postgresJSONStore.getLastUpdated(key, context), equalTo(OptionalLong.empty()));
    }

