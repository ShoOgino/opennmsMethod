    @Override
    public final synchronized void deregister(String id) {
        if (!this.roleChangeHandlers.containsKey(Objects.requireNonNull(id))) {
            throw new NoSuchElementException(id + " is not registered");
        }

        LOG.debug("Removing {} from domain {}", id, getDomain());
        this.roleChangeHandlers.remove(id);

        if (!isAnythingRegistered()) {
            if (currentRole == Role.ACTIVE) {
                currentRole = Role.UNKNOWN;
                LOG.debug("Surrendered leadership for domain {}", getDomain());
            }

            LOG.debug("Left election pool for domain {}", getDomain());
            onLastDeregister();
        }
    }

