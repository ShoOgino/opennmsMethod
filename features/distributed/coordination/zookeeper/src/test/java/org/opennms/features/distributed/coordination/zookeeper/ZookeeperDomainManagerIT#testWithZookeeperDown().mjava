    /**
     * Tests to make sure we do not become active if Zookeeper is not available.
     */
    @Test(expected = ConditionTimeoutException.class)
    public void testWithZookeeperDown() {
        register();
        await().atMost(10, TimeUnit.SECONDS).until(activeFuture::isDone);
        fail("Became active when we shouldn't have");
    }

