    /**
     * Register the a change handlers that will complete futures on active/standby.
     *
     * @param id the id to register
     */
    private void register(int id) {
        CompletableFuture<Void> activeFuture = new CompletableFuture<>();
        activeFutures.add(activeFuture);
        CompletableFuture<Void> standbyFuture = new CompletableFuture<>();
        standbyFutures.add(standbyFuture);

        manager.register("test.id." + id, (role, domain) -> {
            if (role == Role.ACTIVE) {
                activeFuture.complete(null);
            } else if (role == Role.STANDBY) {
                standbyFuture.complete(null);
            }
        });
    }

