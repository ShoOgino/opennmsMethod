    public void start() {
        // Build initial network
        for (final Service service : this.queryManager.findServices()) {
            final Optional<E> element = this.filterService.apply(service);
            if (!element.isPresent()) { // TODO fooker: this smells
                continue;
            }

            if (this.network.add(service, element.get())) {
                this.addService.accept(new ServiceEntry<>(service, element.get())); // TODO fooker: this smells
            } else {
                LOG.debug("Service already known: {}", service);
                throw new IllegalStateException();
            }
        }
    }

