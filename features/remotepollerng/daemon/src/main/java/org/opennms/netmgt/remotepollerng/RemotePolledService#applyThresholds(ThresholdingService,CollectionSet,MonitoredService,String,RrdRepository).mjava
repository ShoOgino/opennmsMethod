    public void applyThresholds(final ThresholdingService thresholdingService, final CollectionSet collectionSet, final MonitoredService service, final String dsName, final RrdRepository repository) {
        try {
            if (this.thresholdingSession == null) {
                thresholdingSession = thresholdingService.createSession(service.getNodeId(),
                                                                        service.getIpAddr(),
                                                                        service.getSvcName(),
                                                                        repository,
                                                                        EMPTY_SERVICE_PARAMS);
            }
            thresholdingSession.accept(collectionSet);
        } catch (Throwable e) {
            LOG.error("Failed to threshold on {} for {} because of an exception", service, dsName, e);
        }
    }

