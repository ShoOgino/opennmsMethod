    @Test
    public void testApplicationRemoved() throws Exception {
        assertThat(findRemotePolledService(this.node1icmp, "RDU"), is(notNullValue()));
        assertThat(findRemotePolledService(this.node2icmp, "RDU"), is(notNullValue()));

        this.databasePopulator.getTransactionTemplate().execute(tx -> {
            this.databasePopulator.getApplicationDao().delete(this.app1);
            this.databasePopulator.getApplicationDao().flush();
            return null;
        });

        this.eventIpcManager.sendNowSync(new EventBuilder(EventConstants.APPLICATION_DELETED_EVENT_UEI, "test")
                                                 .addParam(PARM_APPLICATION_ID, this.app1.getId())
                                                 .addParam(PARM_APPLICATION_NAME, this.app1.getName())
                                                 .getEvent());

        assertThat(findRemotePolledService(this.node1icmp, "RDU"), is(nullValue()));
        assertThat(findRemotePolledService(this.node2icmp, "RDU"), is(nullValue()));
    }

