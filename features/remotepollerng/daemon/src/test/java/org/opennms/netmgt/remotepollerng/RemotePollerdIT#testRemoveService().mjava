    @Test
    public void testRemoveService() throws Exception {
        await().atMost(5, TimeUnit.SECONDS).until(() -> findRemotePolledService(this.node1icmp, "RDU"), is(notNullValue()));
        await().atMost(5, TimeUnit.SECONDS).until(() -> findRemotePolledService(this.node1icmp, "Fulda"), is(notNullValue()));

        this.databasePopulator.getMonitoredServiceDao().delete(this.node1icmp);
        this.databasePopulator.getMonitoredServiceDao().flush();

        this.eventIpcManager.sendNowSync(new EventBuilder(EventConstants.SERVICE_DELETED_EVENT_UEI, "test")
                                                 .setNodeid(this.node1icmp.getNodeId())
                                                 .setInterface(this.node1icmp.getIpAddress())
                                                 .setService(this.node1icmp.getServiceName())
                                                 .getEvent());

        await().atMost(5, TimeUnit.SECONDS).until(() -> findRemotePolledService(this.node1icmp, "RDU"), is(nullValue()));
        await().atMost(5, TimeUnit.SECONDS).until(() -> findRemotePolledService(this.node1icmp, "Fulda"), is(nullValue()));

        await().atMost(5, TimeUnit.SECONDS).until(() -> findRemotePolledService(this.node1snmp, "RDU"), is(notNullValue()));
        await().atMost(5, TimeUnit.SECONDS).until(() -> findRemotePolledService(this.node1http, "RDU"), is(notNullValue()));
    }

