    public static String formatDuration(long millis) {
        if (millis==0) {
            return "0s";
        }
        boolean force = false;
        StringBuilder buf = new StringBuilder();
        if (force || millis >= (1000*3600*24)) {
            long d = millis/(1000*3600*24);
            buf.append(d);
            buf.append("d");
            millis%=(1000*3600*24);
            force = millis!=0;
        }
        if (force || millis >= (1000*3600)) {
            long h = millis/(1000*3600);
            buf.append(h);
            buf.append("h");
            millis%=(1000*3600);
            force = millis!=0;
        }
        if (force || millis >= 60000) {
            long m = millis/60000;
            buf.append(m);
            buf.append("m");
            millis %= 60000;
            force=millis!=0;
        }
        if (millis!=0) {
            long s = millis/1000;
            buf.append(s);
            if(millis%1000 !=0) {
                buf.append(".");
                buf.append(String.format("%03d", millis%1000));
            }
            buf.append("s");
        }
        return buf.toString();

    }

