    @Test
    public void verifyExceptionParsing() {
        // Parse Error
        final String error = "{\"type\":\"mapper_parsing_exception\",\"reason\":\"failed to parse [timestamp]\",\"caused_by\":{\"type\":\"number_format_exception\",\"reason\":\"For input string: \\\"XXX\\\"\"}}";
        final Exception exception = BulkUtils.convertToException(error);

        // Manually verify exception
        Assert.assertEquals("mapper_parsing_exception: failed to parse [timestamp]", exception.getMessage());
        Assert.assertNotNull(exception.getCause());
        Assert.assertEquals("number_format_exception: For input string: \"XXX\"", exception.getCause().getMessage());
        Assert.assertNull(exception.getCause().getCause());
    }

