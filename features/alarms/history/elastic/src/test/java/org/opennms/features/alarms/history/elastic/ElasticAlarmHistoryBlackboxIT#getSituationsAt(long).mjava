    private List<AlarmState> getSituationsAt(long time) {
        return alarmHistoryRepo.getActiveAlarmsAt(time).stream()
                .filter(AlarmState::isSituation)
                .collect(Collectors.toList());
    }

