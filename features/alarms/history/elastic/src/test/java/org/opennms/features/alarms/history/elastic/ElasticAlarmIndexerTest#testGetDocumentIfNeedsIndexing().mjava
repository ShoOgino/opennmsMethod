    @Test
    public void testGetDocumentIfNeedsIndexing() {
        OnmsAlarm onmsAlarm = new OnmsAlarm();
        onmsAlarm.setId(1);

        // Check to make sure updating each of the fields we expect to cause a re-index actually does
        updateAndTestPositive(onmsAlarm, () -> onmsAlarm.setReductionKey("test"));
        updateAndTestPositive(onmsAlarm, () -> onmsAlarm.setAlarmAckTime(new Date(System.currentTimeMillis())));
        updateAndTestPositive(onmsAlarm, () -> onmsAlarm.setSeverityId(2));
        updateAndTestPositive(onmsAlarm, () -> onmsAlarm.addRelatedAlarm(new OnmsAlarm()));
        updateAndTestPositive(onmsAlarm, () -> onmsAlarm.setStickyMemo(new OnmsMemo()));
        updateAndTestPositive(onmsAlarm, () -> onmsAlarm.setReductionKeyMemo(new OnmsReductionKeyMemo()));
        updateAndTestPositive(onmsAlarm, () -> onmsAlarm.setTTicketState(TroubleTicketState.OPEN));
        updateAndTestPositive(onmsAlarm, () -> onmsAlarm.setSituation(false));

        // Check to make sure a few fields we don't care about don't cause a re-index
        updateAndTestNegative(onmsAlarm, () -> onmsAlarm.setLastEvent(new OnmsEvent()));
        updateAndTestNegative(onmsAlarm, () -> onmsAlarm.setDistPoller(new OnmsMonitoringSystem()));
    }

