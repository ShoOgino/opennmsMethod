    @Override
    public List<AlarmState> getActiveAlarmsAt(long time) {
        final TimeRange timeRange = getTimeRange(time);
        return findAlarmsWithCompositeAggregation((afterAlarmWithId) -> queryProvider.getActiveAlarmsAt(timeRange, afterAlarmWithId), timeRange).stream()
                .map(a -> (AlarmState)a)
                .collect(Collectors.toList());
    }

