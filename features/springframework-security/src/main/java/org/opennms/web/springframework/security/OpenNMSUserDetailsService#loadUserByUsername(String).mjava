	/** {@inheritDoc} */
        @Override
	public UserDetails loadUserByUsername(final String rawUsername) throws UsernameNotFoundException, DataAccessException {
            final String username;
            if (m_trimRealm && rawUsername.contains("@")) {
                username = rawUsername.substring(0, rawUsername.indexOf("@"));
            } else {
                username = rawUsername;
            }
	    final UserDetails userDetails = m_userDao.getByUsername(username);
		
		if (userDetails == null) {
			throw new UsernameNotFoundException("Unable to locate " + username + " in the userDao");
		}
		
		return userDetails;
	}

