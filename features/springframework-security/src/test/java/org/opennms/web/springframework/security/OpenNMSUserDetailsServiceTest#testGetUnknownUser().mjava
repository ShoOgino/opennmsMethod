	public void testGetUnknownUser() {
		SpringSecurityUserDao userDao = createMock(SpringSecurityUserDao.class);
		OpenNMSUserDetailsService detailsService = new OpenNMSUserDetailsService();
		detailsService.setUserDao(userDao);
		
		expect(userDao.getByUsername("test_user")).andReturn(null);
		
		replay(userDao);
		
		ThrowableAnticipator ta = new ThrowableAnticipator();
		ta.anticipate(new UsernameNotFoundException("Unable to locate test_user in the userDao"));
		
		try {
			detailsService.loadUserByUsername("test_user");
		} catch (Throwable t) {
			ta.throwableReceived(t);
		}
		verify(userDao);
		ta.verifyAnticipated();
	}

