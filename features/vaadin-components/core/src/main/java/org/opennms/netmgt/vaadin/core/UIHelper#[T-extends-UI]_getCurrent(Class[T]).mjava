	public static <T extends UI> T getCurrent(Class<T> clazz) {
		final T ui = (T) UI.getCurrent();
		if (ui == null || !ui.isAttached()) {
			throw new IllegalStateException("UI is either null or not attached. Ensure it is invoked from within a VaadinRequest");
		}
		return ui;
	}

