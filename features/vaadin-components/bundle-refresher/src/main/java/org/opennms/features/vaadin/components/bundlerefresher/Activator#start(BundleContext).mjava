    @Override
    public void start(BundleContext context) throws Exception {
        // Determine if any vaadin theme fragments are unresoled
        final Set<Bundle> unresolvedVaadinThemeFragments = getUnresolvedVaadinThemeFragments(context);
        if (!unresolvedVaadinThemeFragments.isEmpty()) {
            // Get vaadin theme host bundle to initialize refresh
            final Bundle vaadinThemeHostBundle = getVaadinThemeHostbundle(context);
            final List<Bundle> bundlesToRefresh = new ArrayList<>();
            bundlesToRefresh.add(vaadinThemeHostBundle);

            // Refresh
            final Bundle systemBundle = context.getBundle(0);
            FrameworkWiring frameworkWiring = systemBundle.adapt(FrameworkWiring.class);
            frameworkWiring.refreshBundles(bundlesToRefresh);
        }
    }

