    @Test
    public void canHandleObjectNotFoundExceptionsWhenMappingAlarms() {
        // Map a trivial alarm first
        OnmsAlarm alarm = new OnmsAlarm();
        Alarm apiAlarm = ModelMappers.toAlarm(alarm);
        assertThat(apiAlarm.getReductionKey(), equalTo(alarm.getReductionKey()));

        // Now let's throw an exception when calling getLastEvent()
        alarm = mock(OnmsAlarm.class);
        when(alarm.getLastEvent()).thenThrow(new ObjectNotFoundException(1, OnmsEvent.class.getCanonicalName()));
        apiAlarm = ModelMappers.toAlarm(alarm);
        // No last event should be set
        assertThat(apiAlarm.getLastEvent(), nullValue());
    }

