    public static ImmutableMap<String, Object> getServiceProperties(final TopologyConfiguration topologyConfiguration, final GraphConfiguration graphConfiguration) {
        final ImmutableMap.Builder<String, Object> builder = ImmutableMap.<String, Object>builder()
            .put("expose-to-topology", Boolean.toString(topologyConfiguration.isLegacyTopology()))
            .put("expose-status-provider", Boolean.toString(topologyConfiguration.getLegacyStatusStrategy() == TopologyConfiguration.LegacyStatusStrategy.Default))
            .put("resolve-node-ids", Boolean.toString(topologyConfiguration.shouldResolveNodes()));

        // In case the cache strategy is timed, it should be expose it accordingly
        if (graphConfiguration.getGraphCacheStrategy() instanceof GraphCacheStrategy.TimedGraphCacheStrategy) {
            GraphCacheStrategy.TimedGraphCacheStrategy timedGraphCacheStrategy = ((GraphCacheStrategy.TimedGraphCacheStrategy)graphConfiguration.getGraphCacheStrategy());
            if (timedGraphCacheStrategy.getCacheReloadIntervalInSeconds() > 0) {
                builder.put("cacheInvalidateInterval", Long.toString(timedGraphCacheStrategy.getCacheReloadIntervalInSeconds()));
            }
        }
        return builder.build();
    }

