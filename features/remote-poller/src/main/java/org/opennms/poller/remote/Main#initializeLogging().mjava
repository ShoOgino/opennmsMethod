    private void initializeLogging() throws Exception {
        String logFile;
        if (System.getProperty("os.name").contains("Windows")) {
            logFile = System.getProperty("java.io.tmpdir") + File.separator + "opennms-remote-poller.log";
        } else {
            logFile = System.getProperty("user.home") + File.separator + ".opennms" + File.separator + "remote-poller.log";
        }
        File logDirectory = new File(logFile).getParentFile();
        if (!logDirectory.exists()) {
            if (!logDirectory.mkdirs()) {
                throw new IllegalStateException("Could not create parent directory for log file '" + logFile + "'");
            }
        }
        if (Boolean.getBoolean("debug")) {
        	LogUtils.logToConsole();
        } else {
        	LogUtils.logToFile(logFile);
        }
    }

