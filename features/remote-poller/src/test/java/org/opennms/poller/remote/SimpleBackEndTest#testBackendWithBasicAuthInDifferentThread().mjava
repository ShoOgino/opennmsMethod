	@Test
	@JUnitHttpServer(port=9162, basicAuth=true, webapps=@Webapp(context="/", path="src/test/resources/simple-test-webapp"))
	public void testBackendWithBasicAuthInDifferentThread() throws Exception {
		SecurityContextHolder.getContext().setAuthentication(new UsernamePasswordAuthenticationToken("testuser", "testpassword"));
		assertNotNull(m_authBackEnd);
		
		final AtomicInteger first = new AtomicInteger(-1);
		final AtomicInteger second = new AtomicInteger(-1);
		
		Thread t = new Thread() {
                        @Override
			public void run() {
				first.set(m_authBackEnd.getCount());
				second.set(m_authBackEnd.getCount());
			}
		};
		t.start();
		t.join();
		assertEquals("first get should be 0", 0, first.get());
		assertEquals("second should be 1", 1, second.get());
	}

