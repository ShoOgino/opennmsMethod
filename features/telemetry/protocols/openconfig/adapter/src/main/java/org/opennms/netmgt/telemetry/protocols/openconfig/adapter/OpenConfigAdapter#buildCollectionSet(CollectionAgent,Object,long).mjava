    private Stream<CollectionSetWithAgent> buildCollectionSet(CollectionAgent collectionAgent, Object response, long timeStamp) {
        final ScriptedCollectionSetBuilder builder = getCollectionBuilder();
        if (builder == null) {
            LOG.error("Error compiling script '{}'. See logs for details.", this.getScript());
            return Stream.empty();
        }
        try {
            final CollectionSet collectionSet = builder.build(collectionAgent, response, timeStamp);
            return Stream.of(new CollectionSetWithAgent(collectionAgent, collectionSet));
        } catch (final ScriptException e) {
            LOG.warn("Error while running script: {}: {}", getScript(), e);
            return Stream.empty();
        }
    }

