    @Test
    public void testOpenConfigScheduling() throws Exception {
        openConfigData.clear();
        Map<String, String> params = getParams();
        InetAddress host = InetAddress.getLocalHost();
        server.setErrorStream();
        OpenConfigClientImpl openConfigClient = new OpenConfigClientImpl(host, params);
        openConfigClient.subscribe(new DataHandler());
        // Wait till at least 2 data streams received.
        await().atMost(15, TimeUnit.SECONDS).until(openConfigData::size, is(greaterThan(1)));
        // Stop the server and see if client can make a connection
        server.stop();
        openConfigData.clear();
        server.start();
        // Wait till at least 2 data streams received.
        await().atMost(15, TimeUnit.SECONDS).until(openConfigData::size, is(greaterThan(1)));
    }

