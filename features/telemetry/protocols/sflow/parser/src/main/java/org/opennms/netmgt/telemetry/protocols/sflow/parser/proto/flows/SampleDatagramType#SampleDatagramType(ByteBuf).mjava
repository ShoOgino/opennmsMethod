    public SampleDatagramType(final ByteBuf buffer) throws InvalidPacketException {
        this.version = DatagramVersion.from(buffer);
        switch (this.version) {
            case VERSION5: {
                this.datagram = new SampleDatagramV5(buffer);
                break;
            }
            default:
                throw new IllegalStateException();
        }
    }

