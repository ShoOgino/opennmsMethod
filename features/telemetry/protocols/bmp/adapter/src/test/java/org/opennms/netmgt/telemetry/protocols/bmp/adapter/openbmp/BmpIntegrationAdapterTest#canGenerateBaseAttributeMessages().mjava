    @Test
    public void canGenerateBaseAttributeMessages() {
        // Send a route monitoring packet
        Transport.RouteMonitoringPacket.Builder updatePacket = Transport.RouteMonitoringPacket.newBuilder()
                .setPeer(Transport.Peer.newBuilder()
                    .setAddress(address(InetAddressUtils.addr("172.23.1.1"))))
                .addReachables(Transport.RouteMonitoringPacket.Route.newBuilder()
                        .setPrefix(address(InetAddressUtils.addr("10.1.1.0")))
                        .setLength(28))
                .addAttributes(Transport.RouteMonitoringPacket.PathAttribute.newBuilder()
                        .setAsPath(Transport.RouteMonitoringPacket.PathAttribute.AsPath.newBuilder()
                                .addSegments(Transport.RouteMonitoringPacket.PathAttribute.AsPath.Segment.newBuilder()
                                        .setType(Transport.RouteMonitoringPacket.PathAttribute.AsPath.Segment.Type.AS_SEQUENCE)
                                        .addPaths(64512)
                                        .addPaths(64513))
                                .addSegments(Transport.RouteMonitoringPacket.PathAttribute.AsPath.Segment.newBuilder()
                                        .setType(Transport.RouteMonitoringPacket.PathAttribute.AsPath.Segment.Type.AS_SET)
                                        .addPaths(64514))))
                .addAttributes(Transport.RouteMonitoringPacket.PathAttribute.newBuilder()
                        .setCommunity(0x02B202B3))
                .addAttributes(Transport.RouteMonitoringPacket.PathAttribute.newBuilder()
                        .setCommunity(0x02B2FFFF));
        Transport.Message message = Transport.Message.newBuilder()
                .setVersion(3)
                .setRouteMonitoring(updatePacket)
                .build();
        send(message.toByteString());

        // Grab the generated "base_attribute" messages
        List<BaseAttribute> baseAttributeMsgs = getHandledRecordsOfType(Type.BASE_ATTRIBUTE);
        assertThat(baseAttributeMsgs, hasSize(1));

        // Verify
        BaseAttribute baseAttribute = baseAttributeMsgs.get(0);
        assertThat(baseAttribute.sequence, equalTo(0L));
        assertThat(baseAttribute.asPath, equalTo("64512 64513 {64514 }"));
        assertThat(baseAttribute.asPathCount, equalTo(3));
        assertThat(baseAttribute.communityList, equalTo("690:691 690:65535"));
    }

