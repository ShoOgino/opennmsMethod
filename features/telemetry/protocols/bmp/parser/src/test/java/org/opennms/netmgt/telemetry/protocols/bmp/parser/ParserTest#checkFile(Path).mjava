    private void checkFile(final Path file) throws Exception {
        try (final FileChannel channel = FileChannel.open(file)) {
            final ByteBuffer buffer = ByteBuffer.allocate((int) channel.size());
            channel.read(buffer);
            buffer.flip();
            final ByteBuf buf = Unpooled.wrappedBuffer(buffer);
            while(buf.readableBytes() > 0) {
                final Header header = new Header(slice(buf, Header.SIZE));
                final Packet packet = header.parsePayload(slice(buf, header.length - Header.SIZE), new PeerAccessor() {
                    @Override
                    public Optional<PeerInfo> getPeerInfo(PeerHeader peerHeader) {
                        return Optional.empty();
                    }
                });
                packet.accept(this);
            }
        }
    }

