    private void updateStatsByAsn() {
        LOG.debug("Updating StatsByAsn ++");
        List<StatsByAsn> statsByAsnList = bmpIpRibLogDao.getStatsByAsnForInterval("'5 min'");
        LOG.debug("Retrieved {} StatsByAsn elements", statsByAsnList.size());

        statsByAsnList.forEach(stat -> {
            BmpStatsByAsn bmpStatsByAsn = buildBmpStatsByAsn(stat);
            try {
                bmpStatsByAsnDao.saveOrUpdate(bmpStatsByAsn);
            } catch (Exception e) {
                // Possibly unique constraint violation, query and update.
                BmpStatsByAsn retrieved = bmpStatsByAsnDao.findByAsnAndIntervalTime(bmpStatsByAsn.getPeerHashId(), bmpStatsByAsn.getOriginAsn(), bmpStatsByAsn.getTimestamp());
                if (retrieved != null) {
                    retrieved.setUpdates(bmpStatsByAsn.getUpdates());
                    retrieved.setWithdraws(bmpStatsByAsn.getWithdraws());
                    saveStatsByAsn(retrieved);
                }
            }
        });
        LOG.debug("Updating StatsByAsn --");
    }

