    @Test
    public void testFirstLastSwitchedValues() throws InvalidProtocolBufferException, IllegalFlowException {

        Iterable<Value<?>> values = ImmutableList.<Value<?>>builder()
                .add(new DateTimeValue("flowStartSeconds", Instant.ofEpochSecond(123)))
                .add(new DateTimeValue("flowEndSeconds", Instant.ofEpochSecond(987)))
                .build();

        IpFixMessageBuilder ipFixMessageBuilder = new IpFixMessageBuilder(values, (address -> Optional.empty()));
        FlowMessage flowMessage = FlowMessage.parseFrom(ipFixMessageBuilder.buildData());

        assertThat(flowMessage.getFirstSwitched().getValue(), is(123000L));
        assertThat(flowMessage.getDeltaSwitched().getValue(), is(123000L));
        assertThat(flowMessage.getLastSwitched().getValue(), is(987000L));

        values = ImmutableList.<Value<?>>builder()
                .add(new DateTimeValue("systemInitTimeMilliseconds", Instant.ofEpochMilli(100000)))
                .add(new UnsignedValue("flowStartSysUpTime", 2000000))
                .add(new UnsignedValue("flowEndSysUpTime", 4000000))
                .build();
        ipFixMessageBuilder = new IpFixMessageBuilder(values, (address -> Optional.empty()));
        flowMessage = FlowMessage.parseFrom(ipFixMessageBuilder.buildData());

        assertThat(flowMessage.getFirstSwitched().getValue(), is(2000000L + 100000L));
        assertThat(flowMessage.getDeltaSwitched().getValue(), is(2000000L + 100000L));
        assertThat(flowMessage.getLastSwitched().getValue(), is(4100000L));
    }

