        @Override
        public Template lookupTemplate(final int templateId) throws MissingTemplateException {
            final TemplateKey key = new TemplateKey(this.observationDomainId, templateId);

            final Template template = TcpSession.this.templates.get(key);
            if (template != null) {
                return template;
            } else {
                throw new MissingTemplateException(templateId);
            }
        }

