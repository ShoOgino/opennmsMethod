        public boolean set(final long index, final boolean value) {
            // Calculate the index in the ring
            // This cast is safe because long mod int is always int
            final int wrapped = (int) (index % this.values.length);

            final boolean prev = this.values[wrapped];
            this.values[wrapped] = value;

            return prev;
        }

