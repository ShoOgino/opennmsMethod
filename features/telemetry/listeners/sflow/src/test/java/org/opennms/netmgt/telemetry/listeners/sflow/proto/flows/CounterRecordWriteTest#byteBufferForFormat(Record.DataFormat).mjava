    public static ByteBuffer byteBufferForFormat(Record.DataFormat dataFormat) {
        final ByteBuffer byteBuffer = ByteBuffer.allocate(1500);
        byte[] dataFormatBytes = dataFormat.toBytes();

        for (int i = 0; i < dataFormatBytes.length; i++) {
            byteBuffer.put(dataFormatBytes[i]);
        }

        // This combination seems to work with all the
        // record types.
        byteBuffer.putInt(768);
        byteBuffer.putInt(2);
        byteBuffer.putInt(1);
        byteBuffer.putInt(0);
        byteBuffer.putInt(16);
        byteBuffer.putInt(1);
        byteBuffer.putInt(1);
        byteBuffer.putInt(1);

        for (int i = 0; i < (1500 - 33) / 4; i++) {
            byteBuffer.putInt(0);
        }

        byteBuffer.rewind();
        return byteBuffer;
    }

