    public DataRecord(final DataSet set,
                      final TemplateManager.TemplateResolver templateResolver,
                      final Template template,
                      final ByteBuffer buffer) throws InvalidPacketException {
        this.set = Objects.requireNonNull(set);

        this.template = Objects.requireNonNull(template);

        final List<FieldValue> fields = new ArrayList<>(this.template.count());
        for (final Field templateField : this.template) {
            fields.add(new FieldValue(templateResolver, templateField, buffer));
        }

        this.fields = Collections.unmodifiableList(fields);
    }

