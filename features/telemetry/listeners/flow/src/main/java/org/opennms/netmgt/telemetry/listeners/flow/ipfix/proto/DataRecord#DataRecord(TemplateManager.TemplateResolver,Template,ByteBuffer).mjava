    public DataRecord(final TemplateManager.TemplateResolver templateResolver,
                      final Template template,
                      final ByteBuffer buffer) throws InvalidPacketException {
        this.template = Objects.requireNonNull(template);

        final List<FieldValue> values = new ArrayList<>(this.template.count());
        for (final Field templateField : this.template) {
            values.add(new FieldValue(templateResolver, templateField, buffer));
        }

        this.fields = Collections.unmodifiableList(values);
    }

