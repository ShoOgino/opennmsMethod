    // Here we verify that when in grace period, we retry fetching
    // the service until we successfully get it or the grace period failed
    @Test
    public void verifyGracePeriod() throws InterruptedException, ExecutionException, TimeoutException {
        final long lookupDelay = 250;
        final long gracePeriod = 5000; // How long do we try?
        final long initialDelay = 1000; // Delay before service is made available
        final TelemetryAdapterRegistryImpl registry = new TelemetryAdapterRegistryImpl(gracePeriod, 500, lookupDelay);

        verifyConsiderPeriods(registry, () -> DummyAdapter.class.getName(), () -> registry.onBind(new DummyAdapterFactory(), ImmutableMap.of(TYPE, DummyAdapter.class.getName())), initialDelay, lookupDelay);
    }

