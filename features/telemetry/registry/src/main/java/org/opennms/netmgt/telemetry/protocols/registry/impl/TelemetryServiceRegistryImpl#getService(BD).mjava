    @Override
    public T getService(BD beanDefinition) {
        final ServiceFactoryRegistration<F> registration = delegate.lookup(beanDefinition.getClassName(), null);
        if (registration != null) {
            final T service = (T) registration.getServiceFactory().createBean(beanDefinition);

            final BeanWrapper wrapper = PropertyAccessorFactory.forBeanPropertyAccess(service);
//            wrapper.setPropertyValues(beanDefinition.getParameterMap());
            // TODO fooker: Workaround for unknown properties in BmpIntegrationAdapter (kafka.*) (see https://issues.opennms.org/browse/NMS-12573)
            for (final Map.Entry<String, String> entry : beanDefinition.getParameterMap().entrySet()) {
                if (wrapper.isWritableProperty(entry.getKey())) {
                    wrapper.setPropertyValue(entry.getKey(), entry.getValue());
                }
            }

            if (registration.shouldAutowire()) {
                // Autowire!
                final AutowireCapableBeanFactory beanFactory = applicationContext.getAutowireCapableBeanFactory();
                beanFactory.autowireBean(service);
                beanFactory.initializeBean(service, "service");
            }
            return service;
        }
        return null;
    }

