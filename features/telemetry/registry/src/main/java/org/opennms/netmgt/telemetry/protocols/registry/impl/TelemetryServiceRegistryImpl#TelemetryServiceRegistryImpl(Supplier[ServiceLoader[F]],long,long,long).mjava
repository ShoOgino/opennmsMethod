    public TelemetryServiceRegistryImpl(Supplier<ServiceLoader<F>> staticServiceSupplier, long gracePeriodMs, long waitPeriodMs, long lookupDelayMs) {
        this.delegate = new ServiceLookupBuilder(new ServiceLookup<String, Void>() {
            @Override
            public <T> T lookup(String criteria, Void filter) {
                return (T) m_serviceFactoryByClassName.get(criteria);
            }
        }).blocking(gracePeriodMs, lookupDelayMs, waitPeriodMs).build();

        if (staticServiceSupplier != null) {
            // Register all of the factories exposed via the service loader
            for (F serviceFactory : staticServiceSupplier.get()) {
                final String className = serviceFactory.getBeanClass().getCanonicalName();
                m_serviceFactoryByClassName.put(className, new ServiceFactoryRegistration(serviceFactory, true));
            }
        }
    }

