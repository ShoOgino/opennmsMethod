    public static void addNode(boolean isSource, OnmsTopologyEdge edge) {
        OnmsTopologyPort nodeMock = mock(OnmsTopologyPort.class);

        OnmsTopologyVertex vertexNodeMock = mock(OnmsTopologyVertex.class);
        when(nodeMock.getVertex()).thenReturn(vertexNodeMock);

        if (isSource) {
            when(edge.getSource()).thenReturn(nodeMock);
            when(edge.getSource().getIfindex()).thenReturn(null);
            when(nodeMock.getId()).thenReturn(SOURCE_ID);
            when(vertexNodeMock.getNodeid()).thenReturn(SOURCE_NODE_ID);
        } else {
            when(edge.getTarget()).thenReturn(nodeMock);
            when(edge.getTarget().getIfindex()).thenReturn(null);
            when(nodeMock.getId()).thenReturn(TARGET_ID);
            when(vertexNodeMock.getNodeid()).thenReturn(TARGET_NODE_ID);
        }
    }

