    public static void addSegment(boolean isSource, OnmsTopologyEdge edge) {
        OnmsTopologyPort segmentMock = mock(OnmsTopologyPort.class);

        OnmsTopologyVertex vertexSegmentMock = mock(OnmsTopologyVertex.class);
        when(segmentMock.getVertex()).thenReturn(vertexSegmentMock);

        if (isSource) {
            when(edge.getSource()).thenReturn(segmentMock);
            when(edge.getSource().getVertex().getNodeid()).thenReturn(null);
            when(segmentMock.getId()).thenReturn(SOURCE_ID);
            when(segmentMock.getToolTipText()).thenReturn(SOURCE_TOOLTIP);
        } else {
            when(edge.getTarget()).thenReturn(segmentMock);
            when(edge.getTarget().getVertex().getNodeid()).thenReturn(null);
            when(segmentMock.getId()).thenReturn(TARGET_ID);
            when(segmentMock.getToolTipText()).thenReturn(TARGET_TOOLTIP);
        }
    }

