    @Before
    public void setUp() throws Exception {
        Locations locations = new Locations();
        LocationDef locationDef = new LocationDef();
        locationDef.setLocationName("RDU");
        locationDef.setMonitoringArea("East Coast");
        locationDef.setCoordinates("35.715751,-79.16262");
        locationDef.setPollingPackageName("example1");
        locationDef.setPriority(1L);
        locations.addLocationDef(locationDef);
        m_monitoringLocationsConfiguration.setLocations(locations);

        OnmsApplication app = new OnmsApplication();
        app.setName("TestApp1");
        m_applicationDao.saveOrUpdate(app);

        OnmsDistPoller dp = new OnmsDistPoller("localhost", "127.0.0.1");
        m_distPollerDao.saveOrUpdate(dp);

        OnmsNode localhostNode = new OnmsNode(dp);
        m_nodeDao.saveOrUpdate(localhostNode);
        OnmsNode googleNode = new OnmsNode(dp);
        m_nodeDao.saveOrUpdate(googleNode);

        OnmsIpInterface localhostIpInterface = new OnmsIpInterface("127.0.0.1", localhostNode);
        m_ipInterfaceDao.saveOrUpdate(localhostIpInterface);
        OnmsIpInterface googleIpInterface = new OnmsIpInterface("66.249.80.104", googleNode);
        m_ipInterfaceDao.saveOrUpdate(googleIpInterface);

        OnmsServiceType httpServiceType = new OnmsServiceType("HTTP");
        m_serviceTypeDao.saveOrUpdate(httpServiceType);

        m_localhostHttpService = createService(app, localhostIpInterface, httpServiceType);
        m_googleHttpService = createService(app, googleIpInterface, httpServiceType);

        m_rduMonitor1 = new OnmsLocationMonitor();
        m_rduMonitor1.setDefinitionName("RDU");
        m_rduMonitor1.setLastCheckInTime(m_pollingEnd);
        m_rduMonitor1.setStatus(MonitorStatus.STARTED);
        m_locationMonitorDao.saveOrUpdate(m_rduMonitor1);

        m_rduMonitor2 = new OnmsLocationMonitor();
        m_rduMonitor2.setDefinitionName("RDU");
        m_rduMonitor2.setLastCheckInTime(m_pollingEnd);
        m_rduMonitor2.setStatus(MonitorStatus.STARTED);
        m_locationMonitorDao.saveOrUpdate(m_rduMonitor2);

        m_applicationDao.flush();
        m_distPollerDao.flush();
        m_nodeDao.flush();
        m_ipInterfaceDao.flush();
        m_serviceTypeDao.flush();
        m_monitoredServiceDao.flush();
        m_locationMonitorDao.flush();

        m_pollingEnd = new Date();
        m_pollingStart = new Date(m_pollingEnd.getTime() - (1000 * 60 * 60 * 24));
}

