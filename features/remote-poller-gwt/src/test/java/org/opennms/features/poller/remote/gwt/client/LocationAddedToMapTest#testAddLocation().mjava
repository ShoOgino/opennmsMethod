    @Test
    public void testAddLocation() {
        int numLocations = 3000;
        int numApps = 12;
        
        Set<LocationInfo> locations = new HashSet<LocationInfo>();
        GWTBounds bounds = createLocations(numLocations, locations);
        
        for( LocationInfo locationInfo : locations) {
            m_testServer.sendUserSpecificEvent(new LocationUpdatedRemoteEvent(locationInfo));
        }
        
        //create apps and update by sending event
        Set<ApplicationInfo> apps = createApps(numApps, locations);
        
        for(ApplicationInfo app : apps) {
            m_testServer.sendUserSpecificEvent(new ApplicationUpdatedRemoteEvent(app));
        }
        
        m_testServer.sendUserSpecificEvent(new UpdateCompleteRemoteEvent());
        
        m_testExecutor.run();
        
        assertNotNull(m_testApplicationView.getMapBounds());
        
        assertEquals(bounds, m_testApplicationView.getMapBounds());
        assertEquals(numLocations, m_testApplicationView.getMarkerCount());
        m_testApplicationView.resetMarkerCount();
        
        m_testServer.sendDomainEvent(new LocationsUpdatedRemoteEvent(locations));
        
        for(ApplicationInfo app : apps) {
            m_testServer.sendDomainEvent(new ApplicationUpdatedRemoteEvent(app));
        }
        
        m_testExecutor.run();
        
        assertEquals(0, m_testApplicationView.getMarkerCount());
    }

