	@Test
	public void testMarkerStatusOneOfTwoServicesDown() {
		Collection<GWTLocationMonitor> monitors = new ArrayList<GWTLocationMonitor>();
		Collection<GWTLocationSpecificStatus> statuses = new ArrayList<GWTLocationSpecificStatus>();
		for (int i = 0; i< 5; i++) {
			GWTLocationMonitor monitor = getMonitor("STARTED");
			monitors.add(monitor);

			GWTLocationSpecificStatus status = new GWTLocationSpecificStatus();
			status.setId(++count);
			status.setLocationMonitor(monitor);
			status.setMonitoredService(getService("HTTP"));
			status.setPollResult(GWTPollResult.available(100));
			statuses.add(status);
			
			status = new GWTLocationSpecificStatus();
			status.setId(++count);
			status.setLocationMonitor(monitor);
			status.setMonitoredService(getService("FTP"));
			status.setPollResult(GWTPollResult.down("totally busted!"));
			statuses.add(status);
		}
		
		LocationMonitorState lms = new LocationMonitorState(monitors, statuses);
		assertEquals("status should be down when one service is down across all monitors", ServiceStatus.DOWN, lms.getStatus());
	}

