	private Location getLocation(final OnmsMonitoringLocationDefinition def) {

		final LocationUpdateTracker tracker = new LocationUpdateTracker(def.getName());

		final Collection<GWTLocationMonitor> monitors = new HashSet<GWTLocationMonitor>();

		for (OnmsLocationMonitor mon : m_locationDao.findByLocationDefinition(def)) {
			monitors.add(transformLocationMonitor(mon));
		}
		for (OnmsLocationSpecificStatus status : m_locationDao.getAllMostRecentStatusChanges()) {
			tracker.onStatus(status);
		}

		final LocationMonitorState lms = new LocationMonitorState(monitors, tracker.drain());

		if (def.getGeolocation() == null || def.getGeolocation().equals("")) {
			// OpenNMS World HQ
			def.setGeolocation("35.715751,-79.16262");
		}

		final Location loc = new UpdateLocation(def.getName(), def.getPollingPackageName(), def.getArea(), def.getGeolocation(), lms);
		LogUtils.debugf(this, "getLocation(OnmsMonitoringLocationDefinition) returning %s", loc.toString());
		return loc;
	}

