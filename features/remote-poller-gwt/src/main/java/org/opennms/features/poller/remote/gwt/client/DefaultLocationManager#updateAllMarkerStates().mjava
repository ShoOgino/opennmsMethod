    private void updateAllMarkerStates() {
        for (final LocationInfo location : m_locations.values()) {
            final GWTMarkerState markerState = location.getMarkerState();
            
            boolean visible = m_selectedStatuses.contains(location.getStatusDetails().getStatus());
            markerState.setVisible(visible);

            boolean selected = false;
            if (m_locationViewActive || m_selectedApplications.size() == 0) {
                selected = true;
            } else {
                for (final ApplicationInfo app : m_selectedApplications) {
                    if (app.getLocations().contains(location.getName())) {
                        selected = true;
                        break;
                    }
                }
            }
            if (selected) {
                if (m_selectedTag != null) {
                    selected = location.getTags() != null && location.getTags().contains(m_selectedTag);
                }
            }
            markerState.setSelected(selected);
            m_mapPanel.placeMarker(markerState);
        }
    }

