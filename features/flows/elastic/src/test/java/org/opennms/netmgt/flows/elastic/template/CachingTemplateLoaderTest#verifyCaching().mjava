    @Test
    public void verifyCaching() throws IOException {
        // Spy on loader
        final TemplateLoader original = new DefaultTemplateLoader();
        final TemplateLoader actualTemplateLoader = spy(original);

        // Make it cache
        final TemplateLoader cachingTemplateLoader = new CachingTemplateLoader(actualTemplateLoader);

        // Ask the caching loader
        cachingTemplateLoader.load(version, RawIndexInitializer.TEMPLATE_RESOURCE);
        cachingTemplateLoader.load(version, RawIndexInitializer.TEMPLATE_RESOURCE);
        cachingTemplateLoader.load(version, "/netflow-template-merged");
        cachingTemplateLoader.load(version, "/netflow-template-merged");

        // Verify that, actual loader was only be invoked twice
        verify(actualTemplateLoader, times(2)).load(any(), anyString());
    }

