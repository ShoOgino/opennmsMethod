    @Test
    public void verifyCaching() throws IOException {
        // Spy on loader
        final TemplateLoader original = new DefaultTemplateLoader();
        final TemplateLoader actualTemplateLoader = spy(original);

        // Make it cache
        final TemplateLoader cachingTemplateLoader = new CachingTemplateLoader(actualTemplateLoader);

        // Ask the caching loader
        cachingTemplateLoader.load(ElasticFlowRepositoryInitializer.TEMPLATE_RESOURCE);
        cachingTemplateLoader.load(ElasticFlowRepositoryInitializer.TEMPLATE_RESOURCE);
        cachingTemplateLoader.load("/netflow-template-merged.json");
        cachingTemplateLoader.load("/netflow-template-merged.json");

        // Verify that, actual loader was only be invoked twice
        verify(actualTemplateLoader, times(2)).load(anyString());
    }

