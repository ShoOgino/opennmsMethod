    @Test
    public void canRetrieveTopNApps() throws ExecutionException, InterruptedException {
        final List<TrafficSummary<String>> appTrafficSummary = flowRepository.getTopNApplications(10, 0, 100).get();
        assertThat(appTrafficSummary, hasSize(2));
        final TrafficSummary<String> HTTPS = appTrafficSummary.get(0);
        assertThat(HTTPS.getEntity(), equalTo("https"));
        assertThat(HTTPS.getBytesIn(), equalTo(210L));
        assertThat(HTTPS.getBytesOut(), equalTo(2100L));

        final TrafficSummary<String> HTTP = appTrafficSummary.get(1);
        assertThat(HTTP.getEntity(), equalTo("http"));
        assertThat(HTTP.getBytesIn(), equalTo(10L));
        assertThat(HTTP.getBytesOut(), equalTo(100L));
    }

