    public MockDocumentEnricherFactory() {
        nodeDao = createNodeDao();
        interfaceToNodeCache = new MockInterfaceToNodeCache();
        transactionTemplate = new MockTransactionTemplate();
        transactionTemplate.afterPropertiesSet();
        assetRecordDao = new MockAssetRecordDao();
        categoryDao = new MockCategoryDao();

        final ClassificationRuleDAO rulesDao;
        try {
            rulesDao = new StaticRuleClassificationDAO();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
        final ClassificationEngine classificationEngine = new DefaultClassificationEngine(rulesDao);
        enricher = new DocumentEnricher(nodeDao, interfaceToNodeCache, transactionTemplate, classificationEngine);

        // Required for mock node dao
        addServiceRegistry(nodeDao);
        addServiceRegistry(assetRecordDao);
        addServiceRegistry(categoryDao);
        DefaultServiceRegistry.INSTANCE.register(nodeDao, NodeDao.class);
        DefaultServiceRegistry.INSTANCE.register(assetRecordDao, AssetRecordDao.class);
        DefaultServiceRegistry.INSTANCE.register(categoryDao, CategoryDao.class);
    }

