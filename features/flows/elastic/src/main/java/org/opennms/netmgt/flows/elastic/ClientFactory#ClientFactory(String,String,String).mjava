    public ClientFactory(String elasticURL, String elasticUser, String elasticPassword) {
        final List<String> urls = parseUrl(elasticURL);
        final String user = elasticUser != null && !elasticUser.isEmpty() ? elasticUser : null;
        final String password = elasticPassword != null && !elasticPassword.isEmpty() ? elasticPassword : null;

        // Ensure urls is set
        if (urls.isEmpty()) {
            throw new IllegalArgumentException("No urls have been provided");
        }

        // TODO MVR Fix the following hack:
        // This is a hack, due to our osgi-jetty-bridge: The annotation at the NetflowDocument
        // living in the api module (on the jetty side) are not accessible directly (only as proxy) by the Gson lirary
        // living in the osgi container (osgi-jest-complete module) and therefore @SerializedName annotations don't work.
        // So we instantiate a custom gson with a custom field name policy.
        final Gson gson = new GsonBuilder()
                .setDateFormat(AbstractJestClient.ELASTIC_SEARCH_DATE_FORMAT)
                .setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES)
                .create();

        clientConfigBuilder = new HttpClientConfig.Builder(elasticURL)
                .multiThreaded(true)
                .defaultMaxTotalConnectionPerRoute(2)
                .maxTotalConnection(20)
                .gson(gson);

        // Apply optional credentials
        if (user != null && password != null) {
            clientConfigBuilder.defaultCredentials(user, password);
        }
    }

