    // Is invoked by the blueprint container and should take care of all initialization work, which may be
    // required in order to persist flows later on
    public void init() throws IOException {
        // Read template
        final InputStream inputStream = getClass().getResourceAsStream(TEMPLATE_RESOURCE);
        if (inputStream == null) {
            throw new NullPointerException("Template from '" + TEMPLATE_RESOURCE +  "' is null");
        }
        final byte[] bytes = new byte[inputStream.available()];
        ByteStreams.readFully(inputStream, bytes);

        // Post it to elastic
        final PutTemplate putTemplate = new PutTemplate.Builder(FLOW_TEMPLATE_NAME, new String(bytes)).build();
        final JestResult result = client.execute(putTemplate);
        if (!result.isSucceeded()) {
            // In case the template could not be created, we bail
            throw new IllegalStateException("Template '" + FLOW_TEMPLATE_NAME + "' could not be persisted. Reason: " + result.getErrorMessage());
        }
    }

