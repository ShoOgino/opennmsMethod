    @Override
    public CompletableFuture<Set<Integer>> getExportersWithFlows(int limit, List<Filter> filters) {
        final String query = searchQueryProvider.getUniqueNodeExporters(limit, filters);
        return searchAsync(query, extractTimeRangeFilter(filters))
                .thenApply(res -> {
                    final TermsAggregation criterias = res.getAggregations().getTermsAggregation("criterias");
                    if (criterias == null) {
                        // No results
                        return Collections.emptySet();
                    }
                    return criterias.getBuckets()
                            .stream()
                            .map(e -> Integer.parseInt(e.getKey()))
                            .collect(Collectors.toSet());
                });
    }

