    @Test
    public void testMarshalJson() throws IOException {
        FlowSeriesResponse response = new FlowSeriesResponse();
        response.setStart(1);
        response.setEnd(100);
        response.setColumns(Lists.newArrayList(new FlowSeriesColumn("SSH", true) , new FlowSeriesColumn("SSH", false)));
        response.setTimestamps(Arrays.asList(1L, 10L, 100L));
        response.setValues(Arrays.asList(
                Lists.newArrayList(1d, 1d, 1d),
                Lists.newArrayList(2d, 2d, 2d)
        ));

        String responseString = JsonTest.marshalToJson(response);
        JsonTest.assertJsonEquals("{\n" +
                "  \"start\" : 1,\n" +
                "  \"end\" : 100,\n" +
                "  \"columns\" : [ {\n" +
                "    \"label\" : \"SSH\",\n" +
                "    \"ingress\" : true\n" +
                "  }, {\n" +
                "    \"label\" : \"SSH\",\n" +
                "    \"ingress\" : false\n" +
                "  } ]," +
                "  \"timestamps\" : [ 1, 10, 100 ],\n" +
                "  \"values\" : [ [ 1.0, 1.0, 1.0 ], [ 2.0, 2.0, 2.0 ] ]" +
                "}", responseString);
    }

