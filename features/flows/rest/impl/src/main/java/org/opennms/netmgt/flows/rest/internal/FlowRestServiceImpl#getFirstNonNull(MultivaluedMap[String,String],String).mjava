    /**
     * Retrieve the first value from the map for the given key and convert this to a blank string
     * if the resulting value is null, or does not exist in the map.
     *
     * @param map multivalued map
     * @param key key to lookup
     * @return non-null string
     */
    private static String getFirstNonNull(MultivaluedMap<String, String> map, String key) {
        final String value = map.getFirst(key);
        return value != null ? value : "";
    }

