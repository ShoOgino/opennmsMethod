    @Test
    public void verifyRulePriorityComparator() {

        final Group group1 = new GroupBuilder().withName("group1").withPosition(1).build();
        final Rule rule1_1 = createAndAddRule(group1, 1);
        final Rule rule1_2 = createAndAddRule(group1, 2);
        final Rule rule1_3 = createAndAddRule(group1, 3);

        final Group group2 = new GroupBuilder().withName("group2").withPosition(2).build();
        final Rule rule2_1 = createAndAddRule(group2, 1);
        final Rule rule2_2 = createAndAddRule(group2, 2);
        final Rule rule2_3 = createAndAddRule(group2, 3);

        final List<Rule> expectedList = Lists.newArrayList(rule1_1, rule1_2, rule1_3, rule2_1, rule2_2, rule2_3);
        final List<Rule> actualRules = Lists.newArrayList(rule2_2, rule1_3, rule2_1, rule2_3, rule1_2, rule1_1);
        actualRules.sort(new RulePriorityComparator());

        assertEquals(expectedList, actualRules);
    }

