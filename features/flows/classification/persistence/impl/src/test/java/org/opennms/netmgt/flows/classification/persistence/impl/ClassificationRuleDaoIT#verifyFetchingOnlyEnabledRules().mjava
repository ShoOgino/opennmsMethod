    @Test
    public void verifyFetchingOnlyEnabledRules() {
        // Create a bunch of rules
        ruleDao.save(new RuleBuilder().withName("Rule 1").withPort(1000).withGroup(staticGroup).build());
        ruleDao.save(new RuleBuilder().withName("Rule 2").withPort(1000).withGroup(customGroup).build());

        // Verify creation
        assertThat(ruleDao.findAllEnabledRules(), hasSize(2));

        // Disable group
        staticGroup.setEnabled(false);
        groupDao.saveOrUpdate(staticGroup);
        assertThat(ruleDao.findAllEnabledRules(), hasSize(1));

        // Disable yet another group
        customGroup.setEnabled(false);
        groupDao.saveOrUpdate(customGroup);
        assertThat(ruleDao.findAllEnabledRules(), hasSize(0));
    }

