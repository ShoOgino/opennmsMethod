    @Test
    public void verifyCRUD() {
        // Nothing created yet
        assertEquals(0, ruleDao.countAll());

        // Create dummy
        final Rule rule = new RuleBuilder()
                .withName("HTTP")
                .withIpAddress("127.0.0.1")
                .withPort("80,8080")
                .withProtocol("tcp")
                .withGroup(customGroup)
                .build();

        // create and verify creation
        ruleDao.saveOrUpdate(rule);
        assertEquals(1, ruleDao.countAll());

        // Update
        rule.setName("HTTP2");
        ruleDao.update(rule);
        assertEquals(1, ruleDao.countAll());
        assertEquals("HTTP2", ruleDao.get(rule.getId()).getName());
        assertEquals(Groups.USER_DEFINED, ruleDao.get(rule.getId()).getGroup().getName());

        // Delete
        rule.getGroup().removeRule(rule);
        ruleDao.delete(rule);
        assertEquals(0, ruleDao.countAll());
    }

