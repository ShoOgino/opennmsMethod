    @Test
    public void verifyCRUD() {
        // Nothing of ours created yet (only default database schema)
        int initialCount = ruleDao.countAll();
        assertTrue("initial classification rules populated (count should be non-zero)", initialCount > 0);

        // Create dummy
        final Rule rule = new RuleBuilder()
                .withName("HTTP")
                .withDstAddress("127.0.0.1")
                .withDstPort("80,8080")
                .withProtocol("tcp")
                .withGroup(customGroup)
                .build();

        // create and verify creation
        ruleDao.saveOrUpdate(rule);
        assertEquals(initialCount + 1, ruleDao.countAll());

        // Update
        rule.setName("HTTP2");
        ruleDao.update(rule);
        assertEquals(initialCount + 1, ruleDao.countAll());
        assertEquals("HTTP2", ruleDao.get(rule.getId()).getName());
        assertEquals(Groups.USER_DEFINED, ruleDao.get(rule.getId()).getGroup().getName());

        // Delete
        rule.getGroup().removeRule(rule);
        ruleDao.delete(rule);
        assertEquals(initialCount, ruleDao.countAll());
    }

