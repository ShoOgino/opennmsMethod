    @Override
    public Integer saveRule(Rule rule) throws InvalidRuleException {
        return runInTransaction((status) -> {
            // All rules are automatically added to the user defined group
            final Group group = classificationGroupDao.findByName(Groups.USER_DEFINED);

            ruleValidator.validate(rule);
            groupValidator.validate(group, rule);

            // persist
            group.addRule(rule);
            final Integer ruleId = classificationRuleDao.save(rule);
            updateRulePositionsAndReloadEngine(RulePrioritizationUtil.sortRulePositions(group));

            return ruleId;
        });
    }

