    @Override
    public void updateRule(Rule rule) {
        if (rule.getId() == null) throw new NoSuchElementException();

        // Persist
        runInTransaction(status -> {
            ruleValidator.validate(rule);
            groupValidator.validate(rule.getGroup(), rule);
            classificationRuleDao.saveOrUpdate(rule);
            updateRulePositionsAndReloadEngine(rule.getGroup());
            return null;
        });
    }

