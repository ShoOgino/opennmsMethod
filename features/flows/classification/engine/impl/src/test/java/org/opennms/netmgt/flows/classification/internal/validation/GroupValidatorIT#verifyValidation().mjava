    @Test
    public void verifyValidation() {
        final Group userGroup = groupDao.findByName(Groups.USER_DEFINED);
        final Group systemGroup = groupDao.findByName(Groups.SYSTEM_DEFINED);

        // Empty group should succeed
        verify(() -> groupValidator.validate(userGroup, null));
        verify(() -> groupValidator.validate(systemGroup, null));

        // Group with a rule should succeed
        final Rule rule = createDummyRule();
        verify(() -> groupValidator.validate(userGroup, rule));
        userGroup.addRule(rule);

        // Same rule different group, should still succeed
        final Rule rule2 = createDummyRule();
        verify(() -> groupValidator.validate(systemGroup, rule2));
        systemGroup.addRule(rule2);

        // Adding the same rule (even with different name) should fail
        Rule rule3 = createDummyRule();
        rule3.setName("xxx");
        verify(() -> groupValidator.validate(userGroup, rule3), Errors.GROUP_DUPLICATE_RULE);
    }

