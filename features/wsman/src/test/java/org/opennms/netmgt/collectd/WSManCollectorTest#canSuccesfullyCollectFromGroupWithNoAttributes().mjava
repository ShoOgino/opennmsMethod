    @Test
    public void canSuccesfullyCollectFromGroupWithNoAttributes() throws CollectionInitializationException, CollectionException {
        OnmsNode node = mock(OnmsNode.class);
        NodeDao nodeDao = mock(NodeDao.class);
        when(nodeDao.get(0)).thenReturn(node);

        WsmanConfig config = new WsmanConfig();
        WSManConfigDao configDao = mock(WSManConfigDao.class);
        when(configDao.getConfig(anyObject())).thenReturn(config);

        Collection collection = new Collection();
        WSManDataCollectionConfigDao dataCollectionConfigDao = mock(WSManDataCollectionConfigDao.class);
        when(dataCollectionConfigDao.getCollectionByName("default")).thenReturn(collection);

        WsManCollector collector = new WsManCollector();
        collector.setWSManClientFactory(mock(WSManClientFactory.class));
        collector.setWSManConfigDao(configDao);
        collector.setWSManDataCollectionConfigDao(dataCollectionConfigDao);
        collector.setNodeDao(nodeDao);

        CollectionAgent agent = mock(CollectionAgent.class);
        when(agent.getStorageDir()).thenReturn(new java.io.File(""));
        collector.initialize(agent, Maps.newHashMap());

        Map<String, Object> collectionParams = Maps.newHashMap();
        collectionParams.put("collection", "default");

        CollectionSet collectionSet = collector.collect(agent, null, collectionParams);

        assertEquals(ServiceCollector.COLLECTION_SUCCEEDED, collectionSet.getStatus());
        assertEquals(0, getAttributes(collectionSet).size());
    }

