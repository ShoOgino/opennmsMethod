    @Test
    public void canSuccesfullyCollectFromGroupWithNoAttributes() throws CollectionInitializationException, CollectionException {
        OnmsNode node = mock(OnmsNode.class);
        NodeDao nodeDao = mock(NodeDao.class);
        when(nodeDao.get(0)).thenReturn(node);

        WSManConfigDao configDao = mock(WSManConfigDao.class);
        when(configDao.getAgentConfig(any())).thenReturn(new Definition());

        Collection collection = new Collection();
        WSManDataCollectionConfigDao dataCollectionConfigDao = mock(WSManDataCollectionConfigDao.class);
        when(dataCollectionConfigDao.getCollectionByName("default")).thenReturn(collection);

        WsManCollector collector = new WsManCollector();
        collector.setWSManClientFactory(mock(WSManClientFactory.class));
        collector.setWSManConfigDao(configDao);
        collector.setWSManDataCollectionConfigDao(dataCollectionConfigDao);
        collector.setNodeDao(nodeDao);

        CollectionAgent agent = mock(CollectionAgent.class);
        when(agent.getAddress()).thenReturn(InetAddressUtils.getLocalHostAddress());
        when(agent.getStorageResourcePath()).thenReturn(ResourcePath.get());

        Map<String, Object> collectionParams = Maps.newHashMap();
        collectionParams.put("collection", "default");
        collectionParams.putAll(collector.getRuntimeAttributes(agent, collectionParams));
        CollectionSet collectionSet = collector.collect(agent, collectionParams);

        assertEquals(CollectionStatus.SUCCEEDED, collectionSet.getStatus());
        assertEquals(0, CollectionSetUtils.getAttributesByName(collectionSet).size());
    }

