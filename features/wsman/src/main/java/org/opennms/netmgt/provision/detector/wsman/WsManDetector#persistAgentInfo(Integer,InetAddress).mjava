    @Override
    @Transactional
    public void persistAgentInfo(Integer nodeId, InetAddress address) {
        if (!m_updateAssets) {
            LOG.debug("Asset updates disabled.");
            return;
        }

        Identity identity = null;
        m_lock.readLock().lock();
        try {
            identity = m_identifyByInetAddress.get(address);
        } finally {
            m_lock.readLock().unlock();
        }

        if (identity == null) {
            // Nothing to persist
            return;
        }

        final OnmsNode node = m_nodeDao.get(nodeId);
        if (node == null) {
            LOG.warn("No node was found with id: {}", nodeId);
            return;
        }

        LOG.debug("Updating vendor and modelNumber assets on node[{}] with '{}' and '{}'",
                nodeId, identity.getProductVendor(), identity.getProductVersion());
        node.getAssetRecord().setVendor(identity.getProductVendor());
        node.getAssetRecord().setModelNumber(identity.getProductVersion());
        m_nodeDao.update(node);
    }

