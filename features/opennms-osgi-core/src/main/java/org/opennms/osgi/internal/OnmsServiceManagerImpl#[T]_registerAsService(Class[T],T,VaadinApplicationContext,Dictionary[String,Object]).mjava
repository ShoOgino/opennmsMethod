    @Override
    public <T> void registerAsService(Class<T> serviceClass, T serviceBean, VaadinApplicationContext applicationContext, Dictionary<String,Object> properties) {
        if (serviceBean == null || serviceClass == null) return;
        ServiceRegistration<T> serviceRegistration = bundleContext.registerService(serviceClass, serviceBean, getProperties(applicationContext, properties));
        serviceRegistrations.put(serviceBean, serviceRegistration);
    }

