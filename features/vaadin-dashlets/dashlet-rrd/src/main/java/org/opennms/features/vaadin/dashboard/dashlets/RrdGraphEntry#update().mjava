    /**
     * Updates the labels and buttons according to the properties set.
     */
    public void update() {
        m_graphLayout.removeAllComponents();
        if (m_graphId == null) {
            m_nodeLabelComponent.setValue("No Rrd graph");
            m_graphLabelComponent.setValue("selected");
            m_changeButton.setCaption("Select Rrd graph");
            m_removeButton.setVisible(false);
        } else {
            String graphName = RrdGraphHelper.getGraphNameFromQuery(m_graphUrl);
            GraphContainer graph = new GraphContainer(graphName, m_resourceId);
            graph.setTitle(m_graphLabel);
            // Setup the time span
            Calendar cal = new GregorianCalendar();
            graph.setEnd(cal.getTime());
            cal.add(m_calendarField, -m_calendarDiff);
            graph.setStart(cal.getTime());
            // Use all of the available width
            graph.setWidthRatio(1.0d);
            graph.setHeightRatio(0.2d);
            m_graphLayout.addComponent(graph);

            m_graphLabelComponent.setValue(m_resourceTypeLabel + ": " + m_resourceLabel);
            m_nodeLabelComponent.setValue(getNodeLabel());
            m_changeButton.setCaption("Change Rrd graph");
            m_removeButton.setVisible(true);
        }
    }

