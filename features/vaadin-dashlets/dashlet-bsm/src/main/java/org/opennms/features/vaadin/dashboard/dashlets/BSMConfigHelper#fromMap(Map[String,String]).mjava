    /**
     * Created as business service search criteria for a given map.
     *
     * @param map the map to inverstigate
     * @return the criteria
     */
    public static BusinessServiceSearchCriteria fromMap(Map<String, String> map) {
        boolean filterByName = getBooleanForKey(map, "filterByName");
        String nameValue = getStringForKey(map, "nameValue");

        boolean filterByAttribute = getBooleanForKey(map, "filterByAttribute");
        String attributeKey = getStringForKey(map, "attributeKey");
        String attributeValue = getStringForKey(map, "attributeValue");

        boolean filterBySeverity = getBooleanForKey(map, "filterBySeverity");

        String severityValue = getStringForKey(map, "severityValue");

        if (severityValue == null || "".equals(severityValue)) {
            severityValue = OnmsSeverity.WARNING.getLabel();
        }

        int resultsLimit = getIntForKey(map, "resultsLimit");

        BusinessServiceSearchCriteriaBuilder b = new BusinessServiceSearchCriteriaBuilder();

        if (filterByName) {
            b.name(nameValue);
        }
        if (filterByAttribute) {
            b.attribute(attributeKey, attributeValue);
        }
        if (filterBySeverity) {
            b.greaterOrEqualSeverity(OnmsSeverity.get(severityValue));
        }

        return b.limit(resultsLimit)
                .order(BusinessServiceSearchCriteriaBuilder.Order.Name);
    }

