    /**
     * Returns the string value for a given key. Null values will be returned as empty
     * strings.
     *
     * @param map the map to use
     * @param key the key
     * @param defaultValue default value
     * @return the string value, defaultValue if Null or empty
     */
    public static String getStringForKey(Map<String, String> map, String key, String defaultValue) {
        String value = map.get(key);

        if (Strings.isNullOrEmpty(value)) {
            value = defaultValue;
        }

        return value;
    }

