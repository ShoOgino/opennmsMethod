    private void initialize(ServiceCollector collector) throws CollectionInitializationException {
        ApplicationContext context = mock(ApplicationContext.class);
        getRequiredBeans().forEach((k,v) -> {
            when(context.getBean(k)).thenReturn(v);
        });
        BeanUtils.setStaticApplicationContext(context);
        collector.initialize();
        BeanUtils.setStaticApplicationContext(null);
    }

