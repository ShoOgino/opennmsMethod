    static ThresholdingSession getSession() {
        if (mockSession == null) {
            mockSession = mock(ThresholdingSession.class);

            ThresholdingSessionKey mockKey = mock(ThresholdingSessionKey.class);
            when(mockKey.getNodeId()).thenReturn(1);
            when(mockKey.getLocation()).thenReturn("1.1.1.1");
            when(mockKey.getResource()).thenReturn("resource");
            when(mockKey.getServiceName()).thenReturn("service");

            when(mockSession.getKey()).thenReturn(mockKey);

            when(mockSession.getBlobStore()).thenReturn(NoOpBlobStore.getInstance());
            ThresholdStateMonitor mockStateMonitor = new BlobStoreAwareMonitor(mockSession.getBlobStore());
            when(mockSession.getThresholdStateMonitor()).thenReturn(mockStateMonitor);

        }

        return mockSession;
    }

