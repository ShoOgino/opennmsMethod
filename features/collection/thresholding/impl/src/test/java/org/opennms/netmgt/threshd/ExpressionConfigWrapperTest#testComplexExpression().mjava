    /* See NMS-5014 */
    @Test
    public void testComplexExpression() throws Exception {
        Expression exp = new Expression();
        exp.setExpression("jnxOperatingState == 2.0 || jnxOperatingState == 3.0 || jnxOperatingState == 7.0 ? 1.0 : 0.0");
        ExpressionConfigWrapper wrapper = new ExpressionConfigWrapper(exp);
        Assert.assertEquals(1, wrapper.getRequiredDatasources().size());
        Map<String, Double> values = new HashMap<String,Double>();
        values.put("jnxOperatingState", 1.0);
        Assert.assertEquals(0.0, wrapper.interpolateAndEvaluate(values, scope).value, 0.0);
        values.put("jnxOperatingState", 2.0);
        Assert.assertEquals(1.0, wrapper.interpolateAndEvaluate(values, scope).value, 0.0);
        values.put("jnxOperatingState", 3.0);
        Assert.assertEquals(1.0, wrapper.interpolateAndEvaluate(values, scope).value, 0.0);
        values.put("jnxOperatingState", 4.0);
        Assert.assertEquals(0.0, wrapper.interpolateAndEvaluate(values, scope).value, 0.0);
        values.put("jnxOperatingState", 5.0);
        Assert.assertEquals(0.0, wrapper.interpolateAndEvaluate(values, scope).value, 0.0);
        values.put("jnxOperatingState", 6.0);
        Assert.assertEquals(0.0, wrapper.interpolateAndEvaluate(values, scope).value, 0.0);
        values.put("jnxOperatingState", 7.0);
        Assert.assertEquals(1.0, wrapper.interpolateAndEvaluate(values, scope).value, 0.0);
    }

