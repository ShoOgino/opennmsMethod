    @SuppressWarnings("unchecked")
    public AbstractThresholdEvaluatorState(BaseThresholdDefConfigWrapper threshold,
                                           ThresholdingSession thresholdingSession) {
        Objects.requireNonNull(threshold);
        Objects.requireNonNull(thresholdingSession);
        Objects.requireNonNull(thresholdingSession.getBlobStore());

        this.thresholdingSession = thresholdingSession;
        kvStore = new SerializingBlobStore<>(thresholdingSession.getBlobStore(),
                fst::asByteArray,
                bytes -> (T) fst.asObject(bytes));
        key = String.format("%d-%s-%s-%s-%s-%s", thresholdingSession.getKey().getNodeId(),
                thresholdingSession.getKey().getLocation(), thresholdingSession.getKey().getResource(),
                threshold.getDatasourceExpression(), threshold.getDsType(), threshold.getType());

        stateTTL = SystemProperties.getInteger("org.opennms.netmgt.threshd.state_ttl",
                (int) TimeUnit.SECONDS.convert(24, TimeUnit.HOURS));
        initializeState();
    }

