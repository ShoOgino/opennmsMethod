    private double getValueForExpressionThreshold(ExpressionThresholdValue valueSupplier)
            throws ThresholdExpressionException {
        if (!state.getInterpolatedExpression().isPresent()) {
            LOG.debug("Interpolating the expression for state {} for the first time", state);
            return valueSupplier.get(expr -> state.setInterpolatedExpression(expr));
        } else {
            String interpolatedExpression = state.getInterpolatedExpression().get();
            LOG.debug("Using already interpolated expression {}", interpolatedExpression);
            return valueSupplier.get(interpolatedExpression);
        }
    }

