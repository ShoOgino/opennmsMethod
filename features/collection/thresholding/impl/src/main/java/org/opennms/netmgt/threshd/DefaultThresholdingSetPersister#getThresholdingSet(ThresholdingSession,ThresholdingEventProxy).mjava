    @Override
    public ThresholdingSet getThresholdingSet(ThresholdingSession session, ThresholdingEventProxy eventProxy) throws ThresholdInitializationException {
        ThresholdingSessionKey key = session.getKey();
        ThresholdingSet tSet = thresholdingSets.get(key);
        if (tSet == null) {
            tSet = new ThresholdingSetImpl(key.getNodeId(), key.getLocation(), key.getServiceName(),
                    ((ThresholdingSessionImpl) session).getRrdRepository(),
                    ((ThresholdingSessionImpl) session).getServiceParameters(),
                    ((ThresholdingSessionImpl) session).getResourceDao(), eventProxy, session, threshdDao,
                    thresholdingDao, pollOutagesDao, ifLabelDao, entityScopeProvider);
            thresholdingSets.put(key, tSet);
        }
        return tSet;
    }

