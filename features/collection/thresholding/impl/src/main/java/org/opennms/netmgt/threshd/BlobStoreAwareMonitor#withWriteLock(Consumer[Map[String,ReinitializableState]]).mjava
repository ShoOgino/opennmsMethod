    private void withWriteLock(Consumer<Map<String, ReinitializableState>> stateConsumer) {
        try {
            writeLock.lock();
            stateConsumer.accept(stateMap);
        } finally {
            writeLock.unlock();
        }
    }

