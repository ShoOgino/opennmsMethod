    @Override
    public Map<String, Object> getRequiredBeans() {
        MBeanServer mbeanServer = new MBeanServer();
        final String host = InetAddrUtils.str(InetAddrUtils.getLocalHostAddress());
        JmxConfig jmxConfig = mock(JmxConfig.class);
        when(jmxConfig.lookupMBeanServer(host, JmxServerConnector.DEFAULT_OPENNMS_JMX_PORT)).thenReturn(mbeanServer);
        JmxConfigDao jmxConfigDao = mock(JmxConfigDao.class);
        when(jmxConfigDao.getConfig()).thenReturn(jmxConfig);

        JmxCollection collection = new JmxCollection();
        JMXDataCollectionConfigDao jmxCollectionDao = mock(JMXDataCollectionConfigDao.class, RETURNS_DEEP_STUBS);
        when(jmxCollectionDao.getJmxCollection(COLLECTION)).thenReturn(collection);
        return new ImmutableMap.Builder<String, Object>()
                .put("jmxConfigDao", jmxConfigDao)
                .put("jmxDataCollectionConfigDao", jmxCollectionDao)
                .build();
    }

