    @Override
    public Map<String, Object> getRuntimeAttributes(CollectionAgent agent, Map<String, Object> parameters) {
        final Map<String, Object> runtimeAttributes = new HashMap<>();

        // Retrieve the name of the JMX data collector
        final String collectionName = ParameterMap.getKeyedString(parameters, ParameterName.COLLECTION.toString(), serviceName);
        final JmxCollection jmxCollection = m_jmxDataCollectionConfigDao.getJmxCollection(collectionName);
        if (jmxCollection == null) {
            throw new IllegalArgumentException(String.format("JMXCollector: No collection found with name '%s'.", collectionName));
        }
        runtimeAttributes.put(JMX_COLLECTION_KEY, jmxCollection);

        // Retrieve the agent config.
        final Map<String, String> parameterStringMap = new HashMap<String, String>();
        for (Map.Entry<String, Object> eachEntry : parameters.entrySet()) {
            if (eachEntry.getValue() instanceof String) {
                parameterStringMap.put(eachEntry.getKey(), (String) eachEntry.getValue());
            }
        }
        final MBeanServer mBeanServer = JmxUtils.getMBeanServer(m_jmxConfigDao, agent.getHostAddress(), parameterStringMap);
        if (mBeanServer != null) {
            runtimeAttributes.put(JMX_MBEAN_SERVER_KEY, mBeanServer);
        }

        return runtimeAttributes;
    }

