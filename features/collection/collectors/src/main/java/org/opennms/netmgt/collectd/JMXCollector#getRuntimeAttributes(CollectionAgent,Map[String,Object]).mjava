    @Override
    public Map<String, Object> getRuntimeAttributes(CollectionAgent agent, Map<String, Object> parameters) {
        final Map<String, Object> runtimeAttributes = new HashMap<>();

        // Retrieve the name of the JMX data collector
        final String collectionName = ParameterMap.getKeyedString(parameters, ParameterName.COLLECTION.toString(), serviceName);
        final JmxCollection jmxCollection = m_jmxDataCollectionConfigDao.getJmxCollection(collectionName);
        if (jmxCollection == null) {
            throw new IllegalArgumentException(String.format("JMXCollector: No collection found with name '%s'.", collectionName));
        }
        runtimeAttributes.put(JMX_COLLECTION_KEY, jmxCollection);

        // Retrieve the agent config.
        final String port = ParameterMap.getKeyedString(parameters, ParameterName.PORT.toString(), null);
        if (port != null) {
            final MBeanServer mBeanServer = m_jmxConfigDao.getConfig().lookupMBeanServer(agent.getHostAddress(), port);
            if (mBeanServer != null) {
                runtimeAttributes.put(JMX_MBEAN_SERVER_KEY, mBeanServer);
            }
        }

        return runtimeAttributes;
    }

