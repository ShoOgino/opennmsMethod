        @Override
        public File getStorageDir() {
            // Copied from org.opennms.netmgt.collectd.org.opennms.netmgt.collectd#getStorageDir
            File dir = new File(Integer.toString(getNodeId()));
            final String foreignSource = getForeignSource();
            final String foreignId = getForeignId();
            if(isStoreByForeignSource() && foreignSource != null && foreignId != null) {
                File fsDir = new File(ResourceTypeUtils.FOREIGN_SOURCE_DIRECTORY, foreignSource);
                dir = new File(fsDir, foreignId);
            }
            return dir;
        }

