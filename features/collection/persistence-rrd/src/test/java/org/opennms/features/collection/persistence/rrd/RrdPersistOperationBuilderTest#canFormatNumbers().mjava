    @Test
    public void canFormatNumbers() {
        assertEquals("2147483647", RrdPersistOperationBuilder.mapValue(Integer.MAX_VALUE));
        assertEquals("9223372036854775807", RrdPersistOperationBuilder.mapValue(Long.MAX_VALUE));
        assertEquals("-9223372036854775808", RrdPersistOperationBuilder.mapValue(Long.MIN_VALUE));
        assertEquals("2", RrdPersistOperationBuilder.mapValue(2.00d));
        assertEquals("2.0001", RrdPersistOperationBuilder.mapValue(2.0001d));

        assertEquals("U", RrdPersistOperationBuilder.mapValue(null));
        assertEquals("U", RrdPersistOperationBuilder.mapValue(Double.NaN));
        assertEquals("U", RrdPersistOperationBuilder.mapValue(Double.POSITIVE_INFINITY));

        assertEquals("2", RrdPersistOperationBuilder.mapValue(2.0000d, AttributeType.COUNTER));
        assertEquals("2", RrdPersistOperationBuilder.mapValue(2.0000d, AttributeType.GAUGE));
        assertEquals("2", RrdPersistOperationBuilder.mapValue(2.0001d, AttributeType.COUNTER));
        assertEquals("2.0001", RrdPersistOperationBuilder.mapValue(2.0001d, AttributeType.GAUGE));
    }

