    /**
     * <p>createBuilder</p>
     *
     * @param resource a {@link org.opennms.netmgt.collection.api.CollectionResource} object.
     * @param name a {@link java.lang.String} object.
     * @param attributeTypes a {@link java.util.Set} object.
     */
    protected void createBuilder(CollectionResource resource, String name, Set<CollectionAttributeType> attributeTypes) {
        m_builder = new PersistOperationBuilder(getRrdStrategy(), getRepository(), resource, name);
        if (resource.getTimeKeeper() != null) {
            m_builder.setTimeKeeper(resource.getTimeKeeper());
        }
        for (Iterator<CollectionAttributeType> iter = attributeTypes.iterator(); iter.hasNext();) {
            CollectionAttributeType attrType = iter.next();
            if (attrType instanceof NumericCollectionAttributeType) {
                m_builder.declareAttribute(attrType);
            }
        }
    }

