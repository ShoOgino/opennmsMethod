    public CollectionSetDTO(CollectionAgent agent, CollectionStatus status,
            Date timestamp, Map<Resource, List<Attribute<?>>> attributesByResource,
            boolean disableCounterPersistence, Long sequenceNumber) {
        this.agent = new CollectionAgentDTO(agent);
        this.status = status;
        this.timestamp = timestamp;
        this.sequenceNumber = sequenceNumber;
        collectionResources = new ArrayList<>();
        for (Entry<Resource, List<Attribute<?>>> entry : attributesByResource.entrySet()) {
            collectionResources.add(new CollectionResourceDTO(entry.getKey(), entry.getValue()));
        }
        if (disableCounterPersistence) {
            this.disableCounterPersistence = disableCounterPersistence;
        }
    }

