	@Override
	@SuppressWarnings("unchecked")
	public void updated(@SuppressWarnings("rawtypes") Dictionary properties) throws ConfigurationException {
		
		while(true) {
			Map<String, String> oldMap = m_iconMap.get();
			
			// create the new map using the old as defaults
			Map<String, String> newMap = new HashMap<String, String>(oldMap);
			for(Object key : Collections.list(properties.keys())) {
				String k = (String)key;
				String v = ((String)properties.get(key));
				if (v == null || v.trim().isEmpty()) {
					newMap.remove(k);
				} else {
					newMap.put(k, v.trim());
				}
			}

			// only update the newMap if the oldMap is the same one we started with
			// if not then try again with whichever map is there now
			if (m_iconMap.compareAndSet(oldMap, newMap)) {
				return;
			}
		}

	}

