	public static Set<Vertex> collapseVertices(Set<Vertex> vertices, CollapsibleCriteria[] criteria) {
		// Make a map of all of the vertices to their new collapsed representations
		Map<VertexRef,Set<Vertex>> vertexToCollapsedVertices = getMapOfVerticesToCollapsedVertices(criteria);

		if (vertexToCollapsedVertices.size() > 0) {
			Set<Vertex> retval = new HashSet<Vertex>();
			for (Vertex vertex : vertices) {
				// If the source vertex is in the collapsed list...
				Set<Vertex> collapsedVertices = vertexToCollapsedVertices.get(vertex);
				if (collapsedVertices != null) {
					for (Vertex collapsedEndpoint : collapsedVertices) {
						retval.add(collapsedEndpoint);
					}
				} else {
					retval.add(vertex);
				}
			}
			return retval;
		} else {
			return vertices;
		}
	}

