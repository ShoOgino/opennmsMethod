    private void validate(GraphML graphML) throws InvalidGraphException {
        final List<String> nodeIds = new ArrayList<>();
        final List<String> edgeIds = new ArrayList<>();
        final List<String> graphIds = new ArrayList<>();

        for (GraphMLGraph eachGraph : graphML.getGraphs()) {
            if (Strings.isNullOrEmpty(eachGraph.getProperty(GraphMLProperties.NAMESPACE))) {
                throw new InvalidGraphException("No namespace defined on graph with id " + eachGraph.getId());
            }

            if (graphIds.contains(eachGraph.getId())) {
                throw new InvalidGraphException("There already exists a graph with id " + eachGraph.getId());
            }
            graphIds.add(eachGraph.getId());

            for (GraphMLNode eachNode : eachGraph.getNodes()) {
                if (nodeIds.contains(eachNode.getId())) {
                    throw new InvalidGraphException("There already exists a node with id " + eachNode.getId());
                }
                nodeIds.add(eachNode.getId());
            }
            for (org.opennms.features.topology.plugins.topo.graphml.model.GraphMLEdge eachEdge : eachGraph.getEdges()) {
                if (edgeIds.contains(eachEdge.getId())) {
                    throw new InvalidGraphException("There already exists an edge with id " + eachEdge.getId());
                }
                edgeIds.add(eachEdge.getId());
            }
        }
    }

