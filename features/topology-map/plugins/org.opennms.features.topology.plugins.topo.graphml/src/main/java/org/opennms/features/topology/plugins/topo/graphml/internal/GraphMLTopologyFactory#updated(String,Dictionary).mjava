	@Override
	public void updated(String pid, @SuppressWarnings("rawtypes") Dictionary properties) throws ConfigurationException {
		String location = (String)properties.get(TOPOLOGY_LOCATION);
		if (!m_providers.containsKey(pid)) {
			GraphMLTopologyProvider topoProvider = new GraphMLTopologyProvider("graphml");
			topoProvider.setTopologyLocation(location);
			topoProvider.setMetaInfo(getMetaInfo());
			Dictionary<String,Object> metaData = new Hashtable<>();
			metaData.put(Constants.SERVICE_PID, pid);
			if (properties.get(LABEL) != null) {
				metaData.put(LABEL, properties.get(LABEL));
			}

			// wrap as hop provider
			VertexHopGraphProvider vertexHopGraphProvider = new VertexHopGraphProvider(topoProvider);
			ServiceRegistration<GraphProvider> registration = m_bundleContext.registerService(GraphProvider.class, vertexHopGraphProvider, metaData);
			m_registrations.put(pid, registration);
			m_providers.put(pid, topoProvider);

			// Expose the MetaTopologyProvider too
			SimpleMetaTopologyProvider metaTopologyProvider = new SimpleMetaTopologyProvider(vertexHopGraphProvider);
			m_bundleContext.registerService(MetaTopologyProvider.class, metaTopologyProvider, metaData);
		} else {
			m_providers.get(pid).setTopologyLocation(location);
			ServiceRegistration<GraphProvider> registration = m_registrations.get(pid);
			Dictionary<String,Object> metaData = new Hashtable<>();
			metaData.put(Constants.SERVICE_PID, pid);
			if (properties.get(LABEL) != null) {
				metaData.put(LABEL, properties.get(LABEL));
			}
			registration.setProperties(metaData);
		}
	}

