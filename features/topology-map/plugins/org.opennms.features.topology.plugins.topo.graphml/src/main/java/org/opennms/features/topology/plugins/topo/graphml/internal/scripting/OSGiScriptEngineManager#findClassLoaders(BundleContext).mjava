    /**
     * Iterates through all bundles to get the available @link ScriptEngineFactory classes
     * @return the names of the available ScriptEngineFactory classes
     * @throws IOException
     */
    private List<ClassLoader> findClassLoaders(BundleContext context) {
        Bundle[] bundles = context.getBundles();
        List<ClassLoader> factoryCandidates = new ArrayList<ClassLoader>();
        for (Bundle bundle : bundles) {
            if ("system.bundle".equals(bundle.getSymbolicName())) {
                continue;
            }
            Enumeration<URL> urls = bundle.findEntries("META-INF/services",
                    "javax.script.ScriptEngineFactory", false);
            if (urls == null) {
                continue;
            }

            factoryCandidates.add(bundle.adapt(BundleWiring.class).getClassLoader());
        }
        return factoryCandidates;
    }

