    @Test
    public void verify() throws Exception {
        final GraphMLServiceAccessor serviceAccessor = new GraphMLServiceAccessor();
        serviceAccessor.setTransactionOperations(transactionOperations);
        serviceAccessor.setNodeDao(nodeDao);
        serviceAccessor.setSnmpInterfaceDao(snmpInterfaceDao);
        serviceAccessor.setMeasurementsService(request -> new QueryResponse());

        final GraphMLGraph graph = GraphMLReader.read(getClass().getResourceAsStream("/test-graph2.xml")).getGraphs().get(0);
        final GraphMLTopologyProvider topologyProvider = new GraphMLTopologyProvider(graph);
        final GraphMLEdgeStatusProvider provider = new GraphMLEdgeStatusProvider(
                topologyProvider,
                new ScriptEngineManager(),
                serviceAccessor,
                Paths.get("src","test", "opennms-home", "etc", "graphml-edge-status"));

        assertThat(provider.contributesTo("acme:regions"), is(true));
        assertThat(provider.getNamespace(), is("acme:regions"));

        // Calculating the status executes some tests defined int the according scripts as a side effect
        final EdgeRef edgeRef = topologyProvider.getEdge("acme:regions", "center_north");
        final Map<EdgeRef, Status> status = provider.getStatusForEdges(topologyProvider, ImmutableList.of(edgeRef), new Criteria[0]);

        // Testing status merging from two scripts
        assertThat(status, is(notNullValue()));
        assertThat(status, is(hasEntry(edgeRef, new GraphMLEdgeStatus().severity(OnmsSeverity.WARNING)
                                                    .style("stroke", "pink")
                                                    .style("stroke-width", "3em"))));
    }

