    @Test
    public void verify() throws Exception {
        final GraphMLServiceAccessor serviceAccessor = new GraphMLServiceAccessor();
        serviceAccessor.setTransactionOperations(transactionOperations);
        serviceAccessor.setNodeDao(nodeDao);
        serviceAccessor.setSnmpInterfaceDao(snmpInterfaceDao);
        serviceAccessor.setMeasurementsService(request -> new QueryResponse());

        final GraphMLGraph graph = GraphMLReader.read(getClass().getResourceAsStream("/test-graph2.xml")).getGraphs().get(0);
        final GraphMLTopologyProvider topologyProvider = new GraphMLTopologyProvider(graph, serviceAccessor);
        final GraphMLEdgeStatusProvider statusProvider = new GraphMLEdgeStatusProvider(
                topologyProvider,
                new ScriptEngineManager(),
                serviceAccessor,
                Paths.get("src","test", "opennms-home", "etc", "graphml-edge-status"));

        assertThat(statusProvider.contributesTo("acme:regions"), is(true));
        assertThat(statusProvider.getNamespace(), is("acme:regions"));

        // Calculating the status executes some tests defined int the according scripts as a side effect
        final EdgeRef edgeRef = topologyProvider.getCurrentGraph().getEdge("acme:regions", "center_north");
        final Map<? extends EdgeRef, ? extends Status> status = statusProvider.getStatusForEdges(topologyProvider.getCurrentGraph(), ImmutableList.of(edgeRef), new Criteria[0]);

        // Checking nodeID creation for vertices with only foreignSource/foreignID set
        final VertexRef vertexRef = topologyProvider.getCurrentGraph().getVertex("acme:regions", "west");
        assertThat(vertexRef, is(notNullValue()));
        assertThat(vertexRef, is(instanceOf(GraphMLVertex.class)));
        assertThat(((GraphMLVertex) vertexRef).getNodeID(), is(4));

        // Testing status merging from two scripts
        assertThat(status, is(notNullValue()));
        assertThat(status, is(hasEntry(edgeRef, new GraphMLEdgeStatus().severity(OnmsSeverity.WARNING)
                                                                       .style("stroke", "pink")
                                                                       .style("stroke-width", "3em"))));
    }

