    @Test
    public void verifyCacheIsReloadedCorrectly() {
        OnmsDaoContainer<OnmsAlarm, Integer> container = new OnmsDaoContainer<OnmsAlarm, Integer>(OnmsAlarm.class, m_alarmDao) {
            @Override
            protected Integer getId(OnmsAlarm bean) {
                return bean == null ? null : bean.getId();
            }

            @Override
            public void verticesUpdated(VerticesUpdateManager.VerticesUpdateEvent event) {

            }
        };

        // verify that we have all item ids we need
        final int size = m_alarmDao.countAll();
        Collection<Integer> itemIds = (Collection<Integer>) container.getItemIds();
        Assert.assertEquals(size, itemIds.size());
        Assert.assertEquals(getAlarmIds(), sort(itemIds));

        // create new alarm and verify again
        createAlarm();
        itemIds = (Collection<Integer>) container.getItemIds();
        Assert.assertEquals(size + 1, itemIds.size());
        Assert.assertEquals(getAlarmIds(), sort(itemIds));
    }

