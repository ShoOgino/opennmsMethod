	public synchronized ChangeSet setItemIds(Collection<?> itemIds) {
		final List<String> added = new ArrayList<String>();
		final List<String> updated = new ArrayList<String>();
		final List<String> removed = new ArrayList<String>();
		
		HashSet<Object> existing = new HashSet<Object>(m_id2ItemId.keySet());
		for(Object itemId : itemIds) {
			if (existing.contains(itemId)) {
				updated.add(getId(itemId));
				existing.remove(itemId);
			} else {
				added.add(getId(itemId));
			}
		}
		
		for(Object itemId : existing) {
			String id = removeItemId(itemId);
			removed.add(id);
		}
		
		return new ChangeSet(added, updated, removed);

	}

