	public void addTopologyProvider(TopologyProvider topologyProvider, Map<String, Object> metaData) {
    	
    	s_log.debug("Adding topology provider: " + topologyProvider);
    	
    	Properties properties = new Properties();
    	for(Entry<String, Object> entry : metaData.entrySet()) {
    		properties.put(entry.getKey(), entry.getValue().toString());
    	}
    	
    	String namespace = properties.getProperty(NAMESPACE);
    	if (namespace == null) {
    		namespace = properties.getProperty(LABEL);
    	}
    	
    	properties.put(NAMESPACE, namespace);

    	TPGraphProvider graphProvider = new TPGraphProvider(namespace, topologyProvider);
    	
    	ServiceRegistration reg = m_bundleContext.registerService(new String[] {
    			VertexProvider.class.getName(),
    			EdgeProvider.class.getName()
    	}, graphProvider, properties);
    	
    	m_registrations.put(topologyProvider, reg);
    }

