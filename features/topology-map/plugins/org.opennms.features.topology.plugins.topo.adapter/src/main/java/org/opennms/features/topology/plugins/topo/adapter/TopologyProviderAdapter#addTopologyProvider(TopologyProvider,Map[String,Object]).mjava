    public void addTopologyProvider(TopologyProvider topologyProvider, Map<String, Object> metaData) {

        s_log.debug("Adding topology provider: " + topologyProvider);

        Properties properties = new Properties();
        for(Entry<String, Object> entry : metaData.entrySet()) {
            properties.put(entry.getKey(), entry.getValue().toString());
        }

        TPGraphProvider graphProvider = new TPGraphProvider(topologyProvider);

        ServiceRegistration reg = m_bundleContext.registerService(GraphProvider.class.getName(), graphProvider, properties);

        m_registrations.put(topologyProvider, reg);
    }

