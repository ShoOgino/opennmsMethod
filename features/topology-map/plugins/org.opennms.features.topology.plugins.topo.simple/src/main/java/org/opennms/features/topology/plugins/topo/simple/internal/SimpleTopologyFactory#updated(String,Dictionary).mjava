	@Override
	public void updated(String pid, @SuppressWarnings("rawtypes") Dictionary properties) throws ConfigurationException {
		
		try {
			String location = (String)properties.get(TOPOLOGY_LOCATION);
			URI url = new URI(location);
			if (!m_providers.containsKey(pid)) {
				SimpleGraphProvider topoProvider = new SimpleGraphProvider();
				topoProvider.setTopologyLocation(url);
				topoProvider.setMetaInfo(getMetaInfo());

				m_providers.put(pid, topoProvider);

				Dictionary<String,Object> metaData = new Hashtable<String,Object>();
				metaData.put(Constants.SERVICE_PID, pid);

				if (properties.get(LABEL) != null) {
					metaData.put(LABEL, properties.get(LABEL));
				}

				ServiceRegistration<GraphProvider> registration = m_bundleContext.registerService(GraphProvider.class, topoProvider, metaData);

				m_registrations.put(pid, registration);

			} else {
				m_providers.get(pid).setTopologyLocation(url);

				ServiceRegistration<GraphProvider> registration = m_registrations.get(pid);

				Dictionary<String,Object> metaData = new Hashtable<String,Object>();
				metaData.put(Constants.SERVICE_PID, pid);

				if (properties.get(LABEL) != null) {
					metaData.put(LABEL, properties.get(LABEL));
				}

				registration.setProperties(metaData);
			}

		} catch (URISyntaxException e) {
			throw new ConfigurationException(TOPOLOGY_LOCATION, "Topology location must be a valid URI", e);
		} catch (MalformedURLException e) {
			throw new ConfigurationException(TOPOLOGY_LOCATION, "Topology location must be a valid URL", e);
		} catch (JAXBException e) {
			throw new ConfigurationException(TOPOLOGY_LOCATION, "Topology location could not be deserialized", e);
		}
	}

