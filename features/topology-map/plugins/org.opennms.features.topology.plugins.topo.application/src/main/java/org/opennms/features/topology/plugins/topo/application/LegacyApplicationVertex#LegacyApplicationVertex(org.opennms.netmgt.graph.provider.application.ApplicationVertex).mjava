    public LegacyApplicationVertex(org.opennms.netmgt.graph.provider.application.ApplicationVertex vertex) {
        this(vertex.getId(), vertex.getName());
        final boolean isApplication = (vertex.getVertexType() == ApplicationVertexType.Application);
        if(isApplication) {
            setTooltipText(String.format("Application '%s'", vertex.getName()));
            setIconKey("application.application");
        } else {
            setTooltipText(String.format("Service '%s', IP: %s", vertex.getName(), vertex.getIpAddress()));
            setIpAddress(vertex.getIpAddress());
            setServiceTypeId(vertex.getServiceTypeId());
            setIconKey("application.monitored-service");

            // Apply node Id if provided
            final NodeRef nodeRef = vertex.getNodeRef();
            if (nodeRef != null && nodeRef.getNodeId() != null) {
                setNodeID(nodeRef.getNodeId());
            }
        }
    }

