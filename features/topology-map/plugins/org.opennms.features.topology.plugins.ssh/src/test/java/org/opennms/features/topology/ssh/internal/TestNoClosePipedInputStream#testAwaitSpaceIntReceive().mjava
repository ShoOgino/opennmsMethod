    @Test 
    public void testAwaitSpaceIntReceive() throws IOException {
        // This test creates a thread to test the waiting that the buffer
        // performs when it is either full or empty. This test gets into the
        // awaitSpace() method because the read position and write position are
        // the same, and should pass when the read position increments
        
        in.connect(out);
        in.in=1;
        in.out=1;
        boolean waited = false;
        
        Thread thread = new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    in.receive(1);
                } catch (IOException e) {
                    fail("Pipe not Connected");
                } 
            }
        });
        
        thread.start();
        long endTimeMillis = System.currentTimeMillis() + 5000;
        while (thread.isAlive()) {
            if (System.currentTimeMillis() > endTimeMillis) {
                waited = true;
            }
            try {
                Thread.sleep(500);
                in.in++;
            }
            catch (InterruptedException t) {
                fail("Test thread was interrupted");
            }
        }
        // This will fail if the system takes longer than 5 seconds to get out of the awaitSpace() method
        assertEquals(false, waited);
        
    }

