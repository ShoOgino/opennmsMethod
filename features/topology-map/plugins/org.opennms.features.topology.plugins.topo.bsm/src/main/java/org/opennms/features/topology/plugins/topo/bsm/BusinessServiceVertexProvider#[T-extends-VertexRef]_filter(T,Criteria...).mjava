    private <T extends VertexRef> T filter(T refToFilter, Criteria... criteria) {
        // if we are supposed to hide leafs...
        if (hideLeafElement(Arrays.asList(criteria))) {
            AbstractBusinessServiceVertex vertex = (AbstractBusinessServiceVertex) refToFilter;
            //... and we are actually a leaf, but no business service
            if (vertex.isLeaf() && !(vertex instanceof BusinessServiceVertex)) {
                return null; // ... we filter
            }
            return refToFilter; // ... otherwise we do not
        }
        return refToFilter; // we are not supposed to filter
    }

