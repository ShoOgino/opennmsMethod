    @Test
    public void testExtractSequenceId() throws UnknownHostException {
        final Inet6Address ip6Address = (Inet6Address) Inet6Address.getByName("0000:0000:0000:0000:0000:0000:0000:0001");
        final InetAddress ipAddress = InetAddress.getByName("127.0.0.1");

        // 1st test replies (ping command created a response)
        EchoPacket response = new JniPingResponse(ipAddress, createEchoPacket((short) 1));
        EchoPacket response2 = new Jni6PingResponse(ip6Address, new ICMPv6EchoReply(createEchoPacket6((short) 2)));
        EchoPacket response3 = new JnaPingReply(ipAddress, new DummyEchoPacket(-1, 3, System.currentTimeMillis() + 100, System.currentTimeMillis()));

        Assert.assertEquals(1, new PingSequence(response).getSequenceNumber());
        Assert.assertEquals(2, new PingSequence(response2).getSequenceNumber());
        Assert.assertEquals(3, new PingSequence(response3).getSequenceNumber());

        // Request (ping command failed, no response was created)
        EchoPacket request = new JniPingRequest(ipAddress, 1, 1, 1, 0, 64, null);
        EchoPacket request2 = new Jni6PingRequest(ip6Address, 1, 2, 1, 0, 64, null);
        EchoPacket request3 = new JnaPingRequest(ipAddress, 1, 3, 1, 0, 64, null);

        Assert.assertEquals(1, new PingSequence(request, true).getSequenceNumber());
        Assert.assertEquals(2, new PingSequence(request2, true).getSequenceNumber());
        Assert.assertEquals(3, new PingSequence(request3, true).getSequenceNumber());
    }

