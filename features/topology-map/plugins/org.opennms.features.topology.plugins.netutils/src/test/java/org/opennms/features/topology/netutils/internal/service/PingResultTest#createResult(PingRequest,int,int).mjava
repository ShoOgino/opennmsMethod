    private PingResult createResult(PingRequest request, int numberErrors, int numberTimeouts) {
        Preconditions.checkArgument(numberErrors + numberTimeouts < request.getNumberRequests(), "numberErrors + numberTimeouts must not be greater than numberRequests");
        Preconditions.checkArgument(numberErrors >= 0, "numberErrors must be >= 0");
        Preconditions.checkArgument(numberTimeouts >= 0, "numberTimeouts must be >= 0");

        final PingResult result = new PingResult(request);

        for (int i=0; i<request.getNumberRequests(); i++) {
            Assert.assertEquals(Boolean.FALSE, result.isComplete());
            DummyEchoPacket packet = new DummyEchoPacket(i, i, System.currentTimeMillis() + 100, System.currentTimeMillis());
            if (numberErrors > 0) {
                result.addSequence(new PingSequence(packet, new Exception()));
                numberErrors--;
            } else if (numberTimeouts > 0) {
                result.addSequence(new PingSequence(packet, true));
                numberTimeouts--;
            } else {
                result.addSequence(new PingSequence(packet));
            }
        }
        return result;
    }

