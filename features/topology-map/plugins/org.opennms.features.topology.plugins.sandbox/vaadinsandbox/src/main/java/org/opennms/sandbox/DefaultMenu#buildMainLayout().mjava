    /**
     * The buildMainLayout method sets up all of the layouts and windows and adds all of 
     * the visible and invisible components of the application to the main window.
     */
    private void buildMainLayout() {
        setMainWindow(new Window("Topology Maps"));
        getMainWindow().setImmediate(true);

        mainLayout = new VerticalLayout();
        mainLayout.setSizeFull();
        mainLayout.addComponent(createMenuBar());
        mainLayout.addComponent(horizontalSplit);

        leftLayout.setSizeFull();
        VerticalLayout cartmanBox = new VerticalLayout();
        Embedded cartmanImage = new Embedded("", new ClassResource("cartmanIcon.jpg", this));
        cartmanBox.addComponent(cartmanImage);
        cartmanBox.setComponentAlignment(cartmanImage, Alignment.MIDDLE_CENTER);
        cartmanBox.setWidth("" + (int)cartmanImage.getWidth() + "px"); //Sets layout box to width of image
        cartman.setContentMode(Label.CONTENT_XHTML);
        cartmanBox.addComponent(cartman);
        leftLayout.addComponent(cartmanBox);
        leftLayout.setComponentAlignment(cartmanBox, Alignment.MIDDLE_CENTER);

        rightLayout.setSizeFull();
        VerticalLayout buttersBox = new VerticalLayout();
        Embedded buttersImage = new Embedded("", new ClassResource("buttersIcon.jpg", this));
        buttersBox.addComponent(buttersImage);
        buttersBox.setComponentAlignment(buttersImage, Alignment.MIDDLE_CENTER);
        buttersBox.setWidth("" + (int)buttersImage.getWidth() + "px"); //Sets layout box to width of image
        butters.setContentMode(Label.CONTENT_XHTML);
        buttersBox.addComponent(butters);
        rightLayout.addComponent(buttersBox);
        rightLayout.setComponentAlignment(buttersBox, Alignment.MIDDLE_CENTER);

        horizontalSplit.setFirstComponent(leftLayout);
        horizontalSplit.setSecondComponent(rightLayout);

        buildCartmanMenu(); //Left side of split panel
        buildButtersMenu(); //Right side of split panel

        /*Sets up a right click listener which brings up the Cartman Context menu*/
        cartmanBox.addListener(new LayoutClickListener() {

            public void layoutClick(LayoutClickEvent event) {
                if (LayoutClickEvent.BUTTON_RIGHT == event.getButton()) {
                    cartmanMenu.show(event.getClientX(), event.getClientY());
                }else if(LayoutClickEvent.BUTTON_LEFT == event.getButton()) {
                    if(event.isCtrlKey()){
                        cartmanMenu.show(event.getClientX(), event.getClientY());
                    }
                }
            }

        });

        /*Sets up a right click listener which brings up the Butters Context menu*/
        buttersBox.addListener(new LayoutClickListener() {

            public void layoutClick(LayoutClickEvent event) {
                if (LayoutClickEvent.BUTTON_RIGHT == event.getButton()) {
                    buttersMenu.show(event.getClientX(), event.getClientY());
                }else if(LayoutClickEvent.BUTTON_LEFT == event.getButton()) {
                    if(event.isCtrlKey()){
                        buttersMenu.show(event.getClientX(), event.getClientY());
                    }
                }
            }

        });

        /* Allocate all available extra space to the horizontal split panel */
        mainLayout.setExpandRatio(horizontalSplit, 1);

        /*Adds all of the layouts and components to the main window for the Application.*/
        getMainWindow().setContent(mainLayout);
        getMainWindow().addComponent(cartmanMenu);
        getMainWindow().addComponent(buttersMenu);
    }

