    /**
     * The buildMainLayout method sets up all of the layouts and windows and adds all of 
     * the visible and invisible components of the application to the main window.
     */
	private void buildMainLayout() {
        setMainWindow(new Window("Topology Maps"));
        getMainWindow().setImmediate(true);
        
        mainLayout = new VerticalLayout();
        mainLayout.setSizeFull();
        mainLayout.addComponent(createMenuBar());
        mainLayout.addComponent(horizontalSplit);
        
        leftLayout.setSizeFull();
        leftLayout.addComponent(cartman);
        
        rightLayout.setSizeFull();
        rightLayout.addComponent(butters);
        
        horizontalSplit.setFirstComponent(leftLayout);
        horizontalSplit.setSecondComponent(rightLayout);
        
        buildCartmanMenu(); //Left side of split panel
        buildButtersMenu(); //Right side of split panel
        
        /*Sets up a right click listener which brings up the Cartman Context menu*/
        leftLayout.addListener(new LayoutClickListener() {

            public void layoutClick(LayoutClickEvent event) {
                if (LayoutClickEvent.BUTTON_RIGHT == event.getButton()) {
                    cartmanMenu.show(event.getClientX(), event.getClientY());
                }
            }

        });
        
        /*Sets up a right click listener which brings up the Butters Context menu*/
        rightLayout.addListener(new LayoutClickListener() {

            public void layoutClick(LayoutClickEvent event) {
                if (LayoutClickEvent.BUTTON_RIGHT == event.getButton()) {
                    buttersMenu.show(event.getClientX(), event.getClientY());
                }
            }

        });
        
        /* Allocate all available extra space to the horizontal split panel */
        mainLayout.setExpandRatio(horizontalSplit, 1);

        /*Adds all of the layouts and components to the main window for the Application.*/
        getMainWindow().setContent(mainLayout);
        getMainWindow().addComponent(cartmanMenu);
        getMainWindow().addComponent(buttersMenu);
    }

