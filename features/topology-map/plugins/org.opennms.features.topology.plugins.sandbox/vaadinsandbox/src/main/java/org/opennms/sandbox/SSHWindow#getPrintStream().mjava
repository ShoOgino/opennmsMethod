	public static PrintStream getPrintStream() {
        if (m_printStream == null) {
            m_printStream = new PrintStream(new OutputStream() {

				ByteArrayOutputStream buffer = new ByteArrayOutputStream();

				@Override
				public synchronized void write(byte[] b, int off, int len) throws IOException {
					super.write(b, off, len);
					console.prompt();
				}
				
                public synchronized void write(final int b) throws IOException {
                    buffer.write(b);
                   // Line buffering
                    if (13 == b) {
                        flush();
                    }
                }

                @Override
                public synchronized void flush() throws IOException {
                    super.flush();
                    buffer.flush();
                    console.print(buffer.toString());
					buffer = new ByteArrayOutputStream();
                }
            }, true);
        }
        return m_printStream;
    }

