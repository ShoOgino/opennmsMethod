	public static void doThatSSHThing(Console console, String lastInput) {
	        String host = "localhost";
	        int port = 8101;
	        String user = "karaf";
	        String password = "karaf";

	        SshClient client = null;
	        try {
	            client = SshClient.setUpDefaultClient();
	            client.start();
	            
	            
	            ConnectFuture future = client.connect(host, port);
	            future.await();
	            ClientSession session = future.getSession();
	            session.authPassword(user, password);
	            ClientChannel channel = session.createChannel("shell");
	            channel.setIn(new ByteArrayInputStream(lastInput.getBytes()));
	            channel.setOut(console.getPrintStream());
	            channel.setErr(console.getPrintStream());
	            channel.open();
	            channel.waitFor(ClientChannel.CLOSED, 0);
	        } catch (Throwable t) {
	            t.printStackTrace();
	            System.exit(1);
	        } finally {
	            try {
	                client.stop();
	            } catch (Throwable t) { }
	        }
	        System.exit(0);
	}

