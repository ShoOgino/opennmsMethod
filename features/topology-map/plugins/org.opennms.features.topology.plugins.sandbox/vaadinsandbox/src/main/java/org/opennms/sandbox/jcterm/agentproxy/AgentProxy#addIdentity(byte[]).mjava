  public synchronized boolean addIdentity(byte[] identity) {
    byte code1 = SSH2_AGENTC_ADD_IDENTITY;

    buffer.reset();
    buffer.putByte(code1);
    buffer.putByte(identity);
    buffer.insertLength();

    try {
      connector.query(buffer);
    }
    catch(AgentProxyException e){
      buffer.rewind();
      buffer.putByte(SSH_AGENT_FAILURE);
    }

    check_reply(buffer.getByte());

    return true;
  }

