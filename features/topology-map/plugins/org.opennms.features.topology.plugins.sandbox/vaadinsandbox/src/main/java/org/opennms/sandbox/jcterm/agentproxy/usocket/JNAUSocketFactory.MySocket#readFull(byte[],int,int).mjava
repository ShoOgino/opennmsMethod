    public int readFull(byte[] buf, int s, int len) throws IOException {
      byte[] _buf = buf;
      int _len = len;
      int _s = s;

      while(_len > 0){
        if(_s != 0){
          _buf = new byte[_len];
        }
        int i = CLibrary.INSTANCE.read(sock, _buf, _len);
        if(i <= 0){
          return -1;
          // throw new IOException("failed to read usocket");
        }
        if(_s != 0)
          System.arraycopy(_buf, 0, buf, _s, i);
        _s += i;
        _len -= i;
      }
      return len;
    }

