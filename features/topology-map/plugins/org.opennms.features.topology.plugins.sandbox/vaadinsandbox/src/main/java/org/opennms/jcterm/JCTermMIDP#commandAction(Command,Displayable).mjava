  public void commandAction(Command c, Displayable s) {
//System.out.println("key: "+c+" "+s);
    if(c==clearKeyCommand){
      clearKey();
      return;
    }
    if(c==okCommand && 
       display.getCurrent()==resultBox){
      if(nextScreen==f){
        f.addCommand(connectCommand);
	f.addCommand(clearKeyCommand);
      }
      display.setCurrent(nextScreen);
      return;
    }
    if(s==tb){
//     System.out.println(tb.getString());
      byte[] foo=tb.getString().getBytes();
      try{
	out.write(foo, 0, foo.length);
	out.flush();
      }
      catch(Exception e){ }
      display.setCurrent(nextScreen);
      return;
    }
    if(c==inputCommand){
      display.setCurrent(tb);
      nextScreen=s;
      return;
    }
    if(c==okCommand || c==cancelCommand){
      if(c==cancelCommand){
        f.addCommand(connectCommand);
	f.addCommand(clearKeyCommand);
      }
      display.setCurrent(f); 
    }

    if(c==connectCommand && !isPaused()) {
      if(thread!=null && thread.isAlive()){
	return;
      }
      String _host=tf.getString();
      int index=_host.indexOf('@');
      if(index<=0) return;
      String _user=_host.substring(0, _host.indexOf('@'));
      _host=_host.substring(_host.indexOf('@')+1);
      index=_host.indexOf(':');
      if(index>0){
	try{port=Integer.parseInt(_host.substring(_host.indexOf(':')+1));}
	catch(Exception e){}
	_host=_host.substring(0, _host.indexOf(':'));
      }
      if(_host==null || _host.length()==0 ||
	 _user==null || _user.length()==0){
	return;
      }
      host=_host;
      user=_user;
      thread=new Thread(this);
      thread.start();
      f.removeCommand(connectCommand);
      f.removeCommand(clearKeyCommand);
    }

    if((c==Alert.DISMISS_COMMAND) || (c==exitCommand)){
      stop();
      notifyDestroyed();
      destroyApp(true);
    }
  }

