  public Socket open(String path) throws IOException {

    int sock = CLibrary.INSTANCE.socket(1,  // AF_UNIX
                                        1,  // SOCK_STREAM
                                        0);
    if(sock < 0){
      throw new IOException("failed to allocate usocket");
    }

    if(CLibrary.INSTANCE.fcntl(sock,  2, 8) < 0){
      CLibrary.INSTANCE.close(sock);
      throw new IOException("failed to fctrl usocket");
    }

    SockAddr sockaddr = new SockAddr();
    sockaddr.sun_family = 1; 
    sockaddr.sun_path = new byte[108];
    System.arraycopy(path.getBytes(), 0,
                     sockaddr.sun_path, 0,
                     path.length());
    sockaddr.write();

    if(CLibrary.INSTANCE.connect(sock, sockaddr.getPointer(), 110)<0){
      throw new IOException("failed to fctrl usocket");
    }

    return new MySocket(sock);
  }

