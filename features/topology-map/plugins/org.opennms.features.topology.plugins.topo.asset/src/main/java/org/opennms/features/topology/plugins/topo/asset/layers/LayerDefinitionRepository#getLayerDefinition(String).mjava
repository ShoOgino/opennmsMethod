    private LayerDefinition getLayerDefinition(String layerKey) {
        for (Layers layerEnum : Layers.values()) {
            try {
                final Field enumField = layerEnum.getClass().getField(layerEnum.name());
                final Key key = enumField.getAnnotation(Key.class);
                final Restriction restriction = enumField.getAnnotation(Restriction.class);
                final String enumLayerKey = key != null ? key.value() : layerEnum.getLayer().getId();
                if (enumLayerKey.equals(layerKey)) {
                    return new LayerDefinition(layerKey, layerEnum.getLayer(), restriction != null ? restriction.hql() : null);
                }
            } catch (NoSuchFieldException e) {
                // swallow, should not happen
            }

        }
        LOG.warn("No layer definition found for layer key {}. Skipping.", layerKey);
        return null;
    }

