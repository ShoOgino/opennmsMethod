	private boolean matches(Map<String, String> peramaterMap,List<String> filter, List<String> allowedKeys) {
		// check filter correctness and split comma separated values
		if(filter.isEmpty()) return false;
		Map<String, List<String>> keysAndValues = keysAndValuesInfilter( filter, allowedKeys);

		// for each key if no matching parameter key return false
		// for each key if no matching parameter values return false

		for(String key:keysAndValues.keySet()){
			String paramValue = peramaterMap.get(key);
			boolean innerMatch=false;
			List<String> values = keysAndValues.get(key);

			for(String value:values){
				// deal with negation
				if (value.startsWith("!")) {
					// break and return if we ever find a NOT value
					if (value.substring(1).equals(paramValue)) return false;
					innerMatch= true;
				} else {
					if (value.equals(paramValue)) {
						// break and return innerMatch true if paramValue matches value
						innerMatch= true;
						break;
					}
				}
			}
			if(!innerMatch) return false;
		}

		return true;
	}

