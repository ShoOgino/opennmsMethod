    private void removeServicesForSessionWithNamespace(String sessionId, String namespace) {
        if(m_registrationMap.containsKey(sessionId)) {
            List<ServiceRegistration<Criteria>> serviceList = m_registrationMap.get(sessionId);
            ServiceRegistration<Criteria> removedService = null;
            for(ServiceRegistration<Criteria> serviceReg : serviceList) {
                try {
                    String namespaceProperty = (String) serviceReg.getReference().getProperty("namespace");
                    if(namespaceProperty.equals(namespace) ) {
                        serviceReg.unregister();
                        removedService = serviceReg;
                    }
                } catch( IllegalStateException e) {
                    removedService = serviceReg;
                }
            }
            if(removedService != null) serviceList.remove(removedService);
        }
    }

