    @Test
    public void testTopologyComponentGraphUpdateGroup() throws PaintException {
        PaintTarget target = EasyMock.createMock(PaintTarget.class);
        
        // Initial set up has only the group vertex
        mockInitialSetup(target);
        
        mockGraphTagStart(target);
        
        mockVertex(target);
        
        mockGraphTagEnd(target);
        
        // the set the zoomlevel to 1 and we should see two vertices and an edge
        mockGraphAttrs(target, 1, false);
        
        mockGraphTagStart(target);
        
        mockVertex(target);
        
        mockVertex(target);
        
        mockEdge(target);

        mockGraphTagEnd(target);

        EasyMock.replay(target);
        
        TestTopologyProvider topologyProvider = new TestTopologyProvider("test");
        SimpleGraphContainer graphContainer = new SimpleGraphContainer(topologyProvider);
		TopologyComponent topoComponent = getTopologyComponent(graphContainer);
        
        Collection<?> vertIds = topologyProvider.getVertexIds();
        
        Object groupId = topologyProvider.addGroup(this.getClass().getSimpleName(), "GroupIcon.jpg");
        
        for(Object vertId : vertIds) {
            BeanItem<TestVertex> beanItem = topologyProvider.getVertexItem(vertId);
            TestVertex v = beanItem.getBean();
            if(v.isLeaf()) {
                topologyProvider.setParent(vertId, groupId);
            }
            
        }
        
        topoComponent.paintContent(target);
        
        graphContainer.setSemanticZoomLevel(1);
        
        topoComponent.paintContent(target);
        
        EasyMock.verify(target);
        
    }

