    @Test
    public void testGetAlarmStatus() {
        Vertex vertex = new TestVertex();
        List<VertexRef> vertexList = new ArrayList<VertexRef>();
        vertexList.add(vertex);

        EasyMock.expect(
                m_alarmDao.getNodeAlarmSummariesIncludeAcknowledgedOnes(EasyMock.<List<Integer>>anyObject())).andReturn(createNormalAlarmSummaryList());
        
        EasyMock.replay(m_alarmDao);
        
        Map<VertexRef, Status> statusMap = m_statusProvider.getStatusForVertices(m_vertexProvider, vertexList, new Criteria[0]);
        assertEquals(1, statusMap.size());
        assertEquals(vertex, new ArrayList<VertexRef>(statusMap.keySet()).get(0));
        String computeStatus = statusMap.get(vertex).computeStatus();
        assertTrue(computeStatus.equals("major"));
        
        EasyMock.verify(m_alarmDao);
    }

