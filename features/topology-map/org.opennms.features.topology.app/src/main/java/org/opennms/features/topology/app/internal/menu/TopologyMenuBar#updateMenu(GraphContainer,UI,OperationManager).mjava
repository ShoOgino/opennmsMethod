    // Builds the menu
    public void updateMenu(GraphContainer graphContainer, UI mainWindow, OperationManager operationManager) {
        final DefaultOperationContext operationContext = new DefaultOperationContext(mainWindow, graphContainer, OperationContext.DisplayLocation.MENUBAR);
        final ArrayList<VertexRef> targets = new ArrayList<>(graphContainer.getSelectionManager().getSelectedVertexRefs());

        // Clear menu
        removeItems();

        // Build new Menu
        MenuBuilder menuBuilder = new MenuBuilder();
        menuBuilder.setTopLevelMenuOrder(operationManager.getTopLevelMenuOrder());
        menuBuilder.setSubMenuGroupOrder(operationManager.getSubMenuGroupOrder());
        for (OperationServiceWrapper operationServiceWrapper : operationManager.getOperationWrappers()) {
            if (operationServiceWrapper.getMenuPosition() != null) { // if menu position is null, there is no place to put it
                org.opennms.features.topology.app.internal.menu.MenuItem item = new OperationMenuItem(operationServiceWrapper);
                menuBuilder.addMenuItem(item, operationServiceWrapper.getMenuPosition().split("\\|"));
            }

        }
        menuBuilder.apply(this, targets, operationContext, () -> notifyMenuUpdateListener());
    }

