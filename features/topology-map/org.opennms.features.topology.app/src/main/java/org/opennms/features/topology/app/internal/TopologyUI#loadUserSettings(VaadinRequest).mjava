    private void loadUserSettings(VaadinRequest request) {
        m_userName = request.getRemoteUser();
        m_graphContainer.setUserName(m_userName);

        // See if the history manager has an existing fragment stored for
        // this user. Do this before laying out the UI because the history
        // may change during layout.
        String fragment = m_historyManager.getHistoryForUser(m_userName);

        // If there was existing history, then restore that history snapshot.
        if (fragment != null) {
            LoggerFactory.getLogger(this.getClass()).info("Restoring history for user {}: {}", m_userName, fragment);
            Page.getCurrent().setUriFragment(fragment);
        }
    }

