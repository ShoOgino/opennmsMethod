    private void updateLayout(Collection<Vertex> displayVertices, Collection<Edge> displayEdges) {
        m_displayVertices.clear();
        m_displayVertices.addAll(displayVertices);
        m_displayEdges.clear();
        m_displayEdges.addAll(displayEdges);
        for (Iterator<Edge> itr = m_displayEdges.iterator(); itr.hasNext();) {
            Edge edge = itr.next();
            if (new RefComparator().compare(edge.getSource().getVertex(), edge.getTarget().getVertex()) == 0) {
                LOG.debug("Discarding edge whose source and target are the same: {}", edge);
                itr.remove();
            } else if (m_displayVertices.contains(edge.getSource().getVertex())) {
                if (m_displayVertices.contains(edge.getTarget().getVertex())) {
                    // This edge is OK, it is attached to two vertices that are in the graph
                } else {
                    LOG.debug("Discarding edge that is not attached to 2 vertices in the graph: {}", edge);
                    itr.remove();
                }
            } else {
                LOG.debug("Discarding edge that is not attached to 2 vertices in the graph: {}", edge);
                itr.remove();
            }
        }
        LOG.debug("Created a graph with {} vertices and {} edges", m_displayVertices.size(), m_displayEdges.size());
    }

