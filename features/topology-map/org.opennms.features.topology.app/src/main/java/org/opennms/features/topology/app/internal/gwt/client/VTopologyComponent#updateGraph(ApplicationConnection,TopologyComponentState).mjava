    public void updateGraph(ApplicationConnection applicationConnection, TopologyComponentState componentState) {
	    
		GWTGraph graph = GWTGraph.create();
		
		m_client = applicationConnection;
        
		for(SharedVertex sharedVertex : componentState.getVertices()) {
		    
		    GWTVertex vertex = GWTVertex.create(sharedVertex.getKey(), sharedVertex.getX(), sharedVertex.getY());
            
            vertex.setInitialX(sharedVertex.getInitialX());
            vertex.setInitialY(sharedVertex.getInitialY());
            
            boolean selected = sharedVertex.getSelected();
            vertex.setSelected(selected);

            vertex.setSVGIconId(sharedVertex.getSVGIconId());

            vertex.setLabel(sharedVertex.getLabel());
            
            vertex.setStatus(sharedVertex.getStatus());

            vertex.setStatusCount(sharedVertex.getStatusCount());

			vertex.setTargets(sharedVertex.isTargets());

            vertex.setTooltipText(sharedVertex.getTooltipText());

            vertex.setStyleName(sharedVertex.getStyleName());

            graph.addVertex(vertex);
		}

		for(SharedEdge sharedEdge : componentState.getEdges()) {
			String edgeKey = sharedEdge.getKey();
            String sourceKey = sharedEdge.getSourceKey();
            String targetKey = sharedEdge.getTargetKey();
            
            GWTVertex source = graph.findVertexById(sourceKey);
            GWTVertex target = graph.findVertexById( targetKey );
            GWTEdge edge = GWTEdge.create(edgeKey, source, target);
            boolean selected = sharedEdge.getSelected();
            String cssClass = sharedEdge.getCssClass();
            edge.setSelected(selected);
            edge.setCssClass(cssClass);
            String ttText = sharedEdge.getTooltipText();
            edge.setTooltipText(ttText);
            edge.setStatus(sharedEdge.getStatus());
			edge.setAdditionalStyling(JavaScriptHelper.toJavaScriptObject(sharedEdge.getAdditionalStyling()));
            graph.addEdge(edge);
		}
		
		JsArray<GWTEdge> edges = graph.getEdges();
		sortEdges(edges);
		
		
        for( int i = 0; i < edges.length(); i++) {
            if(i != 0) {
		        GWTEdge edge1 = edges.get(i-1);
		        GWTEdge edge2 = edges.get(i);
		        
		        String edge1Source = minEndPoint(edge1);
		        String edge2Source = minEndPoint(edge2);
		        String edge1Target = maxEndPoint(edge1);
		        String edge2Target = maxEndPoint(edge2);
		        
		        if((edge1Source.equals(edge2Source) && edge1Target.equals(edge2Target))) {
		            edge2.setLinkNum(edge1.getLinkNum() + 1);
		        }else {
		            edge2.setLinkNum(1);
		        }
		    }
		}
        
        int x = componentState.getBoundX();
        int y = componentState.getBoundY();
        int width = componentState.getBoundWidth();
        int height = componentState.getBoundHeight();
        
        GWTBoundingBox oldBBox = m_graph.getBoundingBox();
        graph.setBoundingBox(GWTBoundingBox.create(x, y, width, height));
		setGraph(graph, oldBBox);

        sendPhysicalDimensions();
	}

