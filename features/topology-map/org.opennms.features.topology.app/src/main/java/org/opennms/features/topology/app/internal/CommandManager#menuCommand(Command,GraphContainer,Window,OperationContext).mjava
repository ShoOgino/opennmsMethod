	public MenuBar.Command menuCommand(final Command command,
			final GraphContainer graphContainer, final Window mainWindow,
			final OperationContext operationContext) {

		return new MenuBar.Command() {

                        @Override
			public void menuSelected(MenuItem selectedItem) {
				List<VertexRef> targets = new ArrayList<VertexRef>(graphContainer.getSelectionManager().getSelectedVertexRefs());

				DefaultOperationContext context = (DefaultOperationContext) operationContext;
				context.setChecked(selectedItem.isChecked());

				command.doCommand(targets, operationContext);
				m_commandHistoryList.add(command);
				updateMenuItemListeners();
			}
		};
	}

