    /**
     * Called whenever the OSGi framework starts our bundle
     */
    public void start( BundleContext bc )
        throws Exception
    {
        System.out.println( "STARTING org.opennms.features.topology.app" );
        
        
        bc.addBundleListener(new BundleListener() {
			
			@Override
			public void bundleChanged(BundleEvent bundleEvent) {
				setupVaadinBundle(bundleEvent.getBundle(), bundleEvent.getType());
			}
		});
        
        for(Bundle bundle : bc.getBundles()) {
        	if (bundle.getState() == Bundle.ACTIVE) {
        		setupVaadinBundle(bundle, BundleEvent.STARTED);
        	}
        }


        Dictionary<String, String> props = new Hashtable<String, String>();
        props.put("alias", "/hello");
        // add specific service properties here...

        System.out.println( "REGISTER VaadinServlet" );

        // Register our example service implementation in the OSGi service registry
        bc.registerService( Servlet.class.getName(), new VaadinServlet(), props );
        
        
    }

