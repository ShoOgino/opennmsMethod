    public MenuBar.Command menuCommand(final Command command, final SimpleGraphContainer graphContainer, final Window mainWindow, final OperationContext operationContext){
        
        return new MenuBar.Command() {
            
            public void menuSelected(MenuItem selectedItem) {
                List<Object> targets = new ArrayList<Object>();
                //Adding a check for selected vertices.
                for(Object vId : operationContext.getGraphContainer().getVertexIds()) {
                    Item vItem = operationContext.getGraphContainer().getVertexItem(vId);
                    boolean selected = (Boolean) vItem.getItemProperty("selected").getValue();
                    if(selected) {
                        targets.add(vItem.getItemProperty("key").getValue());
                    }
                }
                
                
                command.doCommand(targets, operationContext);
                m_commandHistoryList.add(command);
            }
        };
    }

