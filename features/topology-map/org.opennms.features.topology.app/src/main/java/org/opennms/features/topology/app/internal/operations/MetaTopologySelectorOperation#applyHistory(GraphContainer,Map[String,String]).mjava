    @Override
    public void applyHistory(GraphContainer container, Map<String, String> settings) {
        // If the class name and label tuple is set to true, then set the base topology provider
        if ("true".equals(settings.get(getClass().getName() + "." + getLabel()))) {
            execute(container);
        }

        // Select the according layer
        final String selectedLayer = settings.get(getClass().getName() + ".selectedLayer");
        if (container.getMetaTopologyId() != null
                && !Strings.isNullOrEmpty(selectedLayer)
                && !selectedLayer.equals(container.getTopologyServiceClient().getNamespace())) {
            // Find provider for selected layer and select
            container.getTopologyServiceClient().getGraphProviders().stream()
                    .filter(p -> p.getNamespace().equals(selectedLayer))
                    .findFirst()
                    .ifPresent(p -> container.selectTopologyProvider(p));
        }
    }

