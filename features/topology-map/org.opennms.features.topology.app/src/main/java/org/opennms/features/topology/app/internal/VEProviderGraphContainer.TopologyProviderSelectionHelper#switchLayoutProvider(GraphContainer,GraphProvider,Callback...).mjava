        public void switchLayoutProvider(GraphContainer graphContainer, GraphProvider topologyProvider, Callback... callbacks) {
            final String preferredLayout = topologyProvider.getDefaults().getPreferredLayout();

            // We automatically set status providers if there are any
            StatusProvider vertexStatusProvider = findVertexStatusProvider(topologyProvider);
            EdgeStatusProvider edgeStatusProvider = findEdgeStatusProvider(topologyProvider);
            LayoutAlgorithm layoutAlgorithm = findLayoutAlgorithm(preferredLayout);

            // Refresh the topology provider, triggering the vertices to load  if they have not yet loaded
            topologyProvider.refresh();
            graphContainer.setEdgeStatusProvider(edgeStatusProvider);
            graphContainer.setVertexStatusProvider(vertexStatusProvider);
            if (layoutAlgorithm != null) {
                graphContainer.setLayoutAlgorithm(layoutAlgorithm);
            }
            graphContainer.setBaseTopology(topologyProvider);
            if (callbacks != null) {
                for (Callback eachCallback : callbacks) {
                    eachCallback.callback(graphContainer, topologyProvider);
                }
            }
            graphContainer.redoLayout();
        }

