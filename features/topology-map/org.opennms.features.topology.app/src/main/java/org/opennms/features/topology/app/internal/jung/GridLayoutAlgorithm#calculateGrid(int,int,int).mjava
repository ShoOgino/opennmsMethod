    /**
     * Calculates a grid of width W and height H such that:
     *     W * H >= N
     *     W/H ~= width/height
     */
    protected static BoundingBox calculateGrid(int N, int width, int height) {
        double ratio = (float)width / height;
        Double H = Math.sqrt(N / ratio);
        Double W = Math.ceil(N / H);
        H = Math.ceil(H); // Only round after the division
        return new BoundingBox(0, 0, W.intValue(), H.intValue());
    }

