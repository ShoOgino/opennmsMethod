	public TopologyWidgetTestApplication(CommandManager commandManager, HistoryManager historyManager, GraphProvider topologyProvider, ProviderManager providerManager, IconRepositoryManager iconRepoManager, SelectionManager selectionManager) {
	    
	    m_commandManager = commandManager;
		m_commandManager.addMenuItemUpdateListener(this);
		m_historyManager = historyManager;
		m_iconRepositoryManager = iconRepoManager;

		// Create a per-session GraphContainer instance
		m_graphContainer = new VEProviderGraphContainer(topologyProvider, providerManager);
		m_graphContainer.setSelectionManager(selectionManager);
		m_graphContainer.addChangeListener(this);
		m_graphContainer.getMapViewManager().addListener(this);

		// Ensure that selection changes trigger a history save operation
		selectionManager.addSelectionListener(this);
	}

