    private List<SearchSuggestion> getQueryResults(final String query) {
        String namespace = m_operationContext.getGraphContainer().getBaseTopology().getVertexNamespace();

        List<SearchProvider> providers = m_serviceManager.getServices(SearchProvider.class, null, new Properties());
        List<SearchResult> results = Lists.newArrayList();

        for(SearchProvider provider : providers) {
            if(provider.getSearchProviderNamespace().equals(namespace) || provider.contributesTo(namespace)){
                if(provider.supportsPrefix(query)) {
                    // If there is an '=' divider, strip it off. Otherwise, use an empty query string
                    String queryOnly = query.indexOf('=') > 0 ? query.substring(query.indexOf('=') + 1) : "";
                    List<SearchResult> q = provider.query(getSearchQuery(queryOnly));
                    results.addAll(q);
                    if(m_suggestionMap.containsKey(provider)){
                        m_suggestionMap.get(provider).addAll(q);
                    } else{
                        m_suggestionMap.putAll(provider, q);
                    }

                } else{
                    List<SearchResult> q = provider.query(getSearchQuery(query));
                    results.addAll(q);
                    if (m_suggestionMap.containsKey(provider)) {
                        m_suggestionMap.get(provider).addAll(q);
                    } else {
                        m_suggestionMap.putAll(provider, q);
                    }
                }
            }

        }

        return mapToSuggestions(results);
    }

