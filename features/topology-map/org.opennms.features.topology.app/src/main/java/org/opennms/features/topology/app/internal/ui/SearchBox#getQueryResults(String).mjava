    private List<SearchSuggestion> getQueryResults(final String query) {
        String searchPrefix = getQueryPrefix(query);
        String namespace = m_operationContext.getGraphContainer().getBaseTopology().getVertexNamespace();

        List<SearchProvider> providers = m_serviceManager.getServices(SearchProvider.class, null, new Properties());
        List<SearchResult> results = Lists.newArrayList();

        for(SearchProvider provider : providers) {
            if(provider.getSearchProviderNamespace().equals(namespace) || provider.contributesTo(namespace)){
                if(searchPrefix != null && provider.supportsPrefix(searchPrefix)) {
                    String queryOnly = query.replace(searchPrefix, "");
                    List<SearchResult> q = provider.query(getSearchQuery(queryOnly));
                    results.addAll(q);
                    if(m_suggestionMap.containsKey(provider)){
                        m_suggestionMap.get(provider).addAll(q);
                    } else{
                        m_suggestionMap.putAll(provider, q);
                    }

                } else{
                    List<SearchResult> q = provider.query(getSearchQuery(query));
                    results.addAll(q);
                    if (m_suggestionMap.containsKey(provider)) {
                        m_suggestionMap.get(provider).addAll(q);
                    } else {
                        m_suggestionMap.putAll(provider, q);
                    }
                }
            }

        }

        return mapToSuggestions(results);
    }

