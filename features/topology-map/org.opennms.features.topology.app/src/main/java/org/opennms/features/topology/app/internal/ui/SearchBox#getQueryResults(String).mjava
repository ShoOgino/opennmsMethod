    private List<SearchSuggestion> getQueryResults(final String query) {
        m_suggestionMap.clear();

        String searchPrefix = getQueryPrefix(query);

        List<SearchProvider> providers = m_serviceManager.getServices(SearchProvider.class, null, new Properties());




        for(SearchProvider provider : providers) {
            if(searchPrefix != null && provider.supportsPrefix(searchPrefix)) {
                String queryOnly = query.replace(searchPrefix, "");
                m_suggestionMap.putAll(provider, mapToSuggestions(provider.query( getSearchQuery(queryOnly) )));
            } else{
                m_suggestionMap.putAll(provider, mapToSuggestions(provider.query( getSearchQuery(query) )));
            }

        }

        Collection<SearchSuggestion> values = m_suggestionMap.values();
        return Lists.newArrayList(values);
    }

