    private List<SearchSuggestion> getQueryResults(final String query) {
        String searchPrefix = getQueryPrefix(query);

        List<SearchProvider> providers = m_serviceManager.getServices(SearchProvider.class, null, new Properties());

        for(SearchProvider provider : providers) {
            if(searchPrefix != null && provider.supportsPrefix(searchPrefix)) {
                String queryOnly = query.replace(searchPrefix, "");
                m_suggestionMap.putAll(provider, provider.query( getSearchQuery(queryOnly) ));
            } else{
                m_suggestionMap.putAll(provider, provider.query(getSearchQuery(query)));
            }

        }

        return mapToSuggestions(Lists.newArrayList(m_suggestionMap.values()));
    }

