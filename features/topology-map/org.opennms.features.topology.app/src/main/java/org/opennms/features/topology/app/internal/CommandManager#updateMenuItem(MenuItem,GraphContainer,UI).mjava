	public void updateMenuItem(MenuItem menuItem, GraphContainer graphContainer, UI mainWindow) {
		DefaultOperationContext operationContext = new DefaultOperationContext(mainWindow, graphContainer, DisplayLocation.MENUBAR);
		Operation operation = getOperationByMenuItemCommand(menuItem.getCommand());
		
		//Check for null because separators have no Operation
		
		try {
			if(operation != null) {
				List<VertexRef> selectedVertices = new ArrayList<VertexRef>(graphContainer.getSelectionManager().getSelectedVertexRefs());
				boolean visibility = operation.display(selectedVertices, operationContext);
				menuItem.setVisible(visibility);
				boolean enabled = operation.enabled(selectedVertices, operationContext);
				menuItem.setEnabled(enabled);

				if (operation instanceof CheckedOperation) {
					if (!menuItem.isCheckable()) {
						menuItem.setCheckable(true);
					}

					menuItem.setChecked(((CheckedOperation) operation).isChecked(selectedVertices, operationContext));
				}
			}
		} catch (final RuntimeException e) {
		    LoggerFactory.getLogger(this.getClass()).warn("updateMenuItem: operation failed", e);
		}
	}

