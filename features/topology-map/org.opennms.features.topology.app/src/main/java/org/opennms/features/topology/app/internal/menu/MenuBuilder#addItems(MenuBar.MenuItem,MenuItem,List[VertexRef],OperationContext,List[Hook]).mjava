	private void addItems(MenuBar.MenuItem currentMenuItem, MenuItem currentParent, List<VertexRef> targets, OperationContext operationContext, List<Hook> hooks) {
		if (currentMenuItem != null) {
			// Now add children
			List<MenuItem> childItems = new ArrayList<>(currentParent.getChildren());
			Collections.sort(childItems);
			String prevGroup = null;
			MenuBar.MenuItem prevMenuItem = null;
			for (MenuItem eachChild : childItems) {
				// add Separators between groups if the previous group changed and we added an element
				// (otherwise we may end up having multiple separators)
				String currentGroup = getGroupForLabel(eachChild.getLabel(), getSubmenuOrderList(currentParent));
				if (prevGroup != null && prevMenuItem != null && !prevGroup.equals(currentGroup)) {
					currentMenuItem.addSeparator();
				}
				prevGroup = currentGroup;
				prevMenuItem = addItem(() -> currentMenuItem.addItem(removeLabelProperties(eachChild.getLabel()), null), eachChild, targets, operationContext, hooks);

				// add children
				addItems(prevMenuItem, eachChild, targets, operationContext, hooks);
			}
		}
	}

