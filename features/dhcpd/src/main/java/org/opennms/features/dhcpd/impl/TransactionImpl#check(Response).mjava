    public boolean check(Response response) {
        if (isExtendedMode()) {
            this.success = (response.getDhcpPacket().getXid() == this.xid) && (EXTENDED_MODE_ACCEPTED_RESPONSES.contains(response.getDhcpPacket().getDHCPMessageType()));
        } else {
            this.success = (response.getDhcpPacket().getXid() == this.xid) && (response.getDhcpPacket().getDHCPMessageType() == DHCPConstants.DHCPOFFER);
        }

        if (this.success) {
            this.response = response;
            this.endTime = System.currentTimeMillis();
        }

        return this.success;
    }

