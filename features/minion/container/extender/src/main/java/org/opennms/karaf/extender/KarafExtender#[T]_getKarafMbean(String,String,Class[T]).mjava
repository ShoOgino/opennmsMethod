    private static <T> T getKarafMbean(String type, String instance, Class<T> clazz) throws MalformedObjectNameException {
        final MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();
        final ObjectName mbeanName = new ObjectName(String.format("org.apache.karaf:type=%s,name=%s", type, instance));
        return JMX.newMBeanProxy(mbs, mbeanName, clazz, true);
    }

