    @Test(expected=IllegalStateException.class)
    public void testEventMissingNodeId() throws Exception {
        final Event e = EventUtils.createNodeGainedServiceEvent(FOREIGN_SOURCE, 1, InetAddressUtils.addr("192.168.0.1"), MINION_HEARTBEAT, null, NodeLabelSource.UNKNOWN, null, null);
        e.setNodeid(null);
        m_tracker.onNodeGainedService(ImmutableMapper.fromMutableEvent(e));
    }

