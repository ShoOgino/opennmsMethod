    @Before
    public void setUp() throws Exception {
        MockLogAppender.setupLogging(true, "TRACE");

        InputStream stream = null;
        try {
            final String config = "<?xml version=\"1.0\"?> \n" + 
            		"<syslogd-configuration> \n" + 
            		"    <configuration \n" + 
            		"            syslog-port=\"10514\" \n" + 
            		"            listen-address=\"127.0.0.1\" \n" +
            		"            new-suspect-on-message=\"false\" \n" + 
            		"            forwarding-regexp=\"^((.+?) (.*))\\n?$\" \n" + 
            		"            matching-group-host=\"2\" \n" + 
            		"            matching-group-message=\"3\" \n" + 
            		"            discard-uei=\"DISCARD-MATCHING-MESSAGES\" \n" + 
            		"            /> \n" + 
            		"\n" + 
            		"    <!-- Use the following to convert UEI ad-hoc --> \n" + 
            		"    <ueiList> \n" + 
            		"        <ueiMatch> \n" + 
            		"            <match type=\"substr\" expression=\"CRISCO\"/> \n" + 
            		"            <uei>CISCO</uei> \n" + 
            		"        </ueiMatch> \n" + 
            		"        <ueiMatch> \n" + 
            		"            <match type=\"regex\" expression=\".*su:auth.*authentication failure.*\"/> \n" + 
            		"            <uei>uei.opennms.org/syslog/pam/su/suFailure</uei> \n" + 
            		"        </ueiMatch> \n" + 
            		"        <!-- Use the following to discard a syslog message without ever creating an event for it. \n" + 
            		"             If you change the value of \"discard-uei\" above, you must change the UEI used here to match. --> \n" + 
            		"        <ueiMatch> \n" + 
            		"            <match type=\"substr\" expression=\"JUNK\"/> \n" + 
            		"            <uei>DISCARD-MATCHING-MESSAGES</uei> \n" + 
            		"        </ueiMatch> \n" + 
            		"    </ueiList> \n" + 
            		"\n" + 
            		"    <!-- Use the following to remove a syslog message from the event-trail --> \n" + 
            		"\n" + 
            		"    <hideMessage> \n" + 
            		"        <hideMatch> \n" + 
            		"            <match type=\"substr\" expression=\"SECRET\"/> \n" + 
            		"        </hideMatch> \n" + 
            		"        <hideMatch> \n" + 
            		"            <match type=\"regex\" expression=\".*(double|triple)secret.*\"/> \n" + 
            		"        </hideMatch> \n" + 
            		"    </hideMessage> \n" + 
            		"\n" + 
            		"</syslogd-configuration>\n";
            
            stream = new ByteArrayInputStream(config.getBytes());
            m_config = new SyslogdConfigFactory(stream);

            m_syslogd = new Syslogd();
            m_syslogd.setSyslogReceiver(new SyslogReceiverJavaNetImpl(m_config));
            m_syslogd.init();

        } finally {
            if (stream != null) {
                IOUtils.closeQuietly(stream);
            }
        }
    }

