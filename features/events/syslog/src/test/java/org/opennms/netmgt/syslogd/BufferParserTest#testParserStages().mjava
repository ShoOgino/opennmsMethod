	@Test
	public void testParserStages() throws InterruptedException, ExecutionException {
		ParserStage a = new MatchChar('a');
		ParserStage b = new MatchChar('b');
		ParserStage c = new MatchChar('c');
		ParserStage d = new MatchChar('d');

		c.setTerminal(true);
		d.setTerminal(true);

		RadixTreeParser treeParser = new RadixTreeParser();
		treeParser.teach(new ParserStage[] { a });
		treeParser.teach(new ParserStage[] { b, c });
		treeParser.teach(new ParserStage[] { b, a, d });
		treeParser.teach(new ParserStage[] { b, d });
		treeParser.teach(new ParserStage[] { c });

		System.out.println(treeParser.toString());

		CompletableFuture<SyslogMessage> root = treeParser.parse(ByteBuffer.wrap("bad".getBytes()));
		assertNotNull("One pattern should match", root.join());
		root = treeParser.parse(ByteBuffer.wrap("bbd".getBytes()));
		assertNull("No pattern should match", root.join());
	}

