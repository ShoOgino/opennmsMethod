	@Test
	public void testTrapRouting() {
		try
		{
			for (RouteDefinition route : new ArrayList<RouteDefinition>(
					context.getRouteDefinitions())) {
				route.adviceWith(context, new AdviceWithRouteBuilder() {
					@Override
					public void configure() throws Exception {
						mockEndpoints();
					}
				});
			}
			context.start();

			MockEndpoint endpoint = getMockEndpoint( "mock:result", false );
			endpoint.setExpectedMessageCount( 1 );

			TrapdConfigBean config = new TrapdConfigBean();
			config.setSnmpTrapPort(10514);
			config.setSnmpTrapAddress("127.0.0.1");
			config.setNewSuspectOnTrap(false);

			template.requestBody( endpoint, config);
			
			assertNotNull(context.hasEndpoint("mock:result"));

			assertMockEndpointsSatisfied();
		}
		catch(Exception e)
		{
			e.printStackTrace();
		}
	}

