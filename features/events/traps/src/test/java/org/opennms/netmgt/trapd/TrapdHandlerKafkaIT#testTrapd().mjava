	@Test
	public void testTrapd() throws Exception {
		
        Map<String, Object> parms = new HashMap<String, Object>();
        parms.put("port",61616);	
        SimpleRegistry registry = new SimpleRegistry();
        CamelContext trapd = new DefaultCamelContext(registry);
        trapd.addComponent("kafka", new KafkaComponent());
        trapd.addRoutes(new RouteBuilder() {
            @Override
            public void configure() throws Exception {

                from("seda:handleMessage").convertBodyTo(TrapNotification.class).process(new Processor() {
                    @Override
                    public void process(Exchange exchange) throws Exception {
                        exchange.getIn().setBody("Test Message from Camel Kafka Component Final",String.class);
                        exchange.getIn().setHeader(KafkaConstants.PARTITION_KEY,simple("${body.hostname}"));
                    }
                }).log("address:${body.sourceAddress}").log("port: ${body.port}").transform(simple("${body.byteBuffer}")).convertBodyTo(String.class).log(body().toString()).to("kafka:localhost:9092?topic=trapd;serializerClass=kafka.serializer.StringEncoder");
            
            }
        });
        
        trapd.start();
	}

