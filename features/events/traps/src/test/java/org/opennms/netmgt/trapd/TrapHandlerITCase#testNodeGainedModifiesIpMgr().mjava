    @Test
    @DirtiesContext
    public void testNodeGainedModifiesIpMgr() throws Exception {
        anticipateEvent("uei.opennms.org/default/trap", m_ip, m_nodeId);

        Event event = anticipateEvent(EventConstants.NODE_GAINED_INTERFACE_EVENT_UEI, m_ip, m_nodeId);
        m_eventMgr.sendNow(event);

        try {
            Thread.sleep(100);
        } catch (InterruptedException e) {
            // do nothing
        }

        sendTrap("v1", null, 6, 1);

        finishUp();
    }

