    /**
     * Verifies that no transaction is opened when none of the events
     * in the event log need to be persisted.
     */
    @Test
    public void testNoTransactionOpened() throws EventProcessorException {
        // A null log
        eventWriter.process(null);
        verify(transactionManager, never()).execute(any());

        // An empty log
        eventWriter.process(new Log());
        verify(transactionManager, never()).execute(any());

        // A log with a single event that marked as 'donopersist'
        EventBuilder bldr = new EventBuilder("testUei", "testSource");
        bldr.setLogDest(HibernateEventWriter.LOG_MSG_DEST_DO_NOT_PERSIST);
        eventWriter.process(bldr.getLog());
        verify(transactionManager, never()).execute(any());
    }

