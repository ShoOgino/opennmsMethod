    @Test
    public void createIsSkippedWhenAlarmIsCleared() {
        System.setProperty(DefaultTicketerServiceLayer.SKIP_CREATE_WHEN_CLEARED_SYS_PROP, "true");

        m_defaultTicketerServiceLayer = new DefaultTicketerServiceLayer();
        m_defaultTicketerServiceLayer.setAlarmDao(m_alarmDao);
        m_defaultTicketerServiceLayer.setTicketerPlugin(m_ticketerPlugin);

        m_alarm.setSeverity(OnmsSeverity.CLEARED);
        EasyMock.expect(m_alarmDao.get(m_alarm.getId())).andReturn(m_alarm);

        m_easyMockUtils.replayAll();

        m_defaultTicketerServiceLayer.createTicketForAlarm(m_alarm.getId(), Collections.emptyMap());

        // Verify that no additional calls where made (such as trying to open the ticket)
        m_easyMockUtils.verifyAll();
    }

