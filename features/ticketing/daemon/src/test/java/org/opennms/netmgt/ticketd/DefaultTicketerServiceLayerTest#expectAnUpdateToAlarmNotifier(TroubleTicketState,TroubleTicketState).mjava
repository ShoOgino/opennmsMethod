    private void expectAnUpdateToAlarmNotifier(TroubleTicketState prevState, TroubleTicketState newState) {

        m_alarmEntityNotifier.didChangeTicketStateForAlarm(m_alarm, prevState);
        EasyMock.expectLastCall().andAnswer(new IAnswer<Object>() {

            @Override
            public Object answer() throws Throwable {
                OnmsAlarm alarm = (OnmsAlarm) EasyMock.getCurrentArguments()[0];
                TroubleTicketState ticketState = (TroubleTicketState) EasyMock.getCurrentArguments()[1];
                TroubleTicketState expectedState = alarm.getTTicketState();
                assertEquals(prevState, ticketState);
                assertNotNull(expectedState);
                assertEquals(newState, expectedState);
                return null;
            }

        });

    }

