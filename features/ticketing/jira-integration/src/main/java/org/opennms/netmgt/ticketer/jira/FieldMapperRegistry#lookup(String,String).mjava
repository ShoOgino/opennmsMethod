    /**
     * Helper method to lookup a Function to convert a value by its type and variant to the Jira ReST API representation.
     *
     * @param type The type, e.g. "user", "group", "version", "array", etc.
     * @param variant The variant. Is only set if "type" is "array". In that case, the "variant" defines each element in the array (e.g. "user", "version", etc)
     * @return A function to transform the input to its Jira ReST API representation.
     */
    public Function<String, ?> lookup(String type, String variant) {
        // If we have an array and a type set, we split the values to build the array
        // and apply the "variant" function to each element in the array.
        // E.g. "label1,label2" becomes ["label1", "label2"] if variant is "string"
        // "label1,label" becomes [{"name":"label1"}, {"name":"label2"}]" if variant is for example "version"
        if ("array".equals(type) && !Strings.isNullOrEmpty(variant)) {
            return (Function<String, Object>) input -> {
                Function<String, ?> function = lookup(variant);
                return Arrays.stream(input.split(",")).map(v -> function.apply(v)).collect(Collectors.toList());
            };
        }
        return lookup(type); // no array (Note: variant should be empty or null in this case)
    }

