    @Test
    public void testCreateTicketForAlarm() throws PluginException {
        EasyMock.expect(m_alarmDao.get(m_alarm.getId())).andReturn(m_alarm);

        expectNewTicket();

        expectNewAlarmState(TroubleTicketState.OPEN);

        expectAnUpdateToAlarmNotifier(null, TroubleTicketState.OPEN);

        m_easyMockUtils.replayAll();

        m_droolsTicketerServiceLayer.createTicketForAlarm(m_alarm.getId(), new HashMap<>());

        m_easyMockUtils.verifyAll();
    }

