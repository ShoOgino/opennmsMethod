    private String readLine(InputStream inputStream) throws IOException {
        int lineChar;
        ByteArrayOutputStream baos = new ByteArrayOutputStream();

        // Prometheus end of line character is a newline
        for (lineChar = inputStream.read(); (lineChar != '\n' && lineChar != -1); lineChar = inputStream.read()) {
            baos.write(lineChar);
        }

        if (lineChar == -1 && baos.size() == 0) {
            // EOF
            return null;
        }

        return baos.toString("UTF-8");
    }

