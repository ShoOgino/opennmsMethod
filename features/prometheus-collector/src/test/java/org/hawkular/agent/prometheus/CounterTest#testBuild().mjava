    @Test
    public void testBuild() {
        Counter counter;

        try {
            counter = new Counter.Builder().build();
            Assert.fail("Should have thrown exception because name is not set");
        } catch (IllegalArgumentException expected) {
        }

        counter = new Counter.Builder().setName("foo").setValue(0.1).build();
        Assert.assertEquals("foo", counter.getName());
        Assert.assertEquals(0.1, counter.getValue(), 0.001);
        Assert.assertTrue(counter.getLabels().isEmpty());

        counter = new Counter.Builder().setName("foo").setValue(0.1).addLabel("one", "111").build();
        Assert.assertEquals("foo", counter.getName());
        Assert.assertEquals(0.1, counter.getValue(), 0.001);
        Assert.assertEquals(1, counter.getLabels().size());
        Assert.assertEquals("111", counter.getLabels().get("one"));

        counter = new Counter.Builder().setName("foo").setValue(0.1).addLabel("one", "1").addLabel("two", "2").build();
        Assert.assertEquals("foo", counter.getName());
        Assert.assertEquals(0.1, counter.getValue(), 0.001);
        Assert.assertEquals(2, counter.getLabels().size());
        Assert.assertEquals("1", counter.getLabels().get("one"));
        Assert.assertEquals("2", counter.getLabels().get("two"));

    }

