    @Test
    public void testBuild() {
        Gauge gauge;

        try {
            gauge = new Gauge.Builder().build();
            Assert.fail("Should have thrown exception because name is not set");
        } catch (IllegalArgumentException expected) {
        }

        gauge = new Gauge.Builder().setName("foo").setValue(0.1).build();
        Assert.assertEquals("foo", gauge.getName());
        Assert.assertEquals(0.1, gauge.getValue(), 0.001);
        Assert.assertTrue(gauge.getLabels().isEmpty());

        gauge = new Gauge.Builder().setName("foo").setValue(0.1).addLabel("one", "111").build();
        Assert.assertEquals("foo", gauge.getName());
        Assert.assertEquals(0.1, gauge.getValue(), 0.001);
        Assert.assertEquals(1, gauge.getLabels().size());
        Assert.assertEquals("111", gauge.getLabels().get("one"));

        gauge = new Gauge.Builder().setName("foo").setValue(0.1).addLabel("one", "1").addLabel("two", "2").build();
        Assert.assertEquals("foo", gauge.getName());
        Assert.assertEquals(0.1, gauge.getValue(), 0.001);
        Assert.assertEquals(2, gauge.getLabels().size());
        Assert.assertEquals("1", gauge.getLabels().get("one"));
        Assert.assertEquals("2", gauge.getLabels().get("two"));

    }

