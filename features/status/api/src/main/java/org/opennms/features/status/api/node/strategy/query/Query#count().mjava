    public int count() {
        sql = new StringBuilder();
        sql.append("SELECT count(*) ");
        sql.append("FROM ").append(getViewName()).append(" ");
        sql.append("JOIN node ON ").append(getViewName()).append(".nodeid = node.nodeid ") ;

        applyRestrictions();

        final int count = executeQuerySingleResult(column -> ((BigInteger) column).intValue());
        return count;
    }

