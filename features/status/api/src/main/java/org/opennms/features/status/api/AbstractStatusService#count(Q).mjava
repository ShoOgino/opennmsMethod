    public int count(Q query) {
        final QueryParameters queryParameters = query.getParameters();
        final SeverityFilter filter = query.getSeverityFilter();
        final CriteriaBuilder builder = getCriteriaBuilder(queryParameters);

        // Remove limit, offset and ordering to fetch count
        builder.limit(null);
        builder.offset(null);
        builder.clearOrder();

        // If a severity is given, we must count manually!
        if (filter != null && filter.getSeverities() != null && !filter.getSeverities().isEmpty()) {
            List<StatusEntity<T>> collect = findMatching(query, builder);
            collect = apply(collect, filter);
            return collect.size();
        } else {
            return countMatching(builder.toCriteria());
        }
    }

