    private <T> void applyFilters(T input) {
        Consumer<T> filter = (Consumer<T>) filterMap.get(input.getClass());
        if (filter != null) {
            filter.accept(input);
        }
    }

