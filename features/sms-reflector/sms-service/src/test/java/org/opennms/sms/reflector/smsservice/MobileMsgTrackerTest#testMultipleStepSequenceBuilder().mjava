    @Test
    public void testMultipleStepSequenceBuilder() throws Throwable {
    	MobileMsgSequenceBuilder builder = new MobileMsgSequenceBuilder();
    	
        builder.sendSms("SMS Ping", "G", PHONE_NUMBER, "ping").expects(and(isSms(), textMatches("^pong$")));
        builder.sendUssd("USSD request", "G", "#225#").expects(and(isUssd(), textMatches(TMOBILE_USSD_MATCH), ussdStatusIs(USSDSessionStatus.NO_FURTHER_ACTION_REQUIRED)));
        MobileMsgSequence sequence = builder.getSequence();
        assertNotNull(sequence);
        
        sequence.start(m_tracker, m_coordinator);

        Thread.sleep(100);
        InboundMessage msg = new InboundMessage(new Date(), PHONE_NUMBER, "pong", 0, "0");
		m_messenger.sendTestResponse(msg);
		
        Thread.sleep(100);
        sendTmobileUssdResponse("G");

        Map<String,Number> timing = sequence.getLatency();

        assertNotNull(timing);
        assertTrue(timing.size() == 2);
        System.err.println(timing);
        assertTrue(timing.get("SMS Ping").doubleValue() > 50);
        assertTrue(timing.get("USSD request").doubleValue() > 50);
    }

