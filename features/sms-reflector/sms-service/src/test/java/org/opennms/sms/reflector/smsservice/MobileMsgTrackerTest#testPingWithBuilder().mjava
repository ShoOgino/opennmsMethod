    @Test
    public void testPingWithBuilder() throws Throwable {
        MobileMsgSequenceBuilder builder = new MobileMsgSequenceBuilder();

        builder.sendSms("SMS Ping", "G", PHONE_NUMBER, "ping").expects(and(isSms(), textMatches("^pong$")));
        MobileMsgSequence sequence = builder.getSequence();
        System.err.println("sequence = " + sequence);
        assertNotNull(sequence);

        sequence.start(m_tracker, m_coordinator);

        Thread.sleep(500);
        InboundMessage msg = new InboundMessage(new Date(), PHONE_NUMBER, "pong", 0, "0");
		m_messenger.sendTestResponse(msg);
        
        Map<String,Number> timing = sequence.getLatency();

        assertNotNull(timing);
        assertTrue(timing.size() > 0);
        assertTrue(timing.get("SMS Ping").doubleValue() > 400);
    }

