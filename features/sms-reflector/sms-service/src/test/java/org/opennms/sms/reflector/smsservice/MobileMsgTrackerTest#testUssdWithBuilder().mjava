    @Test
    public void testUssdWithBuilder() throws Throwable {
    	MobileMsgSequenceBuilder builder = new MobileMsgSequenceBuilder();

        builder.sendUssd("USSD request", "G", "#225#").expects(and(isUssd(), textMatches(TMOBILE_USSD_MATCH), ussdStatusIs(USSDSessionStatus.NO_FURTHER_ACTION_REQUIRED)));
        MobileMsgSequence sequence = builder.getSequence();
        System.err.println("sequence = " + sequence);
        assertNotNull(sequence);

        sequence.start(m_tracker, m_coordinator);

        Thread.sleep(500);
        sendTmobileUssdResponse("G");
        
        Map<String,Number> timing = sequence.getLatency();

        assertNotNull(timing);
        assertTrue(timing.size() > 0);
        assertTrue(timing.get("USSD request").doubleValue() > 400);
    }

