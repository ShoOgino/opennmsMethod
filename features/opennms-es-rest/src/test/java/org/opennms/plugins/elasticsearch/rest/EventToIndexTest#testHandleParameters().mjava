    @Test
    public void testHandleParameters() {
        @SuppressWarnings("resource")
        final EventToIndex etoi = new EventToIndex(mock(JestClient.class), 1);
        etoi.setGroupOidParameters(true);

        final Event e = new EventBuilder("opennms/fake-uei", "source").addParam(".3.1.2", "oid-param").addParam("nodeLabel", "fake-node").getEvent();
        e.setParmCollection(Collections.unmodifiableList(e.getParmCollection()));
        final JSONObject json = new JSONObject();
        etoi.handleParameters(e, json);
        assertEquals(2, e.getParmCollection().size());
        assertNotNull(json.get("p_oids"));
        assertEquals(2, json.keySet().size());
    }

