    /**
     * Process the error message.
     *
     * @param stream the stream
     * @param severity the severity
     * @param source the location source
     * @param message the message
     */
    // TODO This implementation might be expensive.
    private void processMessage(PrintStream stream, String severity, String source, String message) {
        Source src = getSourceData(source);
        stream.println(severity + ": " + message + ", Source: " + src.file.getName() + ", Row: " + src.row + ", Col: " + src.column);
        try {
            if (!src.file.exists()) {
                LOG.warn("File {} doesn't exist", src.file);
                return;
            }
            FileInputStream fs= new FileInputStream(src.file);
            BufferedReader br = new BufferedReader(new InputStreamReader(fs));
            for (int i = 1; i < src.row; i++)
                br.readLine();
            stream.println(br.readLine());
            br.close();
            stream.println(String.format("%" + src.column + "s", "^"));
        } catch (Exception e) {
            LOG.warn("Can't retrieve line {} from file {}", src.row, src.file);
        }
    }

