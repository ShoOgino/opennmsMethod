	@Test
	public void testDeleteMultiParentOrphans() throws Exception {
		setupLogging("DEBUG");

		createMultiParent();

		/*
		 * we should now have a tree of:
		 * 
		 * Top1
		 *   Child1-1
		 *     Child2-1+
		 *   Child1-2
		 *     Child2-1+
		 * 
		 * + should be the same object
		 */

		m_eventAnticipator.verifyAnticipated();
		m_eventAnticipator.reset();
		setupLogging("DEBUG");

		anticipateEvent(EventConstants.COMPONENT_UPDATED_UEI, new String[] { "top",    "Top1",     "topFs1",    "topFd1" });
		anticipateEvent(EventConstants.COMPONENT_UPDATED_UEI, new String[] { "child1", "Child1-2", "child1Fs1", "child1Fd2" });
		anticipateEvent(EventConstants.COMPONENT_DELETED_UEI, new String[] { "child1", "Child1-1", "child1Fs1", "child1Fd1" });
		sendRequest(DELETE, "/NCS/child1/child1Fs1:child1Fd1", parseParamData("deleteOrphans=true"), 200);

		String xml = sendRequest(GET, "/NCS/top/topFs1:topFd1", 200);
		assertFalse(xml.contains("child1Fd1"));
		assertTrue(xml.contains("child2Fd1"));
	}

