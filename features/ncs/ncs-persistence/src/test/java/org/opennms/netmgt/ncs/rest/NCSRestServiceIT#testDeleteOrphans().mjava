	@Test
	public void testDeleteOrphans() throws Exception {
		sendPost("/NCS", m_serviceXML, 200, null);

		m_eventAnticipator.reset();
		anticipateEvent(EventConstants.COMPONENT_UPDATED_UEI, new String[] { "ServiceElementComponent", "PE2,vcid(50)", "NA-SvcElementComp", "9876,vcid(50)" });
		anticipateEvent(EventConstants.COMPONENT_DELETED_UEI, new String[] { "ServiceElementComponent", "lspA-PE2-PE1", "NA-SvcElemComp",    "9876,LSP-1234" });
		anticipateEvent(EventConstants.COMPONENT_DELETED_UEI, new String[] { "ServiceElementComponent", "lspB-PE2-PE1", "NA-SvcElemComp",    "9876,LSP-4321" });

		setupLogging("DEBUG");

		final MockHttpServletRequest request = createRequest(m_servletContext, POST, "/NCS");
		request.setContentType(MediaType.APPLICATION_XML);
		request.setContent(m_serviceXMLFragment.getBytes());
		request.setQueryString("deleteOrphans=true");
		sendRequest(request, 200);
	}

