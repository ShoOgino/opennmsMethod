    @POST
    @Consumes(MediaType.APPLICATION_XML)
    public Response addComponents(@QueryParam("deleteOrphans") final boolean deleteOrphans, final NCSComponent component) {
    	afterPropertiesSet();
    	writeLock();
    	try {
			LogUtils.debugf(this, "addComponents: Adding component %s (deleteOrphans=%s)", component, Boolean.valueOf(deleteOrphans));

	    	if (m_componentService == null) {
	    		throw new IllegalStateException("component service is null");
	    	}

	    	try {
	        	m_componentService.addOrUpdateComponents(component, deleteOrphans);
	    	} catch (final DataAccessException e) {
	    		throw new WebApplicationException(e, Status.BAD_REQUEST);
	    	}
	        return Response.ok(component).build();
    	} finally {
    		writeUnlock();
    	}
    }

