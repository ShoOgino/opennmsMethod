    /**
     * <p>getNodes</p>
     *
     * @return a {@link org.opennms.netmgt.model.OnmsNodeList} object.
     */
    @POST
    @Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    @Path("{type}/{foreignSource}:{foreignId}")
    public NCSComponent addComponent(@QueryParam("deleteOrphans") final boolean deleteOrphans, @PathParam("type") String type, @PathParam("foreignSource") String foreignSource, @PathParam("foreignId") String foreignId, NCSComponent subComponent) {
    	afterPropertiesSet();
    	writeLock();
    	try {
	    	LogUtils.debugf(this, "addComponent: type = %s, foreignSource = %s, foreignId = %s (deleteOrphans=%s)", type, foreignSource, foreignId, Boolean.valueOf(deleteOrphans));
	
	    	if (m_componentService == null) {
	    		throw new IllegalStateException("component service is null");
	    	}
	    	
	    	if (subComponent == null) {
	    		throw new WebApplicationException(Status.BAD_REQUEST);
	    	}
	
	    	try {
	    		return m_componentService.addSubcomponent(type, foreignSource, foreignId, subComponent, deleteOrphans);
	    	} catch (final DataAccessException e) {
	    		throw new WebApplicationException(e, Status.BAD_REQUEST);
	    	}
    	} finally {
    		writeUnlock();
    	}
    }

