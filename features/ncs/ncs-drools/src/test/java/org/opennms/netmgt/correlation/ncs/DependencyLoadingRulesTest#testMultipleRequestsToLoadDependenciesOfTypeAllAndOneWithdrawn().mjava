	@Test
	@DirtiesContext
	public void testMultipleRequestsToLoadDependenciesOfTypeAllAndOneWithdrawn() {

		resetFacts();
		// verify empty memory
		verifyFacts();

        resetFacts();
        
        // component to request dependencies for
        Component b = createComponent("ServiceElementComponent", "NA-SvcElemComp", "9876,jnxVpnPw-vcid(50)");
        DependenciesNeeded dependenciesNeeded = new DependenciesNeeded(b, "requestor1");

        // this component depends on b
        Component a = createComponent("ServiceElement", "NA-ServiceElement", "9876");
        
        anticipateFacts(dependenciesNeeded, b, new DependsOn(a, b));

        // pretend to be a using rule that inserts the DependenciesNeeded fact
		FactHandle depsNeededHandle = insertFactAndFireRules(dependenciesNeeded);
        
		verifyFacts();
        
		resetFacts();
		
        anticipateFacts(dependenciesNeeded, b, new DependsOn(a, b));
        
		DependenciesNeeded dependenciesNeeded2 = new DependenciesNeeded(b, "requestor2");
		
		// don't expect any further dependencies to be added
		anticipateFacts(dependenciesNeeded2);
		
		insertFactAndFireRules(dependenciesNeeded2);

		verifyFacts();
		
		resetFacts();
		
        anticipateFacts(dependenciesNeeded2, b, new DependsOn(a, b));

        retractFactAndFireRules(depsNeededHandle);
		
		verifyFacts();
	}

