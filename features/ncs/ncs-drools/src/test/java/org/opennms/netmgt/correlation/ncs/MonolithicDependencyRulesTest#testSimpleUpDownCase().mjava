	@Test
    @DirtiesContext
    public void testSimpleUpDownCase() throws Exception {
		
        // Get engine
        DroolsCorrelationEngine engine = findEngineByName("monolithicDependencyRules");
		
        
        // Antecipate down event
        getAnticipator().reset();
        anticipate(  createComponentImpactedEvent( "ServiceElementComponent", "jnxVpnPw-vcid(50)", "NA-SvcElemComp", "9876:jnxVpnPw-vcid(50)", 17 ) );
        anticipate(  createComponentImpactedEvent( "ServiceElement", "PE2:SE1", "NA-ServiceElement", "9876", 17 ) );
        anticipate(  createComponentImpactedEvent( "Service", "CokeP2P", "NA-Service", "123", 17 ) );
		
		// Generate down event
		Event event = createVpnPwDownEvent( m_pe2NodeId, "10.1.1.1", "5", "ge-3/1/4.50" );
		event.setDbid(17);
		System.err.println("SENDING VpnPwDown EVENT!!");
		engine.correlate( event );
		
		// Check down event
		getAnticipator().verifyAnticipated();
		
		// Generate additional down event - nothing should happen
//		getAnticipator().reset();
//        event = createVpnPwDownEvent( m_pe2NodeId, "10.1.1.1", "5", "ge-3/1/4.50" );
//        event.setDbid(18);
//        System.err.println("SENDING VpnPwDown EVENT!!");
//        engine.correlate( event );
//        getAnticipator().verifyAnticipated();
		
		// Anticipate up event
        getAnticipator().reset();
        anticipate(  createComponentResolvedEvent( "ServiceElementComponent", "jnxVpnPw-vcid(50)", "NA-SvcElemComp", "9876:jnxVpnPw-vcid(50)", 17 ) );
        anticipate(  createComponentResolvedEvent( "ServiceElement", "PE2:SE1", "NA-ServiceElement", "9876", 17 ) );
        anticipate(  createComponentResolvedEvent( "Service", "CokeP2P", "NA-Service", "123", 17 ) );
        
        // Generate up event
        event = createVpnPwUpEvent( m_pe2NodeId, "10.1.1.1", "5", "ge-3/1/4.50" );
        event.setDbid(17);
        System.err.println("SENDING VpnPwUp EVENT!!");
        engine.correlate( event );
        
        // Check up event
        getAnticipator().verifyAnticipated();	
	
    }

