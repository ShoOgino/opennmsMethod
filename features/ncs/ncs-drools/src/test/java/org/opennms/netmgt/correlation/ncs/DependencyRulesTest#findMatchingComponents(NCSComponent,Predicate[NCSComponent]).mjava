    private Set<NCSComponent> findMatchingComponents(NCSComponent c, final Predicate<NCSComponent> pred) {
        
        VisitorWithReturn<Set<NCSComponent>> visitor = new VisitorWithReturn<Set<NCSComponent>>() {

            @Override
            public void visitComponent(NCSComponent component) {
                if (pred.accept(component)) {
                    getRetVal().add(component);
                }
            }
            
        };
        
        return visitWithRetVal(c, visitor, new LinkedHashSet<NCSComponent>());

    }

