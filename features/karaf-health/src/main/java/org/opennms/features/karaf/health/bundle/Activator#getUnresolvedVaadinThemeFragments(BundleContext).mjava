    private static Set<Bundle> getUnresolvedVaadinThemeFragments(BundleContext context) {
        return Arrays.stream(context.getBundles())
                .filter(bundle -> {
                    String fragmentHost = bundle.getHeaders().get("Fragment-Host");
                    return fragmentHost != null && fragmentHost.contains("com.vaadin.themes") && bundle.getState() == Bundle.INSTALLED;
                })
                .collect(Collectors.toSet());
    }

