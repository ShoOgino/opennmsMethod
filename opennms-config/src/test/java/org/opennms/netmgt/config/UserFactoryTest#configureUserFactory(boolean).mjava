	private void configureUserFactory(final boolean allowUnsalted) throws Exception {
		final DaoTestConfigBean daoTestConfig = new DaoTestConfigBean();
		daoTestConfig.afterPropertiesSet();

		final Path opennmsHome = Paths.get(System.getProperty("opennms.home"));
		final Path tempHome = Files.createTempDir().toPath();

		System.err.println("opennms.home=" + tempHome);
		FileSystemUtils.copyRecursively(opennmsHome.resolve("etc").toFile(), tempHome.resolve("etc").toFile());
		System.setProperty("opennms.home", tempHome.toAbsolutePath().toString());
		System.setProperty(UserFactory.ALLOW_UNSALTED_PROPERTY, String.valueOf(allowUnsalted));
		UserFactory.setInstance(null);
		UserFactory.init();
	}

