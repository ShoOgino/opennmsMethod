    @Test
    @Ignore
    public void testConfigTheHeckOutOfIt() throws Exception {
        Resource configResource = new FileSystemResource("/Users/brozow/big-snmp-config.xml");
        Resource events = new FileSystemResource("/Users/brozow/support/NEN/palin/wave-events.txt");
        File configDir = new File("/Users/brozow/support/NEN/palin/configs");
        configDir.mkdirs();
        
        SnmpEventInfo[] updates = readEventInfo(events.getInputStream());
        assertNotNull(updates);

        SnmpPeerFactory.setInstance(new SnmpPeerFactory(configResource));

        
        int index = 0;
        for (SnmpEventInfo update : updates) {
            try {
                File dir = new File(configDir, String.format("%03d", index));
                dir.mkdirs();
                SnmpPeerFactory.saveToFile(new File(dir, "pre-config.xml"));
                SnmpPeerFactory.getInstance().define(update);
                File saveUpdate = new File(dir, "update");
                FileUtils.writeStringToFile(saveUpdate, String.format("%s %s %s\n", update.getFirstIPAddress(), update.getLastIPAddress(), update.getCommunityString()));
                SnmpPeerFactory.saveToFile(new File(dir, "post-config.xml"));
            } catch (Exception e) {
                e.printStackTrace();
                fail(String.format("Applying update with index %d change community string for %s  to %s failed.", index, update.getFirstIPAddress(), update.getCommunityString()));
            }
            index++;
        }

        String actualConfig = SnmpPeerFactory.marshallConfig();
        System.err.println(actualConfig);
        //assertEquals(expectedConfig, actualConfig);
        

    }

