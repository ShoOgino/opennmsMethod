    public void testSnmpv3WithNoAuthNoPriv() throws Exception {
        SnmpPeerFactory.setInstance(new SnmpPeerFactory(new ByteArrayResource(getSnmpConfig().getBytes())));
        SnmpAgentConfig agentConfig = SnmpPeerFactory.getInstance().getAgentConfig(InetAddressUtils.addr("10.11.12.13"));
        assertEquals("opennmsuser1", agentConfig.getSecurityName());
        assertEquals("VF:2", agentConfig.getContextName());
        assertNull(agentConfig.getAuthProtocol());
        assertNull(agentConfig.getPrivProtocol());
        assertNull(agentConfig.getAuthPassPhrase());
        assertNull(agentConfig.getPrivPassPhrase());
        assertEquals(1, agentConfig.getSecurityLevel());

        agentConfig = SnmpPeerFactory.getInstance().getAgentConfig(InetAddressUtils.addr("10.11.12.14"));
        assertEquals("opennmsuser2", agentConfig.getSecurityName());
        assertEquals("VF:3", agentConfig.getContextName());
        assertEquals("", agentConfig.getAuthProtocol());
        assertEquals("", agentConfig.getPrivProtocol());
        assertEquals("", agentConfig.getAuthPassPhrase());
        assertEquals("", agentConfig.getPrivPassPhrase());
        assertEquals(1, agentConfig.getSecurityLevel());

        agentConfig = SnmpPeerFactory.getInstance().getAgentConfig(InetAddressUtils.addr(myLocalHost()));
        assertEquals(3, agentConfig.getSecurityLevel());
    }

