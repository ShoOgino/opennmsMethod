    @Test
    public void testSingleIPExclude() throws Exception {
        final DiscoveryConfiguration conf = new DiscoveryConfiguration();

        IncludeRange ir = new IncludeRange();
        ir.setBegin("192.168.0.1");
        ir.setEnd("192.168.0.254");
        conf.addIncludeRange(ir);

        ExcludeRange er = new ExcludeRange();
        er.setBegin("192.168.0.100");
        er.setEnd("192.168.0.100");
        conf.addExcludeRange(er);

        DiscoveryConfigFactory factory = new DiscoveryConfigFactory(conf);
        factory.initializeExcludeRanges();

        assertFalse(factory.isExcluded(InetAddressUtils.addr("192.168.0.1"), null));
        assertFalse(factory.isExcluded(InetAddressUtils.addr("192.168.0.2"), null));
        assertFalse(factory.isExcluded(InetAddressUtils.addr("192.168.0.99"), null));
        assertTrue(factory.isExcluded(InetAddressUtils.addr("192.168.0.100"), null));
        assertFalse(factory.isExcluded(InetAddressUtils.addr("192.168.0.101"), null));
        assertFalse(factory.isExcluded(InetAddressUtils.addr("192.168.0.151"), null));
    }

