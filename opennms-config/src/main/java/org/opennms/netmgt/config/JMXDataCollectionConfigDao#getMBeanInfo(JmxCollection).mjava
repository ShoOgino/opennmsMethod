    public static Map<String, BeanInfo> getMBeanInfo(JmxCollection collection) {
        final Map<String, BeanInfo> map = new HashMap<String, BeanInfo>();

        if (collection == null) {
            return Collections.unmodifiableMap(map);
        }

        for (Mbean mbean : collection.getMbeans()) {
            BeanInfo beanInfo = new BeanInfo();
            beanInfo.setMbeanName(mbean.getName());
            beanInfo.setObjectName(mbean.getObjectname());
            beanInfo.setKeyField(mbean.getKeyfield());
            beanInfo.setExcludes(mbean.getExclude());
            beanInfo.setKeyAlias(mbean.getKeyAlias());

            List<String> attribNameList = new ArrayList<String>();
            List<String> compAttribNameList = new ArrayList<String>();

            for (CompAttrib myCa : mbean.getCompAttribList()) {
                for (CompMember myCm : myCa.getCompMemberList()) {
                    attribNameList.add(myCa.getName() + "|" + myCm.getName());
                    compAttribNameList.add(myCa.getName() + "|" + myCm.getName());
                }
            }

            for (Attrib myA : mbean.getAttribList()) {
                attribNameList.add(myA.getName());
            }

            beanInfo.setAttributes(attribNameList);
            beanInfo.setCompositeAttributes(compAttribNameList);
            map.put(mbean.getObjectname(), beanInfo);
        }

        return Collections.unmodifiableMap(map);
    }

