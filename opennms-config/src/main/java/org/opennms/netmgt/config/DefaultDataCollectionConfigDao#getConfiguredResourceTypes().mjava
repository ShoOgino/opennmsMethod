    @Override
    public Map<String, ResourceType> getConfiguredResourceTypes() {
        final Map<String,ResourceType> map = new HashMap<String,ResourceType>();

        final Collection<SnmpCollection> snmpCollections = getContainer().getObject().getSnmpCollectionCollection();
        for (final SnmpCollection collection : snmpCollections) {
            for (final ResourceType resourceType : collection.getResourceTypeCollection()) {
                map.put(resourceType.getName(), resourceType);
            }
        }

        // FIXME: I guarantee there's a cleaner way to do this, but I didn't want to refactor everything
        // that calls this just to optimize out validation.
        if (!m_validated) {
            try {
                validateResourceTypes(getContainer(), map.keySet());
            } catch (final RuntimeException e) {
                m_validationException = e;
                throw e;
            }
        } else {
            if (m_validationException != null) {
                throw m_validationException;
            }
        }
        return Collections.unmodifiableMap(map);
    }

