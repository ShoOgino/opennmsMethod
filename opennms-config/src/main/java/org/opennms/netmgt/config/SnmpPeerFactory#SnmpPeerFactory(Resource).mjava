    /**
     * <p>Constructor for SnmpPeerFactory.</p>
     *
     * @param resource a {@link org.springframework.core.io.Resource} object.
     */
    public SnmpPeerFactory(final Resource resource) {
        SnmpPeerFactory.getWriteLock().lock();

        try {
            final SnmpConfig config = JaxbUtils.unmarshal(SnmpConfig.class, resource);

            try {
                final File file = resource.getFile();
                if (file != null) {
                    m_callback = new FileReloadCallback<SnmpConfig>() {
                        @Override
                        public SnmpConfig reload(final SnmpConfig object, final Resource resource) throws IOException {
                            return JaxbUtils.unmarshal(SnmpConfig.class, resource);
                        }

                    };
                    m_container = new FileReloadContainer<SnmpConfig>(config, resource, m_callback);
                    return;
                }
            } catch (final IOException e) {
                LOG.debug("No file associated with resource {}, skipping reload container initialization.", resource);
            }

            // if we fall through to here, then the file was null, or something else went wrong store the config directly
            m_config = config;
        } finally {
            SnmpPeerFactory.getWriteLock().unlock();
        }
    }

