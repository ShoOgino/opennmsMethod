    private static Filter createFilter(BundleContext context, String filter, ServletContext servletContext) throws Exception {
        final StringBuilder str = new StringBuilder();
        str.append("(&(").append(Constants.OBJECTCLASS).append("=");
        str.append(javax.servlet.Filter.class.getName()).append(")");
        str.append(filter != null ? filter : DEFAULT_FILTER).append(")");
        final String filterText = str.toString();
        return context.createFilter(filterText);
    }

