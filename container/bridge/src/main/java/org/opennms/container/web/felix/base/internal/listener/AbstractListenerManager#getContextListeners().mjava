    @SuppressWarnings("unchecked")
    protected final Iterator<ListenerType> getContextListeners()
    {
        ArrayList<ListenerType> result = allContextListeners;
        if (result == null)
        {
            synchronized (lock)
            {
                if (allContextListeners == null)
                {
                    Object[] services = getServices();
                    if (services != null && services.length > 0)
                    {
                        result = new ArrayList<ListenerType>(services.length);
                        for (Object service : services)
                        {
                            result.add((ListenerType) service);
                        }
                    }
                    else
                    {
                        result = new ArrayList<ListenerType>(0);
                    }
                    this.allContextListeners = result;
                }
                else
                {
                    result = this.allContextListeners;
                }
            }
        }
        return result.iterator();
    }

