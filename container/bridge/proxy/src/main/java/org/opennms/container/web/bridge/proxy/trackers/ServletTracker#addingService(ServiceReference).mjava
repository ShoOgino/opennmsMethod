    @Override
    public Servlet addingService(ServiceReference reference) {
        final Servlet servlet = super.addingService(reference);
        final ServletInfo servletInfo = new ServletInfo(reference);
        if (servletInfo.hasAlias()) {
            servletContext.log("Property 'alias' is no longer supported. " +
                    "Please use 'osgi.http.whiteboard.servlet.pattern' instead.");
        }
        // If invalid, we bail
        if (!servletInfo.isValid()) {
            servletContext.log("Servlet is not valid. Probably no url pattern defined");
            return servlet;
        }
        final ServletRequestHandler servletRequestHandler = new ServletRequestHandler(servletInfo);
        requestHandlerMap.put(reference, servletRequestHandler);
        proxyFilter.addRequestHandler(servletRequestHandler);
        return servlet;
    }

