	public void testGetAttributesForResource() {

		OnmsNode node = new OnmsNode();
		node.setId(1);
		node.setLabel("TestNode");
		
		int ifCount = 3;
		// add ip interfaces
		for(int i = 1; i <= ifCount; i++) {
			OnmsIpInterface ipIface = new OnmsIpInterface("192.168.1."+i, node);
			// these add themselves to the node
		}		
		
		expect(m_mockNodeDao.get(1)).andReturn(node);
		replay(m_mockNodeDao);
		
		Palette palette = m_perfGraphBuilderService.getAttributePalette(1);
		assertNotNull(palette);
		assertEquals("TestNode", palette.getLabel());
		assertNotNull(palette.getCategories());

		Collection<PaletteCategory> categories = palette.getCategories();

		// a category for the node plus a category for each iface
		assertEquals(1+ifCount, categories.size());
		
		PaletteCategory[] categoryArray = (PaletteCategory[]) categories.toArray(new PaletteCategory[categories.size()]);

		for (int i = 0; i < categoryArray.length; i++) {
			PaletteCategory cat = categoryArray[i];
			if (i == 0)
				assertEquals("Node Attributes", cat.getLabel());
			else
				assertTrue(cat.getLabel().startsWith("Interface: "));
		}
		
		verify(m_mockNodeDao);
	}

