    public NsclientCollectorComplianceTest() throws UnknownHostException {
        super(NSClientCollector.class, true);

        NSClientAgentConfig agentConfig = new NSClientAgentConfig();
        peerFactory = mock(NSClientPeerFactory.class);
        when(peerFactory.getAgentConfig(InetAddrUtils.getLocalHostAddress())).thenReturn(agentConfig);
        NSClientPeerFactory.setInstance(peerFactory);

        NsclientCollection collection = new NsclientCollection();
        collection.setWpms(new Wpms());
        dataCollectionConfigFactory = mock(NSClientDataCollectionConfigFactory.class);
        when(dataCollectionConfigFactory.getNSClientCollection(COLLECTION)).thenReturn(collection);
        when(dataCollectionConfigFactory.getRrdRepository(COLLECTION)).thenReturn(new RrdRepository());
        NSClientDataCollectionConfigFactory.setInstance(dataCollectionConfigFactory);
    }

