    public void testTimout(String host, final int timeout, final int limit) throws UnknownHostException {
        final MonitoredService svc = MonitorTestUtils.getMonitoredService(99, InetAddress.getByName(host), "JCIFS");
        final Map<String, Object> m = Collections.synchronizedMap(new TreeMap<String, Object>());
        final JCifsMonitor jCifsMonitor = new JCifsMonitor();

        m.put("username", "user");
        m.put("password", "pass");
        m.put("domain", "dom");
        m.put("mode", "PATH_EXIST");
        m.put("path", "/share");
        m.put("timeout", String.valueOf(timeout));
        m.put("retry", "0");

        long startTime = System.currentTimeMillis();
        final PollStatus pollStatus = jCifsMonitor.poll(svc, m);
        long delta = System.currentTimeMillis() - startTime;
        assertEquals(PollStatus.down(), pollStatus);

        LOG.info("Checking " + delta + " <= " + limit);
        assertTrue("Limit reached " + delta + " > " + limit, delta <= limit);
    }

