    /**
     * Due to limitations of the JCifs library we must use this hack to modify the timeouts. Since the timeouts are set
     * in a static fields only global timeouts will work reliably.
     *
     * @param timeoutInMilliseconds the timeout to be set
     */
    private void setJCifsTimeouts(final int timeoutInMilliseconds) {
        try {
            final Class<?> clazz = Class.forName("jcifs.smb.SmbConstants");
            setFieldValue(clazz.getField("SO_TIMEOUT"), timeoutInMilliseconds);
            setFieldValue(clazz.getField("CONN_TIMEOUT"), timeoutInMilliseconds);
            setFieldValue(clazz.getField("DEFAULT_RESPONSE_TIMEOUT"), timeoutInMilliseconds);
        } catch (NoSuchFieldException | ClassNotFoundException | IllegalAccessException e) {
            logger.error("Error setting JCifs timeouts ", e);
        }
    }

