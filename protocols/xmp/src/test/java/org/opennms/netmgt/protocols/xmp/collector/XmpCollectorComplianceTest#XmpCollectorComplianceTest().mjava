    public XmpCollectorComplianceTest() {
        super(XmpCollector.class, false);
        
        XmpAgentConfig agentConfig = new XmpAgentConfig();
        XmpPeerFactory xmpPeerFactory = mock(XmpPeerFactory.class);
        when(xmpPeerFactory.getAgentConfig(InetAddrUtils.getLocalHostAddress())).thenReturn(agentConfig);

        XmpPeerFactory.setInstance(xmpPeerFactory);

        XmpConfig config = new XmpConfig();
        XmpConfigFactory xmpConfigFactory = mock(XmpConfigFactory.class);
        when(xmpConfigFactory.getXmpConfig()).thenReturn(config);
        XmpConfigFactory.setInstance(xmpConfigFactory);

        XmpCollection collection = new XmpCollection();
        collection.setGroups(new Groups());
        XmpCollectionFactory xmpCollectionFactory = mock(XmpCollectionFactory.class);
        when(xmpCollectionFactory.getXmpCollection(COLLECTION)).thenReturn(collection);
        when(xmpCollectionFactory.getRrdRepository(COLLECTION)).thenReturn(new RrdRepository());
        XmpCollectionFactory.setInstance(xmpCollectionFactory);
    }

