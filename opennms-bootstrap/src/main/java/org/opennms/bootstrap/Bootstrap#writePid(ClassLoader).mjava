    private static void writePid(final ClassLoader cl) {
        final String pidfile = System.getProperty("opennms.pidfile");
        if (pidfile != null) {
            final String pid = BootstrapUtils.getPid();
            final Path pidpath = Paths.get(pidfile);
            if (pidpath.getParent().toFile().exists()) {
                try (final BufferedWriter writer = Files.newBufferedWriter(pidpath)) {
                    writer.write(pid);
                    writer.close();
                } catch (final Exception e) {
                    System.err.println("ERROR: failed to write PID to " + pidfile + ": " + e.getLocalizedMessage());
                    e.printStackTrace();
                    System.exit(1);
                }
            } else {
                System.err.println("ERROR: opennms.pidfile=" + pidfile + ", but parent directory (" + pidpath.getParent() + ") doesn't exist.");
                System.exit(1);
            }
        }
    }

