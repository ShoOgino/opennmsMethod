    /**
     * Test configuration.
     *
     * @throws Exception the exception
     */
    @Test
    public void testConfiguration() throws Exception {
        // Perform a basic check, specially for the external mapping
        SnmpTrapNorthbounderConfig config = configDao.getConfig();
        Assert.assertNotNull(config);
        Assert.assertEquals(2, config.getSnmpTrapSinks().size());
        SnmpTrapSink sink1 = config.getSnmpTrapSink("localTest1");
        Assert.assertNotNull(sink1);
        Assert.assertEquals(1, sink1.getMappings().size());
        Assert.assertEquals(2, sink1.getMappings().get(0).getMappings().size());
        SnmpTrapSink sink2 = config.getSnmpTrapSink("localTest2");
        Assert.assertNotNull(sink2);
        Assert.assertEquals(1, sink2.getMappings().size());
        Assert.assertEquals(1, sink2.getMappings().get(0).getMappings().size());

        NorthboundAlarm alarm = createAlarm();

        // Verify Filters
        Assert.assertTrue(sink1.accepts(alarm));
        Assert.assertFalse(sink2.accepts(alarm));
        SnmpTrapConfig trapConfig = sink1.createTrapConfig(alarm);
        Assert.assertNotNull(trapConfig);
        Assert.assertEquals(2, trapConfig.getParameters().size());
        Assert.assertEquals("99", trapConfig.getParameterValue(".1.2.3.4.5.6.7.8.1"));
        Assert.assertEquals("this is just a test", trapConfig.getParameterValue(".1.2.3.4.5.6.7.8.2"));
    }

