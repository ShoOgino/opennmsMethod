    @Test
    public final void testConfigReload() throws Exception {
        // Start vacuumd
        m_vacuumd.start();

        // Setup our event anticipator
        m_eventdIpcMgr.getEventAnticipator().setDiscardUnanticipated(true);

        // Build and anticipate the request reload event
        EventBuilder builder = new EventBuilder(EventConstants.RELOAD_DAEMON_CONFIG_UEI, "test");
        builder.addParam(EventConstants.PARM_DAEMON_NAME, m_vacuumd.getName());
        Event requestReloadEvent = builder.getEvent();
        m_eventdIpcMgr.getEventAnticipator().anticipateEvent(requestReloadEvent);

        // Build and anticipate the reload confirmation event
        builder = new EventBuilder(EventConstants.RELOAD_DAEMON_CONFIG_SUCCESSFUL_UEI, m_vacuumd.getName());
        Event reloadSuccesfulEvent = builder.getEvent();
        m_eventdIpcMgr.getEventAnticipator().anticipateEvent(reloadSuccesfulEvent);

        // Send the reload event
        m_eventdIpcMgr.sendNow(requestReloadEvent);
        Thread.sleep(1000);

        // Stop the daemon and verify that the configuration reload was confirmed
        m_vacuumd.stop();
        m_eventdIpcMgr.setEventAnticipator(null);
        m_eventdIpcMgr.getEventAnticipator().verifyAnticipated();
    }

