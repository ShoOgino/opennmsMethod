    private OnmsAlarm createNodeDownAlarm(int id, String nodeCategory) {
        final OnmsAlarm alarm = new OnmsAlarm();
        alarm.setId(id);
        alarm.setAlarmType(1);
        alarm.setSeverity(OnmsSeverity.MAJOR);
        alarm.setReductionKey(EventConstants.NODE_DOWN_EVENT_UEI + id);
        alarm.setFirstEventTime(new Date(15 * 1000));

        final OnmsNode node = new OnmsNode();
        node.addCategory(new OnmsCategory(nodeCategory, ""));
        alarm.setNode(node);

        final OnmsEvent event = new OnmsEvent();
        event.setEventUei(EventConstants.NODE_DOWN_EVENT_UEI);
        event.setEventTime(new Date(16 * 1000));
        alarm.setLastEvent(event);

        when(alarmDao.get(alarm.getId())).thenReturn(alarm);
        return alarm;
    }

