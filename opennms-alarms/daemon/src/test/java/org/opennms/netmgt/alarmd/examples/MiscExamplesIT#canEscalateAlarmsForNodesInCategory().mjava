    @Test
    public void canEscalateAlarmsForNodesInCategory() {
        // Create an alarm that we know will trigger our escalate rule
        OnmsAlarm trigger = createNodeDownAlarm(1, "EMERGENCY_F0");
        OnmsSeverity originalSeverity = trigger.getSeverity();

        // Tick
        dac.getClock().advanceTime( 16, TimeUnit.SECONDS );
        dac.handleNewOrUpdatedAlarm(trigger);
        // t = 00:16.0000
        dac.tick();

        // Capture the updated alarm
        ArgumentCaptor<OnmsAlarm> alarmCaptor = ArgumentCaptor.forClass(OnmsAlarm.class);
        verify(alarmDao).update(alarmCaptor.capture());
        OnmsAlarm alarm = alarmCaptor.getValue();

        // Verify that the severity was updated
        OnmsSeverity updatedSeverity = alarm.getSeverity();
        assertThat(updatedSeverity, greaterThan(originalSeverity));

        // Create an alarm that should not trigger our escalate rule
        reset(alarmDao);
        trigger = createNodeDownAlarm(2, "NOT_EMERGENCY_F0");

        // Tick
        dac.getClock().advanceTime( 1, TimeUnit.SECONDS );
        dac.handleNewOrUpdatedAlarm(trigger);
        // t = 00:17.0000
        dac.tick();

        // No updates
        verify(alarmDao, times(0)).update(any(OnmsAlarm.class));
    }

