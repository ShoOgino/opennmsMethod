    @Test(timeout=30000)
    @JUnitTemporaryDatabase(dirtiesContext=true,tempDbClass=MockDatabase.class)
    public final void testRunAutomationWithNoTrigger() throws InterruptedException, SQLException {
        assertEquals(0, countAlarms());

        bringNodeDownCreatingEvent(1);

        while(countAlarms() < 1) {
            Thread.sleep(100);
        }

        assertEquals(1, countAlarms());

        AutomationProcessor ap = new AutomationProcessor(VacuumdConfigFactory.getInstance().getAutomation("cleanUpAlarms"));
        Thread.sleep(1000);
        assertTrue(ap.runAutomation());
    }

