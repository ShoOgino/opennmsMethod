    private void handleAlarmAcknowledgements(OnmsAlarm alarm) {
        final AlarmAcknowledgementAndFact acknowledgmentFact = acknowledgementsByAlarmId.get(alarm.getId());
        final KieSession kieSession = getKieSession();
        if (acknowledgmentFact == null) {
            OnmsAcknowledgment ack = getLatestAcknowledgement(alarm);
            LOG.debug("Inserting first alarm acknowledgement into session: {}", ack);
            final FactHandle fact = kieSession.insert(ack);
            acknowledgementsByAlarmId.put(alarm.getId(), new AlarmAcknowledgementAndFact(ack, fact));
        } else {
            FactHandle fact = acknowledgmentFact.getFact();
            OnmsAcknowledgment ack = getLatestAcknowledgement(alarm);
            LOG.trace("Inserting acknowledgment into session: {}", ack);
            kieSession.update(fact, ack);
            acknowledgementsByAlarmId.put(alarm.getId(), new AlarmAcknowledgementAndFact(ack, fact));
        }
    }

