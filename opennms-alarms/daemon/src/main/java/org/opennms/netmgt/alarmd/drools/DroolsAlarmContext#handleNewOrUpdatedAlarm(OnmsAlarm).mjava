    @Override
    public void handleNewOrUpdatedAlarm(OnmsAlarm alarm) {
        if (!isStarted()) {
            LOG.debug("Ignoring new/updated alarm. Drools session is stopped.");
            return;
        }
        tryWithLock(alarm.getId(), alarm.getReductionKey(),
                (id, rkey) -> handleNewOrUpdatedAlarmNoLock(alarm),
                "Add or update");
    }

