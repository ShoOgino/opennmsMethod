    /**
     * Convert alarm to text.
     *
     * @param alarm the alarm
     * @return the string
     */
    private String convertAlarmToText(NorthboundAlarm alarm) {
        String alarmXml = null;
        Map<String, Object> mapping = createMapping(alarm);
        LOG.debug("Making substitutions for tokens in message format for alarm: {}.", alarm.getId());
        if (m_jmsDestination.getMessageFormat() != null) {
            alarmXml = PropertiesUtils.substitute(m_jmsDestination.getMessageFormat(), mapping);
        } else {
            alarmXml = PropertiesUtils.substitute(m_config.getMessageFormat(), mapping);
        }
        return alarmXml;
    }

