	@Test
	public void testFiltersAndReload() throws Exception {
	    File configFile = new File("target/syslog-northbounder-test.xml");
	    FileWriter writer = new FileWriter(configFile);
	    writer.write(xmlWithFilters);
	    writer.close();
	    Resource resource = new FileSystemResource(configFile);

	    SyslogNorthbounderConfigDao dao = new SyslogNorthbounderConfigDao();
	    dao.setConfigResource(resource);

	    dao.afterPropertiesSet();

	    assertNotNull(dao.getConfig());
	    assertEquals(2, dao.getConfig().getFilters().size());
	    assertEquals(true, dao.getConfig().getFilters().get(0).isEnabled());
	    assertEquals(false, dao.getConfig().getFilters().get(1).isEnabled());
	    assertTrue(dao.getConfig().getMessageFormatForDestination("test-host").contains("foreignSource"));
	    assertFalse(dao.getConfig().getMessageFormatForDestination("blah-blah").contains("foreignSource"));

	    writer = new FileWriter(configFile);
	    writer.write(xmlNoUeis);
	    writer.close();
	    dao.reload();

	    assertNull(dao.getConfig().getFilters());
	    configFile.delete();
	}

