    /**
     * Test load.
     *
     * @throws InterruptedException the interrupted exception
     */
    @Test
    public void testLoad() throws InterruptedException {
        Resource resource = new ByteArrayResource(xml.getBytes());

        SyslogNorthbounderConfigDao dao = new SyslogNorthbounderConfigDao();
        dao.setConfigResource(resource);
        dao.afterPropertiesSet();

        SyslogNorthbounderConfig config = dao.getConfig();
        assertNotNull(config);

        assertEquals(true, config.isEnabled());
        assertEquals(new Integer("10000"), config.getNaglesDelay());
        assertEquals(new Integer(10), config.getBatchSize());
        assertEquals(new Integer(100), config.getQueueSize());
        assertEquals("ALARM ID:${alarmId} NODE:${nodeLabel}", config.getMessageFormat());
        assertEquals("yyyy-MM-dd HH:mm:ss", config.getDateFormat());

        SyslogDestination syslogDestination = config.getDestinations().get(0);
        assertNotNull(syslogDestination);
        assertEquals("test-host", syslogDestination.getName());
        assertEquals("127.0.0.2", syslogDestination.getHost());
        assertEquals(new Integer(10514), syslogDestination.getPort());
        assertEquals(SyslogDestination.SyslogProtocol.TCP, syslogDestination.getProtocol());
        assertEquals(SyslogDestination.SyslogFacility.LOCAL0, syslogDestination.getFacility());
        assertEquals(new Integer(512), syslogDestination.getMaxMessageLength());
        assertEquals(false, syslogDestination.isSendLocalName());
        assertEquals(false, syslogDestination.isSendLocalTime());
        assertEquals(true, syslogDestination.isTruncateMessage());

        assertEquals(false, syslogDestination.isFirstOccurrenceOnly());

        assertEquals("uei.opennms.org/nodes/nodeDown", config.getUeis().get(0));
        assertEquals("uei.opennms.org/nodes/nodeUp", config.getUeis().get(1));
    }

