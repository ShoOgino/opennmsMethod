	@Test
	public void testLoad() throws InterruptedException {
		
		System.out.println(xml);
		
		Resource resource = new ByteArrayResource(xml.getBytes());
				
		SyslogNorthbounderConfigDao dao = new SyslogNorthbounderConfigDao();
		dao.setConfigResource(resource);
		dao.afterPropertiesSet();
		
		SyslogNorthbounderConfig config = dao.getConfig();
		
		assertNotNull(config);
		
		assertEquals(true, config.isEnabled());
		assertEquals(new Integer("10000"), config.getNaglesDelay());
		assertEquals(new Integer(10), config.getBatchSize());
		assertEquals(new Integer(100), config.getAlarmQueueSize());
		assertEquals("ALARM ID:${alarmId} NODE:${nodeLabel}", config.getMessageFormat());
		
		SyslogDestination syslogDestination = config.getDestinations().get(0);
		assertNotNull(syslogDestination);
		assertEquals("test-host", syslogDestination.getName());
		assertEquals("127.0.0.2", syslogDestination.getHost());
		assertEquals(10514, syslogDestination.getPort());
		assertEquals(SyslogDestination.SyslogProtocol.TCP, syslogDestination.getProtocol());
		assertEquals(SyslogDestination.SyslogFacility.LOCAL0, syslogDestination.getFacility());
		assertEquals(512, syslogDestination.getMaxMessageLength());
		assertEquals(false, syslogDestination.isSendLocalName());
		assertEquals(false, syslogDestination.isSendLocalTime());
		assertEquals(true, syslogDestination.isTruncateMessage());
		
		assertEquals("uei.opennms.org/nodes/nodeDown", config.getUeis().get(0));
		assertEquals("uei.opennms.org/nodes/nodeUp", config.getUeis().get(1));
		
	}

