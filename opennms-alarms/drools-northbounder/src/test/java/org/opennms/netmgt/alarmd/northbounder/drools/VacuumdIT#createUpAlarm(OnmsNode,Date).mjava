    /**
     * Creates the up alarm.
     *
     * @param node the node
     * @param eventTime the event time
     * @return the alarm
     */
    @Transactional
    public OnmsAlarm createUpAlarm(OnmsNode node, Date eventTime) {
        final String uei = "uei.opennms.org/nodes/nodeUp";
        OnmsEvent event = new OnmsEvent();
        event.setEventSource("JUnit");
        event.setDistPoller(m_distPoller);
        event.setNode(node);
        event.setEventUei(uei);
        event.setEventCreateTime(eventTime);
        event.setEventTime(eventTime);
        event.setEventDisplay("Y");
        event.setEventLog("Y");
        event.setEventLogMsg("Node is Up");
        event.setEventSeverity(OnmsSeverity.NORMAL.getId());
        event.setSeverityLabel(OnmsSeverity.NORMAL.getLabel());
        m_eventDao.save(event);
        m_eventDao.flush();

        OnmsAlarm alarm = new OnmsAlarm();
        alarm.setDistPoller(m_distPoller);
        alarm.setCounter(1);
        alarm.setLastEvent(event);
        alarm.setLastEventTime(event.getEventTime());
        alarm.setNode(node);
        alarm.setUei(uei);
        alarm.setAlarmType(2);
        alarm.setSeverity(OnmsSeverity.NORMAL);
        alarm.setReductionKey(uei + "::" + node.getId());
        alarm.setClearKey("uei.opennms.org/nodes/nodeDown::" + node.getId());
        m_alarmDao.save(alarm);
        m_alarmDao.flush();
        return alarm;
    }

