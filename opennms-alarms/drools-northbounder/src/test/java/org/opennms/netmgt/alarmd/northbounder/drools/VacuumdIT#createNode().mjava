    /**
     * Creates the node.
     *
     * @return the node
     * @throws Exception the exception
     */
    @Transactional
    public OnmsNode createNode() throws Exception {
        OnmsNode node = new OnmsNode();
        node.setLocation(m_location);
        node.setForeignSource("Servers-MacOS");
        node.setForeignId("1");
        node.setLabel("my-test-server");
        OnmsSnmpInterface snmpInterface = new OnmsSnmpInterface(node, 1);
        snmpInterface.setIfAlias("Connection to OpenNMS Wifi");
        snmpInterface.setIfDescr("en1");
        snmpInterface.setIfName("en1/0");
        snmpInterface.setPhysAddr("00:00:00:00:00:01");
        InetAddress address = InetAddress.getByName("10.0.1.1");
        OnmsIpInterface onmsIf = new OnmsIpInterface(address, node);
        onmsIf.setSnmpInterface(snmpInterface);
        onmsIf.setIfIndex(1);
        onmsIf.setIpHostName("my-test-server");
        onmsIf.setIsSnmpPrimary(PrimaryType.PRIMARY);
        node.getIpInterfaces().add(onmsIf);
        m_nodeDao.save(node);
        m_nodeDao.flush();
        return node;
    }

