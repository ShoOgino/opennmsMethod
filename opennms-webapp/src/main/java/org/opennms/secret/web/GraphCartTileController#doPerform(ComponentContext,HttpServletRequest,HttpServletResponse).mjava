    protected void doPerform(ComponentContext componentContext, HttpServletRequest request, HttpServletResponse response) throws Exception {
        // XXX  Bleh.  We shouldn't be doing it this way.  It should be wired up like other services.
        m_dataSourceService = (DataSourceService) getApplicationContext().getBean("dataSourceService");

//        Rrd_graph_def graph = getGraph(request);
        GraphDefinition graphDef = getGraphDef(request);
//        Datasources dataSources = getGraphDataSources(graph);
        LinkedList<GraphDataElement> dataSources = getGraphDataSources(graphDef);
        
        if (clearDataSources(request)) {
            dataSources = newDataSources(graphDef);
        }
            
        removeDataSource(dataSources, getRemovedDataSource(request));
        addDataSource(dataSources, request.getSession(), getAddedDataSource(request));
        
        // XXX this is for debugging.... because I have no idea what attributes are in the componentContext
        if (componentContext != null) {
            for (Iterator i = componentContext.getAttributeNames(); i.hasNext(); ) {
                System.out.println("graphcardtilecontroller attribute: " + i.next());
            }
        }
     }

