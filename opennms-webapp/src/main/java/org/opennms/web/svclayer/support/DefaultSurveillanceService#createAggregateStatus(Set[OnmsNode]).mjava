    private AggregateStatus createAggregateStatus(Set<OnmsNode> nodes) {
        AggregateStatus status;
        status = new AggregateStatus();
        if (nodes == null || nodes.isEmpty()) {
            status.setDownEntityCount(0);
            status.setTotalEntityCount(0);
            status.setStatus(AggregateStatus.ALL_NODES_UP);
        } else {
            status.setDownEntityCount(computeDownCount(nodes));
            status.setTotalEntityCount(nodes.size());
            status.setStatus(computeStatus(nodes, status));
        }
        return status;
    }

