    /**
     * This creator looks up a configured status view by name and calls the creator that 
     * accepts the AggregateStatusView model object.
     * 
     * @see org.opennms.web.svclayer.SiteStatusViewService#createAggregateStatusView(java.lang.String)
     */
    public AggregateStatusView createAggregateStatusView(String statusViewName) {
        
        AggregateStatusView statusView = new AggregateStatusView();
        View view = m_siteStatusViewConfigDao.getView(statusViewName);
        
        statusViewName = (statusViewName == null ? m_siteStatusViewConfigDao.getDefaultView().getName() : statusViewName);

        statusView.setName(statusViewName);
        statusView.setColumnName(view.getColumnName());
        statusView.setColumnValue(view.getColumnValue());
        statusView.setTableName(view.getTableName());
        
        Set<AggregateStatusDefinition> statusDefs = new LinkedHashSet<AggregateStatusDefinition>();
        final ArrayList rowDefs = m_siteStatusViewConfigDao.getView(statusViewName).getRows().getRowDefCollection();
        for (Iterator it = rowDefs.iterator(); it.hasNext();) {
            RowDef rowDef = (RowDef) it.next();
            AggregateStatusDefinition def = new AggregateStatusDefinition();
            def.setName(rowDef.getLabel());
            
            Set<OnmsCategory> categories = new LinkedHashSet<OnmsCategory>();
            
            for (Iterator catIter = rowDef.getCategoryCollection().iterator(); catIter.hasNext();) {
                Category cat = (Category) catIter.next();
                OnmsCategory category = m_categoryDao.findByName(cat.getName());
                
                if (category == null) {
                    throw new IllegalArgumentException("Site status configured category not found: "+cat.getName());
                }
                
                categories.add(category);
            }
            def.setCategories(categories);
        }
        
        statusView.setStatusDefinitions(statusDefs);
        return statusView;
    }

