    private InputStream getInputStreamForCommand(String command) {
        boolean debug = true;
        File workDir = m_resourceDao.getRrdDirectory(true);

        InputStream tempIn = null;
        try {
            LogUtils.debugf(this, "Executing RRD command in directory '%s': %s", workDir, command);
            tempIn = m_rrdDao.createGraph(command, workDir);
        } catch (final DataAccessException e) {
        	LogUtils.warnf(this, e, "Exception while creating graph.");
            if (debug) {
                throw e;
            } else {
                return returnErrorImage(s_rrdError);
            }
        }

        return tempIn;
    }

