    public String calculateCurrentStatus(
            Collection<OnmsLocationMonitor> monitors,
            Set<OnmsMonitoredService> applicationServices,
            Collection<OnmsLocationSpecificStatus> statuses) {
        int goodMonitors = 0;
        int badMonitors = 0;
        Date timeOut = new Date(System.currentTimeMillis() - 300000);
        
        for (OnmsLocationMonitor monitor : monitors) {
            if (monitor == null || monitor.getLastCheckInTime() == null
                    || monitor.getLastCheckInTime().before(timeOut)) {
                continue;
            }
            
            String status = calculateCurrentStatus(monitor,
                                                   applicationServices,
                                                   statuses);
            
            // FIXME: "Normal", etc. should be done with static variables
            if ("Normal".equals(status)) {
                goodMonitors++;
            } else {
                badMonitors++;
            }
        }
        
        if (goodMonitors == 0 && badMonitors == 0) {
            return "Indeterminate"; // No current responses
        } else if (goodMonitors != 0 && badMonitors == 0) {
            return "Normal"; // No bad responses
        } else if (goodMonitors == 0 && badMonitors != 0) {
            return "Critical"; // All bad responses
        } else if (goodMonitors != 0 && badMonitors != 0){
            return "Warning"; // Some bad responses
        } else {
            throw new IllegalStateException("Shouldn't have gotten here. "
                                            + "good monitors = "
                                            + goodMonitors
                                            + ", bad monitors = "
                                            + badMonitors);
        }
    }

