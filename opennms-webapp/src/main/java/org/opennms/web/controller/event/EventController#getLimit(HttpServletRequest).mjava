    private int getLimit(HttpServletRequest request) {
    	final String display = getDisplay(request);
        final String limitString = request.getParameter("limit");
    	int limit = "long".equals(display) ? getDefaultLongLimit() : getDefaultShortLimit();
        if (limitString != null) {
            try {
                int newlimit = WebSecurityUtils.safeParseInt(limitString);
                if (newlimit > 0) {
                    limit = newlimit;
                }
            } catch (NumberFormatException e) {
                // do nothing, the default is already set
            }
        }
        return limit;
    }

