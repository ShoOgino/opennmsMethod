    private void removeBrokenGraphsFromReport(Report report) {
        List<Graph> badGraphs = new ArrayList<Graph>();
        for (Graph graph : report.getGraphCollection()) {
            try {
                getKscReportService().getResourceFromGraph(graph);
            } catch (ObjectRetrievalFailureException orfe) {
                badGraphs.add(graph);
            }
        }
        
        for (Graph badGraph : badGraphs) {
            log().error("Removing graph '" + badGraph.getTitle() + "' in KSC report '" + report.getTitle() + "' because the resource it refers to could not be found. Perhaps resource '"+ badGraph.getResourceId() + "' (or its ancestor) referenced by this graph no longer exists?");
            report.removeGraph(badGraph);
        }
    }

