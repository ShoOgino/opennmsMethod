    @Transactional(readOnly=false)
    public ModelAndView create(HttpServletRequest request, HttpServletResponse response) throws Exception {
        String filterName = getFilterName(request); 
        String filter = getFilter(request);
        String error = null;
        OnmsFilter filterObject = null;
        
        if (StringUtils.isEmpty(filterName)) {
            error = "Filter name must not be empty.";
        }
        if (StringUtils.isEmpty(filter)) {
            error = "Filter must not be empty.";
        }
        
        if (error == null) {
        	filterObject = filterService.createFilter(request.getRemoteUser(), filterName, filter, OnmsFilter.Page.EVENT);
        	if (filterObject == null) {
        		error = "An error occured while saving the filter.";
        	}
        }
        
        ModelAndView modelAndView = new ModelAndView();
        modelAndView.addObject("filter.create.error", error);
        if (filterObject != null) {
            modelAndView.addObject("filterId", filterObject.getId());
            modelAndView.addObject("filterName", filterObject.getName());
        }
        return modelAndView;
    }

