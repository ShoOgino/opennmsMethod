    @Transactional
    public ModelAndView create(HttpServletRequest request, HttpServletResponse response) {
        String filterName = request.getParameter("filterName");
        String filter = request.getParameter("filter");
        String error = null;
        
        if (StringUtils.isEmpty(filterName)) {
            error = "Filter name must not be empty.";
        }
        if (StringUtils.isEmpty(filter)) {
            error = "Filter must not be empty.";
        }
  
        OnmsFilter filterObject = filterService.createFilter(request.getRemoteUser(), filterName, filter, OnmsFilter.Page.EVENT);
        if (filterObject == null) {
            error = "An error occured while saving the filter.";
        }
        
        ModelAndView modelAndView = new ModelAndView("event/list");
        modelAndView.addObject("filter.create.error", error);
        if (filterObject != null) {
            modelAndView.addObject("filterId", filterObject.getId());
            modelAndView.addObject(filterObject.getFilter());
        }
        return modelAndView;
    }

