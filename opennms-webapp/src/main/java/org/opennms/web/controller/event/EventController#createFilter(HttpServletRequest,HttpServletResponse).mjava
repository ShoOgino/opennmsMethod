    @Transactional(readOnly=false)
    public ModelAndView createFilter(HttpServletRequest request, HttpServletResponse response) throws Exception {
        String error = null;
        try {
            OnmsFilter favorite = filterService.createFilter(
                    request.getRemoteUser(),
                    request.getParameter("filterName"),
                    FilterUtil.toFilterURL(request.getParameterValues("filter")),
                    OnmsFilter.Page.EVENT);
            if (favorite != null) {
                return list(request, favorite); // success
            }
            throw new FavoriteFilterService.FavoriteFilterException("An error occured while creating the filter");
        } catch (FavoriteFilterService.FavoriteFilterException ex) {
            error = ex.getMessage();
        }
        ModelAndView errorView = list(request, (OnmsFilter)null);
        errorView.addObject("favorite.create.error", error);
        return errorView;
    }

