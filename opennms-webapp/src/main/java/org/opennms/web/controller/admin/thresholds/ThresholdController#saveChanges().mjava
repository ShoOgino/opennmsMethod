    private void saveChanges() throws ServletException {
        ThresholdingConfigFactory configFactory=ThresholdingConfigFactory.getInstance();
        try {
            configFactory.saveCurrent();
      
            Event event = new Event();
            event.setSource("Web UI");
            event.setUei(EventConstants.THRESHOLDCONFIG_CHANGED_EVENT_UEI);
            try {
                    event.setHost(InetAddress.getLocalHost().getHostName());
            } catch (UnknownHostException uhE) {
                    event.setHost("unresolved.host");
            }
            
            event.setTime(EventConstants.formatToString(new java.util.Date()));
            try {
                    Util.createEventProxy().send(event);
            } catch (Exception e) {
                    throw new ServletException("Could not send event " + event.getUei(), e);
            }
        } catch (Exception e) {
            throw new ServletException("Could not save the changes to the threshold because "+e.getMessage(),e);
        }
        
        if(eventConfChanged) {
            try {
                EventconfFactory.getInstance().saveCurrent();
            } catch (Exception e) {
                throw new ServletException("Could not save the changes to the event configuration because "+e.getMessage(),e);
            }
            eventConfChanged=false;
        }

    }

