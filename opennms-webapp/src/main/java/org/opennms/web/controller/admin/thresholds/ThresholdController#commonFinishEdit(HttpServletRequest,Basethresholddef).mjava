    private void commonFinishEdit(HttpServletRequest request, Basethresholddef baseDef) {
        String dsLabel = request.getParameter("dsLabel");
        if (dsLabel == null || "".equals(dsLabel)) {
            baseDef.setDsLabel(null); //Must set null in correct circumstances - empty string isn't quite the same thing
        }
        else {
            baseDef.setDsLabel(dsLabel);
        }

        String description = request.getParameter("description");
        if (description == null || "".equals(description)) {
            baseDef.setDescription(null);
        }
        else {
            baseDef.setDescription(description);
        }

        final String dsType = request.getParameter("dsType");
        final String thresholdType = request.getParameter("type");

        baseDef.setDsType(dsType == null? null : dsType);
        baseDef.setType(thresholdType == null? null : ThresholdType.forName(thresholdType));
        try {
            baseDef.setRearm(WebSecurityUtils.safeParseDouble(request.getParameter("rearm")));
        } catch (final NumberFormatException e) {
            LOG.warn("Failed to parse rearm ('{}') as a number.", request.getParameter("rearm"));
        }
        try {
            baseDef.setTrigger(WebSecurityUtils.safeParseInt(request.getParameter("trigger")));
        } catch (final NumberFormatException e) {
            LOG.warn("Failed to parse trigger ('{}') as a number.", request.getParameter("trigger"));
        }
        try {
            baseDef.setValue(WebSecurityUtils.safeParseDouble(request.getParameter("value")));
        } catch (final NumberFormatException e) {
            LOG.warn("Failed to parse value ('{}') as a number.", request.getParameter("value"));
        }

        String clearKey = null;

        String triggeredUEI = request.getParameter("triggeredUEI");
        if (triggeredUEI == null || "".equals(triggeredUEI)) {
            baseDef.setTriggeredUEI(null); //Must set null in correct circumstances - empty string isn't quite the same thing
        }
        else {
            org.opennms.netmgt.xml.eventconf.Event source = getSourceEvent(baseDef.getType(), true);
            if (source != null && source.getAlarmData() != null && source.getAlarmData().getReductionKey() != null) {
                clearKey = source.getAlarmData().getReductionKey().replace("%uei%", triggeredUEI);
            }
            baseDef.setTriggeredUEI(triggeredUEI);
            this.ensureUEIInEventConf(source, triggeredUEI, baseDef.getType(), null, true);
        }

        String rearmedUEI = request.getParameter("rearmedUEI");
        if (rearmedUEI == null || "".equals(rearmedUEI) || baseDef.getType().equals(ThresholdType.RELATIVE_CHANGE) || baseDef.getType().equals(ThresholdType.ABSOLUTE_CHANGE)) { // It doesn't make sense a rearm UEI for relativeChange or absoluteChange
            baseDef.setRearmedUEI(null); //Must set null in correct circumstances - empty string isn't quite the same thing
        }
        else {
            org.opennms.netmgt.xml.eventconf.Event source = getSourceEvent(baseDef.getType(), false);
            baseDef.setRearmedUEI(rearmedUEI);
            this.ensureUEIInEventConf(source, rearmedUEI, baseDef.getType(), clearKey, false);
        }
    }

