    /**
     * <p>getAvails</p>
     *
     * @param mapElements an array of {@link org.opennms.web.map.db.DbElement} objects.
     * @return a java$util$Map object.
     * @throws org.opennms.web.map.MapsException if any.
     */
    @Override
    public java.util.Map<Integer, Double> getAvails(DbElement[] mapElements)
            throws MapsException {
        // get avails for all nodes in map and its submaps
        java.util.Map<Integer, Double> availsMap = null;
        LOG.debug("avail Enabled");
        LOG.debug("getting all nodeids of map (and submaps)");
        Set<Integer> nodeIds = new HashSet<Integer>();
        if (mapElements != null) {
            for (int i = 0; i < mapElements.length; i++) {
                if (mapElements[i].isNode()) {
                    nodeIds.add(Integer.valueOf(mapElements[i].getId()));
                } else {
                    nodeIds.addAll(getNodeidsOnElement(mapElements[i]));
                }
            }
        }
        LOG.debug("all nodeids obtained");
        LOG.debug("Getting avails for nodes of map ({} nodes)", nodeIds.size());

        availsMap = getNodeAvailability(nodeIds);
        LOG.debug("Avails obtained");
        return availsMap;
    }

