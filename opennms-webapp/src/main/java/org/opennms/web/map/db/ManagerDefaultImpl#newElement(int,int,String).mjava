    /**
     * Create a new element child of the map with mapId (this map must be the sessionMap)
     * 
     * @param mapId
     * @param elementId
     * @param type the node type
     * @return the new VElement
     * @throws MapsException
     */
	public VElement newElement(int mapId, int elementId, String type) throws MapsException {
    	if(sessionMap==null) {
            throw new MapNotFoundException("session map is null");
        }
    	if(sessionMap.getId()!=mapId) {
            throw new MapsException("No current session map: cannot create new element of map "+mapId);
        }
		Element elem = dbManager.newElement(elementId, mapId, type);
		VElement velem= new VElement(elem);
		velem.setSeverity(mapsPropertiesFactory.getIndeterminateSeverity().getId());
		velem.setRtc(mapsPropertiesFactory.getUndefinedAvail().getMin());
		velem.setStatus(mapsPropertiesFactory.getUnknownStatus().getId());
		log.debug("Adding velement to map "+velem.toString());
        sessionMap.addElement(velem);
		return velem;

    }

