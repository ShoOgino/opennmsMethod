    /**
     * Manage Maps using default implementation of Factory and Manager
     */
    public Manager() throws MapsException{
    	
		ThreadCategory.setPrefix(MapsConstants.LOG4J_CATEGORY);
		log= ThreadCategory.getInstance(this.getClass());
        try {
        	MapPropertiesFactory.init();
        	mpf = MapPropertiesFactory.getInstance();
        	m_mapsFactory = mpf.getDefaultFactory();
        	
           	String dataSource = m_mapsFactory.getDataSource();
           	m_dataSource = null;
        	if(dataSource!=null){
        		m_dataSource = mpf.getDataSource(dataSource); 
        	}
 
        	Class[] parameterTypes = {DataSource.class,java.util.Map.class};
        	Object[] params = {m_dataSource,m_mapsFactory.getParam()};
        	Constructor managerConstr = Class.forName(m_mapsFactory.getManagerClass()).getConstructor(parameterTypes);
        	
        	m_implManager = (org.opennms.web.map.dataaccess.Manager)managerConstr.newInstance(params);
        } catch (Exception e) {
        	log.fatal("cannot use map.properties file " + e);
        	e.printStackTrace();
        	throw new MapsException(e);
        }
    }

