	/** {@inheritDoc} */
        @Override
	protected ModelAndView handleRequestInternal(HttpServletRequest request, HttpServletResponse response)
			throws IOException {
		

		int mapWidth = WebSecurityUtils.safeParseInt(request
				.getParameter("MapWidth"));
		int mapHeight = WebSecurityUtils.safeParseInt(request
					.getParameter("MapHeight"));

		LOG.debug("Current mapWidth={} and MapHeight={}", mapWidth, mapHeight);
			

		BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(response
				.getOutputStream(), "UTF-8"));

		try {				
			LOG.info("New Map in admin mode: creating new map");
			VMap map = manager.newMap(request
						.getRemoteUser(), request.getRemoteUser(),
						mapWidth, mapHeight);
			bw.write(ResponseAssembler.getMapResponse(map));				
		} catch (Throwable e) {
			LOG.error("Error while creating new map for user:{}", request.getRemoteUser(),e);
			bw.write(ResponseAssembler.getMapErrorResponse(MapsConstants.NEWMAP_ACTION));
		} finally {
			bw.close();
		}

		return null;
	}

