	public VElement[] refreshElements(VElement[] mapElements) throws MapsException {
		List elems = new ArrayList();
    	Vector deletedNodeids= getDeletedNodes();
    	java.util.Map outagedNodes=getOutagedNodes();
    	java.util.Map avails=getAvails(mapElements);
    	Set nodesBySource = new HashSet();
    	log.debug("m_datasource is "+m_dataSource);
    	if (m_dataSource != null) nodesBySource = mpf.getNodeIdsBySource(m_dataSource.getLabel());
		VElement ve = null;
		if (mapElements != null) 
    	for(int i=0;i<mapElements.length;i++){
    		ve = refresh(mapElements[i],nodesBySource,deletedNodeids,outagedNodes,avails);
    		if (!(ve.equalsIgnorePosition(mapElements[i]))) {
				elems.add(ve);
			}
    	}
    	return (VElement[]) elems.toArray(new VElement[0]);

	}

