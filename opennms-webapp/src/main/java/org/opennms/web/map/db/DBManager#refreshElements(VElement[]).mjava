	public VElement[] refreshElements(VElement[] mapElements) throws MapsException {
		List<VElement> elems = new ArrayList<VElement>();
    	Vector<Integer> deletedNodeids= getDeletedNodes();
    	java.util.Map<Integer,OutageInfo> outagedNodes=getOutagedNodes();
    	java.util.Map<Integer,Double> avails=getAvails(mapElements);
    	Set nodesBySource = new HashSet();
    	log.debug("m_datasource is "+m_dataSource);
    	if (m_dataSource != null) nodesBySource = mpf.getNodeIdsBySource(m_dataSource.getLabel());
		VElement ve = null;
		if (mapElements != null) 
    	for(int i=0;i<mapElements.length;i++){
    		ve = refresh(mapElements[i],nodesBySource,deletedNodeids,outagedNodes,avails);
    		if (ve!=null) {
				elems.add(ve);
			}
    	}
    	return elems.toArray(new VElement[0]);

	}

