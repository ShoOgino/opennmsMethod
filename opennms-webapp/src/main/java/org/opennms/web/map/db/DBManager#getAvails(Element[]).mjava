    public java.util.Map<Integer, Double> getAvails(Element[] mapElements)
            throws MapsException {
        // get avails for all nodes in map and its submaps
        java.util.Map<Integer, Double> availsMap = null;
        log.debug("avail Enabled");
        log.debug("getting all nodeids of map (and submaps)");
        Set<Integer> nodeIds = new HashSet<Integer>();
        if (mapElements != null) {
            for (int i = 0; i < mapElements.length; i++) {
                if (mapElements[i].isNode()) {
                    nodeIds.add(new Integer(mapElements[i].getId()));
                } else {
                    nodeIds.addAll(getNodeidsOnElement(mapElements[i]));
                }
            }
        }
        log.debug("all nodeids obtained");
        log.debug("Getting avails for nodes of map (" + nodeIds.size()
                + " nodes)");

        availsMap = getNodeAvailability(nodeIds);
        log.debug("Avails obtained");
        return availsMap;
    }

