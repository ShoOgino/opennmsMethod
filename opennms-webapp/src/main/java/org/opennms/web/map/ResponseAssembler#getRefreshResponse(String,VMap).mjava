	protected static String getRefreshResponse(String action, VMap map){
		ThreadCategory.setPrefix(MapsConstants.LOG4J_CATEGORY);
		log = ThreadCategory.getInstance(ResponseAssembler.class);
		VElement[] velements = map.getAllElements();
		
		
		//checks for only changed velements 
		String response=getActionOKMapResponse(action);
		if (velements != null) {
			for(int k=0; k<velements.length;k++){
				VElement ve = velements[k];
				response += "&" + ve.getId() + ve.getType() + "+"
						+ ve.getIcon() + "+" + ve.getLabel();
				response += "+" + ve.getRtc() + "+"
						+ ve.getStatus() + "+" + ve.getSeverity()+ "+" + ve.getX()+ "+" + ve.getY();
			}
		}
		VLink[] links = map.getAllLinks();
		// construct string response considering links also
		if (links != null) {
			for(int k=0; k<links.length;k++){
				VLink vl = (VLink) links[k];
					response += "&" + vl.getFirst().getId()
					+ vl.getFirst().getType() + "+"
					+ vl.getSecond().getId()
					+ vl.getSecond().getType()+"+"+vl.getLinkTypeId()+"+"+vl.getLinkStatusString()
					+ "+" + vl.getFirstNodeid()+"+"+vl.getSecondNodeid();
			}
		} 
		log.debug("getRefreshResponse: String assembled: "+response);
		return response;
	}

