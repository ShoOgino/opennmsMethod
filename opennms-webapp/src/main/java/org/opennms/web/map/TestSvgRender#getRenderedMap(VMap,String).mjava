	/* (non Javadoc)
	 * @see org.opennms.web.appmap.MapRenderer#getRenderedMap(org.opennms.web.appmap.view.Map, java.lang.String)
	 * 
	 * 		var map = new Map("#bbbbbb", "", "Background", "80%", "400px", 0, 0);
	 *		function load(evt)
	 *		{
	 *			var node = svgDocument.getElementById("Application");
	 *			node.appendChild(map.getSvgNode());
	 *			node = map.getSvgNode();
	 *
	 *			map.addElement("a1", "element.svg", "192.168.201.12", "green",  30, 30);
	 *			map.addElement("a2", "element.svg", "192.168.201.14", "red",  150, 150);
	 *			map.addElement("a3", "element.svg", "10.0.0.1", "yellow",  250, 150);
	 *			map.addElement("a4", "element.svg", "10.0.0.125", "pink",  150, 250);						
	 *			map.addLink("a1", "a2", "green", 1);			
	 *			map.addLink("a1", "a3", "green", 1);
	 *			map.addLink("a1", "a4", "green", 1);
	 *			map.addLink("a2", "a3", "green", 1);						
	 *			map.addLink("a2", "a4", "green", 1);						
	 *			map.addLink("a3", "a4", "green", 1);						
	 *			map.render();
	 *			//alertPrintNode(node);
	 *		}
	 * 
	 */
	public byte[] getRenderedMap(VMap map, String displayType) {
		// TODO Stub di metodo generato automaticamente
		String background = map.getBackground();
		
		if(background==null){
			background="black";
		}
		String middle =
			//var deletingLink=false;
			"var map = new Map(\"#bbbbbb\", \""
				+ map.getBackground()
				+ "\", \""+map.getId()+"\", \"80%\", \"400px\", 0, 0);" +
			"var deletingMapElem=false;";
		middle += "function load(evt)"
			+ "{"
			+ "		var node = svgDocument.getElementById(\"Application\");"
			+ "		node.appendChild(map.getSvgNode());"
			+ "		node = map.getSvgNode();";

		VElement[] mapElements = map.getAllElements();
		VElement mapElement;
		int length = mapElements.length;
		for (int i = 0; i < length; i++) {
			mapElement = mapElements[i];
			middle += "map.clear();" +
					"map.addElement(\""
				+ mapElement.getId()
				+ "\", \""
				+ ((mapElement.getIcon()!=null)?mapElement.getIcon():"element.svg")
				+ "\", \""
				+ mapElement.getLabel()
				//+ "\", " + mapElement.getSeverity() + ",  " + mapElement.getX() + ", " + mapElement.getY() + ");"; 
				+ "\", \"green\",  " + mapElement.getX() + ", " + mapElement.getY() + ");";
			}
		middle += " map.render(); }";
		setupFooter(map.getName(),map.getBackground(),map.getOwner(),map.getAccessMode(),map.getCreateTime(),map.getUserLastModifies(),map.getLastModifiedTime());
		//System.out.print(head + middle + footer);
		return (head + middle + footer).getBytes();
	}

