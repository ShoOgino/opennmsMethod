	public void doPost(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		ThreadCategory.setPrefix(MapsConstants.LOG4J_CATEGORY);
		log = ThreadCategory.getInstance(this.getClass());
		
		String action = request.getParameter("action");
		String elem = request.getParameter("elem");
		String type = request.getParameter("type");
		log.info("Loading infos for elem "+elem+" and type "+type);
		BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(response
				.getOutputStream()));
		
		String strToSend = action + "OK";
		HttpSession session = request.getSession(false);
		org.opennms.web.map.dataaccess.Manager  implManager = null;
		VMap map =null;
		if (session != null) {
			Manager m = null;
			m = (Manager) session.getAttribute("manager");
			implManager=m.getDataAccessManager();
			log.debug("Got manager from session: "+m);
			map  = (VMap)session.getAttribute("sessionMap");
			log.debug("Got session map: "+map);
		}else{
			strToSend = action + "Failed";
		}
		
		
		java.util.Map infos=null;
		if(action.equals(MapsConstants.LOAD_NODES_INFO_ACTION)){
			try {
				infos = implManager.getElementInfo(Integer.parseInt(elem), map.getId(), type);
			} catch (NumberFormatException e) {
				e.printStackTrace();
				log.error("Error while getting infos "+e);
				strToSend = action + "Failed";
			} catch (MapsException e) {
				e.printStackTrace();
				log.error("Error while getting infos "+e);
				strToSend = action + "Failed";
			}
		}else{
			strToSend = action + "Failed";
		}
		if(infos!=null){
			Iterator it = infos.keySet().iterator();
			while(it.hasNext()){
				String key = (String) it.next();
				strToSend+="+"+key+": "+(String)infos.get(key);
			}
		}
		bw.write(strToSend);
		bw.close();
		log.info("Sending response to the client '" + strToSend + "'");

	}

