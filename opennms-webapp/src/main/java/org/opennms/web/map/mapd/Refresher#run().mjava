	public void run() {
		log.info("Running...");
		while(true){
			synchronized (m_sharedChanges) {
				try {
					log.info("waiting on MapSharedChanges...");
					m_sharedChanges.wait();
					log.info("waking up!");
					
					log.info("getting changed nodes from MapSharedChanges");
					HashMap<Integer, NodeChange> nodes = m_sharedChanges.popChangedNodes();
					
					try {
						synchronizeSnapshots(nodes);
					} catch (MapsException e) {
						log.error(e,e);
						//if errors occour, re-set nodes and links 
						nodesNotSynchronized.addAll(nodes.values());
					}
					log.info("Setting MapSharedChanges in application context");
					m_context.setAttribute("MapSharedChanges", m_sharedChanges);
				} catch (InterruptedException e) {
					log.error(e,e);
					//return;
				}
			}
		}
	}

