	/**
	 * gets the changed elements
	 * @param sessionId
	 * @param map
	 * @param manager
	 * @return List<VElement> containing the changed elements
	 */
	List<VElement> getChangedElements(String sessionId, VMap map, Manager manager)throws MapsException{
		log.debug("getting changed elements... (sessionId="+sessionId+"), (mapId="+map.getId()+")  (manager="+manager.toString()+")");
		Snapshot mapSS = snapshots.get(sessionId);
		if(mapSS==null || (mapSS!=null && mapSS.map.getId()!=map.getId())){
			log.debug("map's snapshot not found or containing old map; creating new snapshot and starting it.");
			try {
				mapSS = new Snapshot(map, manager);
			} catch (MapsException e) {
				log.error("Error while creating snapshot for map/manager "+map.getId()+"/"+manager,e);
				throw e;
			}
			snapshots.put(sessionId, mapSS);
		}
		return mapSS.getChangedElements();
	}

