	/**
     * Gets all nodes on the passed map (and its submaps) with theirs occurrences
     * @param map
     * @return HashMap<Integer, Integer> (nodeid, occurrences) containing all nodes on the passed map (and its submaps) with theirs occourrences
     */
    public HashMap<Integer, Integer> getAllNodesOccursOnMap(VMap map)throws MapsException{
    	HashMap<Integer, Integer> result=new HashMap<Integer, Integer>();
    	VElement[] elems = map.getAllElements();
    	
		for (VElement elem : elems) {
			if(elem.getType()==VElement.MAP_TYPE){
				Set<Integer> nodeids=getNodeidsOnElement(elem);
				Iterator<Integer> iter=nodeids.iterator();
				while(iter.hasNext()){
					Integer nid=iter.next();
					Integer occ=result.get(nid);
					if(occ==null) {
                        occ=0;
                    }
					occ++;
					result.put(nid, occ);
				}
			}else{
				Integer nid=elem.getId();
				Integer occ=result.get(nid);
				if(occ==null) {
                    occ=0;
                }
				occ++;
				result.put(nid, occ);
			}
		}
    	return result;
    }

