    synchronized public void endSession() throws SQLException {
        if (!isStartedSession())
            throw new IllegalStateException("Call startSession() first.");
    	connection.commit();
        Vault.releaseDbConnection(connection);
        connection = null;
    }

