    protected void sendLabelChangeEvent(int nodeId, NodeLabel oldNodeLabel, NodeLabel newNodeLabel) throws EventProxyException {
        Event outEvent = new Event();
        outEvent.setSource("NodeLabelChangeServlet");
        outEvent.setUei(EventConstants.NODE_LABEL_CHANGED_EVENT_UEI);
        outEvent.setNodeid(nodeId);
        outEvent.setHost("host");
        outEvent.setTime(EventConstants.formatToString(new java.util.Date()));

        Parms parms = new Parms();

        if (oldNodeLabel != null) {
            // old label
            Value value = new Value();
            value.setContent(oldNodeLabel.getLabel());
            Parm parm = new Parm();
            parm.setParmName(EventConstants.PARM_OLD_NODE_LABEL);
            parm.setValue(value);
            parms.addParm(parm);

            // old label source
            value = new Value();
            value.setContent(String.valueOf(oldNodeLabel.getSource()));
            parm = new Parm();
            parm.setParmName(EventConstants.PARM_OLD_NODE_LABEL_SOURCE);
            parm.setValue(value);
            parms.addParm(parm);
        }

        if (newNodeLabel != null) {
            // new label
            Value value = new Value();
            value.setContent(newNodeLabel.getLabel());
            Parm parm = new Parm();
            parm.setParmName(EventConstants.PARM_NEW_NODE_LABEL);
            parm.setValue(value);
            parms.addParm(parm);

            // old label source
            value = new Value();
            value.setContent(String.valueOf(newNodeLabel.getSource()));
            parm = new Parm();
            parm.setParmName(EventConstants.PARM_NEW_NODE_LABEL_SOURCE);
            parm.setValue(value);
            parms.addParm(parm);
        }

        outEvent.setParms(parms);

        this.proxy.send(outEvent);
    }

