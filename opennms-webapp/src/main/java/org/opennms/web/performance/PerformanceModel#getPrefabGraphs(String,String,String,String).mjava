    public PrefabGraph[] getPrefabGraphs(String parentResourceType,
            String parentResource,
            String resourceType,
            String resource) {
        GraphResource r;
        
        if ("node".equals(parentResourceType)) {
            int nodeId;
            try {
                nodeId = Integer.parseInt(parentResource);
            } catch (NumberFormatException e) {
                throw new ObjectRetrievalFailureException("Parent resources of resource type node is not numeric: " + parentResource, parentResource);
            }
            r = getResourceForNodeResourceResourceType(nodeId, resource, resourceType);
        } else if ("domain".equals(parentResourceType)) {
            r = getResourceForDomainResourceResourceType(parentResource, resource, resourceType);
        } else {
            throw new ObjectRetrievalFailureException("Does not support parent resource type '" + parentResourceType + "'", parentResourceType);
        }
        
        Set<GraphAttribute> attributes = r.getAttributes();
        
        PrefabGraph[] availablePrefabGraphs = getQueries();
        return getQueriesByResourceTypeAttributes(resourceType, attributes, availablePrefabGraphs);
    }

