    public List<GraphResource> getResourcesForNode(int nodeId) {
        final String preparedSelect = "SELECT DISTINCT "
            + "ipinterface.ipaddr "
            + "FROM ipinterface "
            + "WHERE ipinterface.nodeid = ?";
        
        LinkedList<DefaultGraphResource> resources = new LinkedList<DefaultGraphResource>();

        try {
            Connection conn = Vault.getDbConnection();

            try {
                PreparedStatement stmt = conn.prepareStatement(preparedSelect);
                stmt.setInt(1, nodeId);
                ResultSet rs = stmt.executeQuery();

                while (rs.next()) {
                    String ipAddr = rs.getString("ipaddr");
                    
                    File iface = getInterfaceDirectory(ipAddr);
                    
                    if (iface.isDirectory()) {
                        resources.add(createResource(ipAddr));
                    }
                }
                rs.close();
                stmt.close();
            } finally {
                Vault.releaseDbConnection(conn);
            }
        } catch (SQLException e) {
            SQLErrorCodeSQLExceptionTranslator translator =
                new SQLErrorCodeSQLExceptionTranslator();
            throw translator.translate("Getting list of interfaces from the "
                                       + "database for " + nodeId, null, e);

        }
        
        return DefaultGraphResource.sortIntoGraphResourceList(resources);
    }

