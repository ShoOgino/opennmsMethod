    private String makeQueryString(Map map) {
        StringBuffer buffer = new StringBuffer();
        String separator = "?";

        Iterator i = map.keySet().iterator();
        while (i.hasNext()) {
            String key = (String) i.next();
            buffer.append(separator).append(key).append("=").append(Util.encode((String) map.get(key)));
            separator = "&";
        }

        return buffer.toString();
    }

