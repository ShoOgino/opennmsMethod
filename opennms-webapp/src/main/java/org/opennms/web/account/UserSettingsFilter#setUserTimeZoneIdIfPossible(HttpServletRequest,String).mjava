    private void setUserTimeZoneIdIfPossible(HttpServletRequest httpRequest, String userId) {

        Optional<User> user = getUser(userId);
        ZoneId timeZoneId;
        if(user.isPresent()){
            timeZoneId = user.get().getTimeZoneId().orElse(ZoneId.systemDefault());
        } else {
            // set default zone so that the next http request won't run through the same (expensive) logic again
            timeZoneId = ZoneId.systemDefault();
        }
        httpRequest.getSession().setAttribute(CentralizedDateTimeFormat.SESSION_PROPERTY_TIMEZONE_ID, timeZoneId);
    }

