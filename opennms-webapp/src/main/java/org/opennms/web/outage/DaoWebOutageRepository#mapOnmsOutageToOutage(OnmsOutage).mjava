    private Outage mapOnmsOutageToOutage(OnmsOutage onmsOutage) {
        if(onmsOutage != null){
            Outage outage = new Outage();    
            final String outageAddress = str(onmsOutage.getIpAddress());

            outage.outageId = onmsOutage.getId();
            outage.ipAddress = outageAddress;
            outage.hostname = outageAddress;
            outage.lostServiceTime = onmsOutage.getIfLostService();
            outage.regainedServiceTime = onmsOutage.getIfRegainedService();
            outage.serviceId = onmsOutage.getServiceId();
            outage.serviceName = onmsOutage.getMonitoredService() != null ? onmsOutage.getMonitoredService().getServiceName() : "";
            outage.suppressedBy = onmsOutage.getSuppressedBy();
            outage.suppressTime = onmsOutage.getSuppressTime();
            outage.perspectiveLocation = Optional.ofNullable(onmsOutage.getPerspective()).map(OnmsMonitoringLocation::getLocationName).orElse(null);

            // Node-related fields
            outage.nodeId = onmsOutage.getNodeId();
            outage.location = "";
            final OnmsNode node = onmsOutage.getNode();
            if (node != null) {
                outage.nodeLabel = node.getLabel();
                if (node.getLocation() != null) {
                    outage.location = node.getLocation().getLocationName();
                }
            }

            // Event-related fields
            final OnmsEvent event = onmsOutage.getServiceLostEvent();
            outage.lostServiceEventId = 0;
            outage.regainedServiceEventId = 0;
            if (event != null) {
                outage.lostServiceEventId = onmsOutage.getServiceLostEvent().getId();
                if (event.getDistPoller() != null) {
                    outage.eventLocation = event.getDistPoller().getLocation();
                }
            }
            if (onmsOutage.getServiceRegainedEvent() != null) {
                outage.regainedServiceEventId = onmsOutage.getServiceRegainedEvent().getId();
            }
            
            return outage;
        }else{
            return null;
        }
    }

