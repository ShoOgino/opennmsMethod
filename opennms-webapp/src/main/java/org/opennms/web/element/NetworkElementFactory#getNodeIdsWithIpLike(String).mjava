    /**
     * Returns all non-deleted nodes with an IP address like the rule given.
     */
    public static List getNodeIdsWithIpLike(String iplike) throws SQLException {
        if (iplike == null) {
            throw new IllegalArgumentException("Cannot take null parameters.");
        }

        List nodecont = new ArrayList();
        Connection conn = Vault.getDbConnection();

        try {
            PreparedStatement stmt = conn.prepareStatement("SELECT DISTINCT(nodeid) FROM NODE WHERE NODE.NODEID=IPINTERFACE.NODEID AND IPLIKE(IPINTERFACE.IPADDR,?) AND NODETYPE != 'D'");
            stmt.setString(1, iplike);
            ResultSet rs = stmt.executeQuery();

            Integer node = null;
    	    while (rs.next()) {
	            Object element = new Integer(rs.getInt("nodeid"));
	            if (element != null) {
	                node = ((Integer) element);
	            }
	            nodecont.add(node);
	        }
	        rs.close();
            stmt.close();

        } finally {
            Vault.releaseDbConnection(conn);
        }

        return nodecont;
    }

