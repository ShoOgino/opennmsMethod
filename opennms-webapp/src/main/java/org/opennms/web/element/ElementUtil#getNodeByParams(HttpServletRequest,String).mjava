    public static Node getNodeByParams(HttpServletRequest request,
            String nodeIdParam) throws ServletException, SQLException {
        if (request.getParameter(nodeIdParam) == null) {
            throw new MissingParameterException(nodeIdParam, new String[] { "node" });
        }

        String nodeIdString = request.getParameter(nodeIdParam);

        int nodeId;

        try {
            nodeId = Integer.parseInt(nodeIdString);
        } catch (NumberFormatException e) {
            throw new ServletException("Wrong data type for \""
                    + nodeIdParam + "\" "
                    + "(value: \"" + nodeIdString
                    + "\"), should be integer", e);
        }

        Node node = NetworkElementFactory.getNode(nodeId);

        if (node == null) {
            //handle this WAY better, very awful
            throw new ServletException("No such node in database");
        }
        
        return node;
}

