    @Override
    public void contextDestroyed(ServletContextEvent event) {
        try {
            m_service.destroy();
            // Clean up the old Karaf temp directory
            FileUtils.deleteDirectory(new File(event.getServletContext().getRealPath("/") + File.separator + "WEB-INF" + File.separator + "karaf" + File.separator + "data"));
        } catch (Exception e) {
            LogUtils.errorf(this, e, "Could not start up OSGi container: %s", e.getMessage());
        }
    }

