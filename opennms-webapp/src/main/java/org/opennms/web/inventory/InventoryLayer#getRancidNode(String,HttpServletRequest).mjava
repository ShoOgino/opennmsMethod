   // NEW CODE
   static public Map<String, Object> getRancidNode(String rancidName, HttpServletRequest request) throws RancidApiException{
        
         try {
            
            log().debug("getRancidNode " + rancidName);
            


            
            Map<String, Object> nodeModel = new TreeMap<String, Object>();
            
            List<RancidNodeWrapper> ranlist = new ArrayList<RancidNodeWrapper>();
            
            // Group list            
            RWSResourceList groups = RWSClientApi.getRWSResourceGroupsList(_URL);
            
            List<String> grouplist = groups.getResource();
            Iterator<String> iter1 = grouplist.iterator();
            
          
            String groupname;
            boolean first = true;
            while (iter1.hasNext()){
                groupname = iter1.next();
                try {
                    RancidNode rn = RWSClientApi.getRWSRancidNodeInventory(_URL ,groupname, rancidName);
                    String vs = rn.getHeadRevision();
                    InventoryNode in = (InventoryNode)rn.getNodeVersions().get(vs);

                    RancidNodeWrapper rnw = new RancidNodeWrapper(rn.getDeviceName(), groupname, rn.getDeviceType(), rn.getComment(), rn.getHeadRevision(),
                      rn.getTotalRevisions(), in.getCreationDate(), rn.getRootConfigurationUrl());
                    if (first) {
                        nodeModel.put("devicename", rn.getDeviceName());
                        nodeModel.put("status", rn.getState());
                        nodeModel.put("devicetype", rn.getDeviceType());
                        nodeModel.put("comment", rn.getComment());
                        first = false;
                    }
                    ranlist.add(rnw); 

                }
                catch (RancidApiException e){
                    //skip node not found in group...
                }
            }
            
            //Groups invariant            
            nodeModel.put("grouptable", ranlist);
            nodeModel.put("url", _URL);
            
            //CLOGIN
            if (request.isUserInRole(Authentication.ADMIN_ROLE)) {

                RancidNodeAuthentication rn5 = RWSClientApi.getRWSAuthNode(_URL,rancidName);
                nodeModel.put("isadmin", "true");
                nodeModel.put("cloginuser", rn5.getUser());
                nodeModel.put("cloginpassword", rn5.getPassword());
                nodeModel.put("cloginconnmethod", rn5.getConnectionMethodString());
                nodeModel.put("cloginenablepass", rn5.getEnablePass());
                String autoen = "0";
                if (rn5.isAutoEnable()){
                    autoen = "1";
                }
                nodeModel.put("cloginautoenable", autoen);
            }
            
            return nodeModel;
        }
        catch (RancidApiException e) {
            throw e;
        }
    }

