   // NEW CODE
   static public Map<String, Object> getRancidNode(String rancidName, String userRole) throws RancidApiException{
        
        try {
            
            String url = "http://www.rionero.com/rws-current";
            
            Map<String, Object> nodeModel = new TreeMap<String, Object>();
            
            List<RancidNodeWrapper> ranlist = new ArrayList<RancidNodeWrapper>();
            
            // Group list            
            RWSResourceList groups = RWSClientApi.getRWSResourceGroupsList(url);
            
            List<String> grouplist = groups.getResource();
            Iterator iter1 = grouplist.iterator();
            
          
            String groupname;
            boolean first = true;
            while (iter1.hasNext()){
                groupname = (String)iter1.next();
                try {
                    RancidNode rn = RWSClientApi.getRWSRancidNodeInventory(url ,groupname, rancidName);
                    String vs = rn.getHeadRevision();
                    InventoryNode in = (InventoryNode)rn.getNodeVersions().get(vs);

                    RancidNodeWrapper rnw = new RancidNodeWrapper(rn.getDeviceName(), groupname, rn.getDeviceType(), rn.getComment(), rn.getHeadRevision(),
                      rn.getTotalRevisions(), in.getExpirationDate(), rn.getRootConfigurationUrl());
                    if (first) {
                        nodeModel.put("devicename", rn.getDeviceName());
                        nodeModel.put("status", rn.getState());
                        nodeModel.put("devicetype", rn.getDeviceType());
                        nodeModel.put("comment", rn.getComment());
                        first = false;
                    }
                    ranlist.add(rnw); 

                }
                catch (RancidApiException e){
                    //skip node not found in group...
                }
            }
            //FAKE GROUP
            RancidNode rn1 = RWSClientApi.getRWSRancidNode(url ,"laboratorio", rancidName);
            rn1.setGroup("fakegroup");
            Date dc = new Date();
            RancidNodeWrapper rnw2 = new RancidNodeWrapper(rn1.getDeviceName(), rn1.getGroup(), rn1.getDeviceType(), rn1.getComment(), rn1.getHeadRevision(),
                                                          rn1.getTotalRevisions(), dc, rn1.getRootConfigurationUrl());
            ranlist.add(rnw2);
            
            //Groups invariant            
            nodeModel.put("grouptable", ranlist);
            nodeModel.put("url", url);
            
            //CLOGIN
            if (userRole.compareTo("admin") == 0){
                RancidNodeAuthentication rn5 = RWSClientApi.getRWSAuthNode(url,rancidName);
                //System.out.println("rn5 " + rn5.getUser() + rn5.getPassword()+rn5.getConnectionMethodString());
                nodeModel.put("cloginuser", rn5.getUser());
                nodeModel.put("cloginpassword", rn5.getPassword());
                nodeModel.put("cloginconnmethod", rn5.getConnectionMethodString());
            }
            
            return nodeModel;
        }
        catch (RancidApiException e) {
            throw e;
        }
    }

