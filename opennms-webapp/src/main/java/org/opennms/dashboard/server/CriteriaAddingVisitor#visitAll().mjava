    public void visitAll() {
        View view = getView();

        List<Category> columnCategories = new ArrayList<Category>();
        List<Category> rowCategories = new ArrayList<Category>();
        
        List<ColumnDef> columnDefs = getColumnDefs(view.getColumns());
        for (ColumnDef columnDef : columnDefs) {
            columnCategories.addAll(getCategories(columnDef));
        }

        List<RowDef> rowDefs = getRowDefs(view.getRows());
        for (RowDef rowDef : rowDefs) {
            rowCategories.addAll(getCategories(rowDef));
        }
        
        Set<String> categoryNames = new HashSet<String>();
        for (Category category : columnCategories) {
            categoryNames.add(category.getName());
        }
        
        addCriteriaForCategories(m_criteria, categoryNames.toArray(new String[categoryNames.size()]));
    }

