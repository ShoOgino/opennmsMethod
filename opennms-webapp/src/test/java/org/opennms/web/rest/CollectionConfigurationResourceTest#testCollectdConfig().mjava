    @Test
    public void testCollectdConfig() throws Exception {
        sendRequest(GET, "/config/foo/collection", 404);

        String xml = sendRequest(GET, "/config/RDU/collection", 200);
        assertFalse(xml.contains("vmware3"));
        assertFalse(xml.contains("example2"));
        assertTrue(xml.contains("JBoss4"));

        CollectdConfiguration config = JaxbUtils.unmarshal(CollectdConfiguration.class, xml);
        assertNotNull(config);
        assertEquals(1, config.getPackages().size());
        assertEquals("example1", config.getPackages().get(0).getName());
        assertEquals(4, config.getCollectors().size());

        xml = sendRequest(GET, "/config/00002/collection", 404);

        xml = sendRequest(GET, "/config/00003/collection", 200);
        config = JaxbUtils.unmarshal(CollectdConfiguration.class, xml);
        assertNotNull(config);
        assertEquals(1, config.getPackages().size());
        assertEquals("example2", config.getPackages().get(0).getName());
        assertEquals(1, config.getCollectors().size());
    }

