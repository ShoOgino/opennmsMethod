    @Test
    public void testSimpleFilter() throws Exception {
        final InetAddress oneNinetyTwo = addr("192.168.0.1");

        final List<InetAddress> addresses = Arrays.asList(oneNinetyTwo);
        m_filterDao.setActiveIPAddressList(addresses);

        final OnmsIpInterface iface = new OnmsIpInterface(oneNinetyTwo, null);
        final OnmsServiceType serviceType = new OnmsServiceType("SNMP");
        final OnmsMonitoredService service = new OnmsMonitoredService(iface, serviceType);
        m_monitoredServiceDao.setMatching(Arrays.asList(service));

        final Response response = m_configResource.getAgentsForService("example1", "SNMP");
        assertEquals(200, response.getStatus());
        @SuppressWarnings("unchecked")
        final List<AgentResponse> agentResponses = (List<AgentResponse>)response.getEntity();
        assertNotNull(agentResponses);
        assertEquals(1, agentResponses.size());
        assertEquals(oneNinetyTwo, agentResponses.get(0).getAddress());
        assertEquals(1161, agentResponses.get(0).getPort().intValue());
    }

