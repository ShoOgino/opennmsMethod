    @Test
    public void testUpdateConfig() throws Exception {

        assertAgentConfig(getAgentConfig("192.168.1.3"), "192.168.1.3", 9161, 1, 2000, "myPublic", 100, SnmpConfiguration.VERSION1);
        assertAgentConfig(getAgentConfig("192.168.1.7"), "192.168.1.7", 9161, 1, 2000, "myPublic", 100, SnmpConfiguration.VERSION1);
        
        
        SnmpAgentConfig dot3config = getAgentConfig("192.168.1.3");
        dot3config.setReadCommunity("new");
        dot3config.setTimeout(1000);
        dot3config.setVersion(SnmpConfiguration.VERSION2C);
        
        setAgentConfig("192.168.1.3", dot3config);
        		
        assertAgentConfig(getAgentConfig("192.168.1.3"), "192.168.1.3", 9161, 1, 1000, "new", 100, SnmpConfiguration.VERSION2C);
        assertAgentConfig(getAgentConfig("192.168.1.7"), "192.168.1.7", 9161, 1, 2000, "myPublic", 100, SnmpConfiguration.VERSION1);

    }

