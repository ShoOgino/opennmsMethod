	public void testGetByUsernameAdmin() {
		UserDaoImpl dao = new UserDaoImpl();
		
		dao.setUsersConfigurationFile(ClassLoader.getSystemResource("org/opennms/web/acegisecurity/users.xml").getFile());
		dao.setMagicUsersConfigurationFile(ClassLoader.getSystemResource("org/opennms/web/acegisecurity/magic-users.properties").getFile());
		
		User user = dao.getByUsername("admin");
		assertNotNull("user object should not be null", user);
		assertEquals("User name", "admin", user.getUsername());
		assertEquals("Full name", null, user.getFullName());
		assertEquals("Comments", null, user.getComments());
		assertEquals("Password", "21232F297A57A5A743894A0E4A801FC3", user.getPassword());
		
		GrantedAuthority[] authorities = user.getAuthorities();
		assertNotNull("authorities should not be null", authorities);
		assertEquals("authorities size", 3, authorities.length);
		assertEquals("authorities 0 name", "ROLE_USER", authorities[0].getAuthority());
		assertEquals("authorities 1 name", "ROLE_RTC", authorities[1].getAuthority());
		assertEquals("authorities 2 name", "ROLE_ADMIN", authorities[2].getAuthority());
	}

