	@Before
	public void setUp() throws Exception {
		SecurityContext context = new SecurityContextImpl();
		User principal = new User(USERNAME, PASS, true, true, true, true,
				Arrays.asList(new GrantedAuthority[] { ROLE_ADMIN, ROLE_PROVISION }));
		org.springframework.security.core.Authentication auth = new PreAuthenticatedAuthenticationToken(
				principal, new Object());
		context.setAuthentication(auth);
		SecurityContextHolder.setContext(context);

		m_controller.setRedirectView("REDIRECTED");
		m_controller.setSuccessView("REDIRECTED");
		m_controller.setNodeProvisionService(new DefaultNodeProvisionService());
		m_controller.setServletContext(new MockServletContext());
		m_controller.afterPropertiesSet();
	}

