    @Test
    public void testScheduleAndRun() throws SchedulerException, InterruptedException {
        DeliveryOptions deliveryOptions = new DeliveryOptions();
        deliveryOptions.setInstanceId("testScheduleAndRunTrigger");
        expect(m_reportWrapperService.validate(m_criteria, REPORT_ID)).andReturn(true);
        m_reportWrapperService.run(m_criteria, ReportMode.SCHEDULED, deliveryOptions, REPORT_ID);
        replay(m_reportWrapperService);
        SchedulerRequestContext context = EasyMock.createNiceMock(SchedulerRequestContext.class);
        assertEquals("success", m_schedulerService.addCronTrigger(REPORT_ID, m_criteria, deliveryOptions, CRON_EXPRESSION, context));
        // give the trigger a chance to fire (one minute)
        Thread.sleep(61000);
        m_schedulerService.removeTrigger("testScheduleAndRunTrigger");
        verify(m_reportWrapperService);
        m_schedulerService.removeTrigger("testScheduleAndRunTrigger");
        assertEquals(0, m_scheduler.getTriggerKeys(GroupMatcher.<TriggerKey>groupEquals(TRIGGER_GROUP)).size());
    }

