    public void testCreateAggregateStatusUsingBuilding() {
        
        Collection<AggregateStatus> aggrStati;
        Collection<AggregateStatusDefinition> defs = new ArrayList<AggregateStatusDefinition>();
        
        AggregateStatusDefinition definition;
        definition = new AggregateStatusDefinition("LB/Router", Arrays.asList(new OnmsCategory[]{ new OnmsCategory("DEV_ROUTER"), new OnmsCategory("DEV_LOADBAL") }));
        defs.add(definition);        
        definition = new AggregateStatusDefinition("Access Controller", Arrays.asList(new OnmsCategory[]{ new OnmsCategory("DEV_AC") }));
        defs.add(definition);
        definition = new AggregateStatusDefinition("Switches", Arrays.asList(new OnmsCategory[]{ new OnmsCategory("DEV_SWITCH") }));
        defs.add(definition);
        definition = new AggregateStatusDefinition("Access Points", Arrays.asList(new OnmsCategory[]{ new OnmsCategory("DEV_AP") }));
        defs.add(definition);
        definition = new AggregateStatusDefinition("BCPC", Arrays.asList(new OnmsCategory[]{ new OnmsCategory("DEV_BCPC") }));
        defs.add(definition);
        
        String assetColumn = "building";
        String buildingName = "HAT102706";
        
        aggrStati = m_aggregateService.createAggregateStatusUsingAssetColumn(assetColumn, buildingName, defs);
        
        AggregateStatus status;
        status = (AggregateStatus)((ArrayList)aggrStati).get(0);
        assertEquals(status.getStatus(), AggregateStatus.NODES_ARE_DOWN);
        
        status = (AggregateStatus)((ArrayList)aggrStati).get(1);
        assertEquals(status.getStatus(), AggregateStatus.ALL_NODES_UP);
        
        status = (AggregateStatus)((ArrayList)aggrStati).get(2);
        assertEquals(status.getStatus(), AggregateStatus.NODES_ARE_DOWN);

        status = (AggregateStatus)((ArrayList)aggrStati).get(3);
        assertEquals(status.getStatus(), AggregateStatus.NODES_ARE_DOWN);
        assertEquals(new Integer(6), status.getDownEntityCount());
        
        status = (AggregateStatus)((ArrayList)aggrStati).get(4);
        assertEquals(status.getStatus(), AggregateStatus.ALL_NODES_UP);

    }

