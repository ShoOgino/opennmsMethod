    public void checkFilteringAndSorting(final SortStyle sortStyle, final List<Filter> filterList, final int limit, final int multiple, final int expectedCount, final int expectedResults) {
        final AlarmQueryParms parms = new AlarmQueryParms();
        parms.ackType = AcknowledgeType.UNACKNOWLEDGED;
        parms.display = null;
        parms.filters = filterList;
        parms.limit = limit;
        parms.multiple = multiple;
        // apply the sort style
        parms.sortStyle = sortStyle;

        final AlarmCriteria queryCriteria = new AlarmCriteria(parms);
        final AlarmCriteria countCriteria = new AlarmCriteria(filterList, AcknowledgeType.UNACKNOWLEDGED);

        // get alarm entities
        final OnmsAlarm[] alarms = m_daoAlarmRepo.getMatchingAlarms(AlarmUtil.getOnmsCriteria(queryCriteria));
        // get alarm count
        final long alarmCount = m_daoAlarmRepo.countMatchingAlarms(AlarmUtil.getOnmsCriteria(countCriteria));

        // check expected values
        assertEquals(expectedCount, alarmCount);
        assertEquals(expectedResults, alarms.length);
        // check that the entity is populated with values
        assertNotNull(alarms[0].getId());
    }

