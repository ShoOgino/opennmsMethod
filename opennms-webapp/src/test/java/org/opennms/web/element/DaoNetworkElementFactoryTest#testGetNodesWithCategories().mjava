    @Test
    public void testGetNodesWithCategories() {
        Set<OnmsCategory> cats = new HashSet<OnmsCategory>();
        cats.add(m_dbPopulator.getCategoryDao().get(1));
        
        OnmsNode node1 = m_dbPopulator.getNode1();
        node1.setType("A");
        node1.setCategories(cats);
        
        m_dbPopulator.getNodeDao().saveOrUpdate(node1);
        
        List<String> categories = new ArrayList<String>();
        categories.add("Routers");
        
        
        assertEquals(1, getNetworkElementFactory().getNodesWithCategories(categories.toArray(new String[categories.size()]), false).length);
        assertEquals(1, getNetworkElementFactory().getNodesWithCategories(new TransactionTemplate(), categories.toArray(new String[categories.size()]), false).length);
    }

