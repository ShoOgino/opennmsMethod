	@Test
	public void testSaveOrUpdate() {
		OnmsNode onmsNode = new OnmsNode(m_distPollerDao.load("localhost"));
		onmsNode.setLabel("myNode");
		m_nodeDao.save(onmsNode);
		OnmsAssetRecord assetRecord = onmsNode.getAssetRecord();
		assetRecord.setAssetNumber("imported-id: " + onmsNode.getId());
		assetRecord.setAdmin("supermario");
		assetRecord.setLastModifiedDate(new Date());
		assetRecord.getGeolocation().setAddress1("220 Chatham Business Drive");
                assetRecord.getGeolocation().setCity("Pittsboro");
                assetRecord.getGeolocation().setState("NC");
                assetRecord.getGeolocation().setZip("27312");
                assetRecord.getGeolocation().setCountry("US");
                assetRecord.getGeolocation().setLatitude(35.717582f);
                assetRecord.getGeolocation().setLongitude(-79.161800f);
		m_assetRecordDao.update(assetRecord);
		m_assetRecordDao.flush();

		AssetCommand assetCommand = new AssetCommand();
		BeanUtils.copyProperties(assetRecord, assetCommand);

		LOG.debug("AssetCommand (Source): " + assetCommand);
		LOG.debug("Asset to Save (Target): " + assetRecord);

		AssetServiceImpl assetServiceImpl = new AssetServiceImpl();
		assetServiceImpl.setNodeDao(m_nodeDao);
		assetServiceImpl.setAssetRecordDao(m_assetRecordDao);
		assertTrue(assetServiceImpl.saveOrUpdateAssetByNodeId(onmsNode.getId(), assetCommand));
		
		OnmsAssetRecord updated = m_assetRecordDao.get(assetRecord.getId());
		assertEquals(assetRecord.getGeolocation().getAddress1(), updated.getGeolocation().getAddress1());
                assertEquals(assetRecord.getGeolocation().getState(), updated.getGeolocation().getState());
                assertEquals(assetRecord.getGeolocation().getCity(), updated.getGeolocation().getCity());
                assertEquals(assetRecord.getGeolocation().getZip(), updated.getGeolocation().getZip());
                assertEquals(assetRecord.getGeolocation().getCountry(), updated.getGeolocation().getCountry());
                assertEquals(assetRecord.getGeolocation().getLongitude(), updated.getGeolocation().getLongitude());
                assertEquals(assetRecord.getGeolocation().getLatitude(), updated.getGeolocation().getLatitude());
	}

