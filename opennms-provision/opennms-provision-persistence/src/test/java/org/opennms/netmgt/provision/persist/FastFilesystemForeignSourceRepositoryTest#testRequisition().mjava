    @Test
    public void testRequisition() throws Exception {
        createRequisition();
        Requisition r = m_foreignSourceRepository.getRequisition(m_defaultForeignSourceName);
        TestVisitor v = new TestVisitor();
        r.visit(v);
        assertEquals("number of nodes visited", 2, v.getNodeReqs().size());
        assertEquals("node name matches", "apknd", v.getNodeReqs().get(0).getNodeLabel());

        // Modifying the requisition outside the repository and verifying that the repository cache was updated.
        modifyRequisition();
        r = m_foreignSourceRepository.getRequisition(m_defaultForeignSourceName);
        v = new TestVisitor();
        r.visit(v);
        assertEquals("number of nodes visited", 3, v.getNodeReqs().size());
        assertEquals("node name matches", "apknd_2", v.getNodeReqs().get(0).getNodeLabel());
        assertEquals("node name matches", "wan0", v.getNodeReqs().get(1).getNodeLabel());
        assertEquals("node name matches", "utility-robot", v.getNodeReqs().get(2).getNodeLabel());

        // Removing the requisition outside the repository and verifying that the repository cache was updated.
        deleteRequisition();
        r = m_foreignSourceRepository.getRequisition(m_defaultForeignSourceName);
        Assert.assertNull(r);
    }

