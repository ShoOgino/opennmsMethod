    @Override
    public void flush() throws ForeignSourceRepositoryException {
        LogUtils.debugf(this, "flushing queue");
        // wait for everything currently in the queue to complete

        final CountDownLatch latch = new CountDownLatch(1);
        m_executor.execute(new Runnable() {
            @Override
            public void run() {
                latch.countDown();
            }
        });
        try {
            latch.await();
        } catch (final InterruptedException e) {
            LogUtils.debugf(this, e, "Interrupted while waiting for ForeignSourceRepository flush.  Returning.");
            return;
        }
        LogUtils.debugf(this, "finished flushing queue");
    }

