    /**
     * <p>save</p>
     *
     * @param requisition a {@link org.opennms.netmgt.provision.persist.requisition.Requisition} object.
     * @throws org.opennms.netmgt.provision.persist.ForeignSourceRepositoryException if any.
     */
    public void save(final Requisition requisition) throws ForeignSourceRepositoryException {
        if (requisition == null) {
            throw new ForeignSourceRepositoryException("can't save a null requisition!");
        }
        m_writeLock.lock();
        try {
            final File outputFile = getOutputFileForRequisition(requisition);
            Writer writer = null;
            try {
                if (m_updateDateStamps) {
                    requisition.updateDateStamp();
                }
                writer = new OutputStreamWriter(new FileOutputStream(outputFile), "UTF-8");
                getMarshaller(Requisition.class).marshal(requisition, writer);
            } catch (final Exception e) {
                throw new ForeignSourceRepositoryException("unable to write requisition to " + outputFile.getPath(), e);
            } finally {
                IOUtils.closeQuietly(writer);
            }
        } finally {
            m_writeLock.unlock();
        }
    }

