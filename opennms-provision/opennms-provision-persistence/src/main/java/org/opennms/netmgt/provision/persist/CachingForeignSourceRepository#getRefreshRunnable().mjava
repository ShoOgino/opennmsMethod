	protected Runnable getRefreshRunnable() {
		return new Runnable() {
			@Override
			public void run() {
				writeLock();
				try {

					// clear foreign source name cache
					m_foreignSourceNames = null;
					
					// clear the foreign source cache
					if (m_dirtyForeignSources.size() > 0) {
						for (final String dirtyForeignSource : m_dirtyForeignSources) {
							final ForeignSource fs = m_foreignSources.get(dirtyForeignSource);
							if (fs == null) {
								m_foreignSourceRepository.delete(fs);
							} else {
								m_foreignSourceRepository.save(fs);
							}
						}
						m_dirtyForeignSources.clear();
					}
					m_foreignSources = null;

					// clear the requisition cache
					if (m_dirtyRequisitions.size() > 0) {
						for (final String dirtyRequisition : m_dirtyRequisitions) {
							final Requisition r = m_requisitions.get(dirtyRequisition);
							if (r == null) {
								m_foreignSourceRepository.delete(r);
							} else {
								m_foreignSourceRepository.save(r);
							}
						}
						m_dirtyForeignSources.clear();
					}
					m_requisitions = null;

				} finally {
					writeUnlock();
				}
			}
		};
	}

