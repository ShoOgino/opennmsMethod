    /** {@inheritDoc} */
    public void save(final ForeignSource foreignSource) throws ForeignSourceRepositoryException {
        if (foreignSource == null) {
            throw new ForeignSourceRepositoryException("can't save a null foreign source!");
        }
        m_writeLock.lock();
        try {
            if (foreignSource.getName().equals("default")) {
                putDefaultForeignSource(foreignSource);
                return;
            }
            final File outputFile = getOutputFileForForeignSource(foreignSource);
            Writer writer = null;
            try {
                if (m_updateDateStamps) {
                    foreignSource.updateDateStamp();
                }
                writer = new OutputStreamWriter(new FileOutputStream(outputFile), "UTF-8");
                getMarshaller(ForeignSource.class).marshal(foreignSource, writer);
            } catch (final Exception e) {
                throw new ForeignSourceRepositoryException("unable to write requisition to " + outputFile.getPath(), e);
            } finally {
                IOUtils.closeQuietly(writer);
            }
        } finally {
            m_writeLock.unlock();
        }
    }

