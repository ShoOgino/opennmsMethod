    private boolean checkForAttribute(ManagedEntity managedEntity) throws RemoteException {
        String key = getArgs().get("key");
        String value = getArgs().get("value");

        if (key == null && value == null)
            return true;

        if (key == null || value == null)
            return false;

        CustomFieldValue[] values = managedEntity.getCustomValue();
        CustomFieldDef[] defs = managedEntity.getAvailableField();

        for (int i = 0; defs != null && i < defs.length; i++) {
            if (key.equals(defs[i].getName())) {

                int targetIndex = defs[i].getKey();

                for (int j = 0; j < values.length; j++) {
                    if (targetIndex == values[j].getKey()) {
                        return value.equals(((CustomFieldStringValue)values[j]).value);
                    }
                }
            }
        }
        return false;
    }

