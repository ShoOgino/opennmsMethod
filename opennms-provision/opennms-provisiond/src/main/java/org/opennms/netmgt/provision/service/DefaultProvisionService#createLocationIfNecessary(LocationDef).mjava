    public LocationDef createLocationIfNecessary(LocationDef scannedLocation) {

        final LocationDef location;
        if (scannedLocation == null) {
            location = new LocationDef();
            location.setLocationName("localhost");
        } else {
            location = scannedLocation;
        }

        return new CreateIfNecessaryTemplate<LocationDef, MonitoringLocationDao>(m_transactionManager, m_monitoringLocationDao) {

            @Override
            protected LocationDef query() {
                return m_dao.get(location.getLocationName());
            }

            @Override
            public LocationDef doInsert() {
                m_dao.save(location);
                m_dao.flush();
                return location;
            }
        }.execute();
    }

