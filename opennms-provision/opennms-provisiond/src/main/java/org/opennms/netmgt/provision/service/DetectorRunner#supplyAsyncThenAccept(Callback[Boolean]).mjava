    /** {@inheritDoc} */
    @Override
    public void supplyAsyncThenAccept(final Callback<Boolean> cb) {
        try {
            LOG.info("Attemping to detect service {} on address {} at location {}", m_detectorConfig.getName(),
                    getHostAddress(), getLocationName());
            // Launch the detector
            if(!LocationUtils.isDefaultLocationName(getLocationName())) {
                startSpan();
            }
            m_service.getLocationAwareDetectorClient().detect().withClassName(m_detectorConfig.getPluginClass())
                    .withAddress(m_address).withNodeId(m_nodeId).withLocation(getLocationName())
                    .withAttributes(m_detectorConfig.getParameters().stream()
                            .collect(Collectors.toMap(PluginParameter::getKey, PluginParameter::getValue)))
                    .withParentSpan(m_span)
                    .withPreDetectCallback(this::startSpan)
                    .execute()
                    // After completion, run the callback
                    .whenComplete((res, ex) -> {
                        LOG.info("Completed detector execution for service {} on address {} at location {}",
                                m_detectorConfig.getName(), getHostAddress(), getLocationName());
                        if (ex != null) {
                            cb.handleException(ex);
                            if(m_span != null) {
                                m_span.log(ex.getMessage());
                                m_span.setTag(ERROR, true);
                            }
                        } else {
                            cb.accept(res);
                        }
                        if(m_span != null) {
                            m_span.finish();
                        }
                    });
        } catch (Throwable e) {
            cb.handleException(e);
        }
    }

