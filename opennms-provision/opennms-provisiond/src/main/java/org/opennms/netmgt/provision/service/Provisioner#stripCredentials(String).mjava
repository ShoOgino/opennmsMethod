    /**
     * Strips credentials from the given resource URL. See issue NMS-9535.
     *
     * @param string the URL
     * @return the URL with masked username/password values
     */
    static String stripCredentials(final String string) {
        if (string == null) {
            return null;
        } else {
            return string.replaceAll("(username=)[^;&]*(;&)?", "$1***$2")
                         .replaceAll("(password=)[^;&]*(;&)?", "$1***$2");
        }
    }

