    @Activity( lifecycle = "import", phase = "relate" )
    public Task relateNodes(final LifeCycleInstance lifeCycle) {
        
        
        System.out.println("Running relate phase");
        
        final SpecFile specFile = lifeCycle.getAttribute("specFile", SpecFile.class);

        final BatchTask batch = new BatchTask(lifeCycle.getCoordinator());
        
        ImportVisitor visitor = new AbstractImportVisitor() {
            public void visitNode(Node node) {
                System.out.println("Scheduling relate of node "+node);
                batch.add(parentSetter(node, specFile.getForeignSource()));
            }
        };
        
        specFile.visitImport(visitor);
        
        System.out.println("Finished Running relate phase");

        return batch;
    }

