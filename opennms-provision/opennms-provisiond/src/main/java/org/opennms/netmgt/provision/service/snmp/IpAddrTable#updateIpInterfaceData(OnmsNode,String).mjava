    /**
     * @param node
     * @param ipAddr
     */
    public void updateIpInterfaceData(OnmsNode node, String ipAddr) {
        OnmsIpInterface ipIf = node.getIpInterfaceByIpAddress(ipAddr);
        if (ipIf == null) {
            ipIf = new OnmsIpInterface(ipAddr, node);
        }
        
        InetAddress inetAddr = ipIf.getInetAddress();
        InetAddress mask = getNetMask(inetAddr);
        Integer ifIndex = getIfIndex(inetAddr);
        
        // first look to see if an snmpIf was created already
        OnmsSnmpInterface snmpIf = node.getSnmpInterfaceWithIfIndex(ifIndex);
        
        if (snmpIf == null) {
            // if not then create one
            snmpIf = new OnmsSnmpInterface(ipAddr, ifIndex, node);
        }
    
        // make sure the snmpIf has the ipAddr of the primary interface
        snmpIf.setIpAddress(ipAddr);
        if (mask != null) {
            snmpIf.setNetMask(mask.getHostAddress());
        }
        
        ipIf.setIpHostName(ipAddr);
        ipIf.setSnmpInterface(snmpIf);
    }

