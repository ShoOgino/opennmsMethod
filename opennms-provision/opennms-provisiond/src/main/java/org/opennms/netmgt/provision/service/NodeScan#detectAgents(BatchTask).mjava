    /**
     * <p>detectAgents</p>
     *
     * @param currentPhase a {@link org.opennms.core.tasks.BatchTask} object.
     */
    public void detectAgents(BatchTask currentPhase) {
        
        if (!isAborted()) {
            OnmsIpInterface primaryIface = m_provisionService.getPrimaryInterfaceForNode(getNode());
            if (primaryIface != null && primaryIface.getMonitoredServiceByServiceType("SNMP") != null) {
                LogUtils.debugf(this, "Found primary interface and SNMP service!");
                onAgentFound(currentPhase, primaryIface);
            } else {
                LogUtils.debugf(this, "Failed to find primary interface and SNMP service!");
            }
        }
    }

