    /** {@inheritDoc} */
    @Override
    public void run(BatchTask phase) {
        if (m_parentSpan != null) {
            m_span = m_provisionService.buildAndStartSpan("NodeInfoScan", m_parentSpan.context());
        } else {
            m_span = m_provisionService.buildAndStartSpan("NodeInfoScan", null);
        }
        m_span.setTag(IP_ADDRESS, m_agentAddress.getHostAddress());
        m_span.setTag(LOCATION, getLocationName());
        phase.getBuilder().addSequence(
                new RunInBatch() {
                    @Override
                    public void run(BatchTask batch) {
                        Span span = m_provisionService.buildAndStartSpan("CollectNodeInfo", m_span.context());
                        collectNodeInfo();
                        span.finish();
                    }
                },
                new RunInBatch() {
                    @Override
                    public void run(BatchTask phase) {
                        Span span = m_provisionService.buildAndStartSpan("PersistNodeInfo", m_span.context());
                        doPersistNodeInfo();
                        span.finish();
                        m_span.finish();
                    }
                });

    }

