    @Activity( lifecycle = "nodeScan", phase = "detectAgents" )
    public void detectAgents(Phase currentPhase, OnmsNode node) {
        // someday I'll change this to use agentDetectors
        OnmsIpInterface primaryIface = node.getPrimaryInterface();
        if (primaryIface.getMonitoredServiceByServiceType("SNMP") != null) {
            currentPhase.createNestedLifeCycle("agentScan")
                .setAttribute("agentType", "SNMP")
                .setAttribute("node", node)
                .setAttribute("foreignSource", node.getForeignSource())
                .setAttribute("foreignId", node.getForeignId())
                .setAttribute("primaryAddress", primaryIface.getInetAddress())
                .trigger();
        }
        
    }

