    public Callback<Boolean> servicePersister(final ContainerTask<?> currentPhase, final String serviceName) {
        return new Callback<Boolean>() {
            public void complete(Boolean serviceDetected) {
                infof(this, "Attempted to detect service %s on address %s: %s", serviceName, getAddress().getHostAddress(), serviceDetected);
                if (serviceDetected) {
                    OnmsMonitoredService svc = getProvisionService().addMonitoredService(getNodeId(), getAddress().getHostAddress(), serviceName);
                    
                    if ("SNMP".equals(serviceName)) {
                        getProvisionService().setInterfaceIsPrimaryFlag(svc);
                    }
                }
            }
            public void handleException(Throwable t) {
                infof(this, t, "Exception occurred trying to detect service %s on address %s", serviceName, getAddress().getHostAddress());
            }
        };
    }

