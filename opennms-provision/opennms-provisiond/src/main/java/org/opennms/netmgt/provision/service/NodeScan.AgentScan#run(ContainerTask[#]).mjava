        @Override
        public void run(final ContainerTask<?> parent) {
            //AgentScan
            Span agentScanSpan = m_provisionService.buildAndStartSpan("AgentScan", m_span.context());
            this.setSpan(agentScanSpan);
            parent.getBuilder().addSequence(
                                            new NodeInfoScan(getNode(),getAgentAddress(), getForeignSource(), getLocation(), this, getAgentConfigFactory(), getProvisionService(), getNodeId(), agentScanSpan),
                                            new RunInBatch() {
                                                @Override
                                                public void run(final BatchTask phase) {
                                                    Span span = m_provisionService.buildAndStartSpan("DetectPhysicalInterfaces", agentScanSpan.context());
                                                    detectPhysicalInterfaces(phase);
                                                    span.finish();
                                                }
                                            },
                                            new RunInBatch() {
                                                @Override
                                                public void run(final BatchTask phase) {
                                                    Span span = m_provisionService.buildAndStartSpan("DetectIpAddressTable", agentScanSpan.context());
                                                    detectIpAddressTable(phase);
                                                    span.finish();
                                                }
                                            },
                                            new RunInBatch() {
                                                @Override
                                                public void run(final BatchTask phase) {
                                                    Span span = m_provisionService.buildAndStartSpan("DetectIpInterfaceTable", agentScanSpan.context());
                                                    detectIpInterfaceTable(phase);
                                                    span.finish();
                                                }
                                            },
                                            new RunInBatch() {
                                                @Override
                                                public void run(final BatchTask phase) {
                                                    Span span = m_provisionService.buildAndStartSpan("DeleteObsoleteResources", agentScanSpan.context());
                                                    deleteObsoleteResources();
                                                    span.finish();
                                                }
                                            },
                                            new RunInBatch() {
                                                @Override
                                                public void run(final BatchTask phase) {
                                                    Span span = m_provisionService.buildAndStartSpan("AgentScan-completed-event", agentScanSpan.context());
                                                    completed();
                                                    span.finish();
                                                }
                                            }
                    );
            agentScanSpan.finish();
        }

