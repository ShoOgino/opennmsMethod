    @Test(timeout=300000)
    public void testProvisionerUpdateScheduleAfterImport() throws Exception {
        importFromResource("classpath:/tec_dump.xml.smalltest", Boolean.TRUE.toString());
        getScanExecutor().pause();

        List<NodeScanSchedule> schedulesForNode = m_provisionService.getScheduleForNodes();
        assertEquals(10, schedulesForNode.size());
        m_provisioner.scheduleRescanForExistingNodes();
        assertEquals(10, m_provisioner.getScheduleLength());

        //reimport with one missing node
        getScanExecutor().resume();
        importFromResource("classpath:/tec_dump.xml.smalltest.delete", Boolean.TRUE.toString());
        getScanExecutor().pause();

        m_provisioner.scheduleRescanForExistingNodes();
        schedulesForNode = m_provisionService.getScheduleForNodes();

        m_provisioner.scheduleRescanForExistingNodes();

        //check the schedule to make sure that it deletes the node
        assertEquals(schedulesForNode.size(), m_provisioner.getScheduleLength());
        assertEquals(getNodeDao().countAll(), m_provisioner.getScheduleLength());

    }

