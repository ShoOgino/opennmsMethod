    @Test(timeout=300000)
    public void testProvisionerAddNodeToSchedule() throws Exception{
        final int nextNodeId = m_nodeDao.getNextNodeId();

        m_provisioner.scheduleRescanForExistingNodes();
        assertEquals(0, m_provisioner.getScheduleLength());

        final OnmsNode node = createNode("empty");
        assertEquals(nextNodeId, node.getId().intValue());

        assertNotNull(m_nodeDao.get(nextNodeId));

        final EventBuilder bldr = new EventBuilder(EventConstants.NODE_ADDED_EVENT_UEI, "Tests");
        bldr.setNodeid(nextNodeId);

        m_mockEventIpcManager.broadcastNow(bldr.getEvent());

        assertEquals(1, m_provisioner.getScheduleLength());
    }

