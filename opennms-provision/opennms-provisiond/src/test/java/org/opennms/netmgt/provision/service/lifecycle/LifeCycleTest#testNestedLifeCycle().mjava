    @Test
    public void testNestedLifeCycle() {

        LifeCycle lifecycle = m_lifeCycleFactory.createLifeCycle("sample");
        lifecycle.setAttribute(MAX_DEPTH, 2);

        lifecycle.trigger();
        
        lifecycle.waitFor();
        
        assertEquals("phase1 phase2start level1.phase1 level1.phase2start level1.phase2end level1.phase3 phase2end phase3 ", lifecycle.getAttribute(NESTED_DATA, String.class));

    }

