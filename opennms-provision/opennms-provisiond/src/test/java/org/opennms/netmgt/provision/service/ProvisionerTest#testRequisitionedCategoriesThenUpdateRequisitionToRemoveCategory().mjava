    @Test(timeout=300000)
    public void testRequisitionedCategoriesThenUpdateRequisitionToRemoveCategory() throws Exception {
        final int nextNodeId = m_nodeDao.getNextNodeId();

        importFromResource("classpath:/provisioner-testCategories-oneCategory.xml", true);
        final NodeScan scan = m_provisioner.createNodeScan(nextNodeId, "empty", "1");
        runScan(scan);

        // make sure we have the 1 category we expect
        OnmsNode n = getNodeDao().get(nextNodeId);
        assertEquals(1, n.getCategories().size());
        assertTrue(n.hasCategory("TotallyMadeUpCategoryName"));

        importFromResource("classpath:/provisioner-testCategories-noCategories.xml", true);
        runScan(scan);

        // when the scan has completed, the category should be removed
        n = getNodeDao().get(nextNodeId);

        assertEquals(0, n.getCategories().size());
    }

