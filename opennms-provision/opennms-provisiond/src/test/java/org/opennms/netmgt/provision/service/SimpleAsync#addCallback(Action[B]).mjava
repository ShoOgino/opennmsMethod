    public void addCallback(Action<B> cb) {
        // we are using atomics so we retry in case someone changes things
        // out from under us
        while(true) {
            // first build the new callback chain
            Action<B> oldCb = m_callback.get();
            Action<B> newCb = (oldCb == COMPLETE ? COMPLETE : new Chain<B>(cb, oldCb));

            // now we set the callback chain ensuring that is the same as it was before
            if (m_callback.compareAndSet(oldCb, newCb)) {
                // if it was marked as completed before then we need to call our callback
                if (oldCb == COMPLETE) {
                    cb.action(m_result.get());
                }
                
                // if we go there then everything worked ok
                return;
            }
        }
    }

