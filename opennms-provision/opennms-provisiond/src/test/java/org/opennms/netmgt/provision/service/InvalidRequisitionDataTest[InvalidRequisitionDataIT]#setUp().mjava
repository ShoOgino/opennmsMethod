    @Before
    public void setUp() throws Exception {
        // clean out any existing nodes
        for (final OnmsNode node : m_nodeDao.findAll()) {
            m_nodeDao.delete(node);
        }
        m_nodeDao.flush();
        for (final OnmsEvent event : m_eventDao.findAll()) {
        	m_eventDao.delete(event);
        }

        MockLogAppender.setupLogging(true, "DEBUG");
        m_anticipator = new EventAnticipator();
        m_eventManager.setEventAnticipator(m_anticipator);
        m_eventManager.setSynchronous(true);
        m_provisioner.start();

        // make sure node scan scheduler is running initially
        getScanExecutor().resume();
        getScheduledExecutor().resume();
    }

