    // fail if we take more than five minutes
    @Test(timeout=300000)
    @JUnitSnmpAgents({
        @JUnitSnmpAgent(host="198.51.100.201", port=161, resource="classpath:snmpTestData3.properties"),
        @JUnitSnmpAgent(host="198.51.100.202", port=161, resource="classpath:snmpTestData4.properties"),
        @JUnitSnmpAgent(host="198.51.100.204", port=161, resource="classpath:snmpTestData4.properties")
    })
    public void testImportAddrThenChangeAddr() throws Exception {
        // Node has 198.51.100.201 as a primary IP address
        importFromResource("classpath:/requisition_then_scan2.xml", Boolean.TRUE.toString());

        runPendingScans();

        m_nodeDao.flush();

        assertEquals(2, getInterfaceDao().countAll());

        System.err.println("-------------------------------------------------------------------------");

        // Wait long enough for the previously discovered interfaces services
        // to become obsolete (the milliseconds are trimmed when comparing the dates)
        Thread.sleep(1000);

        // Node has 198.51.100.202 as a primary IP address
        importFromResource("classpath:/requisition_primary_addr_changed.xml", Boolean.TRUE.toString());

        runPendingScans();

        m_nodeDao.flush();

        //Verify distpoller count
        assertEquals(1, getDistPollerDao().countAll());

        //Verify node count
        assertEquals(1, getNodeDao().countAll());

        //Verify ipinterface count
        assertEquals("Unexpected number of interfaces found: "+getInterfaceDao().findAll(), 2, getInterfaceDao().countAll());

        //Verify ifservices count - discover snmp service on other if
        assertEquals("Unexpected number of services found: "+getMonitoredServiceDao().findAll(), 2, getMonitoredServiceDao().countAll());

        //Verify service count
        assertEquals("Unexpected number of service types found: " + getServiceTypeDao().findAll(), 1, getServiceTypeDao().countAll());

        //Verify snmpInterface count
        assertEquals(6, getSnmpInterfaceDao().countAll());

        // Node Delete
        importFromResource("classpath:/nonodes-snmp.xml", Boolean.TRUE.toString());

        //Verify node count
        assertEquals(0, getNodeDao().countAll());
    }

