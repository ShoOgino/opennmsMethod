    @Test
    @JUnitSnmpAgents(value={
        @JUnitSnmpAgent(host="10.7.15.240", port=161, resource="classpath:snmpwalk-NMS-5414.properties"),
        @JUnitSnmpAgent(host="10.7.15.241", port=161, resource="classpath:snmpwalk-NMS-5414.properties"),
        @JUnitSnmpAgent(host="10.102.251.200", port=161, resource="classpath:snmpwalk-NMS-5414.properties"),
        @JUnitSnmpAgent(host="10.211.140.149", port=161, resource="classpath:snmpwalk-NMS-5414.properties")
    })
    @Transactional
    public void testSnmpPollPolicy() throws Exception {
        final CountDownLatch eventRecieved = anticipateEvents(EventConstants.PROVISION_SCAN_COMPLETE_UEI, EventConstants.PROVISION_SCAN_ABORTED_UEI );

        m_provisioner.importModelFromResource(m_resourceLoader.getResource("classpath:/NMS-5414.xml"), true);
        final List<OnmsNode> nodes = getNodeDao().findAll();
        final OnmsNode node = nodes.get(0);
        
        eventRecieved.await();
        
        final NodeScan scan = m_provisioner.createNodeScan(node.getId(), node.getForeignSource(), node.getForeignId());
        runScan(scan);
      
        OnmsCriteria criteria = new OnmsCriteria(OnmsSnmpInterface.class);
        criteria.add(Restrictions.ilike("ifDescr", "Trunk 1", MatchMode.ANYWHERE));
        List<OnmsSnmpInterface> onmssnmpifaces = getSnmpInterfaceDao().findMatching(criteria);
        assertEquals(1, onmssnmpifaces.size());

        OnmsSnmpInterface onmsinterface = onmssnmpifaces.get(0);
        assertEquals("1", onmsinterface.getNode().getNodeId());
        assertEquals(8193, onmsinterface.getIfIndex().intValue());
        assertEquals(0, onmsinterface.getIpInterfaces().size());
        assertEquals("P", onmsinterface.getPoll());

        criteria = new OnmsCriteria(OnmsSnmpInterface.class);
        criteria.add(Restrictions.ilike("ifDescr", "VLAN 600 L3", MatchMode.ANYWHERE));
        onmssnmpifaces = getSnmpInterfaceDao().findMatching(criteria);
        assertEquals(1, onmssnmpifaces.size());
        
        onmsinterface = onmssnmpifaces.get(0);
        assertEquals("1", onmsinterface.getNode().getNodeId());
        assertEquals(10600, onmsinterface.getIfIndex().intValue());
        assertEquals(1, onmsinterface.getIpInterfaces().size());
        assertEquals("P", onmsinterface.getPoll());
        
        criteria = new OnmsCriteria(OnmsSnmpInterface.class);
        criteria.add(Restrictions.eq("poll", "P"));
        assertEquals(2, getSnmpInterfaceDao().countMatching(criteria));
        
        
    }

