    @Test(timeout=300000)
    public void testProvisionerRemoveNodeInSchedule() throws Exception{
        importFromResource("classpath:/tec_dump.xml.smalltest", Boolean.TRUE.toString());
        getScanExecutor().pause();

        m_provisioner.scheduleRescanForExistingNodes();
        assertEquals(10, m_provisioner.getScheduleLength());

        final List<OnmsNode> nodes = m_nodeDao.findAll();
        EventBuilder bldr = new EventBuilder(EventConstants.NODE_DELETED_EVENT_UEI, "Tests");
        bldr.setNodeid(nodes.get(nodes.size() - 1).getId());

        m_mockEventIpcManager.broadcastNow(bldr.getEvent());

        assertEquals(9, m_provisioner.getScheduleLength());
    }

