    protected ResponseHandler dnsResponseMatches(final DNSAddressRequest request) {
        return new ResponseHandler() {

            public boolean matches(Object... args) {
                
                try {
                    DatagramSocket socket = (DatagramSocket) args[0];
                    InetAddress address = (InetAddress) args[1];
                    
                    byte[] data = new byte[512];
                    DatagramPacket inPacket = new DatagramPacket(data, data.length);
                    socket.receive(inPacket);
                    
                    if (inPacket.getAddress().equals(address)) {
                        System.out.println("Packet address matches:");
                        request.verifyResponse(inPacket.getData(), inPacket.getLength());
                        System.out.println("Success it worked");
                        return true;
                    }
                    
                    return false;
                    
                }catch(IOException e) {
                    return false;
                }catch(Exception e) {
                    return false;
                }

            }
            
        };
    }

