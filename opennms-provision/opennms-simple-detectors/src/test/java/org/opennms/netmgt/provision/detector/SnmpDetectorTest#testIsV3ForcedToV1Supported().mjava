    public final void testIsV3ForcedToV1Supported() throws ValidationException, IOException, IOException, MarshalException {
        setVersion(SnmpAgentConfig.VERSION3);
        Reader rdr = new StringReader(getSnmpConfig());
        SnmpPeerFactory.setInstance(new SnmpPeerFactory(rdr));
        
        m_detector.setAgentConfig(SnmpPeerFactory.getInstance().getAgentConfig(InetAddress.getByName(myLocalHost())));
        
        Map<String, Object> qualifiers = new HashMap<String, Object>();
        qualifiers.put("force version", "snmpv1");
        
        m_detector.setForceVersion("snmpv1");

        if (m_runAssertions) {
            assertTrue("protocol is not supported", m_detector.isServiceDetected(InetAddress.getByName(myLocalHost()), new NullDetectorMonitor()));
        }
    }

