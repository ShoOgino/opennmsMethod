    /**
     * <p>getRunnable</p>
     *
     * @return a {@link java.lang.Runnable} object.
     * @throws java.lang.Exception if any.
     */
    protected Runnable getRunnable() throws Exception {
        return new Runnable(){
            
            public void run(){
                try{
                    getServerSocket().setSoTimeout(getTimeout());
                    setSocket(getServerSocket().accept());
                    
                    if(getThreadSleepLength() > 0) { Thread.sleep(getThreadSleepLength()); }
                    getSocket().setSoTimeout(getTimeout());
                    
                    OutputStream out = getSocket().getOutputStream();
                    if(getBanner() != null){sendBanner(out);};
                    
                    
                    BufferedReader in = new BufferedReader(new InputStreamReader(getSocket().getInputStream()));
                    attemptConversation(in, out);

                }catch(Exception e){
                    throw new UndeclaredThrowableException(e);
                } finally {
                    try {
                        stopServer();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            }
            
        };
    }

