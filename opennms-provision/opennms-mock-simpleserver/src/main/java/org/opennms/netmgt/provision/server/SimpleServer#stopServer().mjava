    /**
     * <p>stopServer</p>
     *
     * @throws java.io.IOException if any.
     */
    public void stopServer() throws IOException {
        if (!m_stopped) {
            m_stopped = true;
            final Thread t = getServerThread();
            setServerThread(null);
            IOUtils.closeQuietly(getSocket());
            IOUtils.closeQuietly(getServerSocket());
            try {
                Thread.sleep(200);
            } catch (final InterruptedException e) {
            }

            if(t != null && t.isAlive()) { 
                t.interrupt();
            }
            try {
                if (m_runnable != null) m_runnable.awaitShutdown();
            } catch (final InterruptedException e) {
                LOG.debug("Interrupted while shutting down.", e);
            }
        }
    }

