    private static ClassLoader createIsolatingClassloader(
            final ClassLoader originalLoader, final File clientJar) {
        ClassLoader icl;

        final PrivilegedAction<ClassLoader> p = new PrivilegedAction<ClassLoader>() {
            public ClassLoader run() {
                try {
                    return new IsolatingClassLoader("jboss", new URL[] { clientJar.toURL() }, originalLoader, packages, true);
                } catch (MalformedURLException e) {
                } catch (InvalidContextClassLoaderException e) {
                }
                return null;
            }

        };
        icl = AccessController.doPrivileged(p);
        return icl;
    }

