	public List<Event> doPersist() {
        OnmsDistPoller distPoller = getDistPollerDao().get("localhost");
        getNode().setDistPoller(distPoller);
        getNodeDao().save(getNode());
        
    	final List<Event> events = new LinkedList<Event>();

    	EntityVisitor eventAccumlator = new AddEventVisitor(events);

    	getNode().visit(eventAccumlator);
        
    	return events;
    }

