    @Test(timeout=20000)
    public void testFailureClosedPort() throws Exception {
        initializeDefaultDetector();

        m_server = new SimpleServer() {

            @Override
            public void onInit() {
                setBanner("BLIP");
            }

        };
        m_server.init();
        //m_server.startServer();
        m_detector.setPort(m_server.getLocalPort());

        //assertFalse("Test should fail because the server closes before detection takes place", m_detector.isServiceDetected(m_server.getInetAddress()));

        DetectFuture future = m_detector.isServiceDetected(m_server.getInetAddress());
        assertNotNull(future);
        future.awaitForUninterruptibly();
        assertFalse(future.isServiceDetected());

    }

