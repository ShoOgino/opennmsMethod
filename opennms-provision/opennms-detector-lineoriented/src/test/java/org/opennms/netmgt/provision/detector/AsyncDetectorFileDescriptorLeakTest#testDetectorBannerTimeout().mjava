    /**
     * TODO: This test will fail if there are more than a few milliseconds of delay 
     * between the characters of the banner. We need to fix this behavior.
     */
    @Test
    public void testDetectorBannerTimeout() throws Throwable {
        // Add 50 milliseconds of delay in between sending bytes of the banner
        setUpServer("Banner", 50);
        final int port = m_server.getLocalPort();
        final InetAddress address = m_server.getInetAddress();

        AsyncAbstractDetector detector = getNewDetector(port, "Banner");

        assertNotNull(detector);

        final DetectFuture future = (DetectFuture)detector.isServiceDetected(address);

        assertNotNull(future);
        future.awaitFor();
        if (future.getException() != null) {
            LOG.debug("got future exception", future.getException());
            throw future.getException();
        }
        assertTrue("False negative during detection!!", future.isServiceDetected());
        assertNull(future.getException());
    }

