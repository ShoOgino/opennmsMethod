    @Test(timeout=20000)
    public void testDetectorFailUnexpectedLogoutResponse() throws Exception{
        m_server  = new SimpleServer() {

            @Override
            public void onInit() {
                setBanner("* NOT OK THIS IS A BANNER FOR IMAP");
                addResponseHandler(contains("LOGOUT"), singleLineRequest("* NOT OK"));
            }
        };

        m_server.init();
        m_server.startServer();

        try {
            m_detector.setPort(m_server.getLocalPort());

            //assertFalse(m_detector.isServiceDetected(m_server.getInetAddress()));

            DetectFuture future = m_detector.isServiceDetected(m_server.getInetAddress());
            assertNotNull(future);

            future.awaitForUninterruptibly();

            assertFalse(future.isServiceDetected());
        } finally {
            m_server.stopServer();
        }
    }

