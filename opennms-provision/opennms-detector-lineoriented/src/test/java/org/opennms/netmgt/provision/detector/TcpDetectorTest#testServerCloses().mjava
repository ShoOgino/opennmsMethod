    /**
     * I think that this test is redundant with {@link #testFailureClosedPort()} since neither
     * server is actually started. The detector just times out on both connections.
     */
    @Test(timeout=90000)
    public void testServerCloses() throws Exception{
        initializeDefaultDetector();
        
        m_server = new SimpleServer() {
            
            public void onInit() {
               shutdownServer("Closing");
            }
            
        };
        m_server.init();
        //m_server.startServer();
        m_detector.setPort(m_server.getLocalPort());
        
        //assertFalse("Test should fail because the server closes before detection takes place", m_detector.isServiceDetected(m_server.getInetAddress()));
        
        DetectFuture future = m_detector.isServiceDetected(m_server.getInetAddress());
        assertNotNull(future);
        future.awaitForUninterruptibly();
        assertFalse(future.isServiceDetected());
    }

