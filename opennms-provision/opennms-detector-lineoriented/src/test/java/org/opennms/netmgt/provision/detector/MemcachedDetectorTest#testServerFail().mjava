    @Test(timeout=90000)
    public void testServerFail() throws Exception{
        m_server  = new SimpleServer() {
            public void onInit() {
                addResponseHandler(contains("version"), new RequestHandler() {
                    @Override
                    public void doRequest(OutputStream out) throws IOException {
                        out.write(String.format("%s\r\n", "I don't know what version means...").getBytes());
                    }
                });
            }
        };
        m_server.init();
        m_server.startServer();
        Thread.sleep(100); // make sure the server is really started
        try {
            m_detector.setPort(m_server.getLocalPort());
            m_detector.setIdleTime(1000);
            DetectFuture future = m_detector.isServiceDetected(m_server.getInetAddress());
            assertNotNull(future);
            future.awaitForUninterruptibly();
            assertFalse(future.isServiceDetected());
        } finally {
            m_server.stopServer();
        }
    }

