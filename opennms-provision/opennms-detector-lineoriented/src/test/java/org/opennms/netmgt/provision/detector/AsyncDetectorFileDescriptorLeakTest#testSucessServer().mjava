    @Test
    public void testSucessServer() throws Exception {
        for (int i = 0; i < 10000; i++) {
            setUp();
            System.err.println("current loop: " + i);
            m_server = new SimpleServer() {
                
                public void onInit() {
                   setBanner("Winner");
                }
                
            };
            
            m_server.init();
            m_server.startServer();
    
            assertNotNull(m_detector);
            assertNotNull(m_server.getLocalPort());
            m_detector.setPort(m_server.getLocalPort());
            
            DetectFuture future = m_detector.isServiceDetected(m_server.getInetAddress(), new NullDetectorMonitor());
            future.addListener(new IoFutureListener<DetectFuture>() {
    
                public void operationComplete(DetectFuture future) {
                    TcpDetector detector = m_detector;
                    m_detector = null;
                    detector.dispose();
                }
                
            });
            
            future.awaitUninterruptibly();
            assertNotNull(future);
            assertTrue(future.isServiceDetected());
            
            m_server.stopServer();
            m_server = null;
        }
    }

