    public void testGetLowestInetAddress() throws UnknownHostException {
        assertNull(InetAddressUtils.getLowestInetAddress(Collections.<InetAddress>emptyList()));

        List<InetAddress> ips;
        ips = Arrays.asList(
                            InetAddress.getByName("0.0.0.0")
        );
        assertEquals("0.0.0.0", InetAddressUtils.getLowestInetAddress(ips).getHostAddress());

        ips = Arrays.asList(
                            InetAddress.getByName("0.0.0.0"),
                            InetAddress.getByName("abcd:ef00:0000:0000:0000:0000:0000:0001"),
                            InetAddress.getByName("127.0.0.1")
        );
        assertEquals("0.0.0.0", InetAddressUtils.getLowestInetAddress(ips).getHostAddress());

        ips = Arrays.asList(
                            InetAddress.getByName("255.255.255.255"),
                            InetAddress.getByName("abcd:ef00:0000:0000:0000:0000:0000:0001"),
                            InetAddress.getByName("127.0.0.1")
        );
        assertEquals("127.0.0.1", InetAddressUtils.getLowestInetAddress(ips).getHostAddress());

        ips = Arrays.asList(
                            InetAddress.getByName("8000:0000:0000:0000:0000:0000:0000:0001"),
                            InetAddress.getByName("ff00:0000:0000:0000:0000:0000:0000:0001"),
                            InetAddress.getByName("8000:0000:0000:0000:0000:0000:0000:0001"),
                            InetAddress.getByName("ff00:0000:0000:0000:0000:0000:0000:0001")
        );
        assertEquals("8000:0000:0000:0000:0000:0000:0000:0001", InetAddressUtils.toIpAddrString(InetAddressUtils.getLowestInetAddress(ips)));

        ips = Arrays.asList(
                            InetAddress.getByName("ff00:0000:0000:0000:0000:0000:0000:0001"),
                            InetAddress.getByName("8000:0000:0000:0000:0000:0000:0000:0001"),
                            InetAddress.getByName("ff00:0000:0000:0000:0000:0000:0000:0001"),
                            InetAddress.getByName("8000:0000:0000:0000:0000:0000:0000:0001")
        );
        assertEquals("8000:0000:0000:0000:0000:0000:0000:0001", InetAddressUtils.toIpAddrString(InetAddressUtils.getLowestInetAddress(ips)));

        // TODO: These tests produce strange results because it is unclear how this function should 
        // compare IPv6 addresses that include scope IDs

        ips = Arrays.asList(
                            InetAddress.getByName("ff00:0000:0000:0000:0000:0000:0000:0001%5"),
                            InetAddress.getByName("ff00:0000:0000:0000:0000:0000:0000:0001")
        );
        assertEquals("ff00:0000:0000:0000:0000:0000:0000:0001%5", InetAddressUtils.toIpAddrString(InetAddressUtils.getLowestInetAddress(ips)));

        ips = Arrays.asList(
                            InetAddress.getByName("ff00:0000:0000:0000:0000:0000:0000:0001"),
                            InetAddress.getByName("ff00:0000:0000:0000:0000:0000:0000:0001%5")
        );
        assertEquals("ff00:0000:0000:0000:0000:0000:0000:0001", InetAddressUtils.toIpAddrString(InetAddressUtils.getLowestInetAddress(ips)));

        ips = Arrays.asList(
                            InetAddress.getByName("ff00:0000:0000:0000:0000:0000:0000:0001%6"),
                            InetAddress.getByName("ff00:0000:0000:0000:0000:0000:0000:0001%5")
        );
        assertEquals("ff00:0000:0000:0000:0000:0000:0000:0001%6", InetAddressUtils.toIpAddrString(InetAddressUtils.getLowestInetAddress(ips)));
    }

