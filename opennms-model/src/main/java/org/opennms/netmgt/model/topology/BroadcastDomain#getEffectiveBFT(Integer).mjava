    private List<BridgeMacLink> getEffectiveBFT(Integer bridgeId) {
        List<BridgeMacLink> links = new ArrayList<BridgeMacLink>();
        OnmsNode node=new OnmsNode();
        for (SharedSegment segment: getSharedSegmentOnBridge(bridgeId)) {
            Integer bridgePort = null;
            if (segment.noMacsOnSegment()) {
                for (BridgeBridgeLink link: segment.getBridgeBridgeLinks()) {
                    if (link.getNode().getId() == bridgeId) {
                        bridgePort = link.getBridgePort();
                        break;
                    }
                    if (link.getDesignatedNode().getId() == bridgeId) {
                        bridgePort = link.getDesignatedPort();
                        break;
                    }
                }
            } else {
                for (BridgeMacLink link: segment.getBridgeMacLinks()) {
                    if (link.getNode().getId() == bridgeId) {
                        bridgePort = link.getBridgePort();
                        links.add(link);
                    }
                }
            }
            
            for (String mac: getForwardingSet(segment, bridgeId)) {
                BridgeMacLink link = new BridgeMacLink();
                link.setNode(node);
                link.setBridgePort(bridgePort);
                link.setMacAddress(mac);
                links.add(link);
            }
        }
        return links;
    }

