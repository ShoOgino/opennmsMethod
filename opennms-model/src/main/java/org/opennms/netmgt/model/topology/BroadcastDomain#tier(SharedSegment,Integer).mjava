    private void tier(SharedSegment segment, Integer rootid) {
        for (Bridge bridge: getBridgeOnSharedSegment(segment)) {
            if (bridge.getId() == rootid)
                continue;
            for (SharedSegment s2: getSharedSegmentOnBridge(bridge.getId())) {
                s2.setDesignatedBridge(bridge.getId());
                s2.setDesignatedPort(s2.getPortForBridge(bridge.getId()));
                tier(s2,bridge.getId());
            }
        }
    }

