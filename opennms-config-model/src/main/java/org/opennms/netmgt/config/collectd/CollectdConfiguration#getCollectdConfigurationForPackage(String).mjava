    public CollectdConfiguration getCollectdConfigurationForPackage(String collectionPackageName) {
        if (collectionPackageName == null) return null;
        final Package pkg = getPackage(collectionPackageName);
        if (pkg == null) return null;

        final Set<String> seenCollectors = new HashSet<String>();
        final CollectdConfiguration newConfig = new CollectdConfiguration();
        newConfig.setThreads(getThreads());
        newConfig.addPackage(pkg);

        for (final Service service : pkg.getServices()) {
            seenCollectors.add(service.getName());
        }

        for (final Collector collector : getCollectors()) {
            if (seenCollectors.contains(collector.getService())) {
                newConfig.addCollector(collector);
            }
        }

        return newConfig;
    }

