    public void addPluginExecution(Plugin plugin, Platform platform) {
        PluginExecution exec = new PluginExecution();
        
        String javahImplementation = platform.getPlatformString("javahImplementation");

        if (javahImplementation != null) {
            Xpp3Dom impl = new Xpp3Dom("implementation");
            impl.setValue(javahImplementation);
            
            Xpp3Dom pluginConfig = new Xpp3Dom("configuration");
            pluginConfig.addChild(impl);
            
            exec.setConfiguration(pluginConfig);
        }
        
        exec.setPhase("generate-sources");
        exec.setGoals(Collections.singletonList("javah"));
        plugin.addExecution(exec);
        
    }

