    NativePluginConfig createNativeConfiguration(Platform platform, File baseDir) {
        NativePluginConfig conf = new NativePluginConfig();
        conf.setCompilerProvider(platform.getPlatformString("compilerProvider"));
        conf.setCompilerOptions(platform.getPlatformString("compilerOptions"));
        conf.setLinkerOptions(platform.getPlatformString("linkerOptions"));
        
        List includeDirs = platform.getPlatformList("extraIncludes");
        for (Iterator it = includeDirs.iterator(); it.hasNext();) {
			String dir = (String) it.next();
			conf.addSourceDirectory(dir);
		}
        
        
        File nativeDir = new File(baseDir, "src/main/native");
        conf.addFileNames("../src/main/native", nativeDir.list(new CFileFilter()));
        
    
        return conf;
    }

